"use strict";(self.webpackChunkangular_firebase_crud=self.webpackChunkangular_firebase_crud||[]).push([[179],{2011:(pt,Te,k)=>{k.d(Te,{Dh:()=>ae,GT:()=>de,cc:()=>xe,hO:()=>$e,on:()=>G,pX:()=>re,xv:()=>fe});var h=k(4650),B=k(9260),O=k(2122);pt=k.hmd(pt);const ee=["ngOnDestroy"],re=(ce,Ye,Xe,Ae={})=>new Proxy(ce,{get:(Se,we)=>Xe.runOutsideAngular(()=>{var je;if(ce[we])return!(null===(je=Ae?.spy)||void 0===je)&&je.get&&Ae.spy.get(we,ce[we]),ce[we];if(ee.indexOf(we)>-1)return()=>{};const X=Ye.toPromise().then(se=>{const pe=se&&se[we];return"function"==typeof pe?pe.bind(se):pe&&pe.then?pe.then(Ge=>Xe.run(()=>Ge)):Xe.run(()=>pe)});return new Proxy(()=>{},{get:(se,pe)=>X[pe],apply:(se,pe,Ge)=>X.then(We=>{var St;const Qe=We&&We(...Ge);return!(null===(St=Ae?.spy)||void 0===St)&&St.apply&&Ae.spy.apply(we,Ge,Qe),Qe})})})}),de=(ce,Ye)=>{Ye.forEach(Xe=>{Object.getOwnPropertyNames(Xe.prototype||Xe).forEach(Ae=>{Object.defineProperty(ce.prototype,Ae,Object.getOwnPropertyDescriptor(Xe.prototype||Xe,Ae))})})};class le{constructor(Ye){return Ye}}const ae=new h.OlP("angularfire2.app.options"),fe=new h.OlP("angularfire2.app.name");function G(ce,Ye,Xe){const Se="object"==typeof Xe&&Xe||{};Se.name=Se.name||"string"==typeof Xe&&Xe||"[DEFAULT]";const je=B.Z.apps.filter(X=>X&&X.name===Se.name)[0]||Ye.runOutsideAngular(()=>B.Z.initializeApp(ce,Se));try{JSON.stringify(ce)!==JSON.stringify(je.options)&&H("error",`${je.name} Firebase App already initialized with different options${pt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new le(je)}const H=(ce,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ce](...Ye)},K={provide:le,useFactory:G,deps:[ae,h.R0b,[new h.FiY,fe]]};let $e=(()=>{class ce{constructor(Xe){B.Z.registerVersion("angularfire",O.q4.full,"core"),B.Z.registerVersion("angularfire",O.q4.full,"app-compat"),B.Z.registerVersion("angular",h.q4F.full,Xe.toString())}static initializeApp(Xe,Ae){return{ngModule:ce,providers:[{provide:ae,useValue:Xe},{provide:fe,useValue:Ae}]}}}return ce.\u0275fac=function(Xe){return new(Xe||ce)(h.LFG(h.Lbi))},ce.\u0275mod=h.oAB({type:ce}),ce.\u0275inj=h.cJS({providers:[K]}),ce})();function xe(ce,Ye,Xe,Ae,Se){const[,we,je]=globalThis.\u0275AngularfireInstanceCache.find(X=>X[0]===ce)||[];if(we)return function De(ce,Ye){try{return ce.toString()===Ye.toString()}catch{return ce===Ye}}(Se,je)||(ye("error",`${Ye} was already initialized on the ${Xe} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),ye("warn",{is:Se,was:je})),we;{const X=Ae();return globalThis.\u0275AngularfireInstanceCache.push([ce,X,Se]),X}}const et=!!pt.hot,ye=(ce,...Ye)=>{(0,h.X6Q)()&&typeof console<"u"&&console[ce](...Ye)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2122:(pt,Te,k)=>{k.d(Te,{q4:()=>cl,iC:()=>nr,HU:()=>Vs,vb:()=>Ls,JM:()=>So,u3:()=>di});var h=k(4650),B=k(259),O=k(5861),ee=k(9681),re=k(2090),de=k(4859),le=k(1877),ae=k(8766);const fe="@firebase/installations",G="0.6.3",K=`w:${G}`,$e="FIS_v2",Ye=new re.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Xe(D){return D instanceof re.ZR&&D.code.includes("request-failed")}function Ae({projectId:D}){return`https://firebaseinstallations.googleapis.com/v1/projects/${D}/installations`}function Se(D){return{token:D.token,requestStatus:2,expiresIn:We(D.expiresIn),creationTime:Date.now()}}function we(D,b){return je.apply(this,arguments)}function je(){return(je=(0,O.Z)(function*(D,b){const U=(yield b.json()).error;return Ye.create("request-failed",{requestName:D,serverCode:U.code,serverMessage:U.message,serverStatus:U.status})})).apply(this,arguments)}function X({apiKey:D}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D})}function se(D,{refreshToken:b}){const M=X(D);return M.append("Authorization",function St(D){return`${$e} ${D}`}(b)),M}function pe(D){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,O.Z)(function*(D){const b=yield D();return b.status>=500&&b.status<600?D():b})).apply(this,arguments)}function We(D){return Number(D.replace("s","000"))}function Qe(D,b){return ie.apply(this,arguments)}function ie(){return(ie=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},{fid:M}){const U=Ae(D),Z=X(D),te=b.getImmediate({optional:!0});if(te){const _t=yield te.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Ze={method:"POST",headers:Z,body:JSON.stringify({fid:M,authVersion:$e,appId:D.appId,sdkVersion:K})},at=yield pe(()=>fetch(U,Ze));if(at.ok){const _t=yield at.json();return{fid:_t.fid||M,registrationStatus:2,refreshToken:_t.refreshToken,authToken:Se(_t.authToken)}}throw yield we("Create Installation",at)})).apply(this,arguments)}function he(D){return new Promise(b=>{setTimeout(b,D)})}const Ne=/^[cdef][\w-]{21}$/;function Ee(){try{const D=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(D),D[0]=112+D[0]%16;const M=function ht(D){return function ve(D){return btoa(String.fromCharCode(...D)).replace(/\+/g,"-").replace(/\//g,"_")}(D).substr(0,22)}(D);return Ne.test(M)?M:""}catch{return""}}function Rt(D){return`${D.appName}!${D.appId}`}const cn=new Map;function rt(D,b){const M=Rt(D);Jt(M,b),function Ln(D,b){const M=function sn(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=D=>{Jt(D.data.key,D.data.fid)}),Mn}();M&&M.postMessage({key:D,fid:b}),function yr(){0===cn.size&&Mn&&(Mn.close(),Mn=null)}()}(M,b)}function Jt(D,b){const M=cn.get(D);if(M)for(const U of M)U(b)}let Mn=null;const Wn="firebase-installations-store";let vi=null;function Bi(){return vi||(vi=(0,ae.X3)("firebase-installations-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Wn)}})),vi}function Je(D,b){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,O.Z)(function*(D,b){const M=Rt(D),Z=(yield Bi()).transaction(Wn,"readwrite"),te=Z.objectStore(Wn),_e=yield te.get(M);return yield te.put(b,M),yield Z.done,(!_e||_e.fid!==b.fid)&&rt(D,b.fid),b})).apply(this,arguments)}function zn(D){return _n.apply(this,arguments)}function _n(){return(_n=(0,O.Z)(function*(D){const b=Rt(D),U=(yield Bi()).transaction(Wn,"readwrite");yield U.objectStore(Wn).delete(b),yield U.done})).apply(this,arguments)}function _r(D,b){return Es.apply(this,arguments)}function Es(){return(Es=(0,O.Z)(function*(D,b){const M=Rt(D),Z=(yield Bi()).transaction(Wn,"readwrite"),te=Z.objectStore(Wn),_e=yield te.get(M),Ze=b(_e);return void 0===Ze?yield te.delete(M):yield te.put(Ze,M),yield Z.done,Ze&&(!_e||_e.fid!==Ze.fid)&&rt(D,Ze.fid),Ze})).apply(this,arguments)}function wn(D){return En.apply(this,arguments)}function En(){return(En=(0,O.Z)(function*(D){let b;const M=yield _r(D.appConfig,U=>{const Z=gn(U),te=mt(D,Z);return b=te.registrationPromise,te.installationEntry});return""===M.fid?{installationEntry:yield b}:{installationEntry:M,registrationPromise:b}})).apply(this,arguments)}function gn(D){return Mt(D||{fid:Ee(),registrationStatus:0})}function mt(D,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(Ye.create("app-offline"))};const M={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},U=function yt(D,b){return Nt.apply(this,arguments)}(D,M);return{installationEntry:M,registrationPromise:U}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Wr(D)}:{installationEntry:b}}function Nt(){return(Nt=(0,O.Z)(function*(D,b){try{const M=yield Qe(D,b);return Je(D.appConfig,M)}catch(M){throw Xe(M)&&409===M.customData.serverCode?yield zn(D.appConfig):yield Je(D.appConfig,{fid:b.fid,registrationStatus:0}),M}})).apply(this,arguments)}function Wr(D){return Qn.apply(this,arguments)}function Qn(){return(Qn=(0,O.Z)(function*(D){let b=yield Nr(D.appConfig);for(;1===b.registrationStatus;)yield he(100),b=yield Nr(D.appConfig);if(0===b.registrationStatus){const{installationEntry:M,registrationPromise:U}=yield wn(D);return U||M}return b})).apply(this,arguments)}function Nr(D){return _r(D,b=>{if(!b)throw Ye.create("installation-not-found");return Mt(b)})}function Mt(D){return function $r(D){return 1===D.registrationStatus&&D.registrationTime+1e4<Date.now()}(D)?{fid:D.fid,registrationStatus:0}:D}function Lt(D,b){return ii.apply(this,arguments)}function ii(){return(ii=(0,O.Z)(function*({appConfig:D,heartbeatServiceProvider:b},M){const U=Qt(D,M),Z=se(D,M),te=b.getImmediate({optional:!0});if(te){const _t=yield te.getHeartbeatsHeader();_t&&Z.append("x-firebase-client",_t)}const Ze={method:"POST",headers:Z,body:JSON.stringify({installation:{sdkVersion:K,appId:D.appId}})},at=yield pe(()=>fetch(U,Ze));if(at.ok)return Se(yield at.json());throw yield we("Generate Auth Token",at)})).apply(this,arguments)}function Qt(D,{fid:b}){return`${Ae(D)}/${b}/authTokens:generate`}function hr(D){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,O.Z)(function*(D,b=!1){let M;const U=yield _r(D.appConfig,te=>{if(!en(te))throw Ye.create("not-registered");const _e=te.authToken;if(!b&&j(_e))return te;if(1===_e.requestStatus)return M=tt(D,b),te;{if(!navigator.onLine)throw Ye.create("app-offline");const Ze=q(te);return M=Ct(D,Ze),Ze}});return M?yield M:U.authToken})).apply(this,arguments)}function tt(D,b){return Ce.apply(this,arguments)}function Ce(){return(Ce=(0,O.Z)(function*(D,b){let M=yield nt(D.appConfig);for(;1===M.authToken.requestStatus;)yield he(100),M=yield nt(D.appConfig);const U=M.authToken;return 0===U.requestStatus?hr(D,b):U})).apply(this,arguments)}function nt(D){return _r(D,b=>{if(!en(b))throw Ye.create("not-registered");return function V(D){return 1===D.requestStatus&&D.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Ct(D,b){return xt.apply(this,arguments)}function xt(){return(xt=(0,O.Z)(function*(D,b){try{const M=yield Lt(D,b),U=Object.assign(Object.assign({},b),{authToken:M});return yield Je(D.appConfig,U),M}catch(M){if(!Xe(M)||401!==M.customData.serverCode&&404!==M.customData.serverCode){const U=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Je(D.appConfig,U)}else yield zn(D.appConfig);throw M}})).apply(this,arguments)}function en(D){return void 0!==D&&2===D.registrationStatus}function j(D){return 2===D.requestStatus&&!function $(D){const b=Date.now();return b<D.creationTime||D.creationTime+D.expiresIn<b+36e5}(D)}function q(D){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},D),{authToken:b})}function L(){return(L=(0,O.Z)(function*(D){const b=D,{installationEntry:M,registrationPromise:U}=yield wn(b);return U?U.catch(console.error):hr(b).catch(console.error),M.fid})).apply(this,arguments)}function ke(){return(ke=(0,O.Z)(function*(D,b=!1){const M=D;return yield it(M),(yield hr(M,b)).token})).apply(this,arguments)}function it(D){return ut.apply(this,arguments)}function ut(){return(ut=(0,O.Z)(function*(D){const{registrationPromise:b}=yield wn(D);b&&(yield b)})).apply(this,arguments)}function Is(D){return Ye.create("missing-app-config-values",{valueName:D})}const Qs="installations",Ds=D=>{const b=D.getProvider("app").getImmediate(),M=function In(D){if(!D||!D.options)throw Is("App Configuration");if(!D.name)throw Is("App Name");const b=["projectId","apiKey","appId"];for(const M of b)if(!D.options[M])throw Is(M);return{appName:D.name,projectId:D.options.projectId,apiKey:D.options.apiKey,appId:D.options.appId}}(b);return{app:b,appConfig:M,heartbeatServiceProvider:(0,ee._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Cs=D=>{const b=D.getProvider("app").getImmediate(),M=(0,ee._getProvider)(b,Qs).getImmediate();return{getId:()=>function x(D){return L.apply(this,arguments)}(M),getToken:Z=>function Y(D){return ke.apply(this,arguments)}(M,Z)}};(function $a(){(0,ee._registerComponent)(new de.wA(Qs,Ds,"PUBLIC")),(0,ee._registerComponent)(new de.wA("installations-internal",Cs,"PRIVATE"))})(),(0,ee.registerVersion)(fe,G),(0,ee.registerVersion)(fe,G,"esm2017");const ji="@firebase/remote-config",Zn=new re.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class zu{constructor(b,M,U,Z){this.client=b,this.storage=M,this.storageCache=U,this.logger=Z}isCachedDataFresh(b,M){if(!M)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const U=Date.now()-M,Z=U<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${U}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${Z}.`),Z}fetch(b){var M=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([M.storage.getLastSuccessfulFetchTimestampMillis(),M.storage.getLastSuccessfulFetchResponse()]);if(Z&&M.isCachedDataFresh(b.cacheMaxAgeMillis,U))return Z;b.eTag=Z&&Z.eTag;const te=yield M.client.fetch(b),_e=[M.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===te.status&&_e.push(M.storage.setLastSuccessfulFetchResponse(te)),yield Promise.all(_e),te})()}}function Yo(D=navigator){return D.languages&&D.languages[0]||D.language}class Ss{constructor(b,M,U,Z,te,_e){this.firebaseInstallations=b,this.sdkVersion=M,this.namespace=U,this.projectId=Z,this.apiKey=te,this.appId=_e}fetch(b){var M=this;return(0,O.Z)(function*(){const[U,Z]=yield Promise.all([M.firebaseInstallations.getId(),M.firebaseInstallations.getToken()]),_e=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${M.projectId}/namespaces/${M.namespace}:fetch?key=${M.apiKey}`,Ze={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},at={sdk_version:M.sdkVersion,app_instance_id:U,app_instance_id_token:Z,app_id:M.appId,language_code:Yo()},_t={method:"POST",headers:Ze,body:JSON.stringify(at)},Ut=fetch(_e,_t),bt=new Promise((Er,Yr)=>{b.signal.addEventListener(()=>{const oh=new Error("The operation was aborted.");oh.name="AbortError",Yr(oh)})});let Tr;try{yield Promise.race([Ut,bt]),Tr=yield Ut}catch(Er){let Yr="fetch-client-network";throw"AbortError"===Er?.name&&(Yr="fetch-timeout"),Zn.create(Yr,{originalErrorMessage:Er?.message})}let rr=Tr.status;const js=Tr.headers.get("ETag")||void 0;let Bt,Fr;if(200===Tr.status){let Er;try{Er=yield Tr.json()}catch(Yr){throw Zn.create("fetch-client-parse",{originalErrorMessage:Yr?.message})}Bt=Er.entries,Fr=Er.state}if("INSTANCE_STATE_UNSPECIFIED"===Fr?rr=500:"NO_CHANGE"===Fr?rr=304:("NO_TEMPLATE"===Fr||"EMPTY_CONFIG"===Fr)&&(Bt={}),304!==rr&&200!==rr)throw Zn.create("fetch-status",{httpStatus:rr});return{status:rr,eTag:js,config:Bt}})()}}class Gi{constructor(b,M){this.client=b,this.storage=M}fetch(b){var M=this;return(0,O.Z)(function*(){const U=(yield M.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return M.attemptFetch(b,U)})()}attemptFetch(b,{throttleEndTimeMillis:M,backoffCount:U}){var Z=this;return(0,O.Z)(function*(){yield function ai(D,b){return new Promise((M,U)=>{const Z=Math.max(b-Date.now(),0),te=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(te),U(Zn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,M);try{const te=yield Z.client.fetch(b);return yield Z.storage.deleteThrottleMetadata(),te}catch(te){if(!function Jf(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}(te))throw te;const _e={throttleEndTimeMillis:Date.now()+(0,re.$s)(U),backoffCount:U+1};return yield Z.storage.setThrottleMetadata(_e),Z.attemptFetch(b,_e)}})()}}class ep{constructor(b,M,U,Z,te){this.app=b,this._client=M,this._storageCache=U,this._storage=Z,this._logger=te,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Qo(D,b){const M=D.target.error||void 0;return Zn.create(b,{originalErrorMessage:M&&M?.message})}const Xs="app_namespace_store";class ec{constructor(b,M,U,Z=function np(){return new Promise((D,b)=>{try{const M=indexedDB.open("firebase_remote_config",1);M.onerror=U=>{b(Qo(U,"storage-open"))},M.onsuccess=U=>{D(U.target.result)},M.onupgradeneeded=U=>{0===U.oldVersion&&U.target.result.createObjectStore(Xs,{keyPath:"compositeKey"})}}catch(M){b(Zn.create("storage-open",{originalErrorMessage:M?.message}))}})}()){this.appId=b,this.appName=M,this.namespace=U,this.openDbPromise=Z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,te)=>{const Ze=U.transaction([Xs],"readonly").objectStore(Xs),at=M.createCompositeKey(b);try{const _t=Ze.get(at);_t.onerror=Ut=>{te(Qo(Ut,"storage-get"))},_t.onsuccess=Ut=>{const bt=Ut.target.result;Z(bt?bt.value:void 0)}}catch(_t){te(Zn.create("storage-get",{originalErrorMessage:_t?.message}))}})})()}set(b,M){var U=this;return(0,O.Z)(function*(){const Z=yield U.openDbPromise;return new Promise((te,_e)=>{const at=Z.transaction([Xs],"readwrite").objectStore(Xs),_t=U.createCompositeKey(b);try{const Ut=at.put({compositeKey:_t,value:M});Ut.onerror=bt=>{_e(Qo(bt,"storage-set"))},Ut.onsuccess=()=>{te()}}catch(Ut){_e(Zn.create("storage-set",{originalErrorMessage:Ut?.message}))}})})()}delete(b){var M=this;return(0,O.Z)(function*(){const U=yield M.openDbPromise;return new Promise((Z,te)=>{const Ze=U.transaction([Xs],"readwrite").objectStore(Xs),at=M.createCompositeKey(b);try{const _t=Ze.delete(at);_t.onerror=Ut=>{te(Qo(Ut,"storage-delete"))},_t.onsuccess=()=>{Z()}}catch(_t){te(Zn.create("storage-delete",{originalErrorMessage:_t?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class eo{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,O.Z)(function*(){const M=b.storage.getLastFetchStatus(),U=b.storage.getLastSuccessfulFetchTimestampMillis(),Z=b.storage.getActiveConfig(),te=yield M;te&&(b.lastFetchStatus=te);const _e=yield U;_e&&(b.lastSuccessfulFetchTimestampMillis=_e);const Ze=yield Z;Ze&&(b.activeConfig=Ze)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function Nm(){return ja.apply(this,arguments)}function ja(){return(ja=(0,O.Z)(function*(){if(!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}!function tc(){(0,ee._registerComponent)(new de.wA("remote-config",function D(b,{instanceIdentifier:M}){const U=b.getProvider("app").getImmediate(),Z=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Zn.create("registration-window");if(!(0,re.hl)())throw Zn.create("indexed-db-unavailable");const{projectId:te,apiKey:_e,appId:Ze}=U.options;if(!te)throw Zn.create("registration-project-id");if(!_e)throw Zn.create("registration-api-key");if(!Ze)throw Zn.create("registration-app-id");const at=new ec(Ze,U.name,M=M||"firebase"),_t=new eo(at),Ut=new le.Yd(ji);Ut.logLevel=le.in.ERROR;const bt=new Ss(Z,ee.SDK_VERSION,M,te,_e,Ze),Tr=new Gi(bt,at),rr=new zu(Tr,at,_t,Ut),js=new ep(U,rr,_t,at,Ut);return function fr(D){const b=(0,re.m9)(D);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(js),js},"PUBLIC").setMultipleInstances(!0)),(0,ee.registerVersion)(ji,"0.4.3"),(0,ee.registerVersion)(ji,"0.4.3","esm2017")}();const br="/firebase-messaging-sw.js",no="/firebase-cloud-messaging-push-scope",as="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Ha="google.c.a.c_id",qu="google.c.a.c_l",ic="google.c.a.ts",ro="google.c.a.e";var ui=(()=>{return(D=ui||(ui={})).PUSH_RECEIVED="push-received",D.NOTIFICATION_CLICKED="notification-clicked",ui;var D})();function Wi(D){const b=new Uint8Array(D);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Zr(D){const M=(D+"=".repeat((4-D.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),U=atob(M),Z=new Uint8Array(U.length);for(let te=0;te<U.length;++te)Z[te]=U.charCodeAt(te);return Z}const Ms="fcm_token_details_db",io="fcm_token_object_Store";function ip(D){return Zu.apply(this,arguments)}function Zu(){return Zu=(0,O.Z)(function*(D){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(te=>te.name).includes(Ms))return null;let b=null;return(yield(0,ae.X3)(Ms,5,{upgrade:(U=(0,O.Z)(function*(Z,te,_e,Ze){var at;if(te<2||!Z.objectStoreNames.contains(io))return;const _t=Ze.objectStore(io),Ut=yield _t.index("fcmSenderId").get(D);if(yield _t.clear(),Ut)if(2===te){const bt=Ut;if(!bt.auth||!bt.p256dh||!bt.endpoint)return;b={token:bt.fcmToken,createTime:null!==(at=bt.createTime)&&void 0!==at?at:Date.now(),subscriptionOptions:{auth:bt.auth,p256dh:bt.p256dh,endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:"string"==typeof bt.vapidKey?bt.vapidKey:Wi(bt.vapidKey)}}}else if(3===te){const bt=Ut;b={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Wi(bt.auth),p256dh:Wi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Wi(bt.vapidKey)}}}else if(4===te){const bt=Ut;b={token:bt.fcmToken,createTime:bt.createTime,subscriptionOptions:{auth:Wi(bt.auth),p256dh:Wi(bt.p256dh),endpoint:bt.endpoint,swScope:bt.swScope,vapidKey:Wi(bt.vapidKey)}}}}),function(te,_e,Ze,at){return U.apply(this,arguments)})})).close(),yield(0,ae.Lj)(Ms),yield(0,ae.Lj)("fcm_vapid_details_db"),yield(0,ae.Lj)("undefined"),Pn(b)?b:null;var U}),Zu.apply(this,arguments)}function Pn(D){if(!D||!D.subscriptionOptions)return!1;const{subscriptionOptions:b}=D;return"number"==typeof D.createTime&&D.createTime>0&&"string"==typeof D.token&&D.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Ei="firebase-messaging-store";let vr=null;function Ga(){return vr||(vr=(0,ae.X3)("firebase-messaging-database",1,{upgrade:(D,b)=>{0===b&&D.createObjectStore(Ei)}})),vr}function so(D){return Mi.apply(this,arguments)}function Mi(){return(Mi=(0,O.Z)(function*(D){const b=li(D),U=yield(yield Ga()).transaction(Ei).objectStore(Ei).get(b);if(U)return U;{const Z=yield ip(D.appConfig.senderId);if(Z)return yield nn(D,Z),Z}})).apply(this,arguments)}function nn(D,b){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,O.Z)(function*(D,b){const M=li(D),Z=(yield Ga()).transaction(Ei,"readwrite");return yield Z.objectStore(Ei).put(b,M),yield Z.done,b})).apply(this,arguments)}function us(D){return Yu.apply(this,arguments)}function Yu(){return(Yu=(0,O.Z)(function*(D){const b=li(D),U=(yield Ga()).transaction(Ei,"readwrite");yield U.objectStore(Ei).delete(b),yield U.done})).apply(this,arguments)}function li({appConfig:D}){return D.appId}const Vn=new re.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function kt(D,b){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,O.Z)(function*(D,b){const M=yield na(D),U=Me(b),Z={method:"POST",headers:M,body:JSON.stringify(U)};let te;try{te=yield(yield fetch(xs(D.appConfig),Z)).json()}catch(_e){throw Vn.create("token-subscribe-failed",{errorInfo:_e?.toString()})}if(te.error)throw Vn.create("token-subscribe-failed",{errorInfo:te.error.message});if(!te.token)throw Vn.create("token-subscribe-no-token");return te.token})).apply(this,arguments)}function sp(D,b){return ea.apply(this,arguments)}function ea(){return(ea=(0,O.Z)(function*(D,b){const M=yield na(D),U=Me(b.subscriptionOptions),Z={method:"PATCH",headers:M,body:JSON.stringify(U)};let te;try{te=yield(yield fetch(`${xs(D.appConfig)}/${b.token}`,Z)).json()}catch(_e){throw Vn.create("token-update-failed",{errorInfo:_e?.toString()})}if(te.error)throw Vn.create("token-update-failed",{errorInfo:te.error.message});if(!te.token)throw Vn.create("token-update-no-token");return te.token})).apply(this,arguments)}function oc(D,b){return ta.apply(this,arguments)}function ta(){return(ta=(0,O.Z)(function*(D,b){const U={method:"DELETE",headers:yield na(D)};try{const te=yield(yield fetch(`${xs(D.appConfig)}/${b}`,U)).json();if(te.error)throw Vn.create("token-unsubscribe-failed",{errorInfo:te.error.message})}catch(Z){throw Vn.create("token-unsubscribe-failed",{errorInfo:Z?.toString()})}})).apply(this,arguments)}function xs({projectId:D}){return`https://fcmregistrations.googleapis.com/v1/projects/${D}/registrations`}function na(D){return oo.apply(this,arguments)}function oo(){return(oo=(0,O.Z)(function*({appConfig:D,installations:b}){const M=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":D.apiKey,"x-goog-firebase-installations-auth":`FIS ${M}`})})).apply(this,arguments)}function Me({p256dh:D,auth:b,endpoint:M,vapidKey:U}){const Z={web:{endpoint:M,auth:b,p256dh:D}};return U!==as&&(Z.web.applicationPubKey=U),Z}const Kt=6048e5;function Gd(D){return ao.apply(this,arguments)}function ao(){return(ao=(0,O.Z)(function*(D){const b=yield Wd(D.swRegistration,D.vapidKey),M={vapidKey:D.vapidKey,swScope:D.swRegistration.scope,endpoint:b.endpoint,auth:Wi(b.getKey("auth")),p256dh:Wi(b.getKey("p256dh"))},U=yield so(D.firebaseDependencies);if(U){if(op(U.subscriptionOptions,M))return Date.now()>=U.createTime+Kt?Wa(D,{token:U.token,createTime:Date.now(),subscriptionOptions:M}):U.token;try{yield oc(D.firebaseDependencies,U.token)}catch(Z){console.warn(Z)}return za(D.firebaseDependencies,M)}return za(D.firebaseDependencies,M)})).apply(this,arguments)}function Xn(D){return uo.apply(this,arguments)}function uo(){return(uo=(0,O.Z)(function*(D){const b=yield so(D.firebaseDependencies);b&&(yield oc(D.firebaseDependencies,b.token),yield us(D.firebaseDependencies));const M=yield D.swRegistration.pushManager.getSubscription();return!M||M.unsubscribe()})).apply(this,arguments)}function Wa(D,b){return jr.apply(this,arguments)}function jr(){return(jr=(0,O.Z)(function*(D,b){try{const M=yield sp(D.firebaseDependencies,b),U=Object.assign(Object.assign({},b),{token:M,createTime:Date.now()});return yield nn(D.firebaseDependencies,U),M}catch(M){throw yield Xn(D),M}})).apply(this,arguments)}function za(D,b){return lo.apply(this,arguments)}function lo(){return(lo=(0,O.Z)(function*(D,b){const U={token:yield kt(D,b),createTime:Date.now(),subscriptionOptions:b};return yield nn(D,U),U.token})).apply(this,arguments)}function Wd(D,b){return ra.apply(this,arguments)}function ra(){return(ra=(0,O.Z)(function*(D,b){return(yield D.pushManager.getSubscription())||D.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Zr(b)})})).apply(this,arguments)}function op(D,b){return b.vapidKey===D.vapidKey&&b.endpoint===D.endpoint&&b.auth===D.auth&&b.p256dh===D.p256dh}function Rs(D){const b={from:D.from,collapseKey:D.collapse_key,messageId:D.fcmMessageId};return function er(D,b){if(!b.notification)return;D.notification={};const M=b.notification.title;M&&(D.notification.title=M);const U=b.notification.body;U&&(D.notification.body=U);const Z=b.notification.image;Z&&(D.notification.image=Z);const te=b.notification.icon;te&&(D.notification.icon=te)}(b,D),function xi(D,b){!b.data||(D.data=b.data)}(b,D),function ia(D,b){var M,U,Z,te,_e;if(!(b.fcmOptions||null!==(M=b.notification)&&void 0!==M&&M.click_action))return;D.fcmOptions={};const Ze=null!==(Z=null===(U=b.fcmOptions)||void 0===U?void 0:U.link)&&void 0!==Z?Z:null===(te=b.notification)||void 0===te?void 0:te.click_action;Ze&&(D.fcmOptions.link=Ze);const at=null===(_e=b.fcmOptions)||void 0===_e?void 0:_e.analytics_label;at&&(D.fcmOptions.analyticsLabel=at)}(b,D),b}function sa(D){return"object"==typeof D&&!!D&&Ha in D}function zi(D,b){const M=[];for(let U=0;U<D.length;U++)M.push(D.charAt(U)),U<b.length&&M.push(b.charAt(U));return M.join("")}function Qu(D){return Vn.create("missing-app-config-values",{valueName:D})}zi("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),zi("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class uc{constructor(b,M,U){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Z=function ac(D){if(!D||!D.options)throw Qu("App Configuration Object");if(!D.name)throw Qu("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:M}=D;for(const U of b)if(!M[U])throw Qu(U);return{appName:D.name,projectId:M.projectId,apiKey:M.apiKey,appId:M.appId,senderId:M.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:Z,installations:M,analyticsProvider:U}}_delete(){return Promise.resolve()}}function zd(D){return co.apply(this,arguments)}function co(){return(co=(0,O.Z)(function*(D){try{D.swRegistration=yield navigator.serviceWorker.register(br,{scope:no}),D.swRegistration.update().catch(()=>{})}catch(b){throw Vn.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function Ju(D,b){return oa.apply(this,arguments)}function oa(){return(oa=(0,O.Z)(function*(D,b){if(!b&&!D.swRegistration&&(yield zd(D)),b||!D.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw Vn.create("invalid-sw-registration");D.swRegistration=b}})).apply(this,arguments)}function Xu(D,b){return aa.apply(this,arguments)}function aa(){return(aa=(0,O.Z)(function*(D,b){b?D.vapidKey=b:D.vapidKey||(D.vapidKey=as)})).apply(this,arguments)}function ho(){return(ho=(0,O.Z)(function*(D,b){if(!navigator)throw Vn.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Vn.create("permission-blocked");return yield Xu(D,b?.vapidKey),yield Ju(D,b?.serviceWorkerRegistration),Gd(D)})).apply(this,arguments)}function qd(D,b,M){return ua.apply(this,arguments)}function ua(){return(ua=(0,O.Z)(function*(D,b,M){const U=Zd(b);(yield D.firebaseDependencies.analyticsProvider.get()).logEvent(U,{message_id:M[Ha],message_name:M[qu],message_time:M[ic],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Zd(D){switch(D){case ui.NOTIFICATION_CLICKED:return"notification_open";case ui.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function ls(){return(ls=(0,O.Z)(function*(D,b){const M=b.data;if(!M.isFirebaseMessaging)return;D.onMessageHandler&&M.messageType===ui.PUSH_RECEIVED&&("function"==typeof D.onMessageHandler?D.onMessageHandler(Rs(M)):D.onMessageHandler.next(Rs(M)));const U=M.data;sa(U)&&"1"===U[ro]&&(yield qd(D,M.messageType,U))})).apply(this,arguments)}const cs="@firebase/messaging",xn=D=>{const b=new uc(D.getProvider("app").getImmediate(),D.getProvider("installations-internal").getImmediate(),D.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",M=>function cc(D,b){return ls.apply(this,arguments)}(b,M)),b},qi=D=>{const b=D.getProvider("messaging").getImmediate();return{getToken:U=>function lc(D,b){return ho.apply(this,arguments)}(b,U)}};function hc(){return el.apply(this,arguments)}function el(){return(el=(0,O.Z)(function*(){try{yield(0,re.eu)()}catch{return!1}return typeof window<"u"&&(0,re.hl)()&&(0,re.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function An(){(0,ee._registerComponent)(new de.wA("messaging",xn,"PUBLIC")),(0,ee._registerComponent)(new de.wA("messaging-internal",qi,"PRIVATE")),(0,ee.registerVersion)(cs,"0.12.3"),(0,ee.registerVersion)(cs,"0.12.3","esm2017")}();const go="analytics",pc="firebase_id",il="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",gc="https://www.googletagmanager.com/gtag/js",Un=new le.Yd("@firebase/analytics");function Za(D){return Promise.all(D.map(b=>b.catch(M=>M)))}function Ka(D,b){const M=document.createElement("script");M.src=`${gc}?l=${D}&id=${b}`,M.async=!0,document.head.appendChild(M)}function Yd(D,b,M,U,Z,te){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,O.Z)(function*(D,b,M,U,Z,te){const _e=U[Z];try{if(_e)yield b[_e];else{const at=(yield Za(M)).find(_t=>_t.measurementId===Z);at&&(yield b[at.appId])}}catch(Ze){Un.error(Ze)}D("config",Z,te)})).apply(this,arguments)}function Zi(D,b,M,U,Z){return la.apply(this,arguments)}function la(){return(la=(0,O.Z)(function*(D,b,M,U,Z){try{let te=[];if(Z&&Z.send_to){let _e=Z.send_to;Array.isArray(_e)||(_e=[_e]);const Ze=yield Za(M);for(const at of _e){const _t=Ze.find(bt=>bt.measurementId===at),Ut=_t&&b[_t.appId];if(!Ut){te=[];break}te.push(Ut)}}0===te.length&&(te=Object.values(b)),yield Promise.all(te),D("event",U,Z||{})}catch(te){Un.error(te)}})).apply(this,arguments)}function mc(D){const b=window.document.getElementsByTagName("script");for(const M of Object.values(b))if(M.src&&M.src.includes(gc)&&M.src.includes(D))return M;return null}const tr=new re.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),da=new class ol{constructor(b={},M=1e3){this.throttleMetadata=b,this.intervalMillis=M}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,M){this.throttleMetadata[b]=M}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function mo(D){return new Headers({Accept:"application/json","x-goog-api-key":D})}function Xd(D){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,O.Z)(function*(D){var b;const{appId:M,apiKey:U}=D,Z={method:"GET",headers:mo(U)},te=il.replace("{app-id}",M),_e=yield fetch(te,Z);if(200!==_e.status&&304!==_e.status){let Ze="";try{const at=yield _e.json();null!==(b=at.error)&&void 0!==b&&b.message&&(Ze=at.error.message)}catch{}throw tr.create("config-fetch-failed",{httpStatus:_e.status,responseMessage:Ze})}return _e.json()})).apply(this,arguments)}function yc(D){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,O.Z)(function*(D,b=da,M){const{appId:U,apiKey:Z,measurementId:te}=D.options;if(!U)throw tr.create("no-app-id");if(!Z){if(te)return{measurementId:te,appId:U};throw tr.create("no-api-key")}const _e=b.getThrottleMetadata(U)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ze=new ha;return setTimeout((0,O.Z)(function*(){Ze.abort()}),void 0!==M?M:6e4),_c({appId:U,apiKey:Z,measurementId:te},_e,Ze,b)})).apply(this,arguments)}function _c(D,b,M){return Ki.apply(this,arguments)}function Ki(){return(Ki=(0,O.Z)(function*(D,{throttleEndTimeMillis:b,backoffCount:M},U,Z=da){var te;const{appId:_e,measurementId:Ze}=D;try{yield al(U,b)}catch(at){if(Ze)return Un.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${at?.message}]`),{appId:_e,measurementId:Ze};throw at}try{const at=yield Xd(D);return Z.deleteThrottleMetadata(_e),at}catch(at){const _t=at;if(!Ja(_t)){if(Z.deleteThrottleMetadata(_e),Ze)return Un.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ze} provided in the "measurementId" field in the local Firebase config. [${_t?.message}]`),{appId:_e,measurementId:Ze};throw at}const Ut=503===Number(null===(te=_t?.customData)||void 0===te?void 0:te.httpStatus)?(0,re.$s)(M,Z.intervalMillis,30):(0,re.$s)(M,Z.intervalMillis),bt={throttleEndTimeMillis:Date.now()+Ut,backoffCount:M+1};return Z.setThrottleMetadata(_e,bt),Un.debug(`Calling attemptFetch again in ${Ut} millis`),_c(D,bt,U,Z)}})).apply(this,arguments)}function al(D,b){return new Promise((M,U)=>{const Z=Math.max(b-Date.now(),0),te=setTimeout(M,Z);D.addEventListener(()=>{clearTimeout(te),U(tr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Ja(D){if(!(D instanceof re.ZR&&D.customData))return!1;const b=Number(D.customData.httpStatus);return 429===b||500===b||503===b||504===b}class ha{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let Ns,eu;function yo(){return(yo=(0,O.Z)(function*(D,b,M,U,Z){if(Z&&Z.global)D("event",M,U);else{const te=yield b;D("event",M,Object.assign(Object.assign({},U),{send_to:te}))}})).apply(this,arguments)}function Eo(D){eu=D}function ul(D){Ns=D}function hs(){return Io.apply(this,arguments)}function Io(){return(Io=(0,O.Z)(function*(){if(!(0,re.hl)())return Un.warn(tr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,re.eu)()}catch(D){return Un.warn(tr.create("indexeddb-unavailable",{errorInfo:D?.toString()}).message),!1}return!0})).apply(this,arguments)}function Do(){return(Do=(0,O.Z)(function*(D,b,M,U,Z,te,_e){var Ze;const at=yc(D);at.then(rr=>{M[rr.measurementId]=rr.appId,D.options.measurementId&&rr.measurementId!==D.options.measurementId&&Un.warn(`The measurement ID in the local Firebase config (${D.options.measurementId}) does not match the measurement ID fetched from the server (${rr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(rr=>Un.error(rr)),b.push(at);const _t=hs().then(rr=>{if(rr)return U.getId()}),[Ut,bt]=yield Promise.all([at,_t]);mc(te)||Ka(te,Ut.measurementId),eu&&(Z("consent","default",eu),Eo(void 0)),Z("js",new Date);const Tr=null!==(Ze=_e?.config)&&void 0!==Ze?Ze:{};return Tr.origin="firebase",Tr.update=!0,null!=bt&&(Tr[pc]=bt),Z("config",Ut.measurementId,Tr),Ns&&(Z("set",Ns),ul(void 0)),Ut.measurementId})).apply(this,arguments)}class tu{constructor(b){this.app=b}_delete(){return delete Or[this.app.options.appId],Promise.resolve()}}let Or={},Co=[];const Os={};let To,Ni,bo="dataLayer",wc=!1;function nh(D,b,M){!function ap(){const D=[];if((0,re.ru)()&&D.push("This is a browser extension environment."),(0,re.zI)()||D.push("Cookies are not available."),D.length>0){const b=D.map((U,Z)=>`(${Z+1}) ${U}`).join(" "),M=tr.create("invalid-analytics-context",{errorInfo:b});Un.warn(M.message)}}();const U=D.options.appId;if(!U)throw tr.create("no-app-id");if(!D.options.apiKey){if(!D.options.measurementId)throw tr.create("no-api-key");Un.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${D.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Or[U])throw tr.create("already-exists",{id:U});if(!wc){!function Ya(D){let b=[];Array.isArray(window[D])?b=window[D]:window[D]=b}(bo);const{wrappedGtag:te,gtagCore:_e}=function ca(D,b,M,U,Z){let te=function(..._e){window[U].push(arguments)};return window[Z]&&"function"==typeof window[Z]&&(te=window[Z]),window[Z]=function sl(D,b,M,U){function te(){return(te=(0,O.Z)(function*(_e,Ze,at){try{"event"===_e?yield Zi(D,b,M,Ze,at):"config"===_e?yield Yd(D,b,M,U,Ze,at):"consent"===_e?D("consent","update",at):D("set",Ze)}catch(_t){Un.error(_t)}})).apply(this,arguments)}return function Z(_e,Ze,at){return te.apply(this,arguments)}}(te,D,b,M),{gtagCore:te,wrappedGtag:window[Z]}}(Or,Co,Os,bo,"gtag");Ni=te,To=_e,wc=!0}return Or[U]=function th(D,b,M,U,Z,te,_e){return Do.apply(this,arguments)}(D,Co,Os,b,To,bo,M),new tu(D)}function Pm(){return rh.apply(this,arguments)}function rh(){return(rh=(0,O.Z)(function*(){if((0,re.ru)()||!(0,re.zI)()||!(0,re.hl)())return!1;try{return yield(0,re.eu)()}catch{return!1}})).apply(this,arguments)}const ct="@firebase/analytics";!function Cn(){(0,ee._registerComponent)(new de.wA(go,(b,{options:M})=>nh(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),M),"PUBLIC")),(0,ee._registerComponent)(new de.wA("analytics-internal",function D(b){try{const M=b.getProvider(go).getImmediate();return{logEvent:(U,Z,te)=>function dn(D,b,M,U){D=(0,re.m9)(D),function fa(D,b,M,U,Z){return yo.apply(this,arguments)}(Ni,Or[D.app.options.appId],b,M,U).catch(Z=>Un.error(Z))}(M,U,Z,te)}}catch(M){throw tr.create("interop-component-reg-failed",{reason:M})}},"PRIVATE")),(0,ee.registerVersion)(ct,"0.9.3"),(0,ee.registerVersion)(ct,"0.9.3","esm2017")}();var Qi=k(4408),Pr=k(7565);const Ec=new class ks extends Pr.v{}(class Ps extends Qi.o{constructor(b,M){super(b,M),this.scheduler=b,this.work=M}schedule(b,M=0){return M>0?super.schedule(b,M):(this.delay=M,this.state=b,this.scheduler.flush(this),this)}execute(b,M){return M>0||this.closed?super.execute(b,M):this._execute(b,M)}requestAsyncId(b,M,U=0){return null!=U&&U>0||null==U&&this.delay>0?super.requestAsyncId(b,M,U):(b.flush(this),0)}});var ih=k(4986),fs=k(9751),Dc=k(8505),Fs=k(9468),ft=k(5363);const cl=new h.GfV("7.5.0"),Pi="__angularfire_symbol__analyticsIsSupportedValue",ru="__angularfire_symbol__analyticsIsSupported",ga="__angularfire_symbol__remoteConfigIsSupportedValue",pr="__angularfire_symbol__remoteConfigIsSupported",ma="__angularfire_symbol__messagingIsSupportedValue",iu="__angularfire_symbol__messagingIsSupported";function So(D,b,M){if(b){if(1===b.length)return b[0];const te=b.filter(_e=>_e.app===M);if(1===te.length)return te[0]}return M.container.getProvider(D).getImmediate({optional:!0})}globalThis[ru]||(globalThis[ru]=Pm().then(D=>globalThis[Pi]=D).catch(()=>globalThis[Pi]=!1)),globalThis[iu]||(globalThis[iu]=hc().then(D=>globalThis[ma]=D).catch(()=>globalThis[ma]=!1)),globalThis[pr]||(globalThis[pr]=Nm().then(D=>globalThis[ga]=D).catch(()=>globalThis[ga]=!1));const Ls=(D,b)=>{const M=b?[b]:(0,B.C6)(),U=[];return M.forEach(Z=>{Z.container.getProvider(D).instances.forEach(_e=>{U.includes(_e)||U.push(_e)})}),U};function Di(){}class ou{constructor(b,M=Ec){this.zone=b,this.delegate=M}now(){return this.delegate.now()}schedule(b,M,U){const Z=this.zone;return this.delegate.schedule(function(_e){Z.runGuarded(()=>{b.apply(this,[_e])})},M,U)}}class ps{constructor(b){this.zone=b,this.task=null}call(b,M){const U=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Di,{},Di,Di)),M.pipe((0,Dc.b)({next:U,complete:U,error:U})).subscribe(b).add(U)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Vs=(()=>{class D{constructor(M){this.ngZone=M,this.outsideAngular=M.runOutsideAngular(()=>new ou(Zone.current)),this.insideAngular=M.run(()=>new ou(Zone.current,ih.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return D.\u0275fac=function(M){return new(M||D)(h.LFG(h.R0b))},D.\u0275prov=h.Yz7({token:D,factory:D.\u0275fac,providedIn:"root"}),D})();function kr(){const D=globalThis.\u0275AngularFireScheduler;if(!D)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return D}function Cc(D){return kr().ngZone.runOutsideAngular(()=>D())}function Rn(D){return kr().ngZone.run(()=>D())}function nr(D){return kr(),function Sn(D){return function(M){return(M=M.lift(new ps(D.ngZone))).pipe((0,Fs.R)(D.outsideAngular),(0,ft.Q)(D.insideAngular))}}(kr())(D)}const $s=(D,b)=>function(){const U=arguments;return b&&setTimeout(()=>{"scheduled"===b.state&&b.invoke()},10),Rn(()=>D.apply(void 0,U))},di=(D,b)=>function(){let M;const U=arguments;for(let te=0;te<arguments.length;te++)"function"==typeof U[te]&&(b&&(M||(M=Rn(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Di,{},Di,Di)))),U[te]=$s(U[te],M));const Z=Cc(()=>D.apply(this,U));if(!b){if(Z instanceof fs.y){const te=kr();return Z.pipe((0,Fs.R)(te.outsideAngular),(0,ft.Q)(te.insideAngular))}return Rn(()=>Z)}return Z instanceof fs.y?Z.pipe(nr):Z instanceof Promise?Rn(()=>new Promise((te,_e)=>Z.then(Ze=>Rn(()=>te(Ze)),Ze=>Rn(()=>_e(Ze))))):"function"==typeof Z&&M?function(){return setTimeout(()=>{M&&"scheduled"===M.state&&M.invoke()},10),Z.apply(this,arguments)}:Rn(()=>Z)}},2722:(pt,Te,k)=>{k.d(Te,{$:()=>xs,A:()=>H,B:()=>xe,G:()=>Cs,H:()=>zr,J:()=>Gi,L:()=>j,M:()=>ja,N:()=>rc,P:()=>ih,Q:()=>Ha,R:()=>km,T:()=>qu,U:()=>as,V:()=>ui,W:()=>Wi,X:()=>ip,Y:()=>Jo,Z:()=>kt,_:()=>sp,a:()=>ds,a0:()=>Gd,a1:()=>Xn,a2:()=>Wa,a3:()=>za,a4:()=>Wd,a5:()=>op,a6:()=>er,a7:()=>xi,a8:()=>sa,a9:()=>zi,aA:()=>$,aB:()=>Ze,aC:()=>Rn,aD:()=>Cc,aE:()=>Et,aI:()=>mo,aL:()=>ro,aa:()=>zd,ab:()=>Ju,ac:()=>Xu,af:()=>qd,ag:()=>Zd,ah:()=>cc,ak:()=>Ei,al:()=>tl,an:()=>gc,ao:()=>Qa,ap:()=>pe,aq:()=>Le,ar:()=>it,as:()=>Xe,at:()=>_a,au:()=>Fr,av:()=>Ot,aw:()=>Ae,ax:()=>X,ay:()=>Tr,az:()=>We,b:()=>tr,c:()=>pr,d:()=>sh,e:()=>iu,f:()=>nr,g:()=>M,h:()=>di,i:()=>Io,j:()=>te,k:()=>Fi,l:()=>Oi,m:()=>hh,n:()=>fh,o:()=>ae,r:()=>Qi,s:()=>Yi,u:()=>Ec});var h=k(5861),B=k(2090),O=k(9681),ee=k(1877),re=k(655),de=k(4859);const ae={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},H={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const xe=function K(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},De=function $e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},et=new B.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),ce=new ee.Yd("@firebase/auth");function Ye(_,...p){ce.logLevel<=ee.in.ERROR&&ce.error(`Auth (${O.SDK_VERSION}): ${_}`,...p)}function Xe(_,...p){throw je(_,...p)}function Ae(_,...p){return je(_,...p)}function Se(_,p,m){const E=Object.assign(Object.assign({},De()),{[p]:m});return new B.LL("auth","Firebase",E).create(p,{appName:_.name})}function we(_,p,m){if(!(p instanceof m))throw m.name!==p.constructor.name&&Xe(_,"argument-error"),Se(_,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function je(_,...p){if("string"!=typeof _){const m=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=_.name),_._errorFactory.create(m,...E)}return et.create(_,...p)}function X(_,p,...m){if(!_)throw je(p,...m)}function se(_){const p="INTERNAL ASSERTION FAILED: "+_;throw Ye(p),new Error(p)}function pe(_,p){_||se(p)}const Ge=new Map;function We(_){pe(_ instanceof Function,"Expected a class definition");let p=Ge.get(_);return p?(pe(p instanceof _,"Instance stored in cache mismatched with class"),p):(p=new _,Ge.set(_,p),p)}function ie(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function he(){return"http:"===ve()||"https:"===ve()}function ve(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Ee{constructor(p,m){this.shortDelay=p,this.longDelay=m,pe(m>p,"Short delay should be less than long delay!"),this.isMobile=(0,B.uI)()||(0,B.b$)()}get(){return function Ne(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(he()||(0,B.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ht(_,p){pe(_.emulator,"Emulator should always be set here");const{url:m}=_.emulator;return p?`${m}${p.startsWith("/")?p.slice(1):p}`:m}class Rt{static initialize(p,m,E){this.fetchImpl=p,m&&(this.headersImpl=m),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void se("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void se("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void se("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const cn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},rt=new Ee(3e4,6e4);function wt(_,p){return _.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:_.tenantId}):p}function gt(_,p,m,E){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,h.Z)(function*(_,p,m,E,S={}){return Ln(_,S,(0,h.Z)(function*(){let P={},J={};E&&("GET"===p?J=E:P={body:JSON.stringify(E)});const Oe=(0,B.xO)(Object.assign({key:_.config.apiKey},J)).slice(1),st=yield _._getAdditionalHeaders();return st["Content-Type"]="application/json",_.languageCode&&(st["X-Firebase-Locale"]=_.languageCode),Rt.fetch()(Rr(_,_.config.apiHost,m,Oe),Object.assign({method:p,headers:st,referrerPolicy:"no-referrer"},P))}))})).apply(this,arguments)}function Ln(_,p,m){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,h.Z)(function*(_,p,m){_._canInitEmulator=!1;const E=Object.assign(Object.assign({},cn),p);try{const S=new Br(_),P=yield Promise.race([m(),S.promise]);S.clearNetworkTimeout();const J=yield P.json();if("needConfirmation"in J)throw Wn(_,"account-exists-with-different-credential",J);if(P.ok&&!("errorMessage"in J))return J;{const Oe=P.ok?J.errorMessage:J.error.message,[st,It]=Oe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===st)throw Wn(_,"credential-already-in-use",J);if("EMAIL_EXISTS"===st)throw Wn(_,"email-already-in-use",J);if("USER_DISABLED"===st)throw Wn(_,"user-disabled",J);const qt=E[st]||st.toLowerCase().replace(/[_\s]+/g,"-");if(It)throw Se(_,qt,It);Xe(_,qt)}}catch(S){if(S instanceof B.ZR)throw S;Xe(_,"network-request-failed")}})).apply(this,arguments)}function sn(_,p,m,E){return yr.apply(this,arguments)}function yr(){return(yr=(0,h.Z)(function*(_,p,m,E,S={}){const P=yield gt(_,p,m,E,S);return"mfaPendingCredential"in P&&Xe(_,"multi-factor-auth-required",{_serverResponse:P}),P})).apply(this,arguments)}function Rr(_,p,m,E){const S=`${p}${m}?${E}`;return _.config.emulator?ht(_.config,S):`${_.config.apiScheme}://${S}`}class Br{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((m,E)=>{this.timer=setTimeout(()=>E(Ae(this.auth,"network-request-failed")),rt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Wn(_,p,m){const E={appName:_.name};m.email&&(E.email=m.email),m.phoneNumber&&(E.phoneNumber=m.phoneNumber);const S=Ae(_,p,E);return S.customData._tokenResponse=m,S}function Bi(){return(Bi=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function Je(_,p){return Yn.apply(this,arguments)}function Yn(){return(Yn=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function zn(_,p){return _n.apply(this,arguments)}function _n(){return(_n=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function _r(_){if(_)try{const p=new Date(Number(_));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function En(){return(En=(0,h.Z)(function*(_,p=!1){const m=(0,B.m9)(_),E=yield m.getIdToken(p),S=mt(E);X(S&&S.exp&&S.auth_time&&S.iat,m.auth,"internal-error");const P="object"==typeof S.firebase?S.firebase:void 0,J=P?.sign_in_provider;return{claims:S,token:E,authTime:_r(gn(S.auth_time)),issuedAtTime:_r(gn(S.iat)),expirationTime:_r(gn(S.exp)),signInProvider:J||null,signInSecondFactor:P?.sign_in_second_factor||null}})).apply(this,arguments)}function gn(_){return 1e3*Number(_)}function mt(_){const[p,m,E]=_.split(".");if(void 0===p||void 0===m||void 0===E)return Ye("JWT malformed, contained fewer than 3 sections"),null;try{const S=(0,B.tV)(m);return S?JSON.parse(S):(Ye("Failed to decode base64 JWT payload"),null)}catch(S){return Ye("Caught error parsing JWT payload as JSON",S?.toString()),null}}function Nt(_,p){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(_,p,m=!1){if(m)return p;try{return yield p}catch(E){throw E instanceof B.ZR&&Qn(E)&&_.auth.currentUser===_&&(yield _.auth.signOut()),E}})).apply(this,arguments)}function Qn({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}class Nr{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var m;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const S=(null!==(m=this.user.stsTokenManager.expirationTime)&&void 0!==m?m:0)-Date.now()-3e5;return Math.max(0,S)}}schedule(p=!1){var m=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,h.Z)(function*(){yield m.iteration()}),E)}iteration(){var p=this;return(0,h.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(m){return void("auth/network-request-failed"===m?.code&&p.schedule(!0))}p.schedule()})()}}class Mt{constructor(p,m){this.createdAt=p,this.lastLoginAt=m,this._initializeTime()}_initializeTime(){this.lastSignInTime=_r(this.lastLoginAt),this.creationTime=_r(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function $r(_){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,h.Z)(function*(_){var p;const m=_.auth,E=yield _.getIdToken(),S=yield Nt(_,zn(m,{idToken:E}));X(S?.users.length,m,"internal-error");const P=S.users[0];_._notifyReloadListener(P);const J=null!==(p=P.providerUserInfo)&&void 0!==p&&p.length?Tn(P.providerUserInfo):[],Oe=hr(_.providerData,J),qt=!!_.isAnonymous&&!(_.email&&P.passwordHash||Oe?.length),mn={uid:P.localId,displayName:P.displayName||null,photoURL:P.photoUrl||null,email:P.email||null,emailVerified:P.emailVerified||!1,phoneNumber:P.phoneNumber||null,tenantId:P.tenantId||null,providerData:Oe,metadata:new Mt(P.createdAt,P.lastLoginAt),isAnonymous:qt};Object.assign(_,mn)})).apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(_){const p=(0,B.m9)(_);yield $r(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function hr(_,p){return[..._.filter(E=>!p.some(S=>S.providerId===E.providerId)),...p]}function Tn(_){return _.map(p=>{var{providerId:m}=p,E=(0,re._T)(p,["providerId"]);return{providerId:m,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Ce(){return(Ce=(0,h.Z)(function*(_,p){const m=yield Ln(_,{},(0,h.Z)(function*(){const E=(0,B.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:S,apiKey:P}=_.config,J=Rr(_,S,"/v1/token",`key=${P}`),Oe=yield _._getAdditionalHeaders();return Oe["Content-Type"]="application/x-www-form-urlencoded",Rt.fetch()(J,{method:"POST",headers:Oe,body:E})}));return{accessToken:m.access_token,expiresIn:m.expires_in,refreshToken:m.refresh_token}})).apply(this,arguments)}class nt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){X(p.idToken,"internal-error"),X(typeof p.idToken<"u","internal-error"),X(typeof p.refreshToken<"u","internal-error");const m="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function yt(_){const p=mt(_);return X(p,"internal-error"),X(typeof p.exp<"u","internal-error"),X(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,m)}getToken(p,m=!1){var E=this;return(0,h.Z)(function*(){return X(!E.accessToken||E.refreshToken,p,"user-token-expired"),m||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,m){var E=this;return(0,h.Z)(function*(){const{accessToken:S,refreshToken:P,expiresIn:J}=yield function tt(_,p){return Ce.apply(this,arguments)}(p,m);E.updateTokensAndExpiration(S,P,Number(J))})()}updateTokensAndExpiration(p,m,E){this.refreshToken=m||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,m){const{refreshToken:E,accessToken:S,expirationTime:P}=m,J=new nt;return E&&(X("string"==typeof E,"internal-error",{appName:p}),J.refreshToken=E),S&&(X("string"==typeof S,"internal-error",{appName:p}),J.accessToken=S),P&&(X("number"==typeof P,"internal-error",{appName:p}),J.expirationTime=P),J}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new nt,this.toJSON())}_performRefresh(){return se("not implemented")}}function Ct(_,p){X("string"==typeof _||typeof _>"u","internal-error",{appName:p})}class xt{constructor(p){var{uid:m,auth:E,stsTokenManager:S}=p,P=(0,re._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Nr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=m,this.auth=E,this.stsTokenManager=S,this.accessToken=S.accessToken,this.displayName=P.displayName||null,this.email=P.email||null,this.emailVerified=P.emailVerified||!1,this.phoneNumber=P.phoneNumber||null,this.photoURL=P.photoURL||null,this.isAnonymous=P.isAnonymous||!1,this.tenantId=P.tenantId||null,this.providerData=P.providerData?[...P.providerData]:[],this.metadata=new Mt(P.createdAt||void 0,P.lastLoginAt||void 0)}getIdToken(p){var m=this;return(0,h.Z)(function*(){const E=yield Nt(m,m.stsTokenManager.getToken(m.auth,p));return X(E,m.auth,"internal-error"),m.accessToken!==E&&(m.accessToken=E,yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)),E})()}getIdTokenResult(p){return function wn(_){return En.apply(this,arguments)}(this,p)}reload(){return function ii(_){return Qt.apply(this,arguments)}(this)}_assign(p){this!==p&&(X(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(m=>Object.assign({},m)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){return new xt(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(p){X(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,m=!1){var E=this;return(0,h.Z)(function*(){let S=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),S=!0),m&&(yield $r(E)),yield E.auth._persistUserIfCurrent(E),S&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,h.Z)(function*(){const m=yield p.getIdToken();return yield Nt(p,function vi(_,p){return Bi.apply(this,arguments)}(p.auth,{idToken:m})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,m){var E,S,P,J,Oe,st,It,qt;const mn=null!==(E=m.displayName)&&void 0!==E?E:void 0,hi=null!==(S=m.email)&&void 0!==S?S:void 0,Ci=null!==(P=m.phoneNumber)&&void 0!==P?P:void 0,wa=null!==(J=m.photoURL)&&void 0!==J?J:void 0,pl=null!==(Oe=m.tenantId)&&void 0!==Oe?Oe:void 0,Ac=null!==(st=m._redirectEventId)&&void 0!==st?st:void 0,Mo=null!==(It=m.createdAt)&&void 0!==It?It:void 0,mp=null!==(qt=m.lastLoginAt)&&void 0!==qt?qt:void 0,{uid:Ea,emailVerified:ph,isAnonymous:yp,providerData:Ia,stsTokenManager:xo}=m;X(Ea&&xo,p,"internal-error");const _p=nt.fromJSON(this.name,xo);X("string"==typeof Ea,p,"internal-error"),Ct(mn,p.name),Ct(hi,p.name),X("boolean"==typeof ph,p,"internal-error"),X("boolean"==typeof yp,p,"internal-error"),Ct(Ci,p.name),Ct(wa,p.name),Ct(pl,p.name),Ct(Ac,p.name),Ct(Mo,p.name),Ct(mp,p.name);const Sc=new xt({uid:Ea,auth:p,email:hi,emailVerified:ph,displayName:mn,isAnonymous:yp,photoURL:wa,phoneNumber:Ci,tenantId:pl,stsTokenManager:_p,createdAt:Mo,lastLoginAt:mp});return Ia&&Array.isArray(Ia)&&(Sc.providerData=Ia.map(hu=>Object.assign({},hu))),Ac&&(Sc._redirectEventId=Ac),Sc}static _fromIdTokenResponse(p,m,E=!1){return(0,h.Z)(function*(){const S=new nt;S.updateFromServerResponse(m);const P=new xt({uid:m.localId,auth:p,stsTokenManager:S,isAnonymous:E});return yield $r(P),P})()}}const j=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,h.Z)(function*(){return!0})()}_set(m,E){var S=this;return(0,h.Z)(function*(){S.storage[m]=E})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=E.storage[m];return void 0===S?null:S})()}_remove(m){var E=this;return(0,h.Z)(function*(){delete E.storage[m]})()}_addListener(m,E){}_removeListener(m,E){}}return _.type="NONE",_})();function $(_,p,m){return`firebase:${_}:${p}:${m}`}class q{constructor(p,m,E){this.persistence=p,this.auth=m,this.userKey=E;const{config:S,name:P}=this.auth;this.fullUserKey=$(this.userKey,S.apiKey,P),this.fullPersistenceKey=$("persistence",S.apiKey,P),this.boundEventHandler=m._onStorageEvent.bind(m),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,h.Z)(function*(){const m=yield p.persistence._get(p.fullUserKey);return m?xt._fromJSON(p.auth,m):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var m=this;return(0,h.Z)(function*(){if(m.persistence===p)return;const E=yield m.getCurrentUser();return yield m.removeCurrentUser(),m.persistence=p,E?m.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,m,E="authUser"){return(0,h.Z)(function*(){if(!m.length)return new q(We(j),p,E);const S=(yield Promise.all(m.map(function(){var It=(0,h.Z)(function*(qt){if(yield qt._isAvailable())return qt});return function(qt){return It.apply(this,arguments)}}()))).filter(It=>It);let P=S[0]||We(j);const J=$(E,p.config.apiKey,p.name);let Oe=null;for(const It of m)try{const qt=yield It._get(J);if(qt){const mn=xt._fromJSON(p,qt);It!==P&&(Oe=mn),P=It;break}}catch{}const st=S.filter(It=>It._shouldAllowMigration);return P._shouldAllowMigration&&st.length?(P=st[0],Oe&&(yield P._set(J,Oe.toJSON())),yield Promise.all(m.map(function(){var It=(0,h.Z)(function*(qt){if(qt!==P)try{yield qt._remove(J)}catch{}});return function(qt){return It.apply(this,arguments)}}())),new q(P,p,E)):new q(P,p,E)})()}}function V(_){const p=_.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(ke(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(x(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(ut(p))return"Blackberry";if(be(p))return"Webos";if(L(p))return"Safari";if((p.includes("chrome/")||Y(p))&&!p.includes("edge/"))return"Chrome";if(it(p))return"Android";{const E=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function x(_=(0,B.z$)()){return/firefox\//i.test(_)}function L(_=(0,B.z$)()){const p=_.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function Y(_=(0,B.z$)()){return/crios\//i.test(_)}function ke(_=(0,B.z$)()){return/iemobile/i.test(_)}function it(_=(0,B.z$)()){return/android/i.test(_)}function ut(_=(0,B.z$)()){return/blackberry/i.test(_)}function be(_=(0,B.z$)()){return/webos/i.test(_)}function Le(_=(0,B.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Ot(_=(0,B.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}function fn(_=(0,B.z$)()){return Le(_)||it(_)||be(_)||ut(_)||/windows phone/i.test(_)||ke(_)}function In(_,p=[]){let m;switch(_){case"Browser":m=V((0,B.z$)());break;case"Worker":m=`${V((0,B.z$)())}-${_}`;break;default:m=_}const E=p.length?p.join(","):"FirebaseCore-web";return`${m}/JsCore/${O.SDK_VERSION}/${E}`}class Is{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,m){const E=P=>new Promise((J,Oe)=>{try{J(p(P))}catch(st){Oe(st)}});E.onAbort=m,this.queue.push(E);const S=this.queue.length-1;return()=>{this.queue[S]=()=>Promise.resolve()}}runMiddleware(p){var m=this;return(0,h.Z)(function*(){if(m.auth.currentUser===p)return;const E=[];try{for(const S of m.queue)yield S(p),S.onAbort&&E.push(S.onAbort)}catch(S){E.reverse();for(const P of E)try{P()}catch{}throw m.auth._errorFactory.create("login-blocked",{originalMessage:S?.message})}})()}}class Qs{constructor(p,m,E){this.app=p,this.heartbeatServiceProvider=m,this.config=E,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ds(this),this.idTokenSubscription=new Ds(this),this.beforeStateQueue=new Is(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=et,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=E.sdkClientVersion}_initializeWithPersistence(p,m){var E=this;return m&&(this._popupRedirectResolver=We(m)),this._initializationPromise=this.queue((0,h.Z)(function*(){var S,P;if(!E._deleted&&(E.persistenceManager=yield q.create(E,p),!E._deleted)){if(null!==(S=E._popupRedirectResolver)&&void 0!==S&&S._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(m),E.lastNotifiedUid=(null===(P=E.currentUser)||void 0===P?void 0:P.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,h.Z)(function*(){if(p._deleted)return;const m=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||m){if(p.currentUser&&m&&p.currentUser.uid===m.uid)return p._currentUser._assign(m),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(m,!0)}})()}initializeCurrentUser(p){var m=this;return(0,h.Z)(function*(){var E;const S=yield m.assertedPersistence.getCurrentUser();let P=S,J=!1;if(p&&m.config.authDomain){yield m.getOrInitRedirectPersistenceManager();const Oe=null===(E=m.redirectUser)||void 0===E?void 0:E._redirectEventId,st=P?._redirectEventId,It=yield m.tryRedirectSignIn(p);(!Oe||Oe===st)&&It?.user&&(P=It.user,J=!0)}if(!P)return m.directlySetCurrentUser(null);if(!P._redirectEventId){if(J)try{yield m.beforeStateQueue.runMiddleware(P)}catch(Oe){P=S,m._popupRedirectResolver._overrideRedirectResult(m,()=>Promise.reject(Oe))}return P?m.reloadAndSetCurrentUserOrClear(P):m.directlySetCurrentUser(null)}return X(m._popupRedirectResolver,m,"argument-error"),yield m.getOrInitRedirectPersistenceManager(),m.redirectUser&&m.redirectUser._redirectEventId===P._redirectEventId?m.directlySetCurrentUser(P):m.reloadAndSetCurrentUserOrClear(P)})()}tryRedirectSignIn(p){var m=this;return(0,h.Z)(function*(){let E=null;try{E=yield m._popupRedirectResolver._completeRedirectFn(m,p,!0)}catch{yield m._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var m=this;return(0,h.Z)(function*(){try{yield $r(p)}catch(E){if("auth/network-request-failed"!==E?.code)return m.directlySetCurrentUser(null)}return m.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function Pe(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var p=this;return(0,h.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var m=this;return(0,h.Z)(function*(){const E=p?(0,B.m9)(p):null;return E&&X(E.auth.config.apiKey===m.config.apiKey,m,"invalid-user-token"),m._updateCurrentUser(E&&E._clone(m))})()}_updateCurrentUser(p,m=!1){var E=this;return(0,h.Z)(function*(){if(!E._deleted)return p&&X(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),m||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,h.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,h.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var m=this;return this.queue((0,h.Z)(function*(){yield m.assertedPersistence.setPersistence(We(p))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new B.LL("auth","Firebase",p())}onAuthStateChanged(p,m,E){return this.registerStateListener(this.authStateSubscription,p,m,E)}beforeAuthStateChanged(p,m){return this.beforeStateQueue.pushCallback(p,m)}onIdTokenChanged(p,m,E){return this.registerStateListener(this.idTokenSubscription,p,m,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,m){var E=this;return(0,h.Z)(function*(){const S=yield E.getOrInitRedirectPersistenceManager(m);return null===p?S.removeCurrentUser():S.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var m=this;return(0,h.Z)(function*(){if(!m.redirectPersistenceManager){const E=p&&We(p)||m._popupRedirectResolver;X(E,m,"argument-error"),m.redirectPersistenceManager=yield q.create(m,[We(E._redirectPersistence)],"redirectUser"),m.redirectUser=yield m.redirectPersistenceManager.getCurrentUser()}return m.redirectPersistenceManager})()}_redirectUserForId(p){var m=this;return(0,h.Z)(function*(){var E,S;return m._isInitialized&&(yield m.queue((0,h.Z)(function*(){}))),(null===(E=m._currentUser)||void 0===E?void 0:E._redirectEventId)===p?m._currentUser:(null===(S=m.redirectUser)||void 0===S?void 0:S._redirectEventId)===p?m.redirectUser:null})()}_persistUserIfCurrent(p){var m=this;return(0,h.Z)(function*(){if(p===m.currentUser)return m.queue((0,h.Z)(function*(){return m.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,m;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(m=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==m?m:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,m,E,S){if(this._deleted)return()=>{};const P="function"==typeof m?m:m.next.bind(m),J=this._isInitialized?Promise.resolve():this._initializationPromise;return X(J,this,"internal-error"),J.then(()=>P(this.currentUser)),"function"==typeof m?p.addObserver(m,E,S):p.addObserver(m)}directlySetCurrentUser(p){var m=this;return(0,h.Z)(function*(){m.currentUser&&m.currentUser!==p&&m._currentUser._stopProactiveRefresh(),p&&m.isProactiveRefreshEnabled&&p._startProactiveRefresh(),m.currentUser=p,p?yield m.assertedPersistence.setCurrentUser(p):yield m.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return X(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=In(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,h.Z)(function*(){var m;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const S=yield null===(m=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===m?void 0:m.getHeartbeatsHeader();return S&&(E["X-Firebase-Client"]=S),E})()}}function Et(_){return(0,B.m9)(_)}class Ds{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,B.ne)(m=>this.observer=m)}get next(){return X(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Cs(_,p,m){const E=Et(_);X(E._canInitEmulator,E,"emulator-config-failed"),X(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const S=!!m?.disableWarnings,P=$a(p),{host:J,port:Oe}=function ji(_){const p=$a(_),m=/(\/\/)?([^?#/]+)/.exec(_.substr(p.length));if(!m)return{host:"",port:null};const E=m[2].split("@").pop()||"",S=/^(\[[^\]]+\])(:|$)/.exec(E);if(S){const P=S[1];return{host:P,port:qn(E.substr(P.length+1))}}{const[P,J]=E.split(":");return{host:P,port:qn(J)}}}(p);E.config.emulator={url:`${P}//${J}${null===Oe?"":`:${Oe}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:J,port:Oe,protocol:P.replace(":",""),options:Object.freeze({disableWarnings:S})}),S||function bs(){function _(){const p=document.createElement("p"),m=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",m.position="fixed",m.width="100%",m.backgroundColor="#ffffff",m.border=".1em solid #000000",m.color="#b50000",m.bottom="0px",m.left="0px",m.margin="0px",m.zIndex="10000",m.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}function $a(_){const p=_.indexOf(":");return p<0?"":_.substr(0,p+1)}function qn(_){if(!_)return null;const p=Number(_);return isNaN(p)?null:p}class zr{constructor(p,m){this.providerId=p,this.signInMethod=m}toJSON(){return se("not implemented")}_getIdTokenResponse(p){return se("not implemented")}_linkToIdToken(p,m){return se("not implemented")}_getReauthenticationResolver(p){return se("not implemented")}}function si(_,p){return Zn.apply(this,arguments)}function Zn(){return(Zn=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:resetPassword",wt(_,p))})).apply(this,arguments)}function Hu(_,p){return pn.apply(this,arguments)}function pn(){return(pn=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function $d(_,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:update",wt(_,p))})).apply(this,arguments)}function Ts(){return(Ts=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithPassword",wt(_,p))})).apply(this,arguments)}function os(_,p){return As.apply(this,arguments)}function As(){return(As=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:sendOobCode",wt(_,p))})).apply(this,arguments)}function Hi(_,p){return fr.apply(this,arguments)}function fr(){return(fr=(0,h.Z)(function*(_,p){return os(_,p)})).apply(this,arguments)}function jd(_,p){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,h.Z)(function*(_,p){return os(_,p)})).apply(this,arguments)}function oi(_,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,h.Z)(function*(_,p){return os(_,p)})).apply(this,arguments)}function Gu(_,p){return Ko.apply(this,arguments)}function Ko(){return(Ko=(0,h.Z)(function*(_,p){return os(_,p)})).apply(this,arguments)}function Wu(){return(Wu=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithEmailLink",wt(_,p))})).apply(this,arguments)}function zu(){return(zu=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithEmailLink",wt(_,p))})).apply(this,arguments)}class Yo extends zr{constructor(p,m,E,S=null){super("password",E),this._email=p,this._password=m,this._tenantId=S}static _fromEmailAndPassword(p,m){return new Yo(p,m,"password")}static _fromEmailAndCode(p,m,E=null){return new Yo(p,m,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p;if(m?.email&&m?.password){if("password"===m.signInMethod)return this._fromEmailAndPassword(m.email,m.password);if("emailLink"===m.signInMethod)return this._fromEmailAndCode(m.email,m.password,m.tenantId)}return null}_getIdTokenResponse(p){var m=this;return(0,h.Z)(function*(){switch(m.signInMethod){case"password":return function Zo(_,p){return Ts.apply(this,arguments)}(p,{returnSecureToken:!0,email:m._email,password:m._password});case"emailLink":return function qr(_,p){return Wu.apply(this,arguments)}(p,{email:m._email,oobCode:m._password});default:Xe(p,"internal-error")}})()}_linkToIdToken(p,m){var E=this;return(0,h.Z)(function*(){switch(E.signInMethod){case"password":return Hu(p,{idToken:m,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function Qf(_,p){return zu.apply(this,arguments)}(p,{idToken:m,email:E._email,oobCode:E._password});default:Xe(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Ss(_,p){return ai.apply(this,arguments)}function ai(){return(ai=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithIdp",wt(_,p))})).apply(this,arguments)}class Gi extends zr{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const m=new Gi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(m.idToken=p.idToken),p.accessToken&&(m.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(m.nonce=p.nonce),p.pendingToken&&(m.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(m.accessToken=p.oauthToken,m.secret=p.oauthTokenSecret):Xe("argument-error"),m}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S}=m,P=(0,re._T)(m,["providerId","signInMethod"]);if(!E||!S)return null;const J=new Gi(E,S);return J.idToken=P.idToken||void 0,J.accessToken=P.accessToken||void 0,J.secret=P.secret,J.nonce=P.nonce,J.pendingToken=P.pendingToken||null,J}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ss(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ss(p,m)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const m={};this.idToken&&(m.id_token=this.idToken),this.accessToken&&(m.access_token=this.accessToken),this.secret&&(m.oauth_token_secret=this.secret),m.providerId=this.providerId,this.nonce&&!this.pendingToken&&(m.nonce=this.nonce),p.postBody=(0,B.xO)(m)}return p}}function Xf(_,p){return Jl.apply(this,arguments)}function Jl(){return(Jl=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:sendVerificationCode",wt(_,p))})).apply(this,arguments)}function Qo(){return(Qo=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,p))})).apply(this,arguments)}function Xl(){return(Xl=(0,h.Z)(function*(_,p){const m=yield sn(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,p));if(m.temporaryProof)throw Wn(_,"account-exists-with-different-credential",m);return m})).apply(this,arguments)}const tp={USER_NOT_FOUND:"user-not-found"};function ec(){return(ec=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithPhoneNumber",wt(_,Object.assign(Object.assign({},p),{operation:"REAUTH"})),tp)})).apply(this,arguments)}class eo extends zr{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,m){return new eo({verificationId:p,verificationCode:m})}static _fromTokenResponse(p,m){return new eo({phoneNumber:p,temporaryProof:m})}_getIdTokenResponse(p){return function ep(_,p){return Qo.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,m){return function Xs(_,p){return Xl.apply(this,arguments)}(p,Object.assign({idToken:m},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function np(_,p){return ec.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:m,verificationId:E,verificationCode:S}=this.params;return p&&m?{temporaryProof:p,phoneNumber:m}:{sessionInfo:E,code:S}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:P}=p;return E||m||S||P?new eo({verificationId:m,verificationCode:E,phoneNumber:S,temporaryProof:P}):null}}class to{constructor(p){var m,E,S,P,J,Oe;const st=(0,B.zd)((0,B.pd)(p)),It=null!==(m=st.apiKey)&&void 0!==m?m:null,qt=null!==(E=st.oobCode)&&void 0!==E?E:null,mn=function tc(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(S=st.mode)&&void 0!==S?S:null);X(It&&qt&&mn,"argument-error"),this.apiKey=It,this.operation=mn,this.code=qt,this.continueUrl=null!==(P=st.continueUrl)&&void 0!==P?P:null,this.languageCode=null!==(J=st.languageCode)&&void 0!==J?J:null,this.tenantId=null!==(Oe=st.tenantId)&&void 0!==Oe?Oe:null}static parseLink(p){const m=function nc(_){const p=(0,B.zd)((0,B.pd)(_)).link,m=p?(0,B.zd)((0,B.pd)(p)).deep_link_id:null,E=(0,B.zd)((0,B.pd)(_)).deep_link_id;return(E?(0,B.zd)((0,B.pd)(E)).link:null)||E||m||p||_}(p);try{return new to(m)}catch{return null}}}let ja=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(m,E){return Yo._fromEmailAndPassword(m,E)}static credentialWithLink(m,E){const S=to.parseLink(E);return X(S,"argument-error"),Yo._fromEmailAndCode(m,S.code,S.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class br{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class no extends br{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class as extends no{static credentialFromJSON(p){const m="string"==typeof p?JSON.parse(p):p;return X("providerId"in m&&"signInMethod"in m,"argument-error"),Gi._fromParams(m)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return X(p.idToken||p.accessToken,"argument-error"),Gi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return as.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return as.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:m,oauthAccessToken:E,oauthTokenSecret:S,pendingToken:P,nonce:J,providerId:Oe}=p;if(!E&&!S&&!m&&!P||!Oe)return null;try{return new as(Oe)._credential({idToken:m,accessToken:E,nonce:J,pendingToken:P})}catch{return null}}}let rc=(()=>{class _ extends no{constructor(){super("facebook.com")}static credential(m){return Gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Ha=(()=>{class _ extends no{constructor(){super("google.com"),this.addScope("profile")}static credential(m,E){return Gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:m,accessToken:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:E,oauthAccessToken:S}=m;if(!E&&!S)return null;try{return _.credential(E,S)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),qu=(()=>{class _ extends no{constructor(){super("github.com")}static credential(m){return Gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:m})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m||!("oauthAccessToken"in m)||!m.oauthAccessToken)return null;try{return _.credential(m.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class ro extends zr{constructor(p,m){super(p,p),this.pendingToken=m}_getIdTokenResponse(p){return Ss(p,this.buildRequest())}_linkToIdToken(p,m){const E=this.buildRequest();return E.idToken=m,Ss(p,E)}_getReauthenticationResolver(p){const m=this.buildRequest();return m.autoCreate=!1,Ss(p,m)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const m="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:S,pendingToken:P}=m;return E&&S&&P&&E===S?new ro(E,P):null}static _create(p,m){return new ro(p,m)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class ui extends br{constructor(p){X(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return ui.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return ui.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const m=ro.fromJSON(p);return X(m,"argument-error"),m}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:m,providerId:E}=p;if(!m||!E)return null;try{return ro._create(E,m)}catch{return null}}}let Wi=(()=>{class _ extends no{constructor(){super("twitter.com")}static credential(m,E){return Gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:m,oauthTokenSecret:E})}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthAccessToken:E,oauthTokenSecret:S}=m;if(!E||!S)return null;try{return _.credential(E,S)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Zr(_,p){return Ms.apply(this,arguments)}function Ms(){return(Ms=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signUp",wt(_,p))})).apply(this,arguments)}class wi{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,m,E,S=!1){return(0,h.Z)(function*(){const P=yield xt._fromIdTokenResponse(p,E,S),J=io(E);return new wi({user:P,providerId:J,_tokenResponse:E,operationType:m})})()}static _forOperation(p,m,E){return(0,h.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const S=io(E);return new wi({user:p,providerId:S,_tokenResponse:E,operationType:m})})()}}function io(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function ip(_){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,h.Z)(function*(_){var p;const m=Et(_);if(yield m._initializationPromise,null!==(p=m.currentUser)&&void 0!==p&&p.isAnonymous)return new wi({user:m.currentUser,providerId:null,operationType:"signIn"});const E=yield Zr(m,{returnSecureToken:!0}),S=yield wi._fromIdTokenResponse(m,"signIn",E,!0);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class Pn extends B.ZR{constructor(p,m,E,S){var P;super(m.code,m.message),this.operationType=E,this.user=S,Object.setPrototypeOf(this,Pn.prototype),this.customData={appName:p.name,tenantId:null!==(P=p.tenantId)&&void 0!==P?P:void 0,_serverResponse:m.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,m,E,S){return new Pn(p,m,E,S)}}function sc(_,p,m,E){return("reauthenticate"===p?m._getReauthenticationResolver(_):m._getIdTokenResponse(_)).catch(P=>{throw"auth/multi-factor-auth-required"===P.code?Pn._fromErrorAndOperation(_,P,p,E):P})}function Hd(_){return new Set(_.map(({providerId:p})=>p).filter(p=>!!p))}function Ei(_,p){return vr.apply(this,arguments)}function vr(){return(vr=(0,h.Z)(function*(_,p){const m=(0,B.m9)(_);yield Mi(!0,m,p);const{providerUserInfo:E}=yield Je(m.auth,{idToken:yield m.getIdToken(),deleteProvider:[p]}),S=Hd(E||[]);return m.providerData=m.providerData.filter(P=>S.has(P.providerId)),S.has("phone")||(m.phoneNumber=null),yield m.auth._persistUserIfCurrent(m),m})).apply(this,arguments)}function Ga(_,p){return so.apply(this,arguments)}function so(){return(so=(0,h.Z)(function*(_,p,m=!1){const E=yield Nt(_,p._linkToIdToken(_.auth,yield _.getIdToken()),m);return wi._forOperation(_,"link",E)})).apply(this,arguments)}function Mi(_,p,m){return nn.apply(this,arguments)}function nn(){return(nn=(0,h.Z)(function*(_,p,m){yield $r(p);const S=!1===_?"provider-already-linked":"no-such-provider";X(Hd(p.providerData).has(m)===_,p.auth,S)})).apply(this,arguments)}function Ku(_,p){return us.apply(this,arguments)}function us(){return(us=(0,h.Z)(function*(_,p,m=!1){const{auth:E}=_,S="reauthenticate";try{const P=yield Nt(_,sc(E,S,p,_),m);X(P.idToken,E,"internal-error");const J=mt(P.idToken);X(J,E,"internal-error");const{sub:Oe}=J;return X(_.uid===Oe,E,"user-mismatch"),wi._forOperation(_,S,P)}catch(P){throw"auth/user-not-found"===P?.code&&Xe(E,"user-mismatch"),P}})).apply(this,arguments)}function Yu(_,p){return li.apply(this,arguments)}function li(){return(li=(0,h.Z)(function*(_,p,m=!1){const E="signIn",S=yield sc(_,E,p),P=yield wi._fromIdTokenResponse(_,E,S);return m||(yield _._updateCurrentUser(P.user)),P})).apply(this,arguments)}function Jo(_,p){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,h.Z)(function*(_,p){return Yu(Et(_),p)})).apply(this,arguments)}function kt(_,p){return Xo.apply(this,arguments)}function Xo(){return(Xo=(0,h.Z)(function*(_,p){const m=(0,B.m9)(_);return yield Mi(!1,m,p.providerId),Ga(m,p)})).apply(this,arguments)}function sp(_,p){return ea.apply(this,arguments)}function ea(){return(ea=(0,h.Z)(function*(_,p){return Ku((0,B.m9)(_),p)})).apply(this,arguments)}function oc(_,p){return ta.apply(this,arguments)}function ta(){return(ta=(0,h.Z)(function*(_,p){return sn(_,"POST","/v1/accounts:signInWithCustomToken",wt(_,p))})).apply(this,arguments)}function xs(_,p){return na.apply(this,arguments)}function na(){return(na=(0,h.Z)(function*(_,p){const m=Et(_),E=yield oc(m,{token:p,returnSecureToken:!0}),S=yield wi._fromIdTokenResponse(m,"signIn",E);return yield m._updateCurrentUser(S.user),S})).apply(this,arguments)}class oo{constructor(p,m){this.factorId=p,this.uid=m.mfaEnrollmentId,this.enrollmentTime=new Date(m.enrolledAt).toUTCString(),this.displayName=m.displayName}static _fromServerResponse(p,m){return"phoneInfo"in m?Me._fromServerResponse(p,m):Xe(p,"internal-error")}}class Me extends oo{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,m){return new Me(m)}}function Kt(_,p,m){var E;X((null===(E=m.url)||void 0===E?void 0:E.length)>0,_,"invalid-continue-uri"),X(typeof m.dynamicLinkDomain>"u"||m.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),p.continueUrl=m.url,p.dynamicLinkDomain=m.dynamicLinkDomain,p.canHandleCodeInApp=m.handleCodeInApp,m.iOS&&(X(m.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),p.iOSBundleId=m.iOS.bundleId),m.android&&(X(m.android.packageName.length>0,_,"missing-android-pkg-name"),p.androidInstallApp=m.android.installApp,p.androidMinimumVersionCode=m.android.minimumVersion,p.androidPackageName=m.android.packageName)}function Gd(_,p,m){return ao.apply(this,arguments)}function ao(){return(ao=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_),S={requestType:"PASSWORD_RESET",email:p};m&&Kt(E,S,m),yield jd(E,S)})).apply(this,arguments)}function Xn(_,p,m){return uo.apply(this,arguments)}function uo(){return(uo=(0,h.Z)(function*(_,p,m){yield si((0,B.m9)(_),{oobCode:p,newPassword:m})})).apply(this,arguments)}function Wa(_,p){return jr.apply(this,arguments)}function jr(){return(jr=(0,h.Z)(function*(_,p){yield $d((0,B.m9)(_),{oobCode:p})})).apply(this,arguments)}function za(_,p){return lo.apply(this,arguments)}function lo(){return(lo=(0,h.Z)(function*(_,p){const m=(0,B.m9)(_),E=yield si(m,{oobCode:p}),S=E.requestType;switch(X(S,m,"internal-error"),S){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":X(E.newEmail,m,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":X(E.mfaInfo,m,"internal-error");default:X(E.email,m,"internal-error")}let P=null;return E.mfaInfo&&(P=oo._fromServerResponse(Et(m),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:P},operation:S}})).apply(this,arguments)}function Wd(_,p){return ra.apply(this,arguments)}function ra(){return(ra=(0,h.Z)(function*(_,p){const{data:m}=yield za((0,B.m9)(_),p);return m.email})).apply(this,arguments)}function op(_,p,m){return Rs.apply(this,arguments)}function Rs(){return(Rs=(0,h.Z)(function*(_,p,m){const E=Et(_),S=yield Zr(E,{returnSecureToken:!0,email:p,password:m}),P=yield wi._fromIdTokenResponse(E,"signIn",S);return yield E._updateCurrentUser(P.user),P})).apply(this,arguments)}function er(_,p,m){return Jo((0,B.m9)(_),ja.credential(p,m))}function xi(_,p,m){return ia.apply(this,arguments)}function ia(){return(ia=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_),S={requestType:"EMAIL_SIGNIN",email:p};X(m.handleCodeInApp,E,"argument-error"),m&&Kt(E,S,m),yield oi(E,S)})).apply(this,arguments)}function sa(_,p){return"EMAIL_SIGNIN"===to.parseLink(p)?.operation}function zi(_,p,m){return ac.apply(this,arguments)}function ac(){return(ac=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_),S=ja.credentialWithLink(p,m||ie());return X(S._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Jo(E,S)})).apply(this,arguments)}function Qu(_,p){return uc.apply(this,arguments)}function uc(){return(uc=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:createAuthUri",wt(_,p))})).apply(this,arguments)}function zd(_,p){return co.apply(this,arguments)}function co(){return(co=(0,h.Z)(function*(_,p){const E={identifier:p,continueUri:he()?ie():"http://localhost"},{signinMethods:S}=yield Qu((0,B.m9)(_),E);return S||[]})).apply(this,arguments)}function Ju(_,p){return oa.apply(this,arguments)}function oa(){return(oa=(0,h.Z)(function*(_,p){const m=(0,B.m9)(_),S={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};p&&Kt(m.auth,S,p);const{email:P}=yield Hi(m.auth,S);P!==_.email&&(yield _.reload())})).apply(this,arguments)}function Xu(_,p,m){return aa.apply(this,arguments)}function aa(){return(aa=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_),P={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:p};m&&Kt(E.auth,P,m);const{email:J}=yield Gu(E.auth,P);J!==_.email&&(yield _.reload())})).apply(this,arguments)}function lc(_,p){return ho.apply(this,arguments)}function ho(){return(ho=(0,h.Z)(function*(_,p){return gt(_,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function qd(_,p){return ua.apply(this,arguments)}function ua(){return(ua=(0,h.Z)(function*(_,{displayName:p,photoURL:m}){if(void 0===p&&void 0===m)return;const E=(0,B.m9)(_),P={idToken:yield E.getIdToken(),displayName:p,photoUrl:m,returnSecureToken:!0},J=yield Nt(E,lc(E.auth,P));E.displayName=J.displayName||null,E.photoURL=J.photoUrl||null;const Oe=E.providerData.find(({providerId:st})=>"password"===st);Oe&&(Oe.displayName=E.displayName,Oe.photoURL=E.photoURL),yield E._updateTokensIfNecessary(J)})).apply(this,arguments)}function Zd(_,p){return ls((0,B.m9)(_),p,null)}function cc(_,p){return ls((0,B.m9)(_),null,p)}function ls(_,p,m){return cs.apply(this,arguments)}function cs(){return(cs=(0,h.Z)(function*(_,p,m){const{auth:E}=_,P={idToken:yield _.getIdToken(),returnSecureToken:!0};p&&(P.email=p),m&&(P.password=m);const J=yield Nt(_,Hu(E,P));yield _._updateTokensIfNecessary(J,!0)})).apply(this,arguments)}class xn{constructor(p,m,E={}){this.isNewUser=p,this.providerId=m,this.profile=E}}class qi extends xn{constructor(p,m,E,S){super(p,m,E),this.username=S}}class An extends xn{constructor(p,m){super(p,"facebook.com",m)}}class hc extends qi{constructor(p,m){super(p,"github.com",m,"string"==typeof m?.login?m?.login:null)}}class el extends xn{constructor(p,m){super(p,"google.com",m)}}class Kd extends qi{constructor(p,m,E){super(p,"twitter.com",m,E)}}function tl(_){const{user:p,_tokenResponse:m}=_;return p.isAnonymous&&!m?{providerId:null,isNewUser:!1,profile:null}:function dc(_){var p,m;if(!_)return null;const{providerId:E}=_,S=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},P=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!E&&_?.idToken){const J=null===(m=null===(p=mt(_.idToken))||void 0===p?void 0:p.firebase)||void 0===m?void 0:m.sign_in_provider;if(J)return new xn(P,"anonymous"!==J&&"custom"!==J?J:null)}if(!E)return null;switch(E){case"facebook.com":return new An(P,S);case"github.com":return new hc(P,S);case"google.com":return new el(P,S);case"twitter.com":return new Kd(P,S,_.screenName||null);case"custom":case"anonymous":return new xn(P,null);default:return new xn(P,E,S)}}(m)}class ci{constructor(p,m,E){this.type=p,this.credential=m,this.auth=E}static _fromIdtoken(p,m){return new ci("enroll",p,m)}static _fromMfaPendingCredential(p){return new ci("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var m,E;if(p?.multiFactorSession){if(null!==(m=p.multiFactorSession)&&void 0!==m&&m.pendingCredential)return ci._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return ci._fromIdtoken(p.multiFactorSession.idToken)}return null}}class il{constructor(p,m,E){this.session=p,this.hints=m,this.signInResolver=E}static _fromError(p,m){const E=Et(p),S=m.customData._serverResponse,P=(S.mfaInfo||[]).map(Oe=>oo._fromServerResponse(E,Oe));X(S.mfaPendingCredential,E,"internal-error");const J=ci._fromMfaPendingCredential(S.mfaPendingCredential);return new il(J,P,function(){var Oe=(0,h.Z)(function*(st){const It=yield st._process(E,J);delete S.mfaInfo,delete S.mfaPendingCredential;const qt=Object.assign(Object.assign({},S),{idToken:It.idToken,refreshToken:It.refreshToken});switch(m.operationType){case"signIn":const mn=yield wi._fromIdTokenResponse(E,m.operationType,qt);return yield E._updateCurrentUser(mn.user),mn;case"reauthenticate":return X(m.user,E,"internal-error"),wi._forOperation(m.user,m.operationType,qt);default:Xe(E,"internal-error")}});return function(st){return Oe.apply(this,arguments)}}())}resolveSignIn(p){var m=this;return(0,h.Z)(function*(){return m.signInResolver(p)})()}}function gc(_,p){var m;const E=(0,B.m9)(_),S=p;return X(p.customData.operationType,E,"argument-error"),X(null===(m=S.customData._serverResponse)||void 0===m?void 0:m.mfaPendingCredential,E,"argument-error"),il._fromError(E,S)}function Un(_,p){return gt(_,"POST","/v2/accounts/mfaEnrollment:start",wt(_,p))}class Ya{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(m=>{m.mfaInfo&&(this.enrolledFactors=m.mfaInfo.map(E=>oo._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Ya(p)}getSession(){var p=this;return(0,h.Z)(function*(){return ci._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,m){var E=this;return(0,h.Z)(function*(){const S=p,P=yield E.getSession(),J=yield Nt(E.user,S._process(E.user.auth,P,m));return yield E.user._updateTokensIfNecessary(J),E.user.reload()})()}unenroll(p){var m=this;return(0,h.Z)(function*(){const E="string"==typeof p?p:p.uid,S=yield m.user.getIdToken();try{const P=yield Nt(m.user,function Ka(_,p){return gt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(_,p))}(m.user.auth,{idToken:S,mfaEnrollmentId:E}));m.enrolledFactors=m.enrolledFactors.filter(({uid:J})=>J!==E),yield m.user._updateTokensIfNecessary(P),yield m.user.reload()}catch(P){throw P}})()}}const Yd=new WeakMap;function Qa(_){const p=(0,B.m9)(_);return Yd.has(p)||Yd.set(p,Ya._fromUser(p)),Yd.get(p)}const Zi="__sak";class la{constructor(p,m){this.storageRetriever=p,this.type=m}_isAvailable(){try{return this.storage?(this.storage.setItem(Zi,"1"),this.storage.removeItem(Zi),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,m){return this.storage.setItem(p,JSON.stringify(m)),Promise.resolve()}_get(p){const m=this.storage.getItem(p);return Promise.resolve(m?JSON.parse(m):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const tr=(()=>{class _ extends la{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(m,E)=>this.onStorageEvent(m,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function sl(){const _=(0,B.z$)();return L(_)||Le(_)}()&&function $i(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=fn(),this._shouldAllowMigration=!0}forAllChangedKeys(m){for(const E of Object.keys(this.listeners)){const S=this.storage.getItem(E),P=this.localCache[E];S!==P&&m(E,P,S)}}onStorageEvent(m,E=!1){if(!m.key)return void this.forAllChangedKeys((Oe,st,It)=>{this.notifyListeners(Oe,It)});const S=m.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Oe=this.storage.getItem(S);if(m.newValue!==Oe)null!==m.newValue?this.storage.setItem(S,m.newValue):this.storage.removeItem(S);else if(this.localCache[S]===m.newValue&&!E)return}const P=()=>{const Oe=this.storage.getItem(S);!E&&this.localCache[S]===Oe||this.notifyListeners(S,Oe)},J=this.storage.getItem(S);!function Ft(){return(0,B.w1)()&&10===document.documentMode}()||J===m.newValue||m.newValue===m.oldValue?P():setTimeout(P,10)}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((m,E,S)=>{this.onStorageEvent(new StorageEvent("storage",{key:m,oldValue:E,newValue:S}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(m,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[m]||(this.listeners[m]=new Set,this.localCache[m]=this.storage.getItem(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(m,E){var S=()=>super._set,P=this;return(0,h.Z)(function*(){yield S().call(P,m,E),P.localCache[m]=JSON.stringify(E)})()}_get(m){var E=()=>super._get,S=this;return(0,h.Z)(function*(){const P=yield E().call(S,m);return S.localCache[m]=JSON.stringify(P),P})()}_remove(m){var E=()=>super._remove,S=this;return(0,h.Z)(function*(){yield E().call(S,m),delete S.localCache[m]})()}}return _.type="LOCAL",_})(),ds=(()=>{class _ extends la{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(m,E){}_removeListener(m,E){}}return _.type="SESSION",_})();let da=(()=>{class _{constructor(m){this.eventTarget=m,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(m){const E=this.receivers.find(P=>P.isListeningto(m));if(E)return E;const S=new _(m);return this.receivers.push(S),S}isListeningto(m){return this.eventTarget===m}handleEvent(m){var E=this;return(0,h.Z)(function*(){const S=m,{eventId:P,eventType:J,data:Oe}=S.data,st=E.handlersMap[J];if(!st?.size)return;S.ports[0].postMessage({status:"ack",eventId:P,eventType:J});const It=Array.from(st).map(function(){var mn=(0,h.Z)(function*(hi){return hi(S.origin,Oe)});return function(hi){return mn.apply(this,arguments)}}()),qt=yield function ol(_){return Promise.all(_.map(function(){var p=(0,h.Z)(function*(m){try{return{fulfilled:!0,value:yield m}}catch(E){return{fulfilled:!1,reason:E}}});return function(m){return p.apply(this,arguments)}}()))}(It);S.ports[0].postMessage({status:"done",eventId:P,eventType:J,response:qt})})()}_subscribe(m,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[m]||(this.handlersMap[m]=new Set),this.handlersMap[m].add(E)}_unsubscribe(m,E){this.handlersMap[m]&&E&&this.handlersMap[m].delete(E),(!E||0===this.handlersMap[m].size)&&delete this.handlersMap[m],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function mo(_="",p=10){let m="";for(let E=0;E<p;E++)m+=Math.floor(10*Math.random());return _+m}class Xd{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,m,E=50){var S=this;return(0,h.Z)(function*(){const P=typeof MessageChannel<"u"?new MessageChannel:null;if(!P)throw new Error("connection_unavailable");let J,Oe;return new Promise((st,It)=>{const qt=mo("",20);P.port1.start();const mn=setTimeout(()=>{It(new Error("unsupported_event"))},E);Oe={messageChannel:P,onMessage(hi){const Ci=hi;if(Ci.data.eventId===qt)switch(Ci.data.status){case"ack":clearTimeout(mn),J=setTimeout(()=>{It(new Error("timeout"))},3e3);break;case"done":clearTimeout(J),st(Ci.data.response);break;default:clearTimeout(mn),clearTimeout(J),It(new Error("invalid_response"))}}},S.handlers.add(Oe),P.port1.addEventListener("message",Oe.onMessage),S.target.postMessage({eventType:p,eventId:qt,data:m},[P.port2])}).finally(()=>{Oe&&S.removeMessageHandler(Oe)})})()}}function Bn(){return window}function Kr(){return typeof Bn().WorkerGlobalScope<"u"&&"function"==typeof Bn().importScripts}function Ki(){return(Ki=(0,h.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const ha="firebaseLocalStorageDb",fa="firebaseLocalStorage",yo="fbase_key";class _o{constructor(p){this.request=p}toPromise(){return new Promise((p,m)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{m(this.request.error)})})}}function vo(_,p){return _.transaction([fa],p?"readwrite":"readonly").objectStore(fa)}function Xa(){const _=indexedDB.open(ha,1);return new Promise((p,m)=>{_.addEventListener("error",()=>{m(_.error)}),_.addEventListener("upgradeneeded",()=>{const E=_.result;try{E.createObjectStore(fa,{keyPath:yo})}catch(S){m(S)}}),_.addEventListener("success",(0,h.Z)(function*(){const E=_.result;E.objectStoreNames.contains(fa)?p(E):(E.close(),yield function vc(){const _=indexedDB.deleteDatabase(ha);return new _o(_).toPromise()}(),p(yield Xa()))}))})}function pa(_,p,m){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,h.Z)(function*(_,p,m){const E=vo(_,!0).put({[yo]:p,value:m});return new _o(E).toPromise()})).apply(this,arguments)}function wo(){return(wo=(0,h.Z)(function*(_,p){const m=vo(_,!1).get(p),E=yield new _o(m).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function eu(_,p){const m=vo(_,!0).delete(p);return new _o(m).toPromise()}const Io=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var m=this;return(0,h.Z)(function*(){return m.db||(m.db=yield Xa()),m.db})()}_withRetries(m){var E=this;return(0,h.Z)(function*(){let S=0;for(;;)try{const P=yield E._openDb();return yield m(P)}catch(P){if(S++>3)throw P;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var m=this;return(0,h.Z)(function*(){return Kr()?m.initializeReceiver():m.initializeSender()})()}initializeReceiver(){var m=this;return(0,h.Z)(function*(){m.receiver=da._getInstance(function Ja(){return Kr()?self:null}()),m.receiver._subscribe("keyChanged",function(){var E=(0,h.Z)(function*(S,P){return{keyProcessed:(yield m._poll()).includes(P.key)}});return function(S,P){return E.apply(this,arguments)}}()),m.receiver._subscribe("ping",function(){var E=(0,h.Z)(function*(S,P){return["keyChanged"]});return function(S,P){return E.apply(this,arguments)}}())})()}initializeSender(){var m=this;return(0,h.Z)(function*(){var E,S;if(m.activeServiceWorker=yield function _c(){return Ki.apply(this,arguments)}(),!m.activeServiceWorker)return;m.sender=new Xd(m.activeServiceWorker);const P=yield m.sender._send("ping",{},800);!P||(null===(E=P[0])||void 0===E?void 0:E.fulfilled)&&(null===(S=P[0])||void 0===S?void 0:S.value.includes("keyChanged"))&&(m.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(m){var E=this;return(0,h.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function al(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:m},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,h.Z)(function*(){try{if(!indexedDB)return!1;const m=yield Xa();return yield pa(m,Zi,"1"),yield eu(m,Zi),!0}catch{}return!1})()}_withPendingWrite(m){var E=this;return(0,h.Z)(function*(){E.pendingWrites++;try{yield m()}finally{E.pendingWrites--}})()}_set(m,E){var S=this;return(0,h.Z)(function*(){return S._withPendingWrite((0,h.Z)(function*(){return yield S._withRetries(P=>pa(P,m,E)),S.localCache[m]=E,S.notifyServiceWorker(m)}))})()}_get(m){var E=this;return(0,h.Z)(function*(){const S=yield E._withRetries(P=>function eh(_,p){return wo.apply(this,arguments)}(P,m));return E.localCache[m]=S,S})()}_remove(m){var E=this;return(0,h.Z)(function*(){return E._withPendingWrite((0,h.Z)(function*(){return yield E._withRetries(S=>eu(S,m)),delete E.localCache[m],E.notifyServiceWorker(m)}))})()}_poll(){var m=this;return(0,h.Z)(function*(){const E=yield m._withRetries(J=>{const Oe=vo(J,!1).getAll();return new _o(Oe).toPromise()});if(!E)return[];if(0!==m.pendingWrites)return[];const S=[],P=new Set;for(const{fbase_key:J,value:Oe}of E)P.add(J),JSON.stringify(m.localCache[J])!==JSON.stringify(Oe)&&(m.notifyListeners(J,Oe),S.push(J));for(const J of Object.keys(m.localCache))m.localCache[J]&&!P.has(J)&&(m.notifyListeners(J,null),S.push(J));return S})()}notifyListeners(m,E){this.localCache[m]=E;const S=this.listeners[m];if(S)for(const P of Array.from(S))P(E)}startPolling(){var m=this;this.stopPolling(),this.pollTimer=setInterval((0,h.Z)(function*(){return m._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(m,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[m]||(this.listeners[m]=new Set,this._get(m)),this.listeners[m].add(E)}_removeListener(m,E){this.listeners[m]&&(this.listeners[m].delete(E),0===this.listeners[m].size&&delete this.listeners[m]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})();function th(_,p){return gt(_,"POST","/v2/accounts/mfaSignIn:start",wt(_,p))}function Or(){return(Or=(0,h.Z)(function*(_){return(yield gt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Os(_){return new Promise((p,m)=>{const E=document.createElement("script");E.setAttribute("src",_),E.onload=p,E.onerror=S=>{const P=Ae("internal-error");P.customData=S,m(P)},E.type="text/javascript",E.charset="UTF-8",function Co(){var _,p;return null!==(p=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==p?p:document}().appendChild(E)})}function bo(_){return`__${_}${Math.floor(1e6*Math.random())}`}const Ni=1e12;class wc{constructor(p){this.auth=p,this.counter=Ni,this._widgets=new Map}render(p,m){const E=this.counter;return this._widgets.set(E,new Dn(p,this.auth.name,m||{})),this.counter++,E}reset(p){var m;const E=p||Ni;null===(m=this._widgets.get(E))||void 0===m||m.delete(),this._widgets.delete(E)}getResponse(p){var m;return(null===(m=this._widgets.get(p||Ni))||void 0===m?void 0:m.getResponse())||""}execute(p){var m=this;return(0,h.Z)(function*(){var E;return null===(E=m._widgets.get(p||Ni))||void 0===E||E.execute(),""})()}}class Dn{constructor(p,m,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const S="string"==typeof p?document.getElementById(p):p;X(S,"argument-error",{appName:m}),this.container=S,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function ap(_){const p=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<_;E++)p.push(m.charAt(Math.floor(Math.random()*m.length)));return p.join("")}(50);const{callback:p,"expired-callback":m}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,m)try{m()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const nh=bo("rcb"),f0=new Ee(3e4,6e4);class Pm{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Bn().grecaptcha)||void 0===p||!p.render)}load(p,m=""){return X(function rh(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(m),p,"argument-error"),this.shouldResolveImmediately(m)?Promise.resolve(Bn().grecaptcha):new Promise((E,S)=>{const P=Bn().setTimeout(()=>{S(Ae(p,"network-request-failed"))},f0.get());Bn()[nh]=()=>{Bn().clearTimeout(P),delete Bn()[nh];const Oe=Bn().grecaptcha;if(!Oe)return void S(Ae(p,"internal-error"));const st=Oe.render;Oe.render=(It,qt)=>{const mn=st(It,qt);return this.counter++,mn},this.hostLanguage=m,E(Oe)},Os(`https://www.google.com/recaptcha/api.js??${(0,B.xO)({onload:nh,render:"explicit",hl:m})}`).catch(()=>{clearTimeout(P),S(Ae(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var m;return!(null===(m=Bn().grecaptcha)||void 0===m||!m.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class p0{load(p){return(0,h.Z)(function*(){return new wc(p)})()}clearedOneInstance(){}}const nu="recaptcha",g0={theme:"light",type:"image"};class km{constructor(p,m=Object.assign({},g0),E){this.parameters=m,this.type=nu,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Et(E),this.isInvisible="invisible"===this.parameters.size,X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const S="string"==typeof p?document.getElementById(p):p;X(S,this.auth,"argument-error"),this.container=S,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new p0:new Pm,this.validateStartingState()}verify(){var p=this;return(0,h.Z)(function*(){p.assertNotDestroyed();const m=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(m)||new Promise(P=>{const J=Oe=>{!Oe||(p.tokenChangeListeners.delete(J),P(Oe))};p.tokenChangeListeners.add(J),p.isInvisible&&E.execute(m)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){X(!this.parameters.sitekey,this.auth,"argument-error"),X(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),X(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return m=>{if(this.tokenChangeListeners.forEach(E=>E(m)),"function"==typeof p)p(m);else if("string"==typeof p){const E=Bn()[p];"function"==typeof E&&E(m)}}}assertNotDestroyed(){X(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,h.Z)(function*(){if(yield p.init(),!p.widgetId){let m=p.container;if(!p.isInvisible){const E=document.createElement("div");m.appendChild(E),m=E}p.widgetId=p.getAssertedRecaptcha().render(m,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,h.Z)(function*(){X(he()&&!Kr(),p.auth,"internal-error"),yield function wr(){let _=null;return new Promise(p=>{"complete"!==document.readyState?(_=()=>p(),window.addEventListener("load",_)):p()}).catch(p=>{throw _&&window.removeEventListener("load",_),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const m=yield function tu(_){return Or.apply(this,arguments)}(p.auth);X(m,p.auth,"internal-error"),p.parameters.sitekey=m})()}getAssertedRecaptcha(){return X(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class dn{constructor(p,m){this.verificationId=p,this.onConfirmation=m}confirm(p){const m=eo._fromVerification(this.verificationId,p);return this.onConfirmation(m)}}function Yi(_,p,m){return ct.apply(this,arguments)}function ct(){return(ct=(0,h.Z)(function*(_,p,m){const E=Et(_),S=yield Pr(E,p,(0,B.m9)(m));return new dn(S,P=>Jo(E,P))})).apply(this,arguments)}function Oi(_,p,m){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_);yield Mi(!1,E,"phone");const S=yield Pr(E.auth,p,(0,B.m9)(m));return new dn(S,P=>kt(E,P))})).apply(this,arguments)}function Qi(_,p,m){return Ps.apply(this,arguments)}function Ps(){return(Ps=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_),S=yield Pr(E.auth,p,(0,B.m9)(m));return new dn(S,P=>sp(E,P))})).apply(this,arguments)}function Pr(_,p,m){return ks.apply(this,arguments)}function ks(){return(ks=(0,h.Z)(function*(_,p,m){var E;const S=yield m.verify();try{let P;if(X("string"==typeof S,_,"argument-error"),X(m.type===nu,_,"argument-error"),P="string"==typeof p?{phoneNumber:p}:p,"session"in P){const J=P.session;if("phoneNumber"in P)return X("enroll"===J.type,_,"internal-error"),(yield Un(_,{idToken:J.credential,phoneEnrollmentInfo:{phoneNumber:P.phoneNumber,recaptchaToken:S}})).phoneSessionInfo.sessionInfo;{X("signin"===J.type,_,"internal-error");const Oe=(null===(E=P.multiFactorHint)||void 0===E?void 0:E.uid)||P.multiFactorUid;return X(Oe,_,"missing-multi-factor-info"),(yield th(_,{mfaPendingCredential:J.credential,mfaEnrollmentId:Oe,phoneSignInInfo:{recaptchaToken:S}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:J}=yield Xf(_,{phoneNumber:P.phoneNumber,recaptchaToken:S});return J}}finally{m._reset()}})).apply(this,arguments)}function Ec(_,p){return Ic.apply(this,arguments)}function Ic(){return(Ic=(0,h.Z)(function*(_,p){yield Ga((0,B.m9)(_),p)})).apply(this,arguments)}let ih=(()=>{class _{constructor(m){this.providerId=_.PROVIDER_ID,this.auth=Et(m)}verifyPhoneNumber(m,E){return Pr(this.auth,m,(0,B.m9)(E))}static credential(m,E){return eo._fromVerification(m,E)}static credentialFromResult(m){return _.credentialFromTaggedObject(m)}static credentialFromError(m){return _.credentialFromTaggedObject(m.customData||{})}static credentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{phoneNumber:E,temporaryProof:S}=m;return E&&S?eo._fromTokenResponse(E,S):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function fs(_,p){return p?We(p):(X(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Dc extends zr{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Ss(p,this._buildIdpRequest())}_linkToIdToken(p,m){return Ss(p,this._buildIdpRequest(m))}_getReauthenticationResolver(p){return Ss(p,this._buildIdpRequest())}_buildIdpRequest(p){const m={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(m.idToken=p),m}}function Fs(_){return Yu(_.auth,new Dc(_),_.bypassAuthState)}function ft(_){const{auth:p,user:m}=_;return X(m,p,"internal-error"),Ku(m,new Dc(_),_.bypassAuthState)}function cl(_){return Pi.apply(this,arguments)}function Pi(){return(Pi=(0,h.Z)(function*(_){const{auth:p,user:m}=_;return X(m,p,"internal-error"),Ga(m,new Dc(_),_.bypassAuthState)})).apply(this,arguments)}class ru{constructor(p,m,E,S,P=!1){this.auth=p,this.resolver=E,this.user=S,this.bypassAuthState=P,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(m)?m:[m]}execute(){var p=this;return new Promise(function(){var m=(0,h.Z)(function*(E,S){p.pendingPromise={resolve:E,reject:S};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(P){p.reject(P)}});return function(E,S){return m.apply(this,arguments)}}())}onAuthEvent(p){var m=this;return(0,h.Z)(function*(){const{urlResponse:E,sessionId:S,postBody:P,tenantId:J,error:Oe,type:st}=p;if(Oe)return void m.reject(Oe);const It={auth:m.auth,requestUri:E,sessionId:S,tenantId:J||void 0,postBody:P||void 0,user:m.user,bypassAuthState:m.bypassAuthState};try{m.resolve(yield m.getIdpTask(st)(It))}catch(qt){m.reject(qt)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Fs;case"linkViaPopup":case"linkViaRedirect":return cl;case"reauthViaPopup":case"reauthViaRedirect":return ft;default:Xe(this.auth,"internal-error")}}resolve(p){pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){pe(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const ga=new Ee(2e3,1e4);function pr(_,p,m){return ma.apply(this,arguments)}function ma(){return(ma=(0,h.Z)(function*(_,p,m){const E=Et(_);we(_,p,br);const S=fs(E,m);return new su(E,"signInViaPopup",p,S).executeNotNull()})).apply(this,arguments)}function iu(_,p,m){return ya.apply(this,arguments)}function ya(){return(ya=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_);we(E.auth,p,br);const S=fs(E.auth,m);return new su(E.auth,"reauthViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}function sh(_,p,m){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_);we(E.auth,p,br);const S=fs(E.auth,m);return new su(E.auth,"linkViaPopup",p,S,E).executeNotNull()})).apply(this,arguments)}let su=(()=>{class _ extends ru{constructor(m,E,S,P,J){super(m,E,P,J),this.provider=S,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var m=this;return(0,h.Z)(function*(){const E=yield m.execute();return X(E,m.auth,"internal-error"),E})()}onExecution(){var m=this;return(0,h.Z)(function*(){pe(1===m.filter.length,"Popup operations only handle one event");const E=mo();m.authWindow=yield m.resolver._openPopup(m.auth,m.provider,m.filter[0],E),m.authWindow.associatedEvent=E,m.resolver._originValidation(m.auth).catch(S=>{m.reject(S)}),m.resolver._isIframeWebStorageSupported(m.auth,S=>{S||m.reject(Ae(m.auth,"web-storage-unsupported"))}),m.pollUserCancellation()})()}get eventId(){var m;return(null===(m=this.authWindow)||void 0===m?void 0:m.associatedEvent)||null}cancel(){this.reject(Ae(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const m=()=>{var E,S;this.pollId=null!==(S=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==S&&S.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ae(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(m,ga.get())};m()}}return _.currentPopupAction=null,_})();const Ls=new Map;class Di extends ru{constructor(p,m,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],m,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,m=this;return(0,h.Z)(function*(){let E=Ls.get(m.auth._key());if(!E){try{const P=(yield function ou(_,p){return ps.apply(this,arguments)}(m.resolver,m.auth))?yield p().call(m):null;E=()=>Promise.resolve(P)}catch(S){E=()=>Promise.reject(S)}Ls.set(m.auth._key(),E)}return m.bypassAuthState||Ls.set(m.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var m=()=>super.onAuthEvent,E=this;return(0,h.Z)(function*(){if("signInViaRedirect"===p.type)return m().call(E,p);if("unknown"!==p.type){if(p.eventId){const S=yield E.auth._redirectUserForId(p.eventId);if(S)return E.user=S,m().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,h.Z)(function*(){})()}cleanUp(){}}function ps(){return(ps=(0,h.Z)(function*(_,p){const m=Bs(p),E=Us(_);if(!(yield E._isAvailable()))return!1;const S="true"===(yield E._get(m));return yield E._remove(m),S})).apply(this,arguments)}function Vs(_,p){return kr.apply(this,arguments)}function kr(){return(kr=(0,h.Z)(function*(_,p){return Us(_)._set(Bs(p),"true")})).apply(this,arguments)}function Cc(){Ls.clear()}function Rn(_,p){Ls.set(_._key(),p)}function Us(_){return We(_._redirectPersistence)}function Bs(_){return $("pendingRedirect",_.config.apiKey,_.name)}function nr(_,p,m){return function Sn(_,p,m){return $s.apply(this,arguments)}(_,p,m)}function $s(){return($s=(0,h.Z)(function*(_,p,m){const E=Et(_);we(_,p,br),yield E._initializationPromise;const S=fs(E,m);return yield Vs(S,E),S._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function di(_,p,m){return function D(_,p,m){return b.apply(this,arguments)}(_,p,m)}function b(){return(b=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_);we(E.auth,p,br),yield E.auth._initializationPromise;const S=fs(E.auth,m);yield Vs(S,E.auth);const P=yield _t(E);return S._openRedirect(E.auth,p,"reauthViaRedirect",P)})).apply(this,arguments)}function M(_,p,m){return function U(_,p,m){return Z.apply(this,arguments)}(_,p,m)}function Z(){return(Z=(0,h.Z)(function*(_,p,m){const E=(0,B.m9)(_);we(E.auth,p,br),yield E.auth._initializationPromise;const S=fs(E.auth,m);yield Mi(!1,E,p.providerId),yield Vs(S,E.auth);const P=yield _t(E);return S._openRedirect(E.auth,p,"linkViaRedirect",P)})).apply(this,arguments)}function te(_,p){return _e.apply(this,arguments)}function _e(){return(_e=(0,h.Z)(function*(_,p){return yield Et(_)._initializationPromise,Ze(_,p,!1)})).apply(this,arguments)}function Ze(_,p){return at.apply(this,arguments)}function at(){return(at=(0,h.Z)(function*(_,p,m=!1){const E=Et(_),S=fs(E,p),J=yield new Di(E,S,m).execute();return J&&!m&&(delete J.user._redirectEventId,yield E._persistUserIfCurrent(J.user),yield E._setRedirectUser(null,p)),J})).apply(this,arguments)}function _t(_){return Ut.apply(this,arguments)}function Ut(){return(Ut=(0,h.Z)(function*(_){const p=mo(`${_.uid}:::`);return _._redirectEventId=p,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),p})).apply(this,arguments)}class Tr{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let m=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(m=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Bt(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return js(_);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,m||(this.queuedRedirectEvent=p,m=!0)),m}sendToConsumer(p,m){var E;if(p.error&&!js(p)){const S=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";m.onError(Ae(this.auth,S))}else m.onAuthEvent(p)}isEventForConsumer(p,m){const E=null===m.eventId||!!p.eventId&&p.eventId===m.eventId;return m.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(rr(p))}saveEventToCache(p){this.cachedEventUids.add(rr(p)),this.lastProcessedEventTime=Date.now()}}function rr(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(p=>p).join("-")}function js({type:_,error:p}){return"unknown"===_&&"auth/no-auth-event"===p?.code}function Fr(_){return Er.apply(this,arguments)}function Er(){return(Er=(0,h.Z)(function*(_,p={}){return gt(_,"GET","/v1/projects",p)})).apply(this,arguments)}const Yr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,oh=/^https?/;function ki(){return(ki=(0,h.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:p}=yield Fr(_);for(const m of p)try{if(Fm(m))return}catch{}Xe(_,"unauthorized-domain")})).apply(this,arguments)}function Fm(_){const p=ie(),{protocol:m,hostname:E}=new URL(p);if(_.startsWith("chrome-extension://")){const J=new URL(_);return""===J.hostname&&""===E?"chrome-extension:"===m&&_.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===m&&J.hostname===E}if(!oh.test(m))return!1;if(Yr.test(_))return E===_;const S=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+S+"|"+S+")$","i").test(E)}const lp=new Ee(3e4,6e4);function ah(){const _=Bn().___jsl;if(_?.H)for(const p of Object.keys(_.H))if(_.H[p].r=_.H[p].r||[],_.H[p].L=_.H[p].L||[],_.H[p].r=[..._.H[p].L],_.CP)for(let m=0;m<_.CP.length;m++)_.CP[m]=null}let $n=null;function Hs(_){return $n=$n||function m0(_){return new Promise((p,m)=>{var E,S,P;function J(){ah(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{ah(),m(Ae(_,"network-request-failed"))},timeout:lp.get()})}if(null!==(S=null===(E=Bn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==S&&S.Iframe)p(gapi.iframes.getContext());else{if(null===(P=Bn().gapi)||void 0===P||!P.load){const Oe=bo("iframefcb");return Bn()[Oe]=()=>{gapi.load?J():m(Ae(_,"network-request-failed"))},Os(`https://apis.google.com/js/api.js?onload=${Oe}`).catch(st=>m(st))}J()}}).catch(p=>{throw $n=null,p})}(_),$n}const uh=new Ee(5e3,15e3),lh={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lm=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Vm(_){const p=_.config;X(p.authDomain,_,"auth-domain-config-required");const m=p.emulator?ht(p,"emulator/auth/iframe"):`https://${_.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:_.name,v:O.SDK_VERSION},S=Lm.get(_.config.apiHost);S&&(E.eid=S);const P=_._getFrameworks();return P.length&&(E.fw=P.join(",")),`${m}?${(0,B.xO)(E).slice(1)}`}function dl(){return dl=(0,h.Z)(function*(_){const p=yield Hs(_),m=Bn().gapi;return X(m,_,"internal-error"),p.open({where:document.body,url:Vm(_),messageHandlersFilter:m.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:lh,dontclear:!0},E=>new Promise(function(){var S=(0,h.Z)(function*(P,J){yield E.restyle({setHideOnLeave:!1});const Oe=Ae(_,"network-request-failed"),st=Bn().setTimeout(()=>{J(Oe)},uh.get());function It(){Bn().clearTimeout(st),P(E)}E.ping(It).then(It,()=>{J(Oe)})});return function(P,J){return S.apply(this,arguments)}}()))}),dl.apply(this,arguments)}const Um={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class hl{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function _a(_,p,m,E,S,P){X(_.config.authDomain,_,"auth-domain-config-required"),X(_.config.apiKey,_,"invalid-api-key");const J={apiKey:_.config.apiKey,appName:_.name,authType:m,redirectUrl:E,v:O.SDK_VERSION,eventId:S};if(p instanceof br){p.setDefaultLanguage(_.languageCode),J.providerId=p.providerId||"",(0,B.xb)(p.getCustomParameters())||(J.customParameters=JSON.stringify(p.getCustomParameters()));for(const[st,It]of Object.entries(P||{}))J[st]=It}if(p instanceof no){const st=p.getScopes().filter(It=>""!==It);st.length>0&&(J.scopes=st.join(","))}_.tenantId&&(J.tid=_.tenantId);const Oe=J;for(const st of Object.keys(Oe))void 0===Oe[st]&&delete Oe[st];return`${function hp({config:_}){return _.emulator?ht(_,"emulator/auth/handler"):`https://${_.authDomain}/__/auth/handler`}(_)}?${(0,B.xO)(Oe).slice(1)}`}const va="webStorageSupport",Fi=class cu{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ds,this._completeRedirectFn=Ze,this._overrideRedirectResult=Rn}_openPopup(p,m,E,S){var P=this;return(0,h.Z)(function*(){var J;pe(null===(J=P.eventManagers[p._key()])||void 0===J?void 0:J.manager,"_initialize() not called before _openPopup()");const Oe=_a(p,m,E,ie(),S);return function _0(_,p,m,E=500,S=600){const P=Math.max((window.screen.availHeight-S)/2,0).toString(),J=Math.max((window.screen.availWidth-E)/2,0).toString();let Oe="";const st=Object.assign(Object.assign({},Um),{width:E.toString(),height:S.toString(),top:P,left:J}),It=(0,B.z$)().toLowerCase();m&&(Oe=Y(It)?"_blank":m),x(It)&&(p=p||"http://localhost",st.scrollbars="yes");const qt=Object.entries(st).reduce((hi,[Ci,wa])=>`${hi}${Ci}=${wa},`,"");if(function hn(_=(0,B.z$)()){var p;return Le(_)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(It)&&"_self"!==Oe)return function lu(_,p){const m=document.createElement("a");m.href=_,m.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),m.dispatchEvent(E)}(p||"",Oe),new hl(null);const mn=window.open(p||"",Oe,qt);X(mn,_,"popup-blocked");try{mn.focus()}catch{}return new hl(mn)}(p,Oe,mo())})()}_openRedirect(p,m,E,S){var P=this;return(0,h.Z)(function*(){return yield P._originValidation(p),function yc(_){Bn().location.href=_}(_a(p,m,E,ie(),S)),new Promise(()=>{})})()}_initialize(p){const m=p._key();if(this.eventManagers[m]){const{manager:S,promise:P}=this.eventManagers[m];return S?Promise.resolve(S):(pe(P,"If manager is not set, promise should be"),P)}const E=this.initAndGetManager(p);return this.eventManagers[m]={promise:E},E.catch(()=>{delete this.eventManagers[m]}),E}initAndGetManager(p){var m=this;return(0,h.Z)(function*(){const E=yield function dp(_){return dl.apply(this,arguments)}(p),S=new Tr(p);return E.register("authEvent",P=>(X(P?.authEvent,p,"invalid-auth-event"),{status:S.onEvent(P.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),m.eventManagers[p._key()]={manager:S},m.iframes[p._key()]=E,S})()}_isIframeWebStorageSupported(p,m){this.iframes[p._key()].send(va,{type:va},S=>{var P;const J=null===(P=S?.[0])||void 0===P?void 0:P[va];void 0!==J&&m(!!J),Xe(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const m=p._key();return this.originValidationPromises[m]||(this.originValidationPromises[m]=function up(_){return ki.apply(this,arguments)}(p)),this.originValidationPromises[m]}get _shouldInitProactively(){return fn()||L()||Le()}};class dh extends class bc{constructor(p){this.factorId=p}_process(p,m,E){switch(m.type){case"enroll":return this._finalizeEnroll(p,m.credential,E);case"signin":return this._finalizeSignIn(p,m.credential);default:return se("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new dh(p)}_finalizeEnroll(p,m,E){return function Za(_,p){return gt(_,"POST","/v2/accounts/mfaEnrollment:finalize",wt(_,p))}(p,{idToken:m,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,m){return function Do(_,p){return gt(_,"POST","/v2/accounts/mfaSignIn:finalize",wt(_,p))}(p,{mfaPendingCredential:m,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let hh=(()=>{class _{constructor(){}static assertion(m){return dh._fromCredential(m)}}return _.FACTOR_ID="phone",_})();var du="@firebase/auth";class fp{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var m=this;return(0,h.Z)(function*(){return m.assertAuthConfigured(),yield m.auth._initializationPromise,m.auth.currentUser?{accessToken:yield m.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const m=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,m),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const m=this.internalListeners.get(p);!m||(this.internalListeners.delete(p),m(),this.updateProactiveRefresh())}assertAuthConfigured(){X(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const Tc=(0,B.Pz)("authIdTokenMaxAge")||300;let gp=null;const Qr=_=>function(){var p=(0,h.Z)(function*(m){const E=m&&(yield m.getIdTokenResult()),S=E&&((new Date).getTime()-Date.parse(E.issuedAtTime))/1e3;if(S&&S>Tc)return;const P=E?.token;gp!==P&&(gp=P,yield fetch(_,{method:P?"POST":"DELETE",headers:P?{Authorization:`Bearer ${P}`}:{}}))});return function(m){return p.apply(this,arguments)}}();function fh(_=(0,O.getApp)()){const p=(0,O._getProvider)(_,"auth");if(p.isInitialized())return p.getImmediate();const m=function St(_,p){const m=(0,O._getProvider)(_,"auth");if(m.isInitialized()){const S=m.getImmediate(),P=m.getOptions();if((0,B.vZ)(P,p??{}))return S;Xe(S,"already-initialized")}return m.initialize({options:p})}(_,{popupRedirectResolver:Fi,persistence:[Io,tr,ds]}),E=(0,B.Pz)("authTokenSyncURL");if(E){const P=Qr(E);(function qa(_,p,m){(0,B.m9)(_).beforeAuthStateChanged(p,m)})(m,P,()=>P(m.currentUser)),function rl(_,p,m,E){(0,B.m9)(_).onIdTokenChanged(p,m,E)}(m,J=>P(J))}const S=(0,B.q4)("auth");return S&&Cs(m,`http://${S}`),m}!function Hm(_){(0,O._registerComponent)(new de.wA("auth",(p,{options:m})=>{const E=p.getProvider("app").getImmediate(),S=p.getProvider("heartbeat"),{apiKey:P,authDomain:J}=E.options;return((Oe,st)=>{X(P&&!P.includes(":"),"invalid-api-key",{appName:Oe.name}),X(!J?.includes(":"),"argument-error",{appName:Oe.name});const It={apiKey:P,authDomain:J,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:In(_)},qt=new Qs(Oe,st,It);return function Qe(_,p){const m=p?.persistence||[],E=(Array.isArray(m)?m:[m]).map(We);p?.errorMap&&_._updateErrorMap(p.errorMap),_._initializeWithPersistence(E,p?.popupRedirectResolver)}(qt,m),qt})(E,S)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,m,E)=>{p.getProvider("auth-internal").initialize()})),(0,O._registerComponent)(new de.wA("auth-internal",p=>{const m=Et(p.getProvider("auth").getImmediate());return new fp(m)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,O.registerVersion)(du,"0.21.3",function jm(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,O.registerVersion)(du,"0.21.3","esm2017")}("Browser")},2090:(pt,Te,k)=>{k.d(Te,{$s:()=>nt,BH:()=>Se,G6:()=>ve,L:()=>ae,LL:()=>cn,P0:()=>Ye,Pz:()=>Ae,Sg:()=>we,UG:()=>se,US:()=>de,ZB:()=>H,ZR:()=>Rt,aH:()=>Xe,b$:()=>We,eu:()=>Pe,hl:()=>Ne,jU:()=>pe,m9:()=>en,ne:()=>En,pd:()=>Es,q4:()=>ce,r3:()=>Br,ru:()=>Ge,tV:()=>fe,uI:()=>X,vZ:()=>Je,w1:()=>Qe,xO:()=>_n,xb:()=>vi,z$:()=>je,zI:()=>Ee,zd:()=>_r});const ee=function(j){const $=[];let q=0;for(let V=0;V<j.length;V++){let x=j.charCodeAt(V);x<128?$[q++]=x:x<2048?($[q++]=x>>6|192,$[q++]=63&x|128):55296==(64512&x)&&V+1<j.length&&56320==(64512&j.charCodeAt(V+1))?(x=65536+((1023&x)<<10)+(1023&j.charCodeAt(++V)),$[q++]=x>>18|240,$[q++]=x>>12&63|128,$[q++]=x>>6&63|128,$[q++]=63&x|128):($[q++]=x>>12|224,$[q++]=x>>6&63|128,$[q++]=63&x|128)}return $},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,$){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const q=$?this.byteToCharMapWebSafe_:this.byteToCharMap_,V=[];for(let x=0;x<j.length;x+=3){const L=j[x],Y=x+1<j.length,ke=Y?j[x+1]:0,it=x+2<j.length,ut=it?j[x+2]:0;let Ot=(15&ke)<<2|ut>>6,hn=63&ut;it||(hn=64,Y||(Ot=64)),V.push(q[L>>2],q[(3&L)<<4|ke>>4],q[Ot],q[hn])}return V.join("")},encodeString(j,$){return this.HAS_NATIVE_SUPPORT&&!$?btoa(j):this.encodeByteArray(ee(j),$)},decodeString(j,$){return this.HAS_NATIVE_SUPPORT&&!$?atob(j):function(j){const $=[];let q=0,V=0;for(;q<j.length;){const x=j[q++];if(x<128)$[V++]=String.fromCharCode(x);else if(x>191&&x<224){const L=j[q++];$[V++]=String.fromCharCode((31&x)<<6|63&L)}else if(x>239&&x<365){const it=((7&x)<<18|(63&j[q++])<<12|(63&j[q++])<<6|63&j[q++])-65536;$[V++]=String.fromCharCode(55296+(it>>10)),$[V++]=String.fromCharCode(56320+(1023&it))}else{const L=j[q++],Y=j[q++];$[V++]=String.fromCharCode((15&x)<<12|(63&L)<<6|63&Y)}}return $.join("")}(this.decodeStringToByteArray(j,$))},decodeStringToByteArray(j,$){this.init_();const q=$?this.charToByteMapWebSafe_:this.charToByteMap_,V=[];for(let x=0;x<j.length;){const L=q[j.charAt(x++)],ke=x<j.length?q[j.charAt(x)]:0;++x;const ut=x<j.length?q[j.charAt(x)]:64;++x;const Le=x<j.length?q[j.charAt(x)]:64;if(++x,null==L||null==ke||null==ut||null==Le)throw Error();V.push(L<<2|ke>>4),64!==ut&&(V.push(ke<<4&240|ut>>2),64!==Le&&V.push(ut<<6&192|Le))}return V},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}},ae=function(j){return function(j){const $=ee(j);return de.encodeByteArray($,!0)}(j).replace(/\./g,"")},fe=function(j){try{return de.decodeString(j,!0)}catch($){console.error("base64Decode failed: ",$)}return null};function H(j,$){if(!($ instanceof Object))return $;switch($.constructor){case Date:return new Date($.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return $}for(const q in $)!$.hasOwnProperty(q)||!K(q)||(j[q]=H(j[q],$[q]));return j}function K(j){return"__proto__"!==j}const ye=()=>{try{return function $e(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const $=j&&fe(j[1]);return $&&JSON.parse($)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},ce=j=>{var $,q;return null===(q=null===($=ye())||void 0===$?void 0:$.emulatorHosts)||void 0===q?void 0:q[j]},Ye=j=>{const $=ce(j);if(!$)return;const q=$.lastIndexOf(":");if(q<=0||q+1===$.length)throw new Error(`Invalid host ${$} with no separate hostname and port!`);const V=parseInt($.substring(q+1),10);return"["===$[0]?[$.substring(1,q-1),V]:[$.substring(0,q),V]},Xe=()=>{var j;return null===(j=ye())||void 0===j?void 0:j.config},Ae=j=>{var $;return null===($=ye())||void 0===$?void 0:$[`_${j}`]};class Se{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise(($,q)=>{this.resolve=$,this.reject=q})}wrapCallback($){return(q,V)=>{q?this.reject(q):this.resolve(V),"function"==typeof $&&(this.promise.catch(()=>{}),1===$.length?$(q):$(q,V))}}}function we(j,$){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const V=$||"demo-project",x=j.iat||0,L=j.sub||j.user_id;if(!L)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Y=Object.assign({iss:`https://securetoken.google.com/${V}`,aud:V,iat:x,exp:x+3600,auth_time:x,sub:L,user_id:L,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ae(JSON.stringify({alg:"none",type:"JWT"})),ae(JSON.stringify(Y)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function X(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function se(){var j;const $=null===(j=ye())||void 0===j?void 0:j.forceEnvironment;if("node"===$)return!0;if("browser"===$)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function pe(){return"object"==typeof self&&self.self===self}function Ge(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function We(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Qe(){const j=je();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function ve(){return!se()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ne(){try{return"object"==typeof indexedDB}catch{return!1}}function Pe(){return new Promise((j,$)=>{try{let q=!0;const V="validate-browser-context-for-indexeddb-analytics-module",x=self.indexedDB.open(V);x.onsuccess=()=>{x.result.close(),q||self.indexedDB.deleteDatabase(V),j(!0)},x.onupgradeneeded=()=>{q=!1},x.onerror=()=>{var L;$((null===(L=x.error)||void 0===L?void 0:L.message)||"")}}catch(q){$(q)}})}function Ee(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class Rt extends Error{constructor($,q,V){super(q),this.code=$,this.customData=V,this.name="FirebaseError",Object.setPrototypeOf(this,Rt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,cn.prototype.create)}}class cn{constructor($,q,V){this.service=$,this.serviceName=q,this.errors=V}create($,...q){const V=q[0]||{},x=`${this.service}/${$}`,L=this.errors[$],Y=L?function rt(j,$){return j.replace(wt,(q,V)=>{const x=$[V];return null!=x?String(x):`<${V}?>`})}(L,V):"Error";return new Rt(x,`${this.serviceName}: ${Y} (${x}).`,V)}}const wt=/\{\$([^}]+)}/g;function Br(j,$){return Object.prototype.hasOwnProperty.call(j,$)}function vi(j){for(const $ in j)if(Object.prototype.hasOwnProperty.call(j,$))return!1;return!0}function Je(j,$){if(j===$)return!0;const q=Object.keys(j),V=Object.keys($);for(const x of q){if(!V.includes(x))return!1;const L=j[x],Y=$[x];if(Yn(L)&&Yn(Y)){if(!Je(L,Y))return!1}else if(L!==Y)return!1}for(const x of V)if(!q.includes(x))return!1;return!0}function Yn(j){return null!==j&&"object"==typeof j}function _n(j){const $=[];for(const[q,V]of Object.entries(j))Array.isArray(V)?V.forEach(x=>{$.push(encodeURIComponent(q)+"="+encodeURIComponent(x))}):$.push(encodeURIComponent(q)+"="+encodeURIComponent(V));return $.length?"&"+$.join("&"):""}function _r(j){const $={};return j.replace(/^\?/,"").split("&").forEach(V=>{if(V){const[x,L]=V.split("=");$[decodeURIComponent(x)]=decodeURIComponent(L)}}),$}function Es(j){const $=j.indexOf("?");if(!$)return"";const q=j.indexOf("#",$);return j.substring($,q>0?q:void 0)}function En(j,$){const q=new gn(j,$);return q.subscribe.bind(q)}class gn{constructor($,q){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=q,this.task.then(()=>{$(this)}).catch(V=>{this.error(V)})}next($){this.forEachObserver(q=>{q.next($)})}error($){this.forEachObserver(q=>{q.error($)}),this.close($)}complete(){this.forEachObserver($=>{$.complete()}),this.close()}subscribe($,q,V){let x;if(void 0===$&&void 0===q&&void 0===V)throw new Error("Missing Observer.");x=function yt(j,$){if("object"!=typeof j||null===j)return!1;for(const q of $)if(q in j&&"function"==typeof j[q])return!0;return!1}($,["next","error","complete"])?$:{next:$,error:q,complete:V},void 0===x.next&&(x.next=Nt),void 0===x.error&&(x.error=Nt),void 0===x.complete&&(x.complete=Nt);const L=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?x.error(this.finalError):x.complete()}catch{}}),this.observers.push(x),L}unsubscribeOne($){void 0===this.observers||void 0===this.observers[$]||(delete this.observers[$],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver($){if(!this.finalized)for(let q=0;q<this.observers.length;q++)this.sendOne(q,$)}sendOne($,q){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[$])try{q(this.observers[$])}catch(V){typeof console<"u"&&console.error&&console.error(V)}})}close($){this.finalized||(this.finalized=!0,void 0!==$&&(this.finalError=$),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Nt(){}function nt(j,$=1e3,q=2){const V=$*Math.pow(q,j),x=Math.round(.5*V*(Math.random()-.5)*2);return Math.min(144e5,V+x)}function en(j){return j&&j._delegate?j._delegate:j}},4727:(pt,Te,k)=>{var h=k(4650);let B=null;function O(){return B}const le=new h.OlP("DocumentToken");let ae=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return function fe(){return(0,h.LFG)(H)}()},providedIn:"platform"}),n})();const G=new h.OlP("Location Initialized");let H=(()=>{class n extends ae{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return O().getBaseHref(this._doc)}onPopState(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=O().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,o){K()?this._history.pushState(t,r,o):this.location.hash=o}replaceState(t,r,o){K()?this._history.replaceState(t,r,o):this.location.hash=o}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function $e(){return new H((0,h.LFG)(le))}()},providedIn:"platform"}),n})();function K(){return!!window.history.pushState}function xe(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function De(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function et(n){return n&&"?"!==n[0]?"?"+n:n}let ye=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(Ye)},providedIn:"root"}),n})();const ce=new h.OlP("appBaseHref");let Ye=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,h.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return xe(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+et(this._platformLocation.search),o=this._platformLocation.hash;return o&&t?`${r}${o}`:r}pushState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){const d=this.prepareExternalUrl(o+et(u));this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Xe=(()=>{class n extends ye{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=xe(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.pushState(t,r,d)}replaceState(t,r,o,u){let d=this.prepareExternalUrl(o+et(u));0==d.length&&(d=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,d)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ae),h.LFG(ce,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),Ae=(()=>{class n{constructor(t){this._subject=new h.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=De(je(r)),this._locationStrategy.onPopState(o=>{this._subject.emit({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+et(r))}normalize(t){return n.stripTrailingSlash(function we(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,je(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",o=null){this._locationStrategy.pushState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}replaceState(t,r="",o=null){this._locationStrategy.replaceState(o,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+et(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(o=>o(t,r))}subscribe(t,r,o){return this._subject.subscribe({next:t,error:r,complete:o})}}return n.normalizeQueryParams=et,n.joinWithSlash=xe,n.stripTrailingSlash=De,n.\u0275fac=function(t){return new(t||n)(h.LFG(ye))},n.\u0275prov=h.Yz7({token:n,factory:function(){return function Se(){return new Ae((0,h.LFG)(ye))}()},providedIn:"root"}),n})();function je(n){return n.replace(/\/index.html$/,"")}class Ts{constructor(e,t,r,o){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let os=(()=>{class n{constructor(t,r,o){this._viewContainer=t,this._template=r,this._differs=o,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((o,u,d)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new Ts(o.item,this._ngForOf,-1,-1),null===d?void 0:d);else if(null==d)r.remove(null===u?void 0:u);else if(null!==u){const g=r.get(u);r.move(g,d),As(g,o)}});for(let o=0,u=r.length;o<u;o++){const g=r.get(o).context;g.index=o,g.count=u,g.ngForOf=this._ngForOf}t.forEachIdentityChange(o=>{As(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.s_b),h.Y36(h.Rgc),h.Y36(h.ZZ4))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function As(n,e){n.context.$implicit=e.item}let rp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})();function io(n){return"server"===n}let sc=(()=>{class n{}return n.\u0275prov=(0,h.Yz7)({token:n,providedIn:"root",factory:()=>new Hd((0,h.LFG)(le),window)}),n})();class Hd{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function vr(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const u=o.shadowRoot;if(u){const d=u.getElementById(e)||u.querySelector(`[name="${e}"]`);if(d)return d}o=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,o=t.top+this.window.pageYOffset,u=this.offset();this.window.scrollTo(r-u[0],o-u[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Ei(this.window.history)||Ei(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ei(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class ls extends class cc extends class de{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function re(n){B||(B=n)}(new ls)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function dc(){return cs=cs||document.querySelector("base"),cs?cs.getAttribute("href"):null}();return null==t?null:function qi(n){xn=xn||document.createElement("a"),xn.setAttribute("href",n);const e=xn.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){cs=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Hu(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[o,u]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(o.trim()===e)return decodeURIComponent(u)}return null}(document.cookie,e)}}let xn,cs=null;const An=new h.OlP("TRANSITION_ID"),el=[{provide:h.ip1,useFactory:function hc(n,e,t){return()=>{t.get(h.CZH).donePromise.then(()=>{const r=O(),o=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let u=0;u<o.length;u++)r.remove(o[u])})}},deps:[An,le,h.zs3],multi:!0}];let tl=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const nl=new h.OlP("EventManagerPlugins");let rl=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(o=>o.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,o){return this._findPluginFor(r).addEventListener(t,r,o)}addGlobalEventListener(t,r,o){return this._findPluginFor(r).addGlobalEventListener(t,r,o)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const o=this._plugins;for(let u=0;u<o.length;u++){const d=o[u];if(d.supports(t))return this._eventNameToPlugin.set(t,d),d}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(nl),h.LFG(h.R0b))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class qa{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const o=O().getGlobalEventTarget(this._doc,e);if(!o)throw new Error(`Unsupported event target ${o} for event ${t}`);return this.addEventListener(o,t,r)}}let fo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(o=>{this._stylesSet.has(o)||(this._stylesSet.add(o),r.add(o))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})(),po=(()=>{class n extends fo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,o){t.forEach(u=>{const d=this._doc.createElement("style");d.textContent=u,o.push(r.appendChild(d))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(fc),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,o)=>{this._addStylesToHost(t,o,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(fc))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function fc(n){O().remove(n)}const go={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},pc=/%COMP%/g;function Ka(n,e,t){for(let r=0;r<e.length;r++){let o=e[r];Array.isArray(o)?Ka(n,o,t):(o=o.replace(pc,n),t.push(o))}return t}function Ya(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let Qa=(()=>{class n{constructor(t,r,o){this.eventManager=t,this.sharedStylesHost=r,this.appId=o,this.rendererByCompId=new Map,this.defaultRenderer=new Zi(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case h.ifc.Emulated:{let o=this.rendererByCompId.get(r.id);return o||(o=new mc(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,o)),o.applyToHost(t),o}case 1:case h.ifc.ShadowDom:return new Qd(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const o=Ka(r.id,r.styles,[]);this.sharedStylesHost.addStyles(o),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(rl),h.LFG(po),h.LFG(h.AFp))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();class Zi{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(go[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(ca(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(ca(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,o){if(o){t=o+":"+t;const u=go[o];u?e.setAttributeNS(u,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const o=go[r];o?e.removeAttributeNS(o,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,o){o&(h.JOm.DashCase|h.JOm.Important)?e.style.setProperty(t,r,o&h.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&h.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ya(r)):this.eventManager.addEventListener(e,t,Ya(r))}}function ca(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class mc extends Zi{constructor(e,t,r,o){super(e),this.component=r;const u=Ka(o+"-"+r.id,r.styles,[]);t.addStyles(u),this.contentAttr=function Un(n){return"_ngcontent-%COMP%".replace(pc,n)}(o+"-"+r.id),this.hostAttr=function Za(n){return"_nghost-%COMP%".replace(pc,n)}(o+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Qd extends Zi{constructor(e,t,r,o){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const u=Ka(o.id,o.styles,[]);for(let d=0;d<u.length;d++){const g=document.createElement("style");g.textContent=u[d],this.shadowRoot.appendChild(g)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let tr=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,o){return t.addEventListener(r,o,!1),()=>this.removeEventListener(t,r,o)}removeEventListener(t,r,o){return t.removeEventListener(r,o)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const Jd=["alt","control","meta","shift"],ds={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ol={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let da=(()=>{class n extends qa{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,o){const u=n.parseEventName(r),d=n.eventCallback(u.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>O().onAndCancel(t,u.domEventName,d))}static parseEventName(t){const r=t.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const u=n._normalizeKey(r.pop());let d="",g=r.indexOf("code");if(g>-1&&(r.splice(g,1),d="code."),Jd.forEach(C=>{const A=r.indexOf(C);A>-1&&(r.splice(A,1),d+=C+".")}),d+=u,0!=r.length||0===u.length)return null;const v={};return v.domEventName=o,v.fullKey=d,v}static matchEventFullKeyCode(t,r){let o=ds[t.key]||t.key,u="";return r.indexOf("code.")>-1&&(o=t.code,u="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),Jd.forEach(d=>{d!==o&&(0,ol[d])(t)&&(u+=d+".")}),u+=o,u===r)}static eventCallback(t,r,o){return u=>{n.matchEventFullKeyCode(u,t)&&o.runGuarded(()=>r(u))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();const ha=(0,h.eFA)(h._c5,"browser",[{provide:h.Lbi,useValue:"browser"},{provide:h.g9A,useValue:function _c(){ls.makeCurrent()},multi:!0},{provide:le,useFactory:function al(){return(0,h.RDi)(document),document},deps:[]}]),Ns=new h.OlP(""),fa=[{provide:h.rWj,useClass:class Kd{addToWindow(e){h.dqk.getAngularTestability=(r,o=!0)=>{const u=e.findTestabilityInTree(r,o);if(null==u)throw new Error("Could not find testability for element.");return u},h.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),h.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),h.dqk.frameworkStabilizers||(h.dqk.frameworkStabilizers=[]),h.dqk.frameworkStabilizers.push(r=>{const o=h.dqk.getAllAngularTestabilities();let u=o.length,d=!1;const g=function(v){d=d||v,u--,0==u&&r(d)};o.forEach(function(v){v.whenStable(g)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?O().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:h.lri,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]},{provide:h.dDg,useClass:h.dDg,deps:[h.R0b,h.eoX,h.rWj]}],yo=[{provide:h.zSh,useValue:"root"},{provide:h.qLn,useFactory:function Ki(){return new h.qLn},deps:[]},{provide:nl,useClass:tr,multi:!0,deps:[le,h.R0b,h.Lbi]},{provide:nl,useClass:da,multi:!0,deps:[le]},{provide:Qa,useClass:Qa,deps:[rl,po,h.AFp]},{provide:h.FYo,useExisting:Qa},{provide:fo,useExisting:po},{provide:po,useClass:po,deps:[le]},{provide:rl,useClass:rl,deps:[nl,h.R0b]},{provide:class so{},useClass:tl,deps:[]},[]];let _o=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:h.AFp,useValue:t.appId},{provide:An,useExisting:h.AFp},el]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ns,12))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[...yo,...fa],imports:[rp,h.hGG]}),n})(),Ri=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(le))},n.\u0275prov=h.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function pa(){return new Ri((0,h.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var dn=k(8996),Yi=k(7669);function ct(...n){const e=(0,Yi.yG)(n);return(0,dn.D)(n,e)}var Oi=k(7579);class Cn extends Oi.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const Ps=(0,k(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Pr=k(9751);const{isArray:ks}=Array,{getPrototypeOf:Ec,prototype:Ic,keys:ih}=Object;function fs(n){if(1===n.length){const e=n[0];if(ks(e))return{args:e,keys:null};if(function Dc(n){return n&&"object"==typeof n&&Ec(n)===Ic}(e)){const t=ih(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var Fs=k(4671),ft=k(4004);const{isArray:cl}=Array;function ru(n){return(0,ft.U)(e=>function Pi(n,e){return cl(e)?n(...e):n(e)}(n,e))}function ga(n,e){return n.reduce((t,r,o)=>(t[r]=e[o],t),{})}var pr=k(5403),ma=k(9672);function iu(...n){const e=(0,Yi.yG)(n),t=(0,Yi.jO)(n),{args:r,keys:o}=fs(n);if(0===r.length)return(0,dn.D)([],e);const u=new Pr.y(function ya(n,e,t=Fs.y){return r=>{sh(e,()=>{const{length:o}=n,u=new Array(o);let d=o,g=o;for(let v=0;v<o;v++)sh(e,()=>{const C=(0,dn.D)(n[v],e);let A=!1;C.subscribe((0,pr.x)(r,N=>{u[v]=N,A||(A=!0,g--),g||r.next(t(u.slice()))},()=>{--d||r.complete()}))},r)},r)}}(r,e,o?d=>ga(o,d):Fs.y));return t?u.pipe(ru(t)):u}function sh(n,e,t){n?(0,ma.f)(t,n,e):e()}var Ao=k(8189);function So(...n){return function su(){return(0,Ao.J)(1)}()((0,dn.D)(n,(0,Yi.yG)(n)))}var Ls=k(8421);function Di(n){return new Pr.y(e=>{(0,Ls.Xf)(n()).subscribe(e)})}var ou=k(9635),ps=k(576);function Vs(n,e){const t=(0,ps.m)(n)?n:()=>n,r=o=>o.error(t());return new Pr.y(e?o=>e.schedule(r,0,o):r)}var kr=k(515),Cc=k(727),Rn=k(4482);function Us(){return(0,Rn.e)((n,e)=>{let t=null;n._refCount++;const r=(0,pr.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const o=n._connection,u=t;t=null,o&&(!u||o===u)&&o.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Bs extends Pr.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,Rn.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Cc.w0;const t=this.getSubject();e.add(this.source.subscribe((0,pr.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Cc.w0.EMPTY)}return e}refCount(){return Us()(this)}}function nr(n,e){return(0,Rn.e)((t,r)=>{let o=null,u=0,d=!1;const g=()=>d&&!o&&r.complete();t.subscribe((0,pr.x)(r,v=>{o?.unsubscribe();let C=0;const A=u++;(0,Ls.Xf)(n(v,A)).subscribe(o=(0,pr.x)(r,N=>r.next(e?e(v,N,A,C++):N),()=>{o=null,g()}))},()=>{d=!0,g()}))})}function Sn(n){return n<=0?()=>kr.E:(0,Rn.e)((e,t)=>{let r=0;e.subscribe((0,pr.x)(t,o=>{++r<=n&&(t.next(o),n<=r&&t.complete())}))})}function $s(...n){const e=(0,Yi.yG)(n);return(0,Rn.e)((t,r)=>{(e?So(n,t,e):So(n,t)).subscribe(r)})}function di(n,e){return(0,Rn.e)((t,r)=>{let o=0;t.subscribe((0,pr.x)(r,u=>n.call(e,u,o++)&&r.next(u)))})}var D=k(5577);function b(n){return(0,Rn.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,o=>{r=!0,t.next(o)},()=>{r||t.next(n),t.complete()}))})}function M(n=U){return(0,Rn.e)((e,t)=>{let r=!1;e.subscribe((0,pr.x)(t,o=>{r=!0,t.next(o)},()=>r?t.complete():t.error(n())))})}function U(){return new Ps}function Z(n,e){const t=arguments.length>=2;return r=>r.pipe(n?di((o,u)=>n(o,u,r)):Fs.y,Sn(1),t?b(e):M(()=>new Ps))}function te(n,e){return(0,ps.m)(e)?(0,D.z)(n,e,1):(0,D.z)(n,1)}var _e=k(8505);function Ze(n){return(0,Rn.e)((e,t)=>{let u,r=null,o=!1;r=e.subscribe((0,pr.x)(t,void 0,void 0,d=>{u=(0,Ls.Xf)(n(d,Ze(n)(e))),r?(r.unsubscribe(),r=null,u.subscribe(t)):o=!0})),o&&(r.unsubscribe(),r=null,u.subscribe(t))})}function at(n,e,t,r,o){return(u,d)=>{let g=t,v=e,C=0;u.subscribe((0,pr.x)(d,A=>{const N=C++;v=g?n(v,A,N):(g=!0,A),r&&d.next(v)},o&&(()=>{g&&d.next(v),d.complete()})))}}function _t(n,e){return(0,Rn.e)(at(n,e,arguments.length>=2,!0))}function Ut(n){return n<=0?()=>kr.E:(0,Rn.e)((e,t)=>{let r=[];e.subscribe((0,pr.x)(t,o=>{r.push(o),n<r.length&&r.shift()},()=>{for(const o of r)t.next(o);t.complete()},void 0,()=>{r=null}))})}function bt(n,e){const t=arguments.length>=2;return r=>r.pipe(n?di((o,u)=>n(o,u,r)):Fs.y,Ut(1),t?b(e):M(()=>new Ps))}function js(n){return(0,Rn.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const Bt="primary",Fr=Symbol("RouteTitle");class Er{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function Yr(n){return new Er(n)}function oh(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const o={};for(let u=0;u<r.length;u++){const d=r[u],g=n[u];if(d.startsWith(":"))o[d.substring(1)]=g;else if(d!==g.path)return null}return{consumed:n.slice(0,r.length),posParams:o}}function ki(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let o;for(let u=0;u<t.length;u++)if(o=t[u],!Fm(n[o],e[o]))return!1;return!0}function Fm(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((o,u)=>r[u]===o)}return n===e}function lp(n){return Array.prototype.concat.apply([],n)}function ah(n){return n.length>0?n[n.length-1]:null}function $n(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Hs(n){return(0,h.CqO)(n)?n:(0,h.QGY)(n)?(0,dn.D)(Promise.resolve(n)):ct(n)}const y0={exact:function dp(n,e,t){if(!lu(n.segments,e.segments)||!au(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!dp(n.children[r],e.children[r],t))return!1;return!0},subset:Um},lh={exact:function Vm(n,e){return ki(n,e)},subset:function dl(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>Fm(n[t],e[t]))},ignored:()=>!0};function Lm(n,e,t){return y0[t.paths](n.root,e.root,t.matrixParams)&&lh[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function Um(n,e,t){return Bm(n,e,e.segments,t)}function Bm(n,e,t,r){if(n.segments.length>t.length){const o=n.segments.slice(0,t.length);return!(!lu(o,t)||e.hasChildren()||!au(o,t,r))}if(n.segments.length===t.length){if(!lu(n.segments,t)||!au(n.segments,t,r))return!1;for(const o in e.children)if(!n.children[o]||!Um(n.children[o],e.children[o],r))return!1;return!0}{const o=t.slice(0,n.segments.length),u=t.slice(n.segments.length);return!!(lu(n.segments,o)&&au(n.segments,o,r)&&n.children[Bt])&&Bm(n.children[Bt],e,u,r)}}function au(n,e,t){return e.every((r,o)=>lh[t](n[o].parameters,r.parameters))}class uu{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yr(this.queryParams)),this._queryParamMap}toString(){return hp.serialize(this)}}class Xt{constructor(e,t){this.segments=e,this.children=t,this.parent=null,$n(t,(r,o)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return va(this)}}class hl{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=Yr(this.parameters)),this._parameterMap}toString(){return fp(this)}}function lu(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let ch=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return new _a},providedIn:"root"}),n})();class _a{parse(e){const t=new p(e);return new uu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${cu(e.root,!0)}`,r=function Hm(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(o=>`${bc(t)}=${bc(o)}`).join("&"):`${bc(t)}=${bc(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function dh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const hp=new _a;function va(n){return n.segments.map(e=>fp(e)).join("/")}function cu(n,e){if(!n.hasChildren())return va(n);if(e){const t=n.children[Bt]?cu(n.children[Bt],!1):"",r=[];return $n(n.children,(o,u)=>{u!==Bt&&r.push(`${u}:${cu(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function $m(n,e){let t=[];return $n(n.children,(r,o)=>{o===Bt&&(t=t.concat(e(r,o)))}),$n(n.children,(r,o)=>{o!==Bt&&(t=t.concat(e(r,o)))}),t}(n,(r,o)=>o===Bt?[cu(n.children[Bt],!1)]:[`${o}:${cu(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[Bt]?`${va(n)}/${t[0]}`:`${va(n)}/(${t.join("//")})`}}function Fi(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function bc(n){return Fi(n).replace(/%3B/gi,";")}function hh(n){return Fi(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function du(n){return decodeURIComponent(n)}function fl(n){return du(n.replace(/\+/g,"%20"))}function fp(n){return`${hh(n.path)}${function jm(n){return Object.keys(n).map(e=>`;${hh(e)}=${hh(n[e])}`).join("")}(n.parameters)}`}const pp=/^[^\/()?;=#]+/;function Tc(n){const e=n.match(pp);return e?e[0]:""}const gp=/^[^=?&#]+/,fh=/^[^&#]+/;class p{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[Bt]=new Xt(e,t)),r}parseSegment(){const e=Tc(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new h.vHH(4009,!1);return this.capture(e),new hl(du(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Tc(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const o=Tc(this.remaining);o&&(r=o,this.capture(r))}e[du(t)]=du(r)}parseQueryParam(e){const t=function Qr(n){const e=n.match(gp);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const d=function _(n){const e=n.match(fh);return e?e[0]:""}(this.remaining);d&&(r=d,this.capture(r))}const o=fl(t),u=fl(r);if(e.hasOwnProperty(o)){let d=e[o];Array.isArray(d)||(d=[d],e[o]=d),d.push(u)}else e[o]=u}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Tc(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new h.vHH(4010,!1);let u;r.indexOf(":")>-1?(u=r.slice(0,r.indexOf(":")),this.capture(u),this.capture(":")):e&&(u=Bt);const d=this.parseChildren();t[u]=1===Object.keys(d).length?d[Bt]:new Xt([],d),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new h.vHH(4011,!1)}}function m(n){return n.segments.length>0?new Xt([],{[Bt]:n}):n}function E(n){const e={};for(const r of Object.keys(n.children)){const u=E(n.children[r]);(u.segments.length>0||u.hasChildren())&&(e[r]=u)}return function S(n){if(1===n.numberOfChildren&&n.children[Bt]){const e=n.children[Bt];return new Xt(n.segments.concat(e.segments),e.children)}return n}(new Xt(n.segments,e))}function P(n){return n instanceof uu}const J=!1;function qt(n,e,t,r,o){if(0===t.length)return Ci(e.root,e.root,e.root,r,o);const u=function Ac(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new pl(!0,0,n);let e=0,t=!1;const r=n.reduce((o,u,d)=>{if("object"==typeof u&&null!=u){if(u.outlets){const g={};return $n(u.outlets,(v,C)=>{g[C]="string"==typeof v?v.split("/"):v}),[...o,{outlets:g}]}if(u.segmentPath)return[...o,u.segmentPath]}return"string"!=typeof u?[...o,u]:0===d?(u.split("/").forEach((g,v)=>{0==v&&"."===g||(0==v&&""===g?t=!0:".."===g?e++:""!=g&&o.push(g))}),o):[...o,u]},[]);return new pl(t,e,r)}(t);return u.toRoot()?Ci(e.root,e.root,new Xt([],{}),r,o):function d(v){const C=function Ea(n,e,t,r){if(n.isAbsolute)return new Mo(e.root,!0,0);if(-1===r)return new Mo(t,t===e.root,0);return function ph(n,e,t){let r=n,o=e,u=t;for(;u>o;){if(u-=o,r=r.parent,!r)throw new h.vHH(4005,J);o=r.segments.length}return new Mo(r,!1,o-u)}(t,r+(mn(n.commands[0])?0:1),n.numberOfDoubleDots)}(u,e,n.snapshot?._urlSegment,v),A=C.processChildren?xo(C.segmentGroup,C.index,u.commands):Ia(C.segmentGroup,C.index,u.commands);return Ci(e.root,C.segmentGroup,A,r,o)}(n.snapshot?._lastPathIndex)}function mn(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function hi(n){return"object"==typeof n&&null!=n&&n.outlets}function Ci(n,e,t,r,o){let d,u={};r&&$n(r,(v,C)=>{u[C]=Array.isArray(v)?v.map(A=>`${A}`):`${v}`}),d=n===e?t:wa(n,e,t);const g=m(E(d));return new uu(g,u,o)}function wa(n,e,t){const r={};return $n(n.children,(o,u)=>{r[u]=o===e?t:wa(o,e,t)}),new Xt(n.segments,r)}class pl{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&mn(r[0]))throw new h.vHH(4003,J);const o=r.find(hi);if(o&&o!==ah(r))throw new h.vHH(4004,J)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Mo{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function Ia(n,e,t){if(n||(n=new Xt([],{})),0===n.segments.length&&n.hasChildren())return xo(n,e,t);const r=function _p(n,e,t){let r=0,o=e;const u={match:!1,pathIndex:0,commandIndex:0};for(;o<n.segments.length;){if(r>=t.length)return u;const d=n.segments[o],g=t[r];if(hi(g))break;const v=`${g}`,C=r<t.length-1?t[r+1]:null;if(o>0&&void 0===v)break;if(v&&C&&"object"==typeof C&&void 0===C.outlets){if(!Gm(v,C,d))return u;r+=2}else{if(!Gm(v,{},d))return u;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(n,e,t),o=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const u=new Xt(n.segments.slice(0,r.pathIndex),{});return u.children[Bt]=new Xt(n.segments.slice(r.pathIndex),n.children),xo(u,0,o)}return r.match&&0===o.length?new Xt(n.segments,{}):r.match&&!n.hasChildren()?Sc(n,e,t):r.match?xo(n,0,o):Sc(n,e,t)}function xo(n,e,t){if(0===t.length)return new Xt(n.segments,{});{const r=function yp(n){return hi(n[0])?n[0].outlets:{[Bt]:n}}(t),o={};return $n(r,(u,d)=>{"string"==typeof u&&(u=[u]),null!==u&&(o[d]=Ia(n.children[d],e,u))}),$n(n.children,(u,d)=>{void 0===r[d]&&(o[d]=u)}),new Xt(n.segments,o)}}function Sc(n,e,t){const r=n.segments.slice(0,e);let o=0;for(;o<t.length;){const u=t[o];if(hi(u)){const v=hu(u.outlets);return new Xt(r,v)}if(0===o&&mn(t[0])){r.push(new hl(n.segments[e].path,vp(t[0]))),o++;continue}const d=hi(u)?u.outlets[Bt]:`${u}`,g=o<t.length-1?t[o+1]:null;d&&g&&mn(g)?(r.push(new hl(d,vp(g))),o+=2):(r.push(new hl(d,{})),o++)}return new Xt(r,{})}function hu(n){const e={};return $n(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=Sc(new Xt([],{}),0,t))}),e}function vp(n){const e={};return $n(n,(t,r)=>e[r]=`${t}`),e}function Gm(n,e,t){return n==t.path&&ki(e,t.parameters)}class Da{constructor(e,t){this.id=e,this.url=t}}class gh extends Da{constructor(e,t,r="imperative",o=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class gl extends Da{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class wp extends Da{constructor(e,t,r,o){super(e,t),this.reason=r,this.code=o,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class v0 extends Da{constructor(e,t,r,o){super(e,t),this.error=r,this.target=o,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ED extends Da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ID extends Da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class DD extends Da{constructor(e,t,r,o,u){super(e,t),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=u,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class w0 extends Da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Wm extends Da{constructor(e,t,r,o){super(e,t),this.urlAfterRedirects=r,this.state=o,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class E0{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class zm{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class CD{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class bD{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class I0{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class D0{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class fu{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class qm{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Zm(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Zm(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=b0(e,this._root);return t.length<2?[]:t[t.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return b0(e,this._root).map(t=>t.value)}}function Zm(n,e){if(n===e.value)return e;for(const t of e.children){const r=Zm(n,t);if(r)return r}return null}function b0(n,e){if(n===e.value)return[e];for(const t of e.children){const r=b0(n,t);if(r.length)return r.unshift(e),r}return[]}class gs{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function Mc(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Km extends qm{constructor(e,t){super(e),this.snapshot=t,mh(this,e)}toString(){return this.snapshot.toString()}}function Ym(n,e){const t=function T0(n,e){const d=new ml([],{},{},"",{},Bt,e,null,n.root,-1,{});return new Jm("",new gs(d,[]))}(n,e),r=new Cn([new hl("",{})]),o=new Cn({}),u=new Cn({}),d=new Cn({}),g=new Cn(""),v=new Ca(r,o,d,g,u,Bt,e,t.root);return v.snapshot=t.root,new Km(new gs(v,[]),t)}class Ca{constructor(e,t,r,o,u,d,g,v){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.pipe((0,ft.U)(C=>C[Fr]))??ct(void 0),this._futureSnapshot=v}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,ft.U)(e=>Yr(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,ft.U)(e=>Yr(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Qm(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const o=t[r],u=t[r-1];if(o.routeConfig&&""===o.routeConfig.path)r--;else{if(u.component)break;r--}}return function Ep(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class ml{constructor(e,t,r,o,u,d,g,v,C,A,N,W){this.url=e,this.params=t,this.queryParams=r,this.fragment=o,this.data=u,this.outlet=d,this.component=g,this.title=this.data?.[Fr],this.routeConfig=v,this._urlSegment=C,this._lastPathIndex=A,this._correctedLastPathIndex=W??A,this._resolve=N}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Yr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Yr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Jm extends qm{constructor(e,t){super(t),this.url=e,mh(this,t)}toString(){return Ip(this._root)}}function mh(n,e){e.value._routerState=n,e.children.forEach(t=>mh(n,t))}function Ip(n){const e=n.children.length>0?` { ${n.children.map(Ip).join(", ")} } `:"";return`${n.value}${e}`}function yh(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,ki(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),ki(e.params,t.params)||n.params.next(t.params),function up(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!ki(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),ki(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function yl(n,e){const t=ki(n.params,e.params)&&function _0(n,e){return lu(n,e)&&n.every((t,r)=>ki(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||yl(n.parent,e.parent))}function xc(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const o=function AD(n,e,t){return e.children.map(r=>{for(const o of t.children)if(n.shouldReuseRoute(r.value,o.value.snapshot))return xc(n,r,o);return xc(n,r)})}(n,e,t);return new gs(r,o)}{if(n.shouldAttach(e.value)){const u=n.retrieve(e.value);if(null!==u){const d=u.route;return d.value._futureSnapshot=e.value,d.children=e.children.map(g=>xc(n,g)),d}}const r=function SD(n){return new Ca(new Cn(n.url),new Cn(n.params),new Cn(n.queryParams),new Cn(n.fragment),new Cn(n.data),n.outlet,n.component,n)}(e.value),o=e.children.map(u=>xc(n,u));return new gs(r,o)}}const Dp="ngNavigationCancelingError";function Cp(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=P(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=_h(!1,0,e);return o.url=t,o.navigationBehaviorOptions=r,o}function _h(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Dp]=!0,r.cancellationCode=e,t&&(r.url=t),r}function bp(n){return pu(n)&&P(n.url)}function pu(n){return n&&n[Dp]}class MD{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new vh,this.attachRef=null}}let vh=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const o=this.getOrCreateContext(t);o.outlet=r,this.contexts.set(t,o)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new MD,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Xm=!1;let ey=(()=>{class n{constructor(t,r,o,u,d){this.parentContexts=t,this.location=r,this.changeDetector=u,this.environmentInjector=d,this.activated=null,this._activatedRoute=null,this.activateEvents=new h.vpe,this.deactivateEvents=new h.vpe,this.attachEvents=new h.vpe,this.detachEvents=new h.vpe,this.name=o||Bt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new h.vHH(4012,Xm);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new h.vHH(4012,Xm);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new h.vHH(4012,Xm);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new h.vHH(4013,Xm);this._activatedRoute=t;const o=this.location,d=t._futureSnapshot.component,g=this.parentContexts.getOrCreateContext(this.name).children,v=new ty(t,g,o.injector);if(r&&function xD(n){return!!n.resolveComponentFactory}(r)){const C=r.resolveComponentFactory(d);this.activated=o.createComponent(C,o.length,v)}else this.activated=o.createComponent(d,{index:o.length,injector:v,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(vh),h.Y36(h.s_b),h.$8M("name"),h.Y36(h.sBO),h.Y36(h.lqb))},n.\u0275dir=h.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class ty{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Ca?this.route:e===vh?this.childContexts:this.parent.get(e,t)}}let Tp=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[h.jDz],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[ey],encapsulation:2}),n})();function wh(n,e){return n.providers&&!n._injector&&(n._injector=(0,h.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function ny(n){const e=n.children&&n.children.map(ny),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==Bt&&(t.component=Tp),t}function ms(n){return n.outlet||Bt}function ba(n,e){const t=n.filter(r=>ms(r)===e);return t.push(...n.filter(r=>ms(r)!==e)),t}function Ta(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class cS{constructor(e,t,r,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=o}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),yh(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const o=Mc(t);e.children.forEach(u=>{const d=u.value.outlet;this.deactivateRoutes(u,o[d],r),delete o[d]}),$n(o,(u,d)=>{this.deactivateRouteAndItsChildren(u,r)})}deactivateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(o===u)if(o.component){const d=r.getContext(o.outlet);d&&this.deactivateChildRoutes(e,t,d.children)}else this.deactivateChildRoutes(e,t,r);else u&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Mc(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);if(r&&r.outlet){const d=r.outlet.detach(),g=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:d,route:e,contexts:g})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),o=r&&e.value.component?r.children:t,u=Mc(e);for(const d of Object.keys(u))this.deactivateRouteAndItsChildren(u[d],o);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const o=Mc(t);e.children.forEach(u=>{this.activateRoutes(u,o[u.value.outlet],r),this.forwardEvent(new D0(u.value.snapshot))}),e.children.length&&this.forwardEvent(new bD(e.value.snapshot))}activateRoutes(e,t,r){const o=e.value,u=t?t.value:null;if(yh(o),o===u)if(o.component){const d=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,t,d.children)}else this.activateChildRoutes(e,t,r);else if(o.component){const d=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const g=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),d.children.onOutletReAttached(g.contexts),d.attachRef=g.componentRef,d.route=g.route.value,d.outlet&&d.outlet.attach(g.componentRef,g.route.value),yh(g.route.value),this.activateChildRoutes(e,null,d.children)}else{const g=Ta(o.snapshot),v=g?.get(h._Vd)??null;d.attachRef=null,d.route=o,d.resolver=v,d.injector=g,d.outlet&&d.outlet.activateWith(o,d.injector),this.activateChildRoutes(e,null,d.children)}}else this.activateChildRoutes(e,null,r)}}class VD{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class ry{constructor(e,t){this.component=e,this.route=t}}function dS(n,e,t){const r=n._root;return Eh(r,e?e._root:null,t,[r.value])}function _l(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,h.Z0I)(n)?e.get(n):n:r}function Eh(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=Mc(e);return n.children.forEach(d=>{(function UD(n,e,t,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const u=n.value,d=e?e.value:null,g=t?t.getContext(n.value.outlet):null;if(d&&u.routeConfig===d.routeConfig){const v=function BD(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!lu(n.url,e.url);case"pathParamsOrQueryParamsChange":return!lu(n.url,e.url)||!ki(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!yl(n,e)||!ki(n.queryParams,e.queryParams);default:return!yl(n,e)}}(d,u,u.routeConfig.runGuardsAndResolvers);v?o.canActivateChecks.push(new VD(r)):(u.data=d.data,u._resolvedData=d._resolvedData),Eh(n,e,u.component?g?g.children:null:t,r,o),v&&g&&g.outlet&&g.outlet.isActivated&&o.canDeactivateChecks.push(new ry(g.outlet.component,d))}else d&&Ih(e,g,o),o.canActivateChecks.push(new VD(r)),Eh(n,null,u.component?g?g.children:null:t,r,o)})(d,u[d.value.outlet],t,r.concat([d.value]),o),delete u[d.value.outlet]}),$n(u,(d,g)=>Ih(d,t.getContext(g),o)),o}function Ih(n,e,t){const r=Mc(n),o=n.value;$n(r,(u,d)=>{Ih(u,o.component?e?e.children.getContext(d):null:e,t)}),t.canDeactivateChecks.push(new ry(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function vl(n){return"function"==typeof n}function Ch(n){return n instanceof Ps||"EmptyError"===n?.name}const Rc=Symbol("INITIAL_VALUE");function bh(){return nr(n=>iu(n.map(e=>e.pipe(Sn(1),$s(Rc)))).pipe((0,ft.U)(e=>{for(const t of e)if(!0!==t){if(t===Rc)return Rc;if(!1===t||t instanceof uu)return t}return!0}),di(e=>e!==Rc),Sn(1)))}function Mp(n){return(0,ou.z)((0,_e.b)(e=>{if(P(e))throw Cp(0,e)}),(0,ft.U)(e=>!0===e))}const gr={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function O0(n,e,t,r,o){const u=iy(n,e,t);return u.matched?function zD(n,e,t,r){const o=e.canMatch;return o&&0!==o.length?ct(o.map(d=>{const g=_l(d,n);return Hs(function fS(n){return n&&vl(n.canMatch)}(g)?g.canMatch(e,t):n.runInContext(()=>g(e,t)))})).pipe(bh(),Mp()):ct(!0)}(r=wh(e,r),e,t).pipe((0,ft.U)(d=>!0===d?u:{...gr})):ct(u)}function iy(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...gr}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const o=(e.matcher||oh)(t,n,e);if(!o)return{...gr};const u={};$n(o.posParams,(g,v)=>{u[v]=g.path});const d=o.consumed.length>0?{...u,...o.consumed[o.consumed.length-1].parameters}:u;return{matched:!0,consumedSegments:o.consumed,remainingSegments:t.slice(o.consumed.length),parameters:d,positionalParamSegments:o.posParams??{}}}function Nc(n,e,t,r,o="corrected"){if(t.length>0&&function ZD(n,e,t){return t.some(r=>xp(n,e,r)&&ms(r)!==Bt)}(n,t,r)){const d=new Xt(e,function qD(n,e,t,r){const o={};o[Bt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const u of t)if(""===u.path&&ms(u)!==Bt){const d=new Xt([],{});d._sourceSegment=n,d._segmentIndexShift=e.length,o[ms(u)]=d}return o}(n,e,r,new Xt(t,n.children)));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:[]}}if(0===t.length&&function KD(n,e,t){return t.some(r=>xp(n,e,r))}(n,t,r)){const d=new Xt(n.segments,function P0(n,e,t,r,o,u){const d={};for(const g of r)if(xp(n,t,g)&&!o[ms(g)]){const v=new Xt([],{});v._sourceSegment=n,v._segmentIndexShift="legacy"===u?n.segments.length:e.length,d[ms(g)]=v}return{...o,...d}}(n,e,t,r,n.children,o));return d._sourceSegment=n,d._segmentIndexShift=e.length,{segmentGroup:d,slicedSegments:t}}const u=new Xt(n.segments,n.children);return u._sourceSegment=n,u._segmentIndexShift=e.length,{segmentGroup:u,slicedSegments:t}}function xp(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function k0(n,e,t,r){return!!(ms(n)===r||r!==Bt&&xp(e,t,n))&&("**"===n.path||iy(e,n,t).matched)}function YD(n,e,t){return 0===e.length&&!n.children[t]}const sy=!1;class gu{constructor(e){this.segmentGroup=e||null}}class Rp{constructor(e){this.urlTree=e}}function Oc(n){return Vs(new gu(n))}function oy(n){return Vs(new Rp(n))}class V0{constructor(e,t,r,o,u){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=o,this.config=u,this.allowRedirects=!0}apply(){const e=Nc(this.urlTree.root,[],[],this.config).segmentGroup,t=new Xt(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,Bt).pipe((0,ft.U)(u=>this.createUrlTree(E(u),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ze(u=>{if(u instanceof Rp)return this.allowRedirects=!1,this.match(u.urlTree);throw u instanceof gu?this.noMatchError(u):u}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,Bt).pipe((0,ft.U)(o=>this.createUrlTree(E(o),e.queryParams,e.fragment))).pipe(Ze(o=>{throw o instanceof gu?this.noMatchError(o):o}))}noMatchError(e){return new h.vHH(4002,sy)}createUrlTree(e,t,r){const o=m(e);return new uu(o,t,r)}expandSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,ft.U)(u=>new Xt([],u))):this.expandSegment(e,r,t,r.segments,o,!0)}expandChildren(e,t,r){const o=[];for(const u of Object.keys(r.children))"primary"===u?o.unshift(u):o.push(u);return(0,dn.D)(o).pipe(te(u=>{const d=r.children[u],g=ba(t,u);return this.expandSegmentGroup(e,g,d,u).pipe((0,ft.U)(v=>({segment:v,outlet:u})))}),_t((u,d)=>(u[d.outlet]=d.segment,u),{}),bt())}expandSegment(e,t,r,o,u,d){return(0,dn.D)(r).pipe(te(g=>this.expandSegmentAgainstRoute(e,t,r,g,o,u,d).pipe(Ze(C=>{if(C instanceof gu)return ct(null);throw C}))),Z(g=>!!g),Ze((g,v)=>{if(Ch(g))return YD(t,o,u)?ct(new Xt([],{})):Oc(t);throw g}))}expandSegmentAgainstRoute(e,t,r,o,u,d,g){return k0(o,t,u,d)?void 0===o.redirectTo?this.matchSegmentAgainstRoute(e,t,o,u,d):g&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d):Oc(t):Oc(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){return"**"===o.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,o,d):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,o){const u=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?oy(u):this.lineralizeSegments(r,u).pipe((0,D.z)(d=>{const g=new Xt(d,{});return this.expandSegment(e,g,t,d,o,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,o,u,d){const{matched:g,consumedSegments:v,remainingSegments:C,positionalParamSegments:A}=iy(t,o,u);if(!g)return Oc(t);const N=this.applyRedirectCommands(v,o.redirectTo,A);return o.redirectTo.startsWith("/")?oy(N):this.lineralizeSegments(o,N).pipe((0,D.z)(W=>this.expandSegment(e,t,r,W.concat(C),d,!1)))}matchSegmentAgainstRoute(e,t,r,o,u){return"**"===r.path?(e=wh(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,ft.U)(g=>(r._loadedRoutes=g.routes,r._loadedInjector=g.injector,new Xt(o,{})))):ct(new Xt(o,{}))):O0(t,r,o,e).pipe(nr(({matched:d,consumedSegments:g,remainingSegments:v})=>d?this.getChildConfig(e=r._injector??e,r,o).pipe((0,D.z)(A=>{const N=A.injector??e,W=A.routes,{segmentGroup:ne,slicedSegments:ge}=Nc(t,g,v,W),Be=new Xt(ne.segments,ne.children);if(0===ge.length&&Be.hasChildren())return this.expandChildren(N,W,Be).pipe((0,ft.U)(Wt=>new Xt(g,Wt)));if(0===W.length&&0===ge.length)return ct(new Xt(g,{}));const He=ms(r)===u;return this.expandSegment(N,Be,W,ge,He?Bt:u,!0).pipe((0,ft.U)(Yt=>new Xt(g.concat(Yt.segments),Yt.children)))})):Oc(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function WD(n,e,t,r){const o=e.canLoad;return void 0===o||0===o.length?ct(!0):ct(o.map(d=>{const g=_l(d,n);return Hs(function Dh(n){return n&&vl(n.canLoad)}(g)?g.canLoad(e,t):n.runInContext(()=>g(e,t)))})).pipe(bh(),Mp())}(e,t,r).pipe((0,D.z)(o=>o?this.configLoader.loadChildren(e,t).pipe((0,_e.b)(u=>{t._loadedRoutes=u.routes,t._loadedInjector=u.injector})):function QD(n){return Vs(_h(sy,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],o=t.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return ct(r);if(o.numberOfChildren>1||!o.children[Bt])return Vs(new h.vHH(4e3,sy));o=o.children[Bt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,o){const u=this.createSegmentGroup(e,t.root,r,o);return new uu(u,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return $n(e,(o,u)=>{if("string"==typeof o&&o.startsWith(":")){const g=o.substring(1);r[u]=t[g]}else r[u]=o}),r}createSegmentGroup(e,t,r,o){const u=this.createSegments(e,t.segments,r,o);let d={};return $n(t.children,(g,v)=>{d[v]=this.createSegmentGroup(e,g,r,o)}),new Xt(u,d)}createSegments(e,t,r,o){return t.map(u=>u.path.startsWith(":")?this.findPosParam(e,u,o):this.findOrReturn(u,r))}findPosParam(e,t,r){const o=r[t.path.substring(1)];if(!o)throw new h.vHH(4001,sy);return o}findOrReturn(e,t){let r=0;for(const o of t){if(o.path===e.path)return t.splice(r),o;r++}return e}}class JD{}class B0{constructor(e,t,r,o,u,d,g,v){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=o,this.url=u,this.paramsInheritanceStrategy=d,this.relativeLinkResolution=g,this.urlSerializer=v}recognize(){const e=Nc(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,Bt).pipe((0,ft.U)(t=>{if(null===t)return null;const r=new ml([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Bt,this.rootComponentType,null,this.urlTree.root,-1,{}),o=new gs(r,t),u=new Jm(this.url,o);return this.inheritParamsAndData(u._root),u}))}inheritParamsAndData(e){const t=e.value,r=Qm(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(o=>this.inheritParamsAndData(o))}processSegmentGroup(e,t,r,o){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,o)}processChildren(e,t,r){return(0,dn.D)(Object.keys(r.children)).pipe(te(o=>{const u=r.children[o],d=ba(t,o);return this.processSegmentGroup(e,d,u,o)}),_t((o,u)=>o&&u?(o.push(...u),o):null),function Tr(n,e=!1){return(0,Rn.e)((t,r)=>{let o=0;t.subscribe((0,pr.x)(r,u=>{const d=n(u,o++);(d||e)&&r.next(u),!d&&r.complete()}))})}(o=>null!==o),b(null),bt(),(0,ft.U)(o=>{if(null===o)return null;const u=Th(o);return function wl(n){n.sort((e,t)=>e.value.outlet===Bt?-1:t.value.outlet===Bt?1:e.value.outlet.localeCompare(t.value.outlet))}(u),u}))}processSegment(e,t,r,o,u){return(0,dn.D)(t).pipe(te(d=>this.processSegmentAgainstRoute(d._injector??e,d,r,o,u)),Z(d=>!!d),Ze(d=>{if(Ch(d))return YD(r,o,u)?ct([]):ct(null);throw d}))}processSegmentAgainstRoute(e,t,r,o,u){if(t.redirectTo||!k0(t,r,o,u))return ct(null);let d;if("**"===t.path){const g=o.length>0?ah(o).parameters:{},v=Ah(r)+o.length;d=ct({snapshot:new ml(o,g,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dy(t),ms(t),t.component??t._loadedComponent??null,t,Np(r),v,Op(t),v),consumedSegments:[],remainingSegments:[]})}else d=O0(r,t,o,e).pipe((0,ft.U)(({matched:g,consumedSegments:v,remainingSegments:C,parameters:A})=>{if(!g)return null;const N=Ah(r)+v.length;return{snapshot:new ml(v,A,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,dy(t),ms(t),t.component??t._loadedComponent??null,t,Np(r),N,Op(t),N),consumedSegments:v,remainingSegments:C}}));return d.pipe(nr(g=>{if(null===g)return ct(null);const{snapshot:v,consumedSegments:C,remainingSegments:A}=g;e=t._injector??e;const N=t._loadedInjector??e,W=function XD(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:ne,slicedSegments:ge}=Nc(r,C,A,W.filter(He=>void 0===He.redirectTo),this.relativeLinkResolution);if(0===ge.length&&ne.hasChildren())return this.processChildren(N,W,ne).pipe((0,ft.U)(He=>null===He?null:[new gs(v,He)]));if(0===W.length&&0===ge.length)return ct([new gs(v,[])]);const Be=ms(t)===u;return this.processSegment(N,W,ne,ge,Be?Bt:u).pipe((0,ft.U)(He=>null===He?null:[new gs(v,He)]))}))}}function cy(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Th(n){const e=[],t=new Set;for(const r of n){if(!cy(r)){e.push(r);continue}const o=e.find(u=>r.value.routeConfig===u.value.routeConfig);void 0!==o?(o.children.push(...r.children),t.add(o)):e.push(r)}for(const r of t){const o=Th(r.children);e.push(new gs(r.value,o))}return e.filter(r=>!t.has(r))}function Np(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Ah(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function dy(n){return n.data||{}}function Op(n){return n.resolve||{}}function j0(n){return"string"==typeof n.title||null===n.title}function hy(n){return nr(e=>{const t=n(e);return t?(0,dn.D)(t).pipe((0,ft.U)(()=>e)):ct(e)})}let Pp=(()=>{class n{buildTitle(t){let r,o=t.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(u=>u.outlet===Bt);return r}getResolvedTitleForRoute(t){return t.data[Fr]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=h.Yz7({token:n,factory:function(){return(0,h.f3M)(H0)},providedIn:"root"}),n})(),H0=(()=>{class n extends Pp{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ri))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class oC{}class mS extends class G0{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const yu=new h.OlP("",{providedIn:"root",factory:()=>({})}),_u=new h.OlP("ROUTES");let El=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Hs(t.loadComponent()).pipe((0,_e.b)(u=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=u}),js(()=>{this.componentLoaders.delete(t)})),o=new Bs(r,()=>new Oi.x).pipe(Us());return this.componentLoaders.set(t,o),o}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const u=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,ft.U)(g=>{this.onLoadEndListener&&this.onLoadEndListener(r);let v,C,A=!1;Array.isArray(g)?C=g:(v=g.create(t).injector,C=lp(v.get(_u,[],h.XFs.Self|h.XFs.Optional)));return{routes:C.map(ny),injector:v}}),js(()=>{this.childrenLoaders.delete(r)})),d=new Bs(u,()=>new Oi.x).pipe(Us());return this.childrenLoaders.set(r,d),d}loadModuleFactoryOrRoutes(t){return Hs(t()).pipe((0,D.z)(r=>r instanceof h.YKP||Array.isArray(r)?ct(r):(0,dn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.zs3),h.LFG(h.Sil))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class uC{}class yS{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function lC(n){throw n}function cC(n,e,t){return e.parse("/")}const dC={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},z0={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function kp(){const n=(0,h.f3M)(ch),e=(0,h.f3M)(vh),t=(0,h.f3M)(Ae),r=(0,h.f3M)(h.zs3),o=(0,h.f3M)(h.Sil),u=(0,h.f3M)(_u,{optional:!0})??[],d=(0,h.f3M)(yu,{optional:!0})??{},g=(0,h.f3M)(H0),v=(0,h.f3M)(Pp,{optional:!0}),C=(0,h.f3M)(uC,{optional:!0}),A=(0,h.f3M)(oC,{optional:!0}),N=new Ir(null,n,e,t,r,o,lp(u));return C&&(N.urlHandlingStrategy=C),A&&(N.routeReuseStrategy=A),N.titleStrategy=v??g,function q0(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(d,N),N}let Ir=(()=>{class n{constructor(t,r,o,u,d,g,v){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=o,this.location=u,this.config=v,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Oi.x,this.errorHandler=lC,this.malformedUriErrorHandler=cC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ct(void 0),this.urlHandlingStrategy=new yS,this.routeReuseStrategy=new mS,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=d.get(El),this.configLoader.onLoadEndListener=W=>this.triggerEvent(new zm(W)),this.configLoader.onLoadStartListener=W=>this.triggerEvent(new E0(W)),this.ngModule=d.get(h.h0i),this.console=d.get(h.c2e);const N=d.get(h.R0b);this.isNgZoneEnabled=N instanceof h.R0b&&h.R0b.isInAngularZone(),this.resetConfig(v),this.currentUrlTree=function cp(){return new uu(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ym(this.currentUrlTree,this.rootComponentType),this.transitions=new Cn({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(di(o=>0!==o.id),(0,ft.U)(o=>({...o,extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),nr(o=>{let u=!1,d=!1;return ct(o).pipe((0,_e.b)(g=>{this.currentNavigation={id:g.id,initialUrl:g.rawUrl,extractedUrl:g.extractedUrl,trigger:g.source,extras:g.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),nr(g=>{const v=this.browserUrlTree.toString(),C=!this.navigated||g.extractedUrl.toString()!==v||v!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||C)&&this.urlHandlingStrategy.shouldProcessUrl(g.rawUrl))return Fp(g.source)&&(this.browserUrlTree=g.extractedUrl),ct(g).pipe(nr(N=>{const W=this.transitions.getValue();return r.next(new gh(N.id,this.serializeUrl(N.extractedUrl),N.source,N.restoredState)),W!==this.transitions.getValue()?kr.E:Promise.resolve(N)}),function ay(n,e,t,r){return nr(o=>function L0(n,e,t,r,o){return new V0(n,e,t,r,o).apply()}(n,e,t,o.extractedUrl,r).pipe((0,ft.U)(u=>({...o,urlAfterRedirects:u}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,_e.b)(N=>{this.currentNavigation={...this.currentNavigation,finalUrl:N.urlAfterRedirects},o.urlAfterRedirects=N.urlAfterRedirects}),function tC(n,e,t,r,o,u){return(0,D.z)(d=>function U0(n,e,t,r,o,u,d="emptyOnly",g="legacy"){return new B0(n,e,t,r,o,d,g,u).recognize().pipe(nr(v=>null===v?function ly(n){return new Pr.y(e=>e.error(n))}(new JD):ct(v)))}(n,e,t,d.urlAfterRedirects,r.serialize(d.urlAfterRedirects),r,o,u).pipe((0,ft.U)(g=>({...d,targetSnapshot:g}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,_e.b)(N=>{if(o.targetSnapshot=N.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!N.extras.skipLocationChange){const ne=this.urlHandlingStrategy.merge(N.urlAfterRedirects,N.rawUrl);this.setBrowserUrl(ne,N)}this.browserUrlTree=N.urlAfterRedirects}const W=new ED(N.id,this.serializeUrl(N.extractedUrl),this.serializeUrl(N.urlAfterRedirects),N.targetSnapshot);r.next(W)}));if(C&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:W,extractedUrl:ne,source:ge,restoredState:Be,extras:He}=g,Zt=new gh(W,this.serializeUrl(ne),ge,Be);r.next(Zt);const Yt=Ym(ne,this.rootComponentType).snapshot;return ct(o={...g,targetSnapshot:Yt,urlAfterRedirects:ne,extras:{...He,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=g.rawUrl,g.resolve(null),kr.E}),(0,_e.b)(g=>{const v=new ID(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot);this.triggerEvent(v)}),(0,ft.U)(g=>o={...g,guards:dS(g.targetSnapshot,g.currentSnapshot,this.rootContexts)}),function gS(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,currentSnapshot:o,guards:{canActivateChecks:u,canDeactivateChecks:d}}=t;return 0===d.length&&0===u.length?ct({...t,guardsResult:!0}):function R0(n,e,t,r){return(0,dn.D)(n).pipe((0,D.z)(o=>function Sp(n,e,t,r,o){const u=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return u&&0!==u.length?ct(u.map(g=>{const v=Ta(e)??o,C=_l(g,v);return Hs(function x0(n){return n&&vl(n.canDeactivate)}(C)?C.canDeactivate(n,e,t,r):v.runInContext(()=>C(n,e,t,r))).pipe(Z())})).pipe(bh()):ct(!0)}(o.component,o.route,t,e,r)),Z(o=>!0!==o,!0))}(d,r,o,n).pipe((0,D.z)(g=>g&&function Aa(n){return"boolean"==typeof n}(g)?function $D(n,e,t,r){return(0,dn.D)(e).pipe(te(o=>So(function HD(n,e){return null!==n&&e&&e(new CD(n)),ct(!0)}(o.route.parent,r),function jD(n,e){return null!==n&&e&&e(new I0(n)),ct(!0)}(o.route,r),function N0(n,e,t){const r=e[e.length-1],u=e.slice(0,e.length-1).reverse().map(d=>function hS(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(d)).filter(d=>null!==d).map(d=>Di(()=>ct(d.guards.map(v=>{const C=Ta(d.node)??t,A=_l(v,C);return Hs(function M0(n){return n&&vl(n.canActivateChild)}(A)?A.canActivateChild(r,n):C.runInContext(()=>A(r,n))).pipe(Z())})).pipe(bh())));return ct(u).pipe(bh())}(n,o.path,t),function GD(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const o=r.map(u=>Di(()=>{const d=Ta(e)??t,g=_l(u,d);return Hs(function S0(n){return n&&vl(n.canActivate)}(g)?g.canActivate(e,n):d.runInContext(()=>g(e,n))).pipe(Z())}));return ct(o).pipe(bh())}(n,o.route,t))),Z(o=>!0!==o,!0))}(r,u,n,e):ct(g)),(0,ft.U)(g=>({...t,guardsResult:g})))})}(this.ngModule.injector,g=>this.triggerEvent(g)),(0,_e.b)(g=>{if(o.guardsResult=g.guardsResult,P(g.guardsResult))throw Cp(0,g.guardsResult);const v=new DD(g.id,this.serializeUrl(g.extractedUrl),this.serializeUrl(g.urlAfterRedirects),g.targetSnapshot,!!g.guardsResult);this.triggerEvent(v)}),di(g=>!!g.guardsResult||(this.restoreHistory(g),this.cancelNavigationTransition(g,"",3),!1)),hy(g=>{if(g.guards.canActivateChecks.length)return ct(g).pipe((0,_e.b)(v=>{const C=new w0(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}),nr(v=>{let C=!1;return ct(v).pipe(function nC(n,e){return(0,D.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:o}}=t;if(!o.length)return ct(t);let u=0;return(0,dn.D)(o).pipe(te(d=>function $0(n,e,t,r){const o=n.routeConfig,u=n._resolve;return void 0!==o?.title&&!j0(o)&&(u[Fr]=o.title),function Pc(n,e,t,r){const o=function rC(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===o.length)return ct({});const u={};return(0,dn.D)(o).pipe((0,D.z)(d=>function iC(n,e,t,r){const o=Ta(e)??r,u=_l(n,o);return Hs(u.resolve?u.resolve(e,t):o.runInContext(()=>u(e,t)))}(n[d],e,t,r).pipe(Z(),(0,_e.b)(g=>{u[d]=g}))),Ut(1),function rr(n){return(0,ft.U)(()=>n)}(u),Ze(d=>Ch(d)?kr.E:Vs(d)))}(u,n,e,r).pipe((0,ft.U)(d=>(n._resolvedData=d,n.data=Qm(n,t).resolve,o&&j0(o)&&(n.data[Fr]=o.title),null)))}(d.route,r,n,e)),(0,_e.b)(()=>u++),Ut(1),(0,D.z)(d=>u===o.length?ct(t):kr.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,_e.b)({next:()=>C=!0,complete:()=>{C||(this.restoreHistory(v),this.cancelNavigationTransition(v,"",2))}}))}),(0,_e.b)(v=>{const C=new Wm(v.id,this.serializeUrl(v.extractedUrl),this.serializeUrl(v.urlAfterRedirects),v.targetSnapshot);this.triggerEvent(C)}))}),hy(g=>{const v=C=>{const A=[];C.routeConfig?.loadComponent&&!C.routeConfig._loadedComponent&&A.push(this.configLoader.loadComponent(C.routeConfig).pipe((0,_e.b)(N=>{C.component=N}),(0,ft.U)(()=>{})));for(const N of C.children)A.push(...v(N));return A};return iu(v(g.targetSnapshot.root)).pipe(b(),Sn(1))}),hy(()=>this.afterPreactivation()),(0,ft.U)(g=>{const v=function TD(n,e,t){const r=xc(n,e._root,t?t._root:void 0);return new Km(r,e)}(this.routeReuseStrategy,g.targetSnapshot,g.currentRouterState);return o={...g,targetRouterState:v}}),(0,_e.b)(g=>{this.currentUrlTree=g.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(g.urlAfterRedirects,g.rawUrl),this.routerState=g.targetRouterState,"deferred"===this.urlUpdateStrategy&&(g.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,g),this.browserUrlTree=g.urlAfterRedirects)}),((n,e,t)=>(0,ft.U)(r=>(new cS(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,g=>this.triggerEvent(g)),(0,_e.b)({next(){u=!0},complete(){u=!0}}),js(()=>{u||d||this.cancelNavigationTransition(o,"",1),this.currentNavigation?.id===o.id&&(this.currentNavigation=null)}),Ze(g=>{if(d=!0,pu(g)){bp(g)||(this.navigated=!0,this.restoreHistory(o,!0));const v=new wp(o.id,this.serializeUrl(o.extractedUrl),g.message,g.cancellationCode);if(r.next(v),bp(g)){const C=this.urlHandlingStrategy.merge(g.url,this.rawUrlTree),A={skipLocationChange:o.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Fp(o.source)};this.scheduleNavigation(C,"imperative",null,A,{resolve:o.resolve,reject:o.reject,promise:o.promise})}else o.resolve(!1)}else{this.restoreHistory(o,!0);const v=new v0(o.id,this.serializeUrl(o.extractedUrl),g,o.targetSnapshot??void 0);r.next(v);try{o.resolve(this.errorHandler(g))}catch(C){o.reject(C)}}return kr.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const o={replaceUrl:!0},u=t.state?.navigationId?t.state:null;if(u){const g={...u};delete g.navigationId,delete g.\u0275routerPageId,0!==Object.keys(g).length&&(o.state=g)}const d=this.parseUrl(t.url);this.scheduleNavigation(d,r,u,o)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(ny),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:o,queryParams:u,fragment:d,queryParamsHandling:g,preserveFragment:v}=r,C=o||this.routerState.root,A=v?this.currentUrlTree.fragment:d;let N=null;switch(g){case"merge":N={...this.currentUrlTree.queryParams,...u};break;case"preserve":N=this.currentUrlTree.queryParams;break;default:N=u||null}return null!==N&&(N=this.removeEmptyProps(N)),qt(C,this.currentUrlTree,t,N,A??null)}navigateByUrl(t,r={skipLocationChange:!1}){const o=P(t)?t:this.parseUrl(t),u=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(u,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function hC(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new h.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(o){r=this.malformedUriErrorHandler(o,this.urlSerializer,t)}return r}isActive(t,r){let o;if(o=!0===r?{...dC}:!1===r?{...z0}:r,P(t))return Lm(this.currentUrlTree,t,o);const u=this.parseUrl(t);return Lm(this.currentUrlTree,u,o)}removeEmptyProps(t){return Object.keys(t).reduce((r,o)=>{const u=t[o];return null!=u&&(r[o]=u),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new gl(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,o,u,d){if(this.disposed)return Promise.resolve(!1);let g,v,C;d?(g=d.resolve,v=d.reject,C=d.promise):C=new Promise((W,ne)=>{g=W,v=ne});const A=++this.navigationId;let N;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(o=this.location.getState()),N=o&&o.\u0275routerPageId?o.\u0275routerPageId:u.replaceUrl||u.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):N=0,this.setTransition({id:A,targetPageId:N,source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:u,resolve:g,reject:v,promise:C,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),C.catch(W=>Promise.reject(W))}setBrowserUrl(t,r){const o=this.urlSerializer.serialize(t),u={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(o)||r.extras.replaceUrl?this.location.replaceState(o,"",u):this.location.go(o,"",u)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const o=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===o?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===o&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(o)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,o){const u=new wp(t.id,this.serializeUrl(t.extractedUrl),r,o);this.triggerEvent(u),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:function(){return kp()},providedIn:"root"}),n})();function Fp(n){return"imperative"!==n}class Z0{}let gC=(()=>{class n{constructor(t,r,o,u,d){this.router=t,this.injector=o,this.preloadingStrategy=u,this.loader=d}setUpPreloading(){this.subscription=this.router.events.pipe(di(t=>t instanceof gl),te(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const o=[];for(const u of r){u.providers&&!u._injector&&(u._injector=(0,h.MMx)(u.providers,t,`Route: ${u.path}`));const d=u._injector??t,g=u._loadedInjector??d;u.loadChildren&&!u._loadedRoutes&&void 0===u.canLoad||u.loadComponent&&!u._loadedComponent?o.push(this.preloadConfig(d,u)):(u.children||u._loadedRoutes)&&o.push(this.processRoutes(g,u.children??u._loadedRoutes))}return(0,dn.D)(o).pipe((0,Ao.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let o;o=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const u=o.pipe((0,D.z)(d=>null===d?ct(void 0):(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,this.processRoutes(d.injector??t,d.routes))));if(r.loadComponent&&!r._loadedComponent){const d=this.loader.loadComponent(r);return(0,dn.D)([u,d]).pipe((0,Ao.J)())}return u})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Ir),h.LFG(h.Sil),h.LFG(h.lqb),h.LFG(Z0),h.LFG(El))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const vu=new h.OlP("");let Ro=(()=>{class n{constructor(t,r,o={}){this.router=t,this.viewportScroller=r,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},o.scrollPositionRestoration=o.scrollPositionRestoration||"disabled",o.anchorScrolling=o.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof gh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof gl&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof fu&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new fu(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){h.$Z()},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac}),n})();function Mh(n,e){return{\u0275kind:n,\u0275providers:e}}function Vp(n){return[{provide:_u,multi:!0,useValue:n}]}function py(){const n=(0,h.f3M)(h.zs3);return e=>{const t=n.get(h.z2F);if(e!==t.components[0])return;const r=n.get(Ir),o=n.get(yC);1===n.get(Up)&&r.initialNavigation(),n.get(Y0,null,h.XFs.Optional)?.setUpPreloading(),n.get(vu,null,h.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),o.closed||(o.next(),o.unsubscribe())}}const yC=new h.OlP("",{factory:()=>new Oi.x}),Up=new h.OlP("",{providedIn:"root",factory:()=>1});const Y0=new h.OlP("");function Gs(n){return Mh(0,[{provide:Y0,useExisting:gC},{provide:Z0,useExisting:n}])}const Q0=new h.OlP("ROUTER_FORROOT_GUARD"),wC=[Ae,{provide:ch,useClass:_a},{provide:Ir,useFactory:kp},vh,{provide:Ca,useFactory:function mC(n){return n.routerState.root},deps:[Ir]},El];function EC(){return new h.PXZ("Router",Ir)}let gy=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wC,[],Vp(t),{provide:Q0,useFactory:Ht,deps:[[Ir,new h.FiY,new h.tp0]]},{provide:yu,useValue:r||{}},r?.useHash?{provide:ye,useClass:Xe}:{provide:ye,useClass:Ye},{provide:vu,useFactory:()=>{const n=(0,h.f3M)(Ir),e=(0,h.f3M)(sc),t=(0,h.f3M)(yu);return t.scrollOffset&&e.setOffset(t.scrollOffset),new Ro(n,e,t)}},r?.preloadingStrategy?Gs(r.preloadingStrategy).\u0275providers:[],{provide:h.PXZ,multi:!0,useFactory:EC},r?.initialNavigation?J0(r):[],[{provide:my,useFactory:py},{provide:h.tb,multi:!0,useExisting:my}]]}}static forChild(t){return{ngModule:n,providers:[Vp(t)]}}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Q0,8))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[Tp]}),n})();function Ht(n){return"guarded"}function J0(n){return["disabled"===n.initialNavigation?Mh(3,[{provide:h.ip1,multi:!0,useFactory:()=>{const e=(0,h.f3M)(Ir);return()=>{e.setUpLocationChangeListener()}}},{provide:Up,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?Mh(2,[{provide:Up,useValue:0},{provide:h.ip1,multi:!0,deps:[h.zs3],useFactory:e=>{const t=e.get(G,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(u=>{const d=e.get(Ir),g=e.get(yC);(function o(u){e.get(Ir).events.pipe(di(g=>g instanceof gl||g instanceof wp||g instanceof v0),(0,ft.U)(g=>g instanceof gl||g instanceof wp&&(0===g.code||1===g.code)&&null),di(g=>null!==g),Sn(1)).subscribe(()=>{u()})})(()=>{u(!0),r=!0}),d.afterPreactivation=()=>(u(!0),r||g.closed?ct(void 0):g),d.initialNavigation()}))}}]).\u0275providers:[]]}const my=new h.OlP("");var ew=k(2722),an=k(2090),Sa=k(9681),Ma=k(1877),Bp=k(4859),bC=k(6451),yy=k(5363),tw=k(6063);class nw extends Oi.x{constructor(e=1/0,t=1/0,r=tw.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:o,_timestampProvider:u,_windowTime:d}=this;t||(r.push(e),!o&&r.push(u.now()+d)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:o}=this,u=o.slice();for(let d=0;d<u.length&&!e.closed;d+=r?1:2)e.next(u[d]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:o}=this,u=(o?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!o){const d=t.now();let g=0;for(let v=1;v<r.length&&r[v]<=d;v+=2)g=v;g&&r.splice(0,g+1)}}}var Dl=k(3099);function rw(n,e,t){let r,o=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:o=!1,scheduler:t}=n):r=n??1/0,(0,Dl.B)({connector:()=>new nw(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:o})}function $p(n,e){return(0,ps.m)(e)?nr(()=>n,e):nr(()=>n)}var Rh=k(9468),vn=k(2122),No=k(2011),Cl=k(259);class Nh{constructor(e){return e}}class _y{constructor(){return(0,Cl.C6)()}}const vy=new h.OlP("angularfire2._apps"),kc={provide:Nh,useFactory:function CS(n){return n&&1===n.length?n[0]:new Nh((0,Cl.Mq)())},deps:[[new h.FiY,vy]]},AC={provide:_y,deps:[[new h.FiY,vy]]};function iw(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new Nh(r)}}let jp=(()=>{class n{constructor(t){(0,Cl.KN)("angularfire",vn.q4.full,"core"),(0,Cl.KN)("angularfire",vn.q4.full,"app"),(0,Cl.KN)("angular",h.q4F.full,t.toString())}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(h.Lbi))},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[kc,AC]}),n})();function SC(n,...e){return{ngModule:jp,providers:[{provide:vy,useFactory:iw(n),multi:!0,deps:[h.R0b,h.zs3,vn.HU,...e]}]}}const xC=(0,vn.u3)(Cl.ZF,!0);var Ie=k(5861);const Hp=new Map,wy={activated:!1,tokenObservers:[]},Ey={initialized:!1,enabled:!1};function fi(n){return Hp.get(n)||Object.assign({},wy)}function Gp(){return Ey}class uw{constructor(e,t,r,o,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=o,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=o,o>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,Ie.Z)(function*(){t.stop();try{t.pending=new an.BH,yield function NC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new an.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const ir=new an.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Cy(n){if(!fi(n).activated)throw ir.create("use-before-activation",{appName:n.name})}function Wp(n,e){return lw.apply(this,arguments)}function lw(){return(lw=(0,Ie.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},o=t.getImmediate({optional:!0});if(o){const N=yield o.getHeartbeatsHeader();N&&(r["X-Firebase-Client"]=N)}const u={method:"POST",body:JSON.stringify(e),headers:r};let d,g;try{d=yield fetch(n,u)}catch(N){throw ir.create("fetch-network-error",{originalErrorMessage:N?.message})}if(200!==d.status)throw ir.create("fetch-status-error",{httpStatus:d.status});try{g=yield d.json()}catch(N){throw ir.create("fetch-parse-error",{originalErrorMessage:N?.message})}const v=g.ttl.match(/^([\d.]+)(s)$/);if(!v||!v[2]||isNaN(Number(v[1])))throw ir.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${g.ttl}`});const C=1e3*Number(v[1]),A=Date.now();return{token:g.token,expireTimeMillis:A+C,issuedAtTimeMillis:A}})).apply(this,arguments)}function Ty(n,e){const{projectId:t,appId:r,apiKey:o}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${o}`,body:{debug_token:e}}}const Zp="firebase-app-check-store";let Kp=null;function dw(){return Kp||(Kp=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var o;e(ir.create("storage-open",{originalErrorMessage:null===(o=r.target.error)||void 0===o?void 0:o.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(Zp,{keyPath:"compositeKey"})}}catch(t){e(ir.create("storage-open",{originalErrorMessage:t?.message}))}}),Kp)}function Yp(){return(Yp=(0,Ie.Z)(function*(n,e){const r=(yield dw()).transaction(Zp,"readwrite"),u=r.objectStore(Zp).put({compositeKey:n,value:e});return new Promise((d,g)=>{u.onsuccess=v=>{d()},r.onerror=v=>{var C;g(ir.create("storage-set",{originalErrorMessage:null===(C=v.target.error)||void 0===C?void 0:C.message}))}})})).apply(this,arguments)}const Jp=new Ma.Yd("@firebase/app-check");function pw(n,e){return(0,an.hl)()?function hw(n,e){return function kC(n,e){return Yp.apply(this,arguments)}(function Qp(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Jp.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function FC(){return Gp().enabled}function LC(){return mw.apply(this,arguments)}function mw(){return(mw=(0,Ie.Z)(function*(){const n=Gp();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const wu={error:"UNKNOWN_ERROR"};function Ry(n){return an.US.encodeString(JSON.stringify(n),!1)}function Xp(n){return eg.apply(this,arguments)}function eg(){return(eg=(0,Ie.Z)(function*(n,e=!1){const t=n.app;Cy(t);const r=fi(t);let u,o=r.token;if(o&&!bl(o)&&(r.token=void 0,o=void 0),!o){const v=yield r.cachedTokenPromise;v&&(bl(v)?o=v:yield pw(t,void 0))}if(!e&&o&&bl(o))return{token:o.token};let g,d=!1;if(FC()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Wp(Ty(t,yield LC()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),d=!0);const v=yield r.exchangeTokenPromise;return yield pw(t,v),r.token=v,{token:v.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),d=!0),o=yield fi(t).exchangeTokenPromise}catch(v){"appCheck/throttled"===v.code?Jp.warn(v.message):Jp.error(v),u=v}return o?u?g=bl(o)?{token:o.token,internalError:u}:yw(u):(g={token:o.token},r.token=o,yield pw(t,o)):g=yw(u),d&&xa(t,g),g})).apply(this,arguments)}function tg(n,e){const t=fi(n),r=t.tokenObservers.filter(o=>o.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function ng(n){const{app:e}=n,t=fi(e);let r=t.tokenRefresher;r||(r=function VC(n){const{app:e}=n;return new uw((0,Ie.Z)(function*(){let r;if(r=fi(e).token?yield Xp(n,!0):yield Xp(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=fi(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function xa(n,e){const t=fi(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function bl(n){return n.expireTimeMillis-Date.now()>0}function yw(n){return{token:Ry(wu),error:n}}class UC{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=fi(this.app);for(const t of e)tg(this.app,t.next);return Promise.resolve()}}const Cw="app-check-internal";!function Uy(){(0,Sa._registerComponent)(new Bp.wA("app-check",n=>function _w(n,e){return new UC(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(Cw).initialize()})),(0,Sa._registerComponent)(new Bp.wA(Cw,n=>function BC(n){return{getToken:e=>Xp(n,e),addTokenListener:e=>function kh(n,e,t,r){const{app:o}=n,u=fi(o);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&bl(u.token)){const g=u.token;Promise.resolve().then(()=>{t({token:g.token}),ng(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>ng(n))}(n,"INTERNAL",e),removeTokenListener:e=>tg(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Sa.registerVersion)("@firebase/app-check","0.6.3")}();class Lh{constructor(){return(0,vn.vb)("app-check")}}typeof window<"u"&&window,k(9260);const Sw=new h.OlP("angularfire2.auth.use-emulator"),og=new h.OlP("angularfire2.auth.settings"),Mw=new h.OlP("angularfire2.auth.tenant-id"),xw=new h.OlP("angularfire2.auth.langugage-code"),Vh=new h.OlP("angularfire2.auth.use-device-language"),ag=new h.OlP("angularfire.auth.persistence"),Uh=(n,e,t,r,o,u,d,g)=>(0,No.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const v=e.runOutsideAngular(()=>n.auth());if(t&&v.useEmulator(...t),r&&(v.tenantId=r),v.languageCode=o,u&&v.useDeviceLanguage(),d)for(const[C,A]of Object.entries(d))v.settings[C]=A;return g&&v.setPersistence(g),v},[t,r,o,u,d,g]);let Rw=(()=>{class n{constructor(t,r,o,u,d,g,v,C,A,N,W,ne){const ge=new Oi.x,Be=ct(void 0).pipe((0,yy.Q)(d.outsideAngular),nr(()=>u.runOutsideAngular(()=>Promise.resolve().then(k.bind(k,9568)))),(0,ft.U)(()=>(0,No.on)(t,u,r)),(0,ft.U)(He=>Uh(He,u,g,C,A,N,v,W)),rw({bufferSize:1,refCount:!1}));if(io(o))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Be.pipe(Z()).subscribe();const Zt=Be.pipe(nr(zt=>zt.getRedirectResult().then(Gt=>Gt,()=>null)),vn.iC,rw({bufferSize:1,refCount:!1})),Yt=Be.pipe(nr(zt=>new Pr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>zt.onAuthStateChanged(tn=>Gt.next(tn),tn=>Gt.error(tn),()=>Gt.complete()))})))),Wt=Be.pipe(nr(zt=>new Pr.y(Gt=>({unsubscribe:u.runOutsideAngular(()=>zt.onIdTokenChanged(tn=>Gt.next(tn),tn=>Gt.error(tn),()=>Gt.complete()))}))));this.authState=Zt.pipe($p(Yt),(0,Rh.R)(d.outsideAngular),(0,yy.Q)(d.insideAngular)),this.user=Zt.pipe($p(Wt),(0,Rh.R)(d.outsideAngular),(0,yy.Q)(d.insideAngular)),this.idToken=this.user.pipe(nr(zt=>zt?(0,dn.D)(zt.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(nr(zt=>zt?(0,dn.D)(zt.getIdTokenResult()):ct(null))),this.credential=(0,bC.T)(Zt,ge,this.authState.pipe(di(zt=>!zt))).pipe((0,ft.U)(zt=>zt?.user?zt:null),(0,Rh.R)(d.outsideAngular),(0,yy.Q)(d.insideAngular))}return(0,No.pX)(this,Be,u,{spy:{apply:(He,Zt,Yt)=>{(He.startsWith("signIn")||He.startsWith("createUser"))&&Yt.then(Wt=>ge.next(Wt))}}})}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(No.Dh),h.LFG(No.xv,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(vn.HU),h.LFG(Sw,8),h.LFG(og,8),h.LFG(Mw,8),h.LFG(xw,8),h.LFG(Vh,8),h.LFG(ag,8),h.LFG(Lh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),ug=(()=>{class n{constructor(t,r){this.fireauth=t,this.router=r}login(t,r){this.fireauth.signInWithEmailAndPassword(t,r).then(o=>{localStorage.setItem("token","true"),this.router.navigate(1==o.user?.emailVerified?["/dashboard"]:["/verify-email"])},o=>{alert("Bad credential!"),this.router.navigate(["/login"])})}register(t,r){this.fireauth.createUserWithEmailAndPassword(t,r).then(()=>{alert("Register Successfull"),this.router.navigate(["/login"]),this.sendEmailForVerification()},o=>{alert(o.message),this.router.navigate(["/register"])})}logout(){this.fireauth.signOut().then(()=>{localStorage.removeItem("token"),this.router.navigate(["/login"])},t=>{alert(t.message)})}forgotPassword(t){this.fireauth.sendPasswordResetEmail(t).then(()=>{this.router.navigate(["/verify-email"])},r=>{alert("Something went wrong")})}sendEmailForVerification(){this.fireauth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["/verify-email"])})}googleSignIn(){this.fireauth.signInWithPopup(new ew.Q).then(t=>{this.router.navigate(["/dashboard"]),localStorage.setItem("token",JSON.stringify(t.user?.uid))},t=>{alert(t.message)})}authenticated(){return!(!localStorage.getItem("user")&&!localStorage.getItem("token"))}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(Rw),h.LFG(Ir))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Ow=k(4986);function lg(){return(0,Rn.e)((n,e)=>{let t,r=!1;n.subscribe((0,pr.x)(e,o=>{const u=t;t=o,r&&e.next([u,o]),r=!0}))})}function kw(n,e){return n===e}k(9568);var dt,Ra=k(3942),cg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},_s={},jy=jy||{},Vt=cg||self;function Bh(){}function dg(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function $h(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Hy="closure_uid_"+(1e9*Math.random()>>>0),HS=0;function ZC(n,e,t){return n.call.apply(n.bind,arguments)}function GS(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var o=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(o,r),n.apply(e,o)}}return function(){return n.apply(e,arguments)}}function pi(n,e,t){return(pi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ZC:GS).apply(null,arguments)}function hg(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Jr(n,e){function t(){}t.prototype=e.prototype,n.X=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.Wb=function(r,o,u){for(var d=Array(arguments.length-2),g=2;g<arguments.length;g++)d[g-2]=arguments[g];return e.prototype[o].apply(r,d)}}function Na(){this.s=this.s,this.o=this.o}Na.prototype.s=!1,Na.prototype.na=function(){!this.s&&(this.s=!0,this.M(),0)&&function jh(n){Object.prototype.hasOwnProperty.call(n,Hy)&&n[Hy]||(n[Hy]=++HS)}(this)},Na.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Lw=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function Hh(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Vw(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(dg(r)){const o=n.length||0,u=r.length||0;n.length=o+u;for(let d=0;d<u;d++)n[o+d]=r[d]}else n.push(r)}}function gi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}gi.prototype.h=function(){this.defaultPrevented=!0};var KC=function(){if(!Vt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Vt.addEventListener("test",Bh,e),Vt.removeEventListener("test",Bh,e)}catch{}return n}();function fg(n){return/^[\s\xa0]*$/.test(n)}var Uw=String.prototype.trim?function(n){return n.trim()}:function(n){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(n)[1]};function Wy(n,e){return n<e?-1:n>e?1:0}function Al(){var n=Vt.navigator;return n&&(n=n.userAgent)?n:""}function mi(n){return-1!=Al().indexOf(n)}function Bw(n){return Bw[" "](n),n}Bw[" "]=Bh;var Po,n,YC=mi("Opera"),Bc=mi("Trident")||mi("MSIE"),pg=mi("Edge"),zy=pg||Bc,zs=mi("Gecko")&&!(-1!=Al().toLowerCase().indexOf("webkit")&&!mi("Edge"))&&!(mi("Trident")||mi("MSIE"))&&!mi("Edge"),Wh=-1!=Al().toLowerCase().indexOf("webkit")&&!mi("Edge");function Xr(){var n=Vt.document;return n?n.documentMode:void 0}e:{var $c="",Li=(n=Al(),zs?/rv:([^\);]+)(\)|;)/.exec(n):pg?/Edge\/([\d\.]+)/.exec(n):Bc?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):Wh?/WebKit\/(\S+)/.exec(n):YC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Li&&($c=Li?Li[1]:""),Bc){var zh=Xr();if(null!=zh&&zh>parseFloat($c)){Po=String(zh);break e}}Po=$c}var jc={};var Gc=Vt.document&&Bc&&(Xr()||parseInt(Po,10))||void 0;function ko(n,e){if(gi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(zs){e:{try{Bw(e.nodeName);var o=!0;break e}catch{}o=!1}o||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:Wc[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&ko.X.h.call(this)}}Jr(ko,gi);var Wc={2:"touch",3:"pen",4:"mouse"};ko.prototype.h=function(){ko.X.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var Fo="closure_listenable_"+(1e6*Math.random()|0),zc=0;function $w(n,e,t,r,o){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.ha=o,this.key=++zc,this.ba=this.ea=!1}function qh(n){n.ba=!0,n.listener=null,n.proxy=null,n.src=null,n.ha=null}function gg(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function qy(n){const e={};for(const t in n)e[t]=n[t];return e}const Zy="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ky(n,e){let t,r;for(let o=1;o<arguments.length;o++){for(t in r=arguments[o],r)n[t]=r[t];for(let u=0;u<Zy.length;u++)t=Zy[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Zh(n){this.src=n,this.g={},this.h=0}function mg(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],o=Lw(r,e);(u=0<=o)&&Array.prototype.splice.call(r,o,1),u&&(qh(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function yg(n,e,t,r){for(var o=0;o<n.length;++o){var u=n[o];if(!u.ba&&u.listener==e&&u.capture==!!t&&u.ha==r)return o}return-1}Zh.prototype.add=function(n,e,t,r,o){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var d=yg(n,e,r,o);return-1<d?(e=n[d],t||(e.ea=!1)):((e=new $w(e,this.src,u,!!r,o)).ea=t,n.push(e)),e};var Yy="closure_lm_"+(1e6*Math.random()|0),Qy={};function Jy(n,e,t,r,o){if(r&&r.once)return _g(n,e,t,r,o);if(Array.isArray(e)){for(var u=0;u<e.length;u++)Jy(n,e[u],t,r,o);return null}return t=Qh(t),n&&n[Fo]?n.N(e,t,$h(r)?!!r.capture:!!r,o):jw(n,e,t,!1,r,o)}function jw(n,e,t,r,o,u){if(!e)throw Error("Invalid event type");var d=$h(o)?!!o.capture:!!o,g=Yh(n);if(g||(n[Yy]=g=new Zh(n)),(t=g.add(e,t,r,d,u)).proxy)return t;if(r=function QC(){const e=wg;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)KC||(o=d),void 0===o&&(o=!1),n.addEventListener(e.toString(),r,o);else if(n.attachEvent)n.attachEvent(Kh(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function _g(n,e,t,r,o){if(Array.isArray(e)){for(var u=0;u<e.length;u++)_g(n,e[u],t,r,o);return null}return t=Qh(t),n&&n[Fo]?n.O(e,t,$h(r)?!!r.capture:!!r,o):jw(n,e,t,!0,r,o)}function vg(n,e,t,r,o){if(Array.isArray(e))for(var u=0;u<e.length;u++)vg(n,e[u],t,r,o);else r=$h(r)?!!r.capture:!!r,t=Qh(t),n&&n[Fo]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=yg(u=n.g[e],t,r,o))&&(qh(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=Yh(n))&&(e=n.g[e.toString()],n=-1,e&&(n=yg(e,t,r,o)),(t=-1<n?e[n]:null)&&Xy(t))}function Xy(n){if("number"!=typeof n&&n&&!n.ba){var e=n.src;if(e&&e[Fo])mg(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Kh(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=Yh(e))?(mg(t,n),0==t.h&&(t.src=null,e[Yy]=null)):qh(n)}}}function Kh(n){return n in Qy?Qy[n]:Qy[n]="on"+n}function wg(n,e){if(n.ba)n=!0;else{e=new ko(e,this);var t=n.listener,r=n.ha||n.src;n.ea&&Xy(n),n=t.call(r,e)}return n}function Yh(n){return(n=n[Yy])instanceof Zh?n:null}var e_="__closure_events_fn_"+(1e9*Math.random()>>>0);function Qh(n){return"function"==typeof n?n:(n[e_]||(n[e_]=function(e){return n.handleEvent(e)}),n[e_])}function Ar(){Na.call(this),this.i=new Zh(this),this.P=this,this.I=null}function Hr(n,e){var t,r=n.I;if(r)for(t=[];r;r=r.I)t.push(r);if(n=n.P,r=e.type||e,"string"==typeof e)e=new gi(e,n);else if(e instanceof gi)e.target=e.target||n;else{var o=e;Ky(e=new gi(r,n),o)}if(o=!0,t)for(var u=t.length-1;0<=u;u--){var d=e.g=t[u];o=Jh(d,r,!0,e)&&o}if(o=Jh(d=e.g=n,r,!0,e)&&o,o=Jh(d,r,!1,e)&&o,t)for(u=0;u<t.length;u++)o=Jh(d=e.g=t[u],r,!1,e)&&o}function Jh(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var o=!0,u=0;u<e.length;++u){var d=e[u];if(d&&!d.ba&&d.capture==t){var g=d.listener,v=d.ha||d.src;d.ea&&mg(n.i,d),o=!1!==g.call(v,r)&&o}}return o&&!r.defaultPrevented}Jr(Ar,Na),Ar.prototype[Fo]=!0,Ar.prototype.removeEventListener=function(n,e,t,r){vg(this,n,e,t,r)},Ar.prototype.M=function(){if(Ar.X.M.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qh(t[r]);delete n.g[e],n.h--}}this.I=null},Ar.prototype.N=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Ar.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Xh=Vt.JSON.stringify;function Hw(){var n=qw;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Ig,Eg=new class{constructor(n,e){this.i=n,this.j=e,this.h=0,this.g=null}get(){let n;return 0<this.h?(this.h--,n=this.g,this.g=n.next,n.next=null):n=this.i(),n}}(()=>new Ww,n=>n.reset());class Ww{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function JC(n){Vt.setTimeout(()=>{throw n},0)}function t_(n,e){Ig||function zw(){var n=Vt.Promise.resolve(void 0);Ig=function(){n.then(XC)}}(),Dg||(Ig(),Dg=!0),qw.add(n,e)}var Dg=!1,qw=new class Gw{constructor(){this.h=this.g=null}add(e,t){const r=Eg.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}};function XC(){for(var n;n=Hw();){try{n.h.call(n.g)}catch(t){JC(t)}var e=Eg;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Dg=!1}function Cg(n,e){Ar.call(this),this.h=n||1,this.g=e||Vt,this.j=pi(this.lb,this),this.l=Date.now()}function bg(n){n.ca=!1,n.R&&(n.g.clearTimeout(n.R),n.R=null)}function ef(n,e,t){if("function"==typeof n)t&&(n=pi(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=pi(n.handleEvent,n)}return 2147483647<Number(e)?-1:Vt.setTimeout(n,e||0)}function n_(n){n.g=ef(()=>{n.g=null,n.i&&(n.i=!1,n_(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Jr(Cg,Ar),(dt=Cg.prototype).ca=!1,dt.R=null,dt.lb=function(){if(this.ca){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.R=this.g.setTimeout(this.j,this.h-n):(this.R&&(this.g.clearTimeout(this.R),this.R=null),Hr(this,"tick"),this.ca&&(bg(this),this.start()))}},dt.start=function(){this.ca=!0,this.R||(this.R=this.g.setTimeout(this.j,this.h),this.l=Date.now())},dt.M=function(){Cg.X.M.call(this),bg(this),delete this.g};class Zw extends Na{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:n_(this)}M(){super.M(),this.g&&(Vt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function qc(n){Na.call(this),this.h=n,this.g={}}Jr(qc,Na);var r_=[];function i_(n,e,t,r){Array.isArray(t)||(t&&(r_[0]=t.toString()),t=r_);for(var o=0;o<t.length;o++){var u=Jy(e,t[o],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function s_(n){gg(n.g,function(e,t){this.g.hasOwnProperty(t)&&Xy(e)},n),n.g={}}function tf(){this.g=!0}function Zc(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Yw(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var o=r[1];if(Array.isArray(o)&&!(1>o.length)){var u=o[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var d=1;d<o.length;d++)o[d]=""}}}return Xh(t)}catch{return e}}(n,t)+(r?" "+r:"")})}qc.prototype.M=function(){qc.X.M.call(this),s_(this)},qc.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},tf.prototype.Aa=function(){this.g=!1},tf.prototype.info=function(){};var Ml={},Sr=null;function nf(){return Sr=Sr||new Ar}function Qw(n){gi.call(this,Ml.Pa,n)}function rf(n){const e=nf();Hr(e,new Qw(e))}function o_(n,e){gi.call(this,Ml.STAT_EVENT,n),this.stat=e}function bi(n){const e=nf();Hr(e,new o_(e,n))}function a_(n,e){gi.call(this,Ml.Qa,n),this.size=e}function Kc(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Vt.setTimeout(function(){n()},e)}Ml.Pa="serverreachability",Jr(Qw,gi),Ml.STAT_EVENT="statevent",Jr(o_,gi),Ml.Qa="timingevent",Jr(a_,gi);var Oa={NO_ERROR:0,mb:1,zb:2,yb:3,tb:4,xb:5,Ab:6,Ma:7,TIMEOUT:8,Db:9},Jw={rb:"complete",Nb:"success",Na:"error",Ma:"abort",Fb:"ready",Gb:"readystatechange",TIMEOUT:"timeout",Bb:"incrementaldata",Eb:"progress",ub:"downloadprogress",Vb:"uploadprogress"};function u_(){}function Xw(){}u_.prototype.h=null;var sf,Yc={OPEN:"a",qb:"b",Na:"c",Cb:"d"};function eE(){gi.call(this,"d")}function Tg(){gi.call(this,"c")}function Ji(){}function af(n,e,t,r){this.l=n,this.j=e,this.m=t,this.U=r||1,this.S=new qc(this),this.O=Lo,this.T=new Cg(n=zy?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.V=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.Y=-1,this.I=!1,this.N=0,this.L=null,this.$=this.J=this.Z=this.P=!1,this.h=new tE}function tE(){this.i=null,this.g="",this.h=!1}Jr(eE,gi),Jr(Tg,gi),Jr(Ji,u_),Ji.prototype.g=function(){return new XMLHttpRequest},Ji.prototype.i=function(){return{}},sf=new Ji;var Lo=45e3,Xi={},Vi={};function Ag(n,e,t){n.K=1,n.v=hf(qs(e)),n.s=t,n.P=!0,c_(n,null)}function c_(n,e){n.F=Date.now(),uf(n),n.A=qs(n.v);var t=n.A,r=n.U;Array.isArray(r)||(r=[String(r)]),dE(t.i,"t",r),n.C=0,t=n.l.H,n.h=new tE,n.g=S_(n.l,t?e:null,!n.s),0<n.N&&(n.L=new Zw(pi(n.La,n,n.g),n.N)),i_(n.S,n.g,"readystatechange",n.ib),e=n.H?qy(n.H):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.da(n.A,n.u,n.s,e)):(n.u="GET",n.g.da(n.A,n.u,null,e)),rf(),function Kw(n,e,t,r,o,u){n.info(function(){if(n.g)if(u)for(var d="",g=u.split("&"),v=0;v<g.length;v++){var C=g[v].split("=");if(1<C.length){var A=C[0];C=C[1];var N=A.split("_");d=2<=N.length&&"type"==N[1]?d+(A+"=")+C+"&":d+(A+"=redacted&")}}else d=null;else d=u;return"XMLHTTP REQ ("+r+") [attempt "+o+"]: "+e+"\n"+t+"\n"+d})}(n.j,n.u,n.A,n.m,n.U,n.s)}function nE(n){return!!n.g&&"GET"==n.u&&2!=n.K&&n.l.Da}function rE(n,e,t){let o,r=!0;for(;!n.I&&n.C<t.length;){if(o=tb(n,t),o==Vi){4==e&&(n.o=4,bi(14),r=!1),Zc(n.j,n.m,null,"[Incomplete Response]");break}if(o==Xi){n.o=4,bi(15),Zc(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Zc(n.j,n.m,o,null),d_(n,o)}nE(n)&&o!=Vi&&o!=Xi&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,bi(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.$&&(n.$=!0,(e=n.l).g==n&&e.$&&!e.K&&(e.j.info("Great, no buffering proxy detected. Bytes received: "+t.length),b_(e),e.K=!0,bi(11))):(Zc(n.j,n.m,t,"[Invalid Chunked Response]"),Du(n),lf(n))}function tb(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Vi:(t=Number(e.substring(t,r)),isNaN(t)?Xi:(r+=1)+t>e.length?Vi:(e=e.substr(r,t),n.C=r+t,e))}function uf(n){n.V=Date.now()+n.O,Sg(n,n.O)}function Sg(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Kc(pi(n.gb,n),e)}function Iu(n){n.B&&(Vt.clearTimeout(n.B),n.B=null)}function lf(n){0==n.l.G||n.I||CE(n.l,n)}function Du(n){Iu(n);var e=n.L;e&&"function"==typeof e.na&&e.na(),n.L=null,bg(n.T),s_(n.S),n.g&&(e=n.g,n.g=null,e.abort(),e.na())}function d_(n,e){try{var t=n.l;if(0!=t.G&&(t.g==n||p_(t.h,n)))if(!n.J&&p_(t.h,n)&&3==t.G){try{var r=t.Fa.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var o=r;if(0==o[0]){e:if(!t.u){if(t.g){if(!(t.g.F+3e3<n.F))break e;Og(t),yf(t)}C_(t),bi(18)}}else t.Ba=o[1],0<t.Ba-t.T&&37500>o[2]&&t.L&&0==t.A&&!t.v&&(t.v=Kc(pi(t.cb,t),6e3));if(1>=pE(t.h)&&t.ja){try{t.ja()}catch{}t.ja=void 0}}else Vo(t,11)}else if((n.J||t.g==n)&&Og(t),!fg(e))for(o=t.Fa.g.parse(e),e=0;e<o.length;e++){let C=o[e];if(t.T=C[0],C=C[1],2==t.G)if("c"==C[0]){t.I=C[1],t.ka=C[2];const A=C[3];null!=A&&(t.ma=A,t.j.info("VER="+t.ma));const N=C[4];null!=N&&(t.Ca=N,t.j.info("SVER="+t.Ca));const W=C[5];null!=W&&"number"==typeof W&&0<W&&(t.J=r=1.5*W,t.j.info("backChannelRequestTimeoutMs_="+r)),r=t;const ne=n.g;if(ne){const ge=ne.g?ne.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ge){var u=r.h;u.g||-1==ge.indexOf("spdy")&&-1==ge.indexOf("quic")&&-1==ge.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(g_(u,u.h),u.h=null))}if(r.D){const Be=ne.g?ne.g.getResponseHeader("X-HTTP-Session-Id"):null;Be&&(r.za=Be,jn(r.F,r.D,Be))}}t.G=3,t.l&&t.l.xa(),t.$&&(t.P=Date.now()-n.F,t.j.info("Handshake RTT: "+t.P+"ms"));var d=n;if((r=t).sa=A_(r,r.H?r.ka:null,r.V),d.J){m_(r.h,d);var g=d,v=r.J;v&&g.setTimeout(v),g.B&&(Iu(g),uf(g)),r.g=d}else DE(r);0<t.i.length&&Ng(t)}else"stop"!=C[0]&&"close"!=C[0]||Vo(t,7);else 3==t.G&&("stop"==C[0]||"close"==C[0]?"stop"==C[0]?Vo(t,7):EE(t):"noop"!=C[0]&&t.l&&t.l.wa(C),t.A=0)}rf()}catch{}}function cf(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(dg(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function sE(n){if(n.oa&&"function"==typeof n.oa)return n.oa();if(!n.W||"function"!=typeof n.W){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(dg(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function iE(n){if(n.W&&"function"==typeof n.W)return n.W();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(dg(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),o=r.length,u=0;u<o;u++)e.call(void 0,r[u],t&&t[u],n)}(dt=af.prototype).setTimeout=function(n){this.O=n},dt.ib=function(n){n=n.target;const e=this.L;e&&3==Pa(n)?e.l():this.La(n)},dt.La=function(n){try{if(n==this.g)e:{const A=Pa(this.g);var e=this.g.Ea();if(this.g.aa(),!(3>A)&&(3!=A||zy||this.g&&(this.h.h||this.g.fa()||xl(this.g)))){this.I||4!=A||7==e||rf(),Iu(this);var t=this.g.aa();this.Y=t;t:if(nE(this)){var r=xl(this.g);n="";var o=r.length,u=4==Pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Du(this),lf(this);var d="";break t}this.h.i=new Vt.TextDecoder}for(e=0;e<o;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==o-1});r.splice(0,o),this.h.g+=n,this.C=0,d=this.h.g}else d=this.g.fa();if(this.i=200==t,function WS(n,e,t,r,o,u,d){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+o+"]: "+e+"\n"+t+"\n"+u+" "+d})}(this.j,this.u,this.A,this.m,this.U,A,t),this.i){if(this.Z&&!this.J){t:{if(this.g){var g,v=this.g;if((g=v.g?v.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!fg(g)){var C=g;break t}}C=null}if(!(t=C)){this.i=!1,this.o=3,bi(12),Du(this),lf(this);break e}Zc(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,d_(this,t)}this.P?(rE(this,A,d),zy&&this.i&&3==A&&(i_(this.S,this.T,"tick",this.hb),this.T.start())):(Zc(this.j,this.m,d,null),d_(this,d)),4==A&&Du(this),this.i&&!this.I&&(4==A?CE(this.l,this):(this.i=!1,uf(this)))}else 400==t&&0<d.indexOf("Unknown SID")?(this.o=3,bi(12)):(this.o=0,bi(13)),Du(this),lf(this)}}}catch{}},dt.hb=function(){if(this.g){var n=Pa(this.g),e=this.g.fa();this.C<e.length&&(Iu(this),rE(this,n,e),this.i&&4!=n&&uf(this))}},dt.cancel=function(){this.I=!0,Du(this)},dt.gb=function(){this.B=null;const n=Date.now();0<=n-this.V?(function eb(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&(rf(),bi(17)),Du(this),this.o=2,lf(this)):Sg(this,this.V-n)};var oE=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Cu(n,e){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Cu){this.h=void 0!==e?e:n.h,Qc(this,n.j),this.s=n.s,this.g=n.g,df(this,n.m),this.l=n.l,e=n.i;var t=new ff;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),h_(this,t),this.o=n.o}else n&&(t=String(n).match(oE))?(this.h=!!e,Qc(this,t[1]||"",!0),this.s=Jc(t[2]||""),this.g=Jc(t[3]||"",!0),df(this,t[4]),this.l=Jc(t[5]||"",!0),h_(this,t[6]||"",!0),this.o=Jc(t[7]||"")):(this.h=!!e,this.i=new ff(null,this.h))}function qs(n){return new Cu(n)}function Qc(n,e,t){n.j=t?Jc(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function df(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function h_(n,e,t){e instanceof ff?(n.i=e,function ob(n,e){e&&!n.j&&(bu(n),n.i=null,n.g.forEach(function(t,r){var o=r.toLowerCase();r!=o&&(lE(this,r),dE(this,o,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Xc(e,ib)),n.i=new ff(e,n.h))}function jn(n,e,t){n.i.set(e,t)}function hf(n){return jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Jc(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Xc(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,uE),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function uE(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Cu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Xc(e,f_,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Xc(e,f_,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Xc(t,"/"==t.charAt(0)?rb:nb,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Xc(t,sb)),n.join("")};var f_=/[#\/\?@]/g,nb=/[#\?:]/g,rb=/[#\?]/g,ib=/[#\?@]/g,sb=/#/g;function ff(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function bu(n){n.g||(n.g=new Map,n.h=0,n.i&&function aE(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),o=null;if(0<=r){var u=n[t].substring(0,r);o=n[t].substring(r+1)}else u=n[t];e(u,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function lE(n,e){bu(n),e=ed(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function cE(n,e){return bu(n),e=ed(n,e),n.g.has(e)}function dE(n,e,t){lE(n,e),0<t.length&&(n.i=null,n.g.set(ed(n,e),Hh(t)),n.h+=t.length)}function ed(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function hE(n){this.l=n||ub,n=Vt.PerformanceNavigationTiming?0<(n=Vt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Vt.g&&Vt.g.Ga&&Vt.g.Ga()&&Vt.g.Ga().$b),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(dt=ff.prototype).add=function(n,e){bu(this),this.i=null,n=ed(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},dt.forEach=function(n,e){bu(this),this.g.forEach(function(t,r){t.forEach(function(o){n.call(e,o,r,this)},this)},this)},dt.oa=function(){bu(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const o=n[r];for(let u=0;u<o.length;u++)t.push(e[r])}return t},dt.W=function(n){bu(this);let e=[];if("string"==typeof n)cE(this,n)&&(e=e.concat(this.g.get(ed(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},dt.set=function(n,e){return bu(this),this.i=null,cE(this,n=ed(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},dt.get=function(n,e){return n&&0<(n=this.W(n)).length?String(n[0]):e},dt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),d=this.W(r);for(r=0;r<d.length;r++){var o=u;""!==d[r]&&(o+="="+encodeURIComponent(String(d[r]))),n.push(o)}}return this.i=n.join("&")};var ub=10;function fE(n){return!!n.h||!!n.g&&n.g.size>=n.j}function pE(n){return n.h?1:n.g?n.g.size:0}function p_(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function g_(n,e){n.g?n.g.add(e):n.h=e}function m_(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function y_(n){if(null!=n.h)return n.i.concat(n.h.D);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.D);return e}return Hh(n.i)}function Mg(){}function gE(){this.g=new Mg}function mE(n,e,t){const r=t||"";try{cf(n,function(o,u){let d=o;$h(o)&&(d=Xh(o)),e.push(r+u+"="+encodeURIComponent(d))})}catch(o){throw e.push(r+"type="+encodeURIComponent("_badmap")),o}}function pf(n,e,t,r,o){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,o(r)}catch{}}function td(n){this.l=n.ac||null,this.j=n.jb||!1}function gf(n,e){Ar.call(this),this.D=n,this.u=e,this.m=void 0,this.readyState=xg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}hE.prototype.cancel=function(){if(this.i=y_(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Mg.prototype.stringify=function(n){return Vt.JSON.stringify(n,void 0)},Mg.prototype.parse=function(n){return Vt.JSON.parse(n,void 0)},Jr(td,u_),td.prototype.g=function(){return new gf(this.l,this.j)},td.prototype.i=function(n){return function(){return n}}({}),Jr(gf,Ar);var xg=0;function __(n){n.j.read().then(n.Ta.bind(n)).catch(n.ga.bind(n))}function Zs(n){n.readyState=4,n.l=null,n.j=null,n.A=null,mf(n)}function mf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(dt=gf.prototype).open=function(n,e){if(this.readyState!=xg)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,mf(this)},dt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.D||Vt).fetch(new Request(this.B,e)).then(this.Wa.bind(this),this.ga.bind(this))},dt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Zs(this)),this.readyState=xg},dt.Wa=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,mf(this)),this.g&&(this.readyState=3,mf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ua.bind(this),this.ga.bind(this));else if(typeof Vt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;__(this)}else n.text().then(this.Va.bind(this),this.ga.bind(this))},dt.Ta=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Zs(this):mf(this),3==this.readyState&&__(this)}},dt.Va=function(n){this.g&&(this.response=this.responseText=n,Zs(this))},dt.Ua=function(n){this.g&&(this.response=n,Zs(this))},dt.ga=function(){this.g&&Zs(this)},dt.setRequestHeader=function(n,e){this.v.append(n,e)},dt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},dt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(gf.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var lb=Vt.JSON.parse;function Nn(n){Ar.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=cb,this.K=this.L=!1}Jr(Nn,Ar);var cb="",v_=/^https?$/i,zS=["POST","PUT"];function w_(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,db(n),Rg(n)}function db(n){n.D||(n.D=!0,Hr(n,"complete"),Hr(n,"error"))}function At(n){if(n.h&&typeof jy<"u"&&(!n.C[1]||4!=Pa(n)||2!=n.aa()))if(n.v&&4==Pa(n))ef(n.Ha,0,n);else if(Hr(n,"readystatechange"),4==Pa(n)){n.h=!1;try{const g=n.aa();e:switch(g){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===g){var o=String(n.H).match(oE)[1]||null;if(!o&&Vt.self&&Vt.self.location){var u=Vt.self.location.protocol;o=u.substr(0,u.length-1)}r=!v_.test(o?o.toLowerCase():"")}t=r}if(t)Hr(n,"complete"),Hr(n,"success");else{n.m=6;try{var d=2<Pa(n)?n.g.statusText:""}catch{d=""}n.j=d+" ["+n.aa()+"]",db(n)}}finally{Rg(n)}}}function Rg(n,e){if(n.g){vE(n);const t=n.g,r=n.C[0]?Bh:null;n.g=null,n.C=null,e||Hr(n,"ready");try{t.onreadystatechange=r}catch{}}}function vE(n){n.g&&n.K&&(n.g.ontimeout=null),n.A&&(Vt.clearTimeout(n.A),n.A=null)}function Pa(n){return n.g?n.g.readyState:0}function xl(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.J){case cb:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function wE(n){let e="";return gg(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function nd(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=wE(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):jn(n,e,t))}function Tu(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function sr(n){this.Ca=0,this.i=[],this.j=new tf,this.ka=this.sa=this.F=this.V=this.g=this.za=this.D=this.ia=this.o=this.S=this.s=null,this.ab=this.U=0,this.Za=Tu("failFast",!1,n),this.L=this.v=this.u=this.m=this.l=null,this.Y=!0,this.pa=this.Ba=this.T=-1,this.Z=this.A=this.C=0,this.Xa=Tu("baseRetryDelayMs",5e3,n),this.bb=Tu("retryDelaySeedMs",1e4,n),this.$a=Tu("forwardChannelMaxRetries",2,n),this.ta=Tu("forwardChannelRequestTimeoutMs",2e4,n),this.ra=n&&n.xmlHttpFactory||void 0,this.Da=n&&n.Zb||!1,this.J=void 0,this.H=n&&n.supportsCrossDomainXhr||!1,this.I="",this.h=new hE(n&&n.concurrentRequestLimit),this.Fa=new gE,this.O=n&&n.fastHandshake||!1,this.N=n&&n.encodeInitMessageHeaders||!1,this.O&&this.N&&(this.N=!1),this.Ya=n&&n.Xb||!1,n&&n.Aa&&this.j.Aa(),n&&n.forceLongPolling&&(this.Y=!1),this.$=!this.O&&this.Y&&n&&n.detectBufferingProxy||!1,this.ja=void 0,this.P=0,this.K=!1,this.la=this.B=null}function EE(n){if(E_(n),3==n.G){var e=n.U++,t=qs(n.F);jn(t,"SID",n.I),jn(t,"RID",e),jn(t,"TYPE","terminate"),rd(n,t),(e=new af(n,n.j,e,void 0)).K=2,e.v=hf(qs(t)),t=!1,Vt.navigator&&Vt.navigator.sendBeacon&&(t=Vt.navigator.sendBeacon(e.v.toString(),"")),!t&&Vt.Image&&((new Image).src=e.v,t=!0),t||(e.g=S_(e.l,null),e.g.da(e.v)),e.F=Date.now(),uf(e)}T_(n)}function yf(n){n.g&&(b_(n),n.g.cancel(),n.g=null)}function E_(n){yf(n),n.u&&(Vt.clearTimeout(n.u),n.u=null),Og(n),n.h.cancel(),n.m&&("number"==typeof n.m&&Vt.clearTimeout(n.m),n.m=null)}function Ng(n){fE(n.h)||n.m||(n.m=!0,t_(n.Ja,n),n.C=0)}function I_(n,e){var t;t=e?e.m:n.U++;const r=qs(n.F);jn(r,"SID",n.I),jn(r,"RID",t),jn(r,"AID",n.T),rd(n,r),n.o&&n.s&&nd(r,n.o,n.s),t=new af(n,n.j,t,n.C+1),null===n.o&&(t.H=n.s),e&&(n.i=e.D.concat(n.i)),e=D_(n,t,1e3),t.setTimeout(Math.round(.5*n.ta)+Math.round(.5*n.ta*Math.random())),g_(n.h,t),Ag(t,r,e)}function rd(n,e){n.ia&&gg(n.ia,function(t,r){jn(e,r,t)}),n.l&&cf({},function(t,r){jn(e,r,t)})}function D_(n,e,t){t=Math.min(n.i.length,t);var r=n.l?pi(n.l.Ra,n.l,n):null;e:{var o=n.i;let u=-1;for(;;){const d=["count="+t];-1==u?0<t?(u=o[0].h,d.push("ofs="+u)):u=0:d.push("ofs="+u);let g=!0;for(let v=0;v<t;v++){let C=o[v].h;const A=o[v].g;if(C-=u,0>C)u=Math.max(0,o[v].h-100),g=!1;else try{mE(A,d,"req"+C+"_")}catch{r&&r(A)}}if(g){r=d.join("&");break e}}}return n=n.i.splice(0,t),e.D=n,r}function DE(n){n.g||n.u||(n.Z=1,t_(n.Ia,n),n.A=0)}function C_(n){return!(n.g||n.u||3<=n.A||(n.Z++,n.u=Kc(pi(n.Ia,n),bE(n,n.A)),n.A++,0))}function b_(n){null!=n.B&&(Vt.clearTimeout(n.B),n.B=null)}function id(n){n.g=new af(n,n.j,"rpc",n.Z),null===n.o&&(n.g.H=n.s),n.g.N=0;var e=qs(n.sa);jn(e,"RID","rpc"),jn(e,"SID",n.I),jn(e,"CI",n.L?"0":"1"),jn(e,"AID",n.T),jn(e,"TYPE","xmlhttp"),rd(n,e),n.o&&n.s&&nd(e,n.o,n.s),n.J&&n.g.setTimeout(n.J);var t=n.g;n=n.ka,t.K=1,t.v=hf(qs(e)),t.s=null,t.P=!0,c_(t,n)}function Og(n){null!=n.v&&(Vt.clearTimeout(n.v),n.v=null)}function CE(n,e){var t=null;if(n.g==e){Og(n),b_(n),n.g=null;var r=2}else{if(!p_(n.h,e))return;t=e.D,m_(n.h,e),r=1}if(0!=n.G)if(n.pa=e.Y,e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.F;var o=n.C;Hr(r=nf(),new a_(r,t)),Ng(n)}else DE(n);else if(3==(o=e.o)||0==o&&0<n.pa||!(1==r&&function IE(n,e){return!(pE(n.h)>=n.h.j-(n.m?1:0)||(n.m?(n.i=e.D.concat(n.i),0):1==n.G||2==n.G||n.C>=(n.Za?0:n.$a)||(n.m=Kc(pi(n.Ja,n,e),bE(n,n.C)),n.C++,0)))}(n,e)||2==r&&C_(n)))switch(t&&0<t.length&&(e=n.h,e.i=e.i.concat(t)),o){case 1:Vo(n,5);break;case 4:Vo(n,10);break;case 3:Vo(n,6);break;default:Vo(n,2)}}function bE(n,e){let t=n.Xa+Math.floor(Math.random()*n.bb);return n.l||(t*=2),t*e}function Vo(n,e){if(n.j.info("Error code "+e),2==e){var t=null;n.l&&(t=null);var r=pi(n.kb,n);t||(t=new Cu("//www.google.com/images/cleardot.gif"),Vt.location&&"http"==Vt.location.protocol||Qc(t,"https"),hf(t)),function yE(n,e){const t=new tf;if(Vt.Image){const r=new Image;r.onload=hg(pf,t,r,"TestLoadImage: loaded",!0,e),r.onerror=hg(pf,t,r,"TestLoadImage: error",!1,e),r.onabort=hg(pf,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=hg(pf,t,r,"TestLoadImage: timeout",!1,e),Vt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else bi(2);n.G=0,n.l&&n.l.va(e),T_(n),E_(n)}function T_(n){if(n.G=0,n.la=[],n.l){const e=y_(n.h);(0!=e.length||0!=n.i.length)&&(Vw(n.la,e),Vw(n.la,n.i),n.h.i.length=0,Hh(n.i),n.i.length=0),n.l.ua()}}function A_(n,e,t){var r=t instanceof Cu?qs(t):new Cu(t,void 0);if(""!=r.g)e&&(r.g=e+"."+r.g),df(r,r.m);else{var o=Vt.location;r=o.protocol,e=e?e+"."+o.hostname:o.hostname,o=+o.port;var u=new Cu(null,void 0);r&&Qc(u,r),e&&(u.g=e),o&&df(u,o),t&&(u.l=t),r=u}return e=n.za,(t=n.D)&&e&&jn(r,t,e),jn(r,"VER",n.ma),rd(n,r),r}function S_(n,e,t){if(e&&!n.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Nn(t&&n.Da&&!n.ra?new td({jb:!0}):n.ra)).Ka(n.H),e}function TE(){}function Au(){if(Bc&&!(10<=Number(Gc)))throw Error("Environmental error: no available transport.")}function ei(n,e){Ar.call(this),this.g=new sr(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(n?n["X-WebChannel-Client-Profile"]=e.ya:n={"X-WebChannel-Client-Profile":e.ya}),this.g.S=n,(n=e&&e.Yb)&&!fg(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!fg(e)&&(this.g.D=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new sd(this)}function AE(n){eE.call(this);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function SE(){Tg.call(this),this.status=1}function sd(n){this.g=n}(dt=Nn.prototype).Ka=function(n){this.L=n},dt.da=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+n);e=e?e.toUpperCase():"GET",this.H=n,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():sf.g(),this.C=function l_(n){return n.h||(n.h=n.i())}(this.u?this.u:sf),this.g.onreadystatechange=pi(this.Ha,this);try{this.F=!0,this.g.open(e,String(n),!0),this.F=!1}catch(u){return void w_(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var o in r)t.set(o,r[o]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),o=Vt.FormData&&n instanceof Vt.FormData,!(0<=Lw(zS,e))||r||o||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,d]of t)this.g.setRequestHeader(u,d);this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{vE(this),0<this.B&&((this.K=function _E(n){return Bc&&function Hc(){return function Gh(n){var e=jc;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=n(9)}(function(){let n=0;const e=Uw(String(Po)).split("."),t=Uw("9").split("."),r=Math.max(e.length,t.length);for(let d=0;0==n&&d<r;d++){var o=e[d]||"",u=t[d]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],0==o[0].length&&0==u[0].length)break;n=Wy(0==o[1].length?0:parseInt(o[1],10),0==u[1].length?0:parseInt(u[1],10))||Wy(0==o[2].length,0==u[2].length)||Wy(o[2],u[2]),o=o[3],u=u[3]}while(0==n)}return 0<=n})}()&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=pi(this.qa,this)):this.A=ef(this.qa,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){w_(this,u)}},dt.qa=function(){typeof jy<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Hr(this,"timeout"),this.abort(8))},dt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Hr(this,"complete"),Hr(this,"abort"),Rg(this))},dt.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Rg(this,!0)),Nn.X.M.call(this)},dt.Ha=function(){this.s||(this.F||this.v||this.l?At(this):this.fb())},dt.fb=function(){At(this)},dt.aa=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},dt.fa=function(){try{return this.g?this.g.responseText:""}catch{return""}},dt.Sa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),lb(e)}},dt.Ea=function(){return this.m},dt.Oa=function(){return"string"==typeof this.j?this.j:String(this.j)},(dt=sr.prototype).ma=8,dt.G=1,dt.Ja=function(n){if(this.m)if(this.m=null,1==this.G){if(!n){this.U=Math.floor(1e5*Math.random()),n=this.U++;const o=new af(this,this.j,n,void 0);let u=this.s;if(this.S&&(u?(u=qy(u),Ky(u,this.S)):u=this.S),null!==this.o||this.N||(o.H=u,u=null),this.O)e:{for(var e=0,t=0;t<this.i.length;t++){var r=this.i[t];if(void 0===(r="__data__"in r.g&&"string"==typeof(r=r.g.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.i.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=D_(this,o,e),jn(t=qs(this.F),"RID",n),jn(t,"CVER",22),this.D&&jn(t,"X-HTTP-Session-Id",this.D),rd(this,t),u&&(this.N?e="headers="+encodeURIComponent(String(wE(u)))+"&"+e:this.o&&nd(t,this.o,u)),g_(this.h,o),this.Ya&&jn(t,"TYPE","init"),this.O?(jn(t,"$req",e),jn(t,"SID","null"),o.Z=!0,Ag(o,t,null)):Ag(o,t,e),this.G=2}}else 3==this.G&&(n?I_(this,n):0==this.i.length||fE(this.h)||I_(this))},dt.Ia=function(){if(this.u=null,id(this),this.$&&!(this.K||null==this.g||0>=this.P)){var n=2*this.P;this.j.info("BP detection timer enabled: "+n),this.B=Kc(pi(this.eb,this),n)}},dt.eb=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.L=!1,this.K=!0,bi(10),yf(this),id(this))},dt.cb=function(){null!=this.v&&(this.v=null,yf(this),C_(this),bi(19))},dt.kb=function(n){n?(this.j.info("Successfully pinged google.com"),bi(2)):(this.j.info("Failed to ping google.com"),bi(1))},(dt=TE.prototype).xa=function(){},dt.wa=function(){},dt.va=function(){},dt.ua=function(){},dt.Ra=function(){},Au.prototype.g=function(n,e){return new ei(n,e)},Jr(ei,Ar),ei.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.H=!0);var n=this.g,e=this.l,t=this.h||void 0;bi(0),n.V=e,n.ia=t||{},n.L=n.Y,n.F=A_(n,null,n.V),Ng(n)},ei.prototype.close=function(){EE(this.g)},ei.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Xh(n),n=t);e.i.push(new class{constructor(n,e){this.h=n,this.g=e}}(e.ab++,n)),3==e.G&&Ng(e)},ei.prototype.M=function(){this.g.l=null,delete this.j,EE(this.g),delete this.g,ei.X.M.call(this)},Jr(AE,eE),Jr(SE,Tg),Jr(sd,TE),sd.prototype.xa=function(){Hr(this.g,"a")},sd.prototype.wa=function(n){Hr(this.g,new AE(n))},sd.prototype.va=function(n){Hr(this.g,new SE)},sd.prototype.ua=function(){Hr(this.g,"b")},Au.prototype.createWebChannel=Au.prototype.g,ei.prototype.send=ei.prototype.u,ei.prototype.open=ei.prototype.m,ei.prototype.close=ei.prototype.close,Oa.NO_ERROR=0,Oa.TIMEOUT=8,Oa.HTTP_ERROR=6,Jw.COMPLETE="complete",Xw.EventType=Yc,Yc.OPEN="a",Yc.CLOSE="b",Yc.ERROR="c",Yc.MESSAGE="d",Ar.prototype.listen=Ar.prototype.N,Nn.prototype.listenOnce=Nn.prototype.O,Nn.prototype.getLastError=Nn.prototype.Oa,Nn.prototype.getLastErrorCode=Nn.prototype.Ea,Nn.prototype.getStatus=Nn.prototype.aa,Nn.prototype.getResponseJson=Nn.prototype.Sa,Nn.prototype.getResponseText=Nn.prototype.fa,Nn.prototype.send=Nn.prototype.da,Nn.prototype.setWithCredentials=Nn.prototype.Ka;var ME=_s.createWebChannelTransport=function(){return new Au},xE=_s.getStatEventTarget=function(){return nf()},Pg=_s.ErrorCode=Oa,hb=_s.EventType=Jw,RE=_s.Event=Ml,NE=_s.Stat={sb:0,vb:1,wb:2,Pb:3,Ub:4,Rb:5,Sb:6,Qb:7,Ob:8,Tb:9,PROXY:10,NOPROXY:11,Mb:12,Ib:13,Jb:14,Hb:15,Kb:16,Lb:17,ob:18,nb:19,pb:20},fb=_s.FetchXmlHttpFactory=td,M_=_s.WebChannel=Xw,qS=_s.XhrIo=Nn;const pb="@firebase/firestore";class ti{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ti.UNAUTHENTICATED=new ti(null),ti.GOOGLE_CREDENTIALS=new ti("google-credentials-uid"),ti.FIRST_PARTY=new ti("first-party-uid"),ti.MOCK_USER=new ti("mock-user");let Rl="9.17.1";const Ks=new Ma.Yd("@firebase/firestore");function x_(){return Ks.logLevel}function Ve(n,...e){if(Ks.logLevel<=Ma.in.DEBUG){const t=e.map(R_);Ks.debug(`Firestore (${Rl}): ${n}`,...t)}}function Hn(n,...e){if(Ks.logLevel<=Ma.in.ERROR){const t=e.map(R_);Ks.error(`Firestore (${Rl}): ${n}`,...t)}}function Nl(n,...e){if(Ks.logLevel<=Ma.in.WARN){const t=e.map(R_);Ks.warn(`Firestore (${Rl}): ${n}`,...t)}}function R_(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function ot(n="Unexpected state"){const e=`FIRESTORE (${Rl}) INTERNAL ASSERTION FAILED: `+n;throw Hn(e),new Error(e)}function vt(n,e){n||ot()}function Ke(n,e){return n}const ue={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Fe extends an.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class or{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class OE{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class PE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ti.UNAUTHENTICATED))}shutdown(){}}class yb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class kE{constructor(e){this.t=e,this.currentUser=ti.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let o=this.i;const u=C=>this.i!==o?(o=this.i,t(C)):Promise.resolve();let d=new or;this.o=()=>{this.i++,this.currentUser=this.u(),d.resolve(),d=new or,e.enqueueRetryable(()=>u(this.currentUser))};const g=()=>{const C=d;e.enqueueRetryable((0,Ie.Z)(function*(){yield C.promise,yield u(r.currentUser)}))},v=C=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=C,this.auth.addAuthTokenListener(this.o),g()};this.t.onInit(C=>v(C)),setTimeout(()=>{if(!this.auth){const C=this.t.getImmediate({optional:!0});C?v(C):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),d.resolve(),d=new or)}},0),g()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(vt("string"==typeof r.accessToken),new OE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return vt(null===e||"string"==typeof e),new ti(e)}}class _b{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o,this.type="FirstParty",this.user=ti.FIRST_PARTY,this.p=new Map}I(){return this.g?this.g():(vt(!("object"!=typeof this.h||null===this.h||!this.h.auth||!this.h.auth.getAuthHeaderValueForFirstParty)),this.h.auth.getAuthHeaderValueForFirstParty([]))}get headers(){this.p.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.p.set("Authorization",e),this.m&&this.p.set("X-Goog-Iam-Authorization-Token",this.m),this.p}}class FE{constructor(e,t,r,o){this.h=e,this.l=t,this.m=r,this.g=o}getToken(){return Promise.resolve(new _b(this.h,this.l,this.m,this.g))}start(e,t){e.enqueueRetryable(()=>t(ti.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class LE{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class N_{constructor(e){this.T=e,this.forceRefresh=!1,this.appCheck=null,this.A=null}start(e,t){const r=u=>{null!=u.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const d=u.token!==this.A;return this.A=u.token,Ve("FirebaseAppCheckTokenProvider",`Received ${d?"new":"existing"} token.`),d?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const o=u=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.T.onInit(u=>o(u)),setTimeout(()=>{if(!this.appCheck){const u=this.T.getImmediate({optional:!0});u?o(u):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(vt("string"==typeof t.token),this.A=t.token,new LE(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function VE(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class O_{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const o=VE(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<t&&(r+=e.charAt(o[u]%e.length))}return r}}function $t(n,e){return n<e?-1:n>e?1:0}function od(n,e,t){return n.length===e.length&&n.every((r,o)=>t(r,e[o]))}function UE(n){return n+"\0"}class kn{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Fe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Fe(ue.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Fe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Fe(ue.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return kn.fromMillis(Date.now())}static fromDate(e){return kn.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new kn(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?$t(this.nanoseconds,e.nanoseconds):$t(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new kn(0,0))}static max(){return new Dt(new kn(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ad{constructor(e,t,r){void 0===t?t=0:t>e.length&&ot(),void 0===r?r=e.length-t:r>e.length-t&&ot(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===ad.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ad?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let o=0;o<r;o++){const u=e.get(o),d=t.get(o);if(u<d)return-1;if(u>d)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class un extends ad{construct(e,t,r){return new un(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Fe(ue.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(o=>o.length>0))}return new un(t)}static emptyPath(){return new un([])}}const vb=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class mr extends ad{construct(e,t,r){return new mr(e,t,r)}static isValidIdentifier(e){return vb.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),mr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new mr(["__name__"])}static fromServerFormat(e){const t=[];let r="",o=0;const u=()=>{if(0===r.length)throw new Fe(ue.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let d=!1;for(;o<e.length;){const g=e[o];if("\\"===g){if(o+1===e.length)throw new Fe(ue.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const v=e[o+1];if("\\"!==v&&"."!==v&&"`"!==v)throw new Fe(ue.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=v,o+=2}else"`"===g?(d=!d,o++):"."!==g||d?(r+=g,o++):(u(),o++)}if(u(),d)throw new Fe(ue.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new mr(t)}static emptyPath(){return new mr([])}}class qe{constructor(e){this.path=e}static fromPath(e){return new qe(un.fromString(e))}static fromName(e){return new qe(un.fromString(e).popFirst(5))}static empty(){return new qe(un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===un.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new qe(new un(e.slice()))}}class kg{constructor(e,t,r,o){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=o}}function P_(n){return n.fields.find(e=>2===e.kind)}function Ol(n){return n.fields.filter(e=>2!==e.kind)}kg.UNKNOWN_ID=-1;class _f{constructor(e,t){this.fieldPath=e,this.kind=t}}class vf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new vf(0,es.min())}}function $E(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,o=Dt.fromTimestamp(1e9===r?new kn(t+1,0):new kn(t,r));return new es(o,qe.empty(),e)}function k_(n){return new es(n.readTime,n.key,-1)}class es{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new es(Dt.min(),qe.empty(),-1)}static max(){return new es(Dt.max(),qe.empty(),-1)}}function F_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=qe.comparator(n.documentKey,e.documentKey),0!==t?t:$t(n.largestBatchId,e.largestBatchId))}const jE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Fg{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Uo(n){return Lg.apply(this,arguments)}function Lg(){return Lg=(0,Ie.Z)(function*(n){if(n.code!==ue.FAILED_PRECONDITION||n.message!==jE)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Lg.apply(this,arguments)}class oe{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new oe((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,o)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof oe?t:oe.resolve(t)}catch(t){return oe.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):oe.reject(t)}static resolve(e){return new oe((t,r)=>{t(e)})}static reject(e){return new oe((t,r)=>{r(e)})}static waitFor(e){return new oe((t,r)=>{let o=0,u=0,d=!1;e.forEach(g=>{++o,g.next(()=>{++u,d&&u===o&&t()},v=>r(v))}),d=!0,u===o&&t()})}static or(e){let t=oe.resolve(!1);for(const r of e)t=t.next(o=>o?oe.resolve(o):r());return t}static forEach(e,t){const r=[];return e.forEach((o,u)=>{r.push(t.call(this,o,u))}),this.waitFor(r)}static mapArray(e,t){return new oe((r,o)=>{const u=e.length,d=new Array(u);let g=0;for(let v=0;v<u;v++){const C=v;t(e[C]).next(A=>{d[C]=A,++g,g===u&&r(d)},A=>o(A))}})}static doWhile(e,t){return new oe((r,o)=>{const u=()=>{!0===e()?t().next(()=>{u()},o):r()};u()})}}class Vg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.P=new or,this.transaction.oncomplete=()=>{this.P.resolve()},this.transaction.onabort=()=>{t.error?this.P.reject(new wf(e,t.error)):this.P.resolve()},this.transaction.onerror=r=>{const o=GE(r.target.error);this.P.reject(new wf(e,o))}}static open(e,t,r,o){try{return new Vg(t,e.transaction(o,r))}catch(u){throw new wf(t,u)}}get v(){return this.P.promise}abort(e){e&&this.P.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}V(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ud(t)}}class Ys{constructor(e,t,r){this.name=e,this.version=t,this.S=r,12.2===Ys.D((0,an.z$)())&&Hn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Su(window.indexedDB.deleteDatabase(e)).toPromise()}static C(){if(!(0,an.hl)())return!1;if(Ys.N())return!0;const e=(0,an.z$)(),t=Ys.D(e),r=0<t&&t<10,o=Ys.k(e),u=0<o&&o<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static N(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.O)}static M(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static k(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}F(e){var t=this;return(0,Ie.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,o)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=d=>{r(d.target.result)},u.onblocked=()=>{o(new wf(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=d=>{const g=d.target.error;o("VersionError"===g.name?new Fe(ue.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===g.name?new Fe(ue.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+g):new wf(e,g))},u.onupgradeneeded=d=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',d.oldVersion),t.S.$(d.target.result,u.transaction,d.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.B&&(t.db.onversionchange=r=>t.B(r)),t.db})()}L(e){this.B=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,o){var u=this;return(0,Ie.Z)(function*(){const d="readonly"===t;let g=0;for(;;){++g;try{u.db=yield u.F(e);const v=Vg.open(u.db,e,d?"readonly":"readwrite",r),C=o(v).next(A=>(v.V(),A)).catch(A=>(v.abort(A),oe.reject(A))).toPromise();return C.catch(()=>{}),yield v.v,C}catch(v){const C=v,A="FirebaseError"!==C.name&&g<3;if(Ve("SimpleDb","Transaction failed with error:",C.message,"Retrying:",A),u.close(),!A)return Promise.reject(C)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class L_{constructor(e){this.q=e,this.U=!1,this.K=null}get isDone(){return this.U}get G(){return this.K}set cursor(e){this.q=e}done(){this.U=!0}j(e){this.K=e}delete(){return Su(this.q.delete())}}class wf extends Fe{constructor(e,t){super(ue.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ka(n){return"IndexedDbTransactionError"===n.name}class ud{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Su(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Su(this.store.add(e))}get(e){return Su(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Su(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Su(this.store.count())}W(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const o=this.cursor(r),u=[];return this.H(o,(d,g)=>{u.push(g)}).next(()=>u)}{const o=this.store.getAll(r.range);return new oe((u,d)=>{o.onerror=g=>{d(g.target.error)},o.onsuccess=g=>{u(g.target.result)}})}}J(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new oe((o,u)=>{r.onerror=d=>{u(d.target.error)},r.onsuccess=d=>{o(d.target.result)}})}Y(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.X=!1;const o=this.cursor(r);return this.H(o,(u,d,g)=>g.delete())}Z(e,t){let r;t?r=e:(r={},t=e);const o=this.cursor(r);return this.H(o,t)}tt(e){const t=this.cursor({});return new oe((r,o)=>{t.onerror=u=>{const d=GE(u.target.error);o(d)},t.onsuccess=u=>{const d=u.target.result;d?e(d.primaryKey,d.value).next(g=>{g?d.continue():r()}):r()}})}H(e,t){const r=[];return new oe((o,u)=>{e.onerror=d=>{u(d.target.error)},e.onsuccess=d=>{const g=d.target.result;if(!g)return void o();const v=new L_(g),C=t(g.primaryKey,g.value,v);if(C instanceof oe){const A=C.catch(N=>(v.done(),oe.reject(N)));r.push(A)}v.isDone?o():null===v.G?g.continue():g.continue(v.G)}}).next(()=>oe.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.X?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Su(n){return new oe((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const o=GE(r.target.error);t(o)}})}let HE=!1;function GE(n){const e=Ys.D((0,an.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Fe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return HE||(HE=!0,setTimeout(()=>{throw r},0)),r}}return n}class WE{constructor(e,t){this.asyncQueue=e,this.et=t,this.task=null}start(){this.nt(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}nt(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ie.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.et.st()}`)}catch(r){ka(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Uo(r)}yield t.nt(6e4)}))}}class V_{constructor(e,t){this.localStore=e,this.persistence=t}st(e=50){var t=this;return(0,Ie.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.it(r,e))})()}it(e,t){const r=new Set;let o=t,u=!0;return oe.doWhile(()=>!0===u&&o>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(d=>{if(null!==d&&!r.has(d))return Ve("IndexBackiller",`Processing collection: ${d}`),this.rt(e,d,o).next(g=>{o-=g,r.add(d)});u=!1})).next(()=>t-o)}rt(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(o=>this.localStore.localDocuments.getNextDocuments(e,t,o,r).next(u=>{const d=u.changes;return this.localStore.indexManager.updateIndexEntries(e,d).next(()=>this.ot(o,u)).next(g=>(Ve("IndexBackiller",`Updating offset: ${g}`),this.localStore.indexManager.updateCollectionGroup(e,t,g))).next(()=>d.size)}))}ot(e,t){let r=e;return t.changes.forEach((o,u)=>{const d=k_(u);F_(d,r)>0&&(r=d)}),new es(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let ts=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=o=>this.ut(o),this.ct=o=>r.writeSequenceNumber(o))}ut(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ct&&this.ct(t),t}}return n.at=-1,n})();class U_{constructor(e,t,r,o,u,d,g,v){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=d,this.autoDetectLongPolling=g,this.useFetchStreams=v}}class Mu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Mu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Mu&&e.projectId===this.projectId&&e.database===this.database}}function B_(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Fa(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function $_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ld(n){return null==n}function cd(n){return 0===n&&1/n==-1/0}function j_(n){return"number"==typeof n&&Number.isInteger(n)&&!cd(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}class Lr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=atob(e);return new Lr(t)}static fromUint8Array(e){const t=function(r){let o="";for(let u=0;u<r.length;++u)o+=String.fromCharCode(r[u]);return o}(e);return new Lr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return $t(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Lr.EMPTY_BYTE_STRING=new Lr("");const Ib=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xu(n){if(vt(!!n),"string"==typeof n){let e=0;const t=Ib.exec(n);if(vt(!!t),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ar(n.seconds),nanos:ar(n.nanos)}}function ar(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function dd(n){return"string"==typeof n?Lr.fromBase64String(n):Lr.fromUint8Array(n)}function Ug(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function zE(n){const e=n.mapValue.fields.__previous_value__;return Ug(e)?zE(e):e}function Ef(n){const e=xu(n.mapValue.fields.__local_write_time__.timestampValue);return new kn(e.seconds,e.nanos)}const Pl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},H_={nullValue:"NULL_VALUE"};function kl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Ug(n)?4:z_(n)?9007199254740991:10:ot()}function Bo(n,e){if(n===e)return!0;const t=kl(n);if(t!==kl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ef(n).isEqual(Ef(e));case 3:return function(r,o){if("string"==typeof r.timestampValue&&"string"==typeof o.timestampValue&&r.timestampValue.length===o.timestampValue.length)return r.timestampValue===o.timestampValue;const u=xu(r.timestampValue),d=xu(o.timestampValue);return u.seconds===d.seconds&&u.nanos===d.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return o=e,dd(n.bytesValue).isEqual(dd(o.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,o){return ar(r.geoPointValue.latitude)===ar(o.geoPointValue.latitude)&&ar(r.geoPointValue.longitude)===ar(o.geoPointValue.longitude)}(n,e);case 2:return function(r,o){if("integerValue"in r&&"integerValue"in o)return ar(r.integerValue)===ar(o.integerValue);if("doubleValue"in r&&"doubleValue"in o){const u=ar(r.doubleValue),d=ar(o.doubleValue);return u===d?cd(u)===cd(d):isNaN(u)&&isNaN(d)}return!1}(n,e);case 9:return od(n.arrayValue.values||[],e.arrayValue.values||[],Bo);case 10:return function(r,o){const u=r.mapValue.fields||{},d=o.mapValue.fields||{};if(B_(u)!==B_(d))return!1;for(const g in u)if(u.hasOwnProperty(g)&&(void 0===d[g]||!Bo(u[g],d[g])))return!1;return!0}(n,e);default:return ot()}var o}function If(n,e){return void 0!==(n.values||[]).find(t=>Bo(t,e))}function Ru(n,e){if(n===e)return 0;const t=kl(n),r=kl(e);if(t!==r)return $t(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return $t(n.booleanValue,e.booleanValue);case 2:return function(o,u){const d=ar(o.integerValue||o.doubleValue),g=ar(u.integerValue||u.doubleValue);return d<g?-1:d>g?1:d===g?0:isNaN(d)?isNaN(g)?0:-1:1}(n,e);case 3:return qE(n.timestampValue,e.timestampValue);case 4:return qE(Ef(n),Ef(e));case 5:return $t(n.stringValue,e.stringValue);case 6:return function(o,u){const d=dd(o),g=dd(u);return d.compareTo(g)}(n.bytesValue,e.bytesValue);case 7:return function(o,u){const d=o.split("/"),g=u.split("/");for(let v=0;v<d.length&&v<g.length;v++){const C=$t(d[v],g[v]);if(0!==C)return C}return $t(d.length,g.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,u){const d=$t(ar(o.latitude),ar(u.latitude));return 0!==d?d:$t(ar(o.longitude),ar(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(o,u){const d=o.values||[],g=u.values||[];for(let v=0;v<d.length&&v<g.length;++v){const C=Ru(d[v],g[v]);if(C)return C}return $t(d.length,g.length)}(n.arrayValue,e.arrayValue);case 10:return function(o,u){if(o===Pl.mapValue&&u===Pl.mapValue)return 0;if(o===Pl.mapValue)return 1;if(u===Pl.mapValue)return-1;const d=o.fields||{},g=Object.keys(d),v=u.fields||{},C=Object.keys(v);g.sort(),C.sort();for(let A=0;A<g.length&&A<C.length;++A){const N=$t(g[A],C[A]);if(0!==N)return N;const W=Ru(d[g[A]],v[C[A]]);if(0!==W)return W}return $t(g.length,C.length)}(n.mapValue,e.mapValue);default:throw ot()}}function qE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return $t(n,e);const t=xu(n),r=xu(e),o=$t(t.seconds,r.seconds);return 0!==o?o:$t(t.nanos,r.nanos)}function hd(n){return G_(n)}function G_(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const o=xu(r);return`time(${o.seconds},${o.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?dd(n.bytesValue).toBase64():"referenceValue"in n?qe.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let o="[",u=!0;for(const d of r.values||[])u?u=!1:o+=",",o+=G_(d);return o+"]"}(n.arrayValue):"mapValue"in n?function(r){const o=Object.keys(r.fields||{}).sort();let u="{",d=!0;for(const g of o)d?d=!1:u+=",",u+=`${g}:${G_(r.fields[g])}`;return u+"}"}(n.mapValue):ot();var e}function Fl(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function W_(n){return!!n&&"integerValue"in n}function Df(n){return!!n&&"arrayValue"in n}function ZE(n){return!!n&&"nullValue"in n}function KE(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Nu(n){return!!n&&"mapValue"in n}function fd(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Fa(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=fd(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=fd(n.arrayValue.values[t]);return e}return Object.assign({},n)}function z_(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function YE(n){return"nullValue"in n?H_:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Fl(Mu.empty(),qe.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:ot()}function QE(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Fl(Mu.empty(),qe.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Pl:ot()}function q_(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function JE(n,e){const t=Ru(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ou{constructor(e,t){this.position=e,this.inclusive=t}}function Db(n,e,t){let r=0;for(let o=0;o<n.position.length;o++){const u=e[o],d=n.position[o];if(r=u.field.isKeyField()?qe.comparator(qe.fromName(d.referenceValue),t.key):Ru(d,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function XE(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Bo(n.position[t],e.position[t]))return!1;return!0}class eI{}class rn extends eI{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Cb(e,t,r):"array-contains"===t?new jg(e,r):"in"===t?new nI(e,r):"not-in"===t?new Ab(e,r):"array-contains-any"===t?new rI(e,r):new rn(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new bb(e,r):new Tb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ru(t,this.value)):null!==t&&kl(this.value)===kl(t)&&this.matchesComparison(Ru(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class bn extends eI{constructor(e,t){super(),this.filters=e,this.op=t,this.ht=null}static create(e,t){return new bn(e,t)}matches(e){return pd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ht||(this.ht=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ht}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.lt(t=>t.isInequality());return null!==e?e.field:null}lt(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function pd(n){return"and"===n.op}function Ll(n){return"or"===n.op}function Z_(n){return Bg(n)&&pd(n)}function Bg(n){for(const e of n.filters)if(e instanceof bn)return!1;return!0}function vs(n){if(n instanceof rn)return n.field.canonicalString()+n.op.toString()+hd(n.value);if(Z_(n))return n.filters.map(e=>vs(e)).join(",");{const e=n.filters.map(t=>vs(t)).join(",");return`${n.op}(${e})`}}function tI(n,e){return n instanceof rn?(t=n,(r=e)instanceof rn&&t.op===r.op&&t.field.isEqual(r.field)&&Bo(t.value,r.value)):n instanceof bn?function(t,r){return r instanceof bn&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((o,u,d)=>o&&tI(u,r.filters[d]),!0)}(n,e):void ot();var t,r}function $g(n,e){const t=n.filters.concat(e);return bn.create(t,n.op)}function gd(n){return n instanceof rn?`${(e=n).field.canonicalString()} ${e.op} ${hd(e.value)}`:n instanceof bn?function(e){return e.op.toString()+" {"+e.getFilters().map(gd).join(" ,")+"}"}(n):"Filter";var e}class Cb extends rn{constructor(e,t,r){super(e,t,r),this.key=qe.fromName(r.referenceValue)}matches(e){const t=qe.comparator(e.key,this.key);return this.matchesComparison(t)}}class bb extends rn{constructor(e,t){super(e,"in",t),this.keys=Cf(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Tb extends rn{constructor(e,t){super(e,"not-in",t),this.keys=Cf(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Cf(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>qe.fromName(r.referenceValue))}class jg extends rn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Df(t)&&If(t.arrayValue,this.value)}}class nI extends rn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&If(this.value.arrayValue,t)}}class Ab extends rn{constructor(e,t){super(e,"not-in",t)}matches(e){if(If(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!If(this.value.arrayValue,t)}}class rI extends rn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Df(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>If(this.value.arrayValue,r))}}class Vl{constructor(e,t="asc"){this.field=e,this.dir=t}}function K_(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class ur{constructor(e,t){this.comparator=e,this.root=t||ni.EMPTY}insert(e,t){return new ur(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ni.BLACK,null,null))}remove(e){return new ur(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ni.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(e,r.key);if(0===o)return t+r.left.size;o<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Hg(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Hg(this.root,e,this.comparator,!1)}getReverseIterator(){return new Hg(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Hg(this.root,e,this.comparator,!0)}}class Hg{constructor(e,t,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&o&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ni{constructor(e,t,r,o,u){this.key=e,this.value=t,this.color=r??ni.RED,this.left=o??ni.EMPTY,this.right=u??ni.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,o,u){return new ni(e??this.key,t??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let o=this;const u=r(e,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(e,t,r),null):0===u?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return ni.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),0===t(e,o.key)){if(o.right.isEmpty())return ni.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ni.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ni.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ot();const e=this.left.check();if(e!==this.right.check())throw ot();return e+(this.isRed()?0:1)}}ni.EMPTY=null,ni.RED=!0,ni.BLACK=!1,ni.EMPTY=new class{constructor(){this.size=0}get key(){throw ot()}get value(){throw ot()}get color(){throw ot()}get left(){throw ot()}get right(){throw ot()}copy(n,e,t,r,o){return this}insert(n,e,t){return new ni(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class On{constructor(e){this.comparator=e,this.data=new ur(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Gg(this.data.getIterator())}getIteratorFrom(e){return new Gg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof On)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(o,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new On(this.comparator);return t.data=e,t}}class Gg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Pu(n){return n.hasNext()?n.getNext():void 0}class Ti{constructor(e){this.fields=e,e.sort(mr.comparator)}static empty(){return new Ti([])}unionWith(e){let t=new On(mr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Ti(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return od(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Vr{constructor(e){this.value=e}static empty(){return new Vr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Nu(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=fd(t)}setAll(e){let t=mr.emptyPath(),r={},o=[];e.forEach((d,g)=>{if(!t.isImmediateParentOf(g)){const v=this.getFieldsMap(t);this.applyChanges(v,r,o),r={},o=[],t=g.popLast()}d?r[g.lastSegment()]=fd(d):o.push(g.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,o)}delete(e){const t=this.field(e.popLast());Nu(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Bo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let o=t.mapValue.fields[e.get(r)];Nu(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,r){Fa(t,(o,u)=>e[o]=u);for(const o of r)delete e[o]}clone(){return new Vr(fd(this.value))}}function Wg(n){const e=[];return Fa(n.fields,(t,r)=>{const o=new mr([t]);if(Nu(r)){const u=Wg(r.mapValue).fields;if(0===u.length)e.push(o);else for(const d of u)e.push(o.child(d))}else e.push(o)}),new Ti(e)}class Gn{constructor(e,t,r,o,u,d,g){this.key=e,this.documentType=t,this.version=r,this.readTime=o,this.createTime=u,this.data=d,this.documentState=g}static newInvalidDocument(e){return new Gn(e,0,Dt.min(),Dt.min(),Dt.min(),Vr.empty(),0)}static newFoundDocument(e,t,r,o){return new Gn(e,1,t,Dt.min(),r,o,0)}static newNoDocument(e,t){return new Gn(e,2,t,Dt.min(),Dt.min(),Vr.empty(),0)}static newUnknownDocument(e,t){return new Gn(e,3,t,Dt.min(),Dt.min(),Vr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Vr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Vr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Gn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Sb{constructor(e,t=null,r=[],o=[],u=null,d=null,g=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=d,this.endAt=g,this.ft=null}}function Y_(n,e=null,t=[],r=[],o=null,u=null,d=null){return new Sb(n,e,t,r,o,u,d)}function Ul(n){const e=Ke(n);if(null===e.ft){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>vs(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(o=r).field.canonicalString()+o.dir;var o}).join(","),ld(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hd(r)).join(",")),e.ft=t}return e.ft}function md(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!K_(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!tI(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!XE(n.startAt,e.startAt)&&XE(n.endAt,e.endAt)}function yd(n){return qe.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function bf(n,e){return n.filters.filter(t=>t instanceof rn&&t.field.isEqual(e))}function iI(n,e,t){let r=H_,o=!0;for(const u of bf(n,e)){let d=H_,g=!0;switch(u.op){case"<":case"<=":d=YE(u.value);break;case"==":case"in":case">=":d=u.value;break;case">":d=u.value,g=!1;break;case"!=":case"not-in":d=H_}q_({value:r,inclusive:o},{value:d,inclusive:g})<0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];q_({value:r,inclusive:o},{value:d,inclusive:t.inclusive})<0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}function Q_(n,e,t){let r=Pl,o=!0;for(const u of bf(n,e)){let d=Pl,g=!0;switch(u.op){case">=":case">":d=QE(u.value),g=!1;break;case"==":case"in":case"<=":d=u.value;break;case"<":d=u.value,g=!1;break;case"!=":case"not-in":d=Pl}JE({value:r,inclusive:o},{value:d,inclusive:g})>0&&(r=d,o=g)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const d=t.position[u];JE({value:r,inclusive:o},{value:d,inclusive:t.inclusive})>0&&(r=d,o=t.inclusive);break}return{value:r,inclusive:o}}class $o{constructor(e,t=null,r=[],o=[],u=null,d="F",g=null,v=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=d,this.startAt=g,this.endAt=v,this.dt=null,this._t=null}}function sI(n,e,t,r,o,u,d,g){return new $o(n,e,t,r,o,u,d,g)}function Bl(n){return new $o(n)}function J_(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function X_(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function Tf(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function ev(n){return null!==n.collectionGroup}function Dr(n){const e=Ke(n);if(null===e.dt){e.dt=[];const t=Tf(e),r=X_(e);if(null!==t&&null===r)t.isKeyField()||e.dt.push(new Vl(t)),e.dt.push(new Vl(mr.keyField(),"asc"));else{let o=!1;for(const u of e.explicitOrderBy)e.dt.push(u),u.field.isKeyField()&&(o=!0);if(!o){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.dt.push(new Vl(mr.keyField(),u))}}}return e.dt}function Mr(n){const e=Ke(n);if(!e._t)if("F"===e.limitType)e._t=Y_(e.path,e.collectionGroup,Dr(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Dr(e))t.push(new Vl(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new Ou(e.endAt.position,e.endAt.inclusive):null,o=e.startAt?new Ou(e.startAt.position,e.startAt.inclusive):null;e._t=Y_(e.path,e.collectionGroup,t,e.filters,e.limit,r,o)}return e._t}function tv(n,e){e.getFirstInequalityField(),Tf(n);const t=n.filters.concat([e]);return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function zg(n,e,t){return new $o(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function qg(n,e){return md(Mr(n),Mr(e))&&n.limitType===e.limitType}function Mb(n){return`${Ul(Mr(n))}|lt:${n.limitType}`}function Zg(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>gd(r)).join(", ")}]`),ld(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(o=r).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>hd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>hd(r)).join(",")),`Target(${t})`}(Mr(n))}; limitType=${n.limitType})`}function _d(n,e){return e.isFoundDocument()&&function(t,r){const o=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(o):qe.isDocumentKey(t.path)?t.path.isEqual(o):t.path.isImmediateParentOf(o)}(n,e)&&function(t,r){for(const o of Dr(t))if(!o.field.isKeyField()&&null===r.data.field(o.field))return!1;return!0}(n,e)&&function(t,r){for(const o of t.filters)if(!o.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(o,u,d){const g=Db(o,u,d);return o.inclusive?g<=0:g<0}(t.startAt,Dr(t),r)||t.endAt&&!function(o,u,d){const g=Db(o,u,d);return o.inclusive?g>=0:g>0}(t.endAt,Dr(t),r)));var t,r}function vd(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function oI(n){return(e,t)=>{let r=!1;for(const o of Dr(n)){const u=nv(o,e,t);if(0!==u)return u;r=r||o.field.isKeyField()}return 0}}function nv(n,e,t){const r=n.field.isKeyField()?qe.comparator(e.key,t.key):function(o,u,d){const g=u.data.field(o),v=d.data.field(o);return null!==g&&null!==v?Ru(g,v):ot()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return ot()}}function aI(n,e){if(n.wt){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:cd(e)?"-0":e}}function rv(n){return{integerValue:""+n}}function uI(n,e){return j_(e)?rv(e):aI(n,e)}class Kg{constructor(){this._=void 0}}function xb(n,e,t){return n instanceof $l?function(r,o){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return o&&(u.fields.__previous_value__=o),{mapValue:u}}(t,e):n instanceof jo?Yg(n,e):n instanceof wd?ov(n,e):function(r,o){const u=sv(r,o),d=av(u)+av(r.gt);return W_(u)&&W_(r.gt)?rv(d):aI(r.yt,d)}(n,e)}function iv(n,e,t){return n instanceof jo?Yg(n,e):n instanceof wd?ov(n,e):t}function sv(n,e){return n instanceof Ed?W_(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class $l extends Kg{}class jo extends Kg{constructor(e){super(),this.elements=e}}function Yg(n,e){const t=jl(e);for(const r of n.elements)t.some(o=>Bo(o,r))||t.push(r);return{arrayValue:{values:t}}}class wd extends Kg{constructor(e){super(),this.elements=e}}function ov(n,e){let t=jl(e);for(const r of n.elements)t=t.filter(o=>!Bo(o,r));return{arrayValue:{values:t}}}class Ed extends Kg{constructor(e,t){super(),this.yt=e,this.gt=t}}function av(n){return ar(n.integerValue||n.doubleValue)}function jl(n){return Df(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class Af{constructor(e,t){this.field=e,this.transform=t}}class uv{constructor(e,t){this.version=e,this.transformResults=t}}class lr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new lr}static exists(e){return new lr(void 0,e)}static updateTime(e){return new lr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Qg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class lv{}function cI(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Hl(n.key,lr.none()):new Id(n.key,n.data,lr.none());{const t=n.data,r=Vr.empty();let o=new On(mr.comparator);for(let u of e.fields)if(!o.has(u)){let d=t.field(u);null===d&&u.length>1&&(u=u.popLast(),d=t.field(u)),null===d?r.delete(u):r.set(u,d),o=o.add(u)}return new Ho(n.key,r,new Ti(o.toArray()),lr.none())}}function Rb(n,e,t){n instanceof Id?function(r,o,u){const d=r.value.clone(),g=hI(r.fieldTransforms,o,u.transformResults);d.setAll(g),o.convertToFoundDocument(u.version,d).setHasCommittedMutations()}(n,e,t):n instanceof Ho?function(r,o,u){if(!Qg(r.precondition,o))return void o.convertToUnknownDocument(u.version);const d=hI(r.fieldTransforms,o,u.transformResults),g=o.data;g.setAll(dv(r)),g.setAll(d),o.convertToFoundDocument(u.version,g).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Sf(n,e,t,r){return n instanceof Id?function(o,u,d,g){if(!Qg(o.precondition,u))return d;const v=o.value.clone(),C=fI(o.fieldTransforms,g,u);return v.setAll(C),u.convertToFoundDocument(u.version,v).setHasLocalMutations(),null}(n,e,t,r):n instanceof Ho?function(o,u,d,g){if(!Qg(o.precondition,u))return d;const v=fI(o.fieldTransforms,g,u),C=u.data;return C.setAll(dv(o)),C.setAll(v),u.convertToFoundDocument(u.version,C).setHasLocalMutations(),null===d?null:d.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(A=>A.field))}(n,e,t,r):(d=t,Qg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):d);var u,d}function dI(n,e){let t=null;for(const r of n.fieldTransforms){const o=e.data.field(r.field),u=sv(r.transform,o||null);null!=u&&(null===t&&(t=Vr.empty()),t.set(r.field,u))}return t||null}function cv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&od(t,r,(o,u)=>function lI(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof jo&&r instanceof jo||t instanceof wd&&r instanceof wd?od(t.elements,r.elements,Bo):t instanceof Ed&&r instanceof Ed?Bo(t.gt,r.gt):t instanceof $l&&r instanceof $l);var t,r}(o,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Id extends lv{constructor(e,t,r,o=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Ho extends lv{constructor(e,t,r,o,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function dv(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function hI(n,e,t){const r=new Map;vt(n.length===t.length);for(let o=0;o<t.length;o++){const u=n[o],d=u.transform,g=e.data.field(u.field);r.set(u.field,iv(d,g,t[o]))}return r}function fI(n,e,t){const r=new Map;for(const o of n){const u=o.transform,d=t.data.field(o.field);r.set(o.field,xb(u,d,e))}return r}class Hl extends lv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class hv extends lv{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class pI{constructor(e){this.count=e}}var Cr,on;function fv(n){switch(n){default:return ot();case ue.CANCELLED:case ue.UNKNOWN:case ue.DEADLINE_EXCEEDED:case ue.RESOURCE_EXHAUSTED:case ue.INTERNAL:case ue.UNAVAILABLE:case ue.UNAUTHENTICATED:return!1;case ue.INVALID_ARGUMENT:case ue.NOT_FOUND:case ue.ALREADY_EXISTS:case ue.PERMISSION_DENIED:case ue.FAILED_PRECONDITION:case ue.ABORTED:case ue.OUT_OF_RANGE:case ue.UNIMPLEMENTED:case ue.DATA_LOSS:return!0}}function gI(n){if(void 0===n)return Hn("GRPC error has no .code"),ue.UNKNOWN;switch(n){case Cr.OK:return ue.OK;case Cr.CANCELLED:return ue.CANCELLED;case Cr.UNKNOWN:return ue.UNKNOWN;case Cr.DEADLINE_EXCEEDED:return ue.DEADLINE_EXCEEDED;case Cr.RESOURCE_EXHAUSTED:return ue.RESOURCE_EXHAUSTED;case Cr.INTERNAL:return ue.INTERNAL;case Cr.UNAVAILABLE:return ue.UNAVAILABLE;case Cr.UNAUTHENTICATED:return ue.UNAUTHENTICATED;case Cr.INVALID_ARGUMENT:return ue.INVALID_ARGUMENT;case Cr.NOT_FOUND:return ue.NOT_FOUND;case Cr.ALREADY_EXISTS:return ue.ALREADY_EXISTS;case Cr.PERMISSION_DENIED:return ue.PERMISSION_DENIED;case Cr.FAILED_PRECONDITION:return ue.FAILED_PRECONDITION;case Cr.ABORTED:return ue.ABORTED;case Cr.OUT_OF_RANGE:return ue.OUT_OF_RANGE;case Cr.UNIMPLEMENTED:return ue.UNIMPLEMENTED;case Cr.DATA_LOSS:return ue.DATA_LOSS;default:return ot()}}(on=Cr||(Cr={}))[on.OK=0]="OK",on[on.CANCELLED=1]="CANCELLED",on[on.UNKNOWN=2]="UNKNOWN",on[on.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",on[on.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",on[on.NOT_FOUND=5]="NOT_FOUND",on[on.ALREADY_EXISTS=6]="ALREADY_EXISTS",on[on.PERMISSION_DENIED=7]="PERMISSION_DENIED",on[on.UNAUTHENTICATED=16]="UNAUTHENTICATED",on[on.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",on[on.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",on[on.ABORTED=10]="ABORTED",on[on.OUT_OF_RANGE=11]="OUT_OF_RANGE",on[on.UNIMPLEMENTED=12]="UNIMPLEMENTED",on[on.INTERNAL=13]="INTERNAL",on[on.UNAVAILABLE=14]="UNAVAILABLE",on[on.DATA_LOSS=15]="DATA_LOSS";class ku{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[o,u]of r)if(this.equalsFn(o,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),o=this.inner[r];if(void 0===o)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return void(o[u]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],e))return 1===r.length?delete this.inner[t]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(e){Fa(this.inner,(t,r)=>{for(const[o,u]of r)e(o,u)})}isEmpty(){return $_(this.inner)}size(){return this.innerSize}}const KS=new ur(qe.comparator);function Ai(){return KS}const Nb=new ur(qe.comparator);function Jg(...n){let e=Nb;for(const t of n)e=e.insert(t.key,t);return e}function Ob(n){let e=Nb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function La(){return Xg()}function Pb(){return Xg()}function Xg(){return new ku(n=>n.toString(),(n,e)=>n.isEqual(e))}const YS=new ur(qe.comparator),QS=new On(qe.comparator);function jt(...n){let e=QS;for(const t of n)e=e.add(t);return e}const JS=new On($t);function Mf(){return JS}class Fu{constructor(e,t,r,o,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const o=new Map;return o.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Fu(Dt.min(),o,Mf(),Ai(),jt())}}class Dd{constructor(e,t,r,o,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Dd(r,t,jt(),jt(),jt())}}class xf{constructor(e,t,r,o){this.It=e,this.removedTargetIds=t,this.key=r,this.Tt=o}}class kb{constructor(e,t){this.targetId=e,this.Et=t}}class em{constructor(e,t,r=Lr.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=o}}class pv{constructor(){this.At=0,this.Rt=Lb(),this.bt=Lr.EMPTY_BYTE_STRING,this.Pt=!1,this.vt=!0}get current(){return this.Pt}get resumeToken(){return this.bt}get Vt(){return 0!==this.At}get St(){return this.vt}Dt(e){e.approximateByteSize()>0&&(this.vt=!0,this.bt=e)}Ct(){let e=jt(),t=jt(),r=jt();return this.Rt.forEach((o,u)=>{switch(u){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:r=r.add(o);break;default:ot()}}),new Dd(this.bt,this.Pt,e,t,r)}xt(){this.vt=!1,this.Rt=Lb()}Nt(e,t){this.vt=!0,this.Rt=this.Rt.insert(e,t)}kt(e){this.vt=!0,this.Rt=this.Rt.remove(e)}Ot(){this.At+=1}Mt(){this.At-=1}Ft(){this.vt=!0,this.Pt=!0}}class Fb{constructor(e){this.$t=e,this.Bt=new Map,this.Lt=Ai(),this.qt=gv(),this.Ut=new On($t)}Kt(e){for(const t of e.It)e.Tt&&e.Tt.isFoundDocument()?this.Gt(t,e.Tt):this.Qt(t,e.key,e.Tt);for(const t of e.removedTargetIds)this.Qt(t,e.key,e.Tt)}jt(e){this.forEachTarget(e,t=>{const r=this.Wt(t);switch(e.state){case 0:this.zt(t)&&r.Dt(e.resumeToken);break;case 1:r.Mt(),r.Vt||r.xt(),r.Dt(e.resumeToken);break;case 2:r.Mt(),r.Vt||this.removeTarget(t);break;case 3:this.zt(t)&&(r.Ft(),r.Dt(e.resumeToken));break;case 4:this.zt(t)&&(this.Ht(t),r.Dt(e.resumeToken));break;default:ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Bt.forEach((r,o)=>{this.zt(o)&&t(o)})}Jt(e){const t=e.targetId,r=e.Et.count,o=this.Yt(t);if(o){const u=o.target;if(yd(u))if(0===r){const d=new qe(u.path);this.Qt(t,d,Gn.newNoDocument(d,Dt.min()))}else vt(1===r);else this.Xt(t)!==r&&(this.Ht(t),this.Ut=this.Ut.add(t))}}Zt(e){const t=new Map;this.Bt.forEach((u,d)=>{const g=this.Yt(d);if(g){if(u.current&&yd(g.target)){const v=new qe(g.target.path);null!==this.Lt.get(v)||this.te(d,v)||this.Qt(d,v,Gn.newNoDocument(v,e))}u.St&&(t.set(d,u.Ct()),u.xt())}});let r=jt();this.qt.forEach((u,d)=>{let g=!0;d.forEachWhile(v=>{const C=this.Yt(v);return!C||2===C.purpose||(g=!1,!1)}),g&&(r=r.add(u))}),this.Lt.forEach((u,d)=>d.setReadTime(e));const o=new Fu(e,t,this.Ut,this.Lt,r);return this.Lt=Ai(),this.qt=gv(),this.Ut=new On($t),o}Gt(e,t){if(!this.zt(e))return;const r=this.te(e,t.key)?2:0;this.Wt(e).Nt(t.key,r),this.Lt=this.Lt.insert(t.key,t),this.qt=this.qt.insert(t.key,this.ee(t.key).add(e))}Qt(e,t,r){if(!this.zt(e))return;const o=this.Wt(e);this.te(e,t)?o.Nt(t,1):o.kt(t),this.qt=this.qt.insert(t,this.ee(t).delete(e)),r&&(this.Lt=this.Lt.insert(t,r))}removeTarget(e){this.Bt.delete(e)}Xt(e){const t=this.Wt(e).Ct();return this.$t.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ot(e){this.Wt(e).Ot()}Wt(e){let t=this.Bt.get(e);return t||(t=new pv,this.Bt.set(e,t)),t}ee(e){let t=this.qt.get(e);return t||(t=new On($t),this.qt=this.qt.insert(e,t)),t}zt(e){const t=null!==this.Yt(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}Yt(e){const t=this.Bt.get(e);return t&&t.Vt?null:this.$t.ne(e)}Ht(e){this.Bt.set(e,new pv),this.$t.getRemoteKeysForTarget(e).forEach(t=>{this.Qt(e,t,null)})}te(e,t){return this.$t.getRemoteKeysForTarget(e).has(t)}}function gv(){return new ur(qe.comparator)}function Lb(){return new ur(qe.comparator)}const XS={asc:"ASCENDING",desc:"DESCENDING"},Vb={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ub={and:"AND",or:"OR"};class tm{constructor(e,t){this.databaseId=e,this.wt=t}}function Cd(n,e){return n.wt?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Bb(n,e){return n.wt?e.toBase64():e.toUint8Array()}function eM(n,e){return Cd(n,e.toTimestamp())}function xr(n){return vt(!!n),Dt.fromTimestamp(function(e){const t=xu(e);return new kn(t.seconds,t.nanos)}(n))}function mv(n,e){return(t=n,new un(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function mI(n){const e=un.fromString(n);return vt(Ua(e)),e}function Rf(n,e){return mv(n.databaseId,e.path)}function Va(n,e){const t=mI(e);if(t.get(1)!==n.databaseId.projectId)throw new Fe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Fe(ue.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new qe($b(t))}function yv(n,e){return mv(n.databaseId,e)}function _v(n){const e=mI(n);return 4===e.length?un.emptyPath():$b(e)}function bd(n){return new un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function $b(n){return vt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function ws(n,e,t){return{name:Rf(n,e),fields:t.value.mapValue.fields}}function yI(n,e,t){const r=Va(n,e.name),o=xr(e.updateTime),u=e.createTime?xr(e.createTime):Dt.min(),d=new Vr({mapValue:{fields:e.fields}}),g=Gn.newFoundDocument(r,o,u,d);return t&&g.setHasCommittedMutations(),t?g.setHasCommittedMutations():g}function yi(n,e){let t;if(e instanceof Id)t={update:ws(n,e.key,e.value)};else if(e instanceof Hl)t={delete:Rf(n,e.key)};else if(e instanceof Ho)t={update:ws(n,e.key,e.data),updateMask:Cv(e.fieldMask)};else{if(!(e instanceof hv))return ot();t={verify:Rf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,u){const d=u.transform;if(d instanceof $l)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(d instanceof jo)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:d.elements}};if(d instanceof wd)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:d.elements}};if(d instanceof Ed)return{fieldPath:u.field.canonicalString(),increment:d.gt};throw ot()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(o=e.precondition).updateTime?{updateTime:eM(n,o.updateTime)}:void 0!==o.exists?{exists:o.exists}:ot()),t;var o}function wv(n,e){const t=e.currentDocument?void 0!==(o=e.currentDocument).updateTime?lr.updateTime(xr(o.updateTime)):void 0!==o.exists?lr.exists(o.exists):lr.none():lr.none(),r=e.updateTransforms?e.updateTransforms.map(o=>function(u,d){let g=null;"setToServerValue"in d?(vt("REQUEST_TIME"===d.setToServerValue),g=new $l):"appendMissingElements"in d?g=new jo(d.appendMissingElements.values||[]):"removeAllFromArray"in d?g=new wd(d.removeAllFromArray.values||[]):"increment"in d?g=new Ed(u,d.increment):ot();const v=mr.fromServerFormat(d.fieldPath);return new Af(v,g)}(n,o)):[];var o;if(e.update){const o=Va(n,e.update.name),u=new Vr({mapValue:{fields:e.update.fields}});if(e.updateMask){const d=new Ti((e.updateMask.fieldPaths||[]).map(C=>mr.fromServerFormat(C)));return new Ho(o,u,d,t,r)}return new Id(o,u,t,r)}if(e.delete){const o=Va(n,e.delete);return new Hl(o,t)}if(e.verify){const o=Va(n,e.verify);return new hv(o,t)}return ot()}function _I(n,e){return{documents:[yv(n,e.path)]}}function Iv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=yv(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=yv(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const o=function(v){if(0!==v.length)return II(bn.create(v,"and"))}(e.filters);o&&(t.structuredQuery.where=o);const u=function(v){if(0!==v.length)return v.map(C=>{return{field:Td((A=C).field),direction:Hb(A.dir)};var A})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const d=(C=e.limit,n.wt||ld(C)?C:{value:C});var C,g,v;return null!==d&&(t.structuredQuery.limit=d),e.startAt&&(t.structuredQuery.startAt={before:(g=e.startAt).inclusive,values:g.position}),e.endAt&&(t.structuredQuery.endAt={before:!(v=e.endAt).inclusive,values:v.position}),t}function nm(n){let e=_v(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let o=null;if(r>0){vt(1===r);const A=t.from[0];A.allDescendants?o=A.collectionId:e=e.child(A.collectionId)}let u=[];t.where&&(u=function(A){const N=Dv(A);return N instanceof bn&&Z_(N)?N.getFilters():[N]}(t.where));let d=[];t.orderBy&&(d=t.orderBy.map(A=>{return new Vl(Gl((N=A).field),function(W){switch(W){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(N.direction));var N}));let g=null;t.limit&&(g=function(A){let N;return N="object"==typeof A?A.value:A,ld(N)?null:N}(t.limit));let v=null;var A;t.startAt&&(v=new Ou((A=t.startAt).values||[],!!A.before));let C=null;return t.endAt&&(C=function(A){return new Ou(A.values||[],!A.before)}(t.endAt)),sI(e,o,d,u,g,"F",v,C)}function Dv(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Gl(e.unaryFilter.field);return rn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Gl(e.unaryFilter.field);return rn.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=Gl(e.unaryFilter.field);return rn.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=Gl(e.unaryFilter.field);return rn.create(u,"!=",{nullValue:"NULL_VALUE"});default:return ot()}}(n):void 0!==n.fieldFilter?rn.create(Gl((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ot()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return bn.create(e.compositeFilter.filters.map(t=>Dv(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return ot()}}(e.compositeFilter.op))}(n):ot();var e}function Hb(n){return XS[n]}function wI(n){return Vb[n]}function EI(n){return Ub[n]}function Td(n){return{fieldPath:n.canonicalString()}}function Gl(n){return mr.fromServerFormat(n.fieldPath)}function II(n){return n instanceof rn?function(e){if("=="===e.op){if(KE(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NAN"}};if(ZE(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(KE(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NOT_NAN"}};if(ZE(e.value))return{unaryFilter:{field:Td(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Td(e.field),op:wI(e.op),value:e.value}}}(n):n instanceof bn?function(e){const t=e.getFilters().map(r=>II(r));return 1===t.length?t[0]:{compositeFilter:{op:EI(e.op),filters:t}}}(n):ot()}function Cv(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ua(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}function _i(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Go(e)),e=bv(n.get(t),e);return Go(e)}function bv(n,e){let t=e;const r=n.length;for(let o=0;o<r;o++){const u=n.charAt(o);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Go(n){return n+"\x01\x01"}function Wo(n){const e=n.length;if(vt(e>=2),2===e)return vt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),un.emptyPath();const t=e-2,r=[];let o="";for(let u=0;u<e;){const d=n.indexOf("\x01",u);switch((d<0||d>t)&&ot(),n.charAt(d+1)){case"\x01":const g=n.substring(u,d);let v;0===o.length?v=g:(o+=g,v=o,o=""),r.push(v);break;case"\x10":o+=n.substring(u,d),o+="\0";break;case"\x11":o+=n.substring(u,d+1);break;default:ot()}u=d+2}return new un(r)}const Gb=["userId","batchId"];function rm(n,e){return[n,_i(e)]}function DI(n,e,t){return[n,_i(e),t]}const Wb={},zb=["prefixPath","collectionGroup","readTime","documentId"],CI=["prefixPath","collectionGroup","documentId"],tM=["collectionGroup","readTime","prefixPath","documentId"],bI=["canonicalId","targetId"],qb=["targetId","path"],TI=["path","targetId"],nM=["collectionId","parent"],Tv=["indexId","uid"],AI=["uid","sequenceNumber"],SI=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],MI=["indexId","uid","orderedDocumentKey"],xI=["userId","collectionPath","documentId"],RI=["userId","collectionPath","largestBatchId"],im=["userId","collectionGroup","largestBatchId"],Nf=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],NI=[...Nf,"documentOverlays"],OI=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],Av=OI,PI=[...Av,"indexConfiguration","indexState","indexEntries"];class Sv extends Fg{constructor(e,t){super(),this.se=e,this.currentSequenceNumber=t}}function Gr(n,e){const t=Ke(n);return Ys.M(t.se,e)}class kI{constructor(e,t,r,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(e.key)&&Rb(u,e,r[o])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Sf(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Sf(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Pb();return this.mutations.forEach(o=>{const u=e.get(o.key),d=u.overlayedDocument;let g=this.applyToLocalView(d,u.mutatedFields);g=t.has(o.key)?null:g;const v=cI(d,g);null!==v&&r.set(o.key,v),d.isValidDocument()||d.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),jt())}isEqual(e){return this.batchId===e.batchId&&od(this.mutations,e.mutations,(t,r)=>cv(t,r))&&od(this.baseMutations,e.baseMutations,(t,r)=>cv(t,r))}}class FI{constructor(e,t,r,o){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=o}static from(e,t,r){vt(e.mutations.length===r.length);let o=YS;const u=e.mutations;for(let d=0;d<u.length;d++)o=o.insert(u[d].key,r[d].version);return new FI(e,t,r,o)}}class sm{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class Lu{constructor(e,t,r,o,u=Dt.min(),d=Dt.min(),g=Lr.EMPTY_BYTE_STRING){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=d,this.resumeToken=g}withSequenceNumber(e){return new Lu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,t){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new Lu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class LI{constructor(e){this.ie=e}}function Kb(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:Mv(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Rf(o=n.ie,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cd(o,u.version.toTimestamp()),createTime:Cd(o,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Ad(e.version)};else{if(!e.isUnknownDocument())return ot();r.unknownDocument={path:t.path.toArray(),version:Ad(e.version)}}var o,u;return r}function Mv(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Ad(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Sd(n){const e=new kn(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function Md(n,e){const t=(e.baseMutations||[]).map(u=>wv(n.ie,u));for(let u=0;u<e.mutations.length-1;++u){const d=e.mutations[u];u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(d.updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u)}const r=e.mutations.map(u=>wv(n.ie,u)),o=kn.fromMillis(e.localWriteTimeMs);return new kI(e.batchId,o,t,r)}function Of(n){const e=Sd(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Sd(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var o;return void 0!==n.query.documents?(vt(1===(o=n.query).documents.length),r=Mr(Bl(_v(o.documents[0])))):r=Mr(nm(n.query)),new Lu(r,n.targetId,0,n.lastListenSequenceNumber,e,t,Lr.fromBase64String(n.resumeToken))}function Pf(n,e){const t=Ad(e.snapshotVersion),r=Ad(e.lastLimboFreeSnapshotVersion);let o;o=yd(e.target)?_I(n.ie,e.target):Iv(n.ie,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Ul(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function xv(n){const e=nm({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?zg(e,e.limit,"L"):e}function Rv(n,e){return new sm(e.largestBatchId,wv(n.ie,e.overlayMutation))}function Nv(n,e){const t=e.path.lastSegment();return[n,_i(e.path.popLast()),t]}function Vu(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Ad(r.readTime),documentKey:_i(r.documentKey.path),largestBatchId:r.largestBatchId}}class VI{getBundleMetadata(e,t){return om(e).get(t).next(r=>{if(r)return{id:(o=r).bundleId,createTime:Sd(o.createTime),version:o.version};var o})}saveBundleMetadata(e,t){return om(e).put({bundleId:(r=t).id,createTime:Ad(xr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return am(e).get(t).next(r=>{if(r)return{name:(o=r).name,query:xv(o.bundledQuery),readTime:Sd(o.readTime)};var o})}saveNamedQuery(e,t){return am(e).put({name:(r=t).name,readTime:Ad(xr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function om(n){return Gr(n,"bundles")}function am(n){return Gr(n,"namedQueries")}class um{constructor(e,t){this.yt=e,this.userId=t}static re(e,t){return new um(e,t.uid||"")}getOverlay(e,t){return Wl(e).get(Nv(this.userId,t)).next(r=>r?Rv(this.yt,r):null)}getOverlays(e,t){const r=La();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){const o=[];return r.forEach((u,d)=>{const g=new sm(t,d);o.push(this.oe(e,g))}),oe.waitFor(o)}removeOverlaysForBatchId(e,t,r){const o=new Set;t.forEach(d=>o.add(_i(d.getCollectionPath())));const u=[];return o.forEach(d=>{const g=IDBKeyRange.bound([this.userId,d,r],[this.userId,d,r+1],!1,!0);u.push(Wl(e).Y("collectionPathOverlayIndex",g))}),oe.waitFor(u)}getOverlaysForCollection(e,t,r){const o=La(),u=_i(t),d=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Wl(e).W("collectionPathOverlayIndex",d).next(g=>{for(const v of g){const C=Rv(this.yt,v);o.set(C.getKey(),C)}return o})}getOverlaysForCollectionGroup(e,t,r,o){const u=La();let d;const g=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Wl(e).Z({index:"collectionGroupOverlayIndex",range:g},(v,C,A)=>{const N=Rv(this.yt,C);u.size()<o||N.largestBatchId===d?(u.set(N.getKey(),N),d=N.largestBatchId):A.done()}).next(()=>u)}oe(e,t){return Wl(e).put(function(r,o,u){const[d,g,v]=Nv(o,u.mutation.key);return{userId:o,collectionPath:g,documentId:v,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:yi(r.ie,u.mutation)}}(this.yt,this.userId,t))}}function Wl(n){return Gr(n,"documentOverlays")}class Ba{constructor(){}ue(e,t){this.ce(e,t),t.ae()}ce(e,t){if("nullValue"in e)this.he(t,5);else if("booleanValue"in e)this.he(t,10),t.le(e.booleanValue?1:0);else if("integerValue"in e)this.he(t,15),t.le(ar(e.integerValue));else if("doubleValue"in e){const r=ar(e.doubleValue);isNaN(r)?this.he(t,13):(this.he(t,15),cd(r)?t.le(0):t.le(r))}else if("timestampValue"in e){const r=e.timestampValue;this.he(t,20),"string"==typeof r?t.fe(r):(t.fe(`${r.seconds||""}`),t.le(r.nanos||0))}else if("stringValue"in e)this.de(e.stringValue,t),this._e(t);else if("bytesValue"in e)this.he(t,30),t.we(dd(e.bytesValue)),this._e(t);else if("referenceValue"in e)this.me(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.he(t,45),t.le(r.latitude||0),t.le(r.longitude||0)}else"mapValue"in e?z_(e)?this.he(t,Number.MAX_SAFE_INTEGER):(this.ge(e.mapValue,t),this._e(t)):"arrayValue"in e?(this.ye(e.arrayValue,t),this._e(t)):ot()}de(e,t){this.he(t,25),this.pe(e,t)}pe(e,t){t.fe(e)}ge(e,t){const r=e.fields||{};this.he(t,55);for(const o of Object.keys(r))this.de(o,t),this.ce(r[o],t)}ye(e,t){const r=e.values||[];this.he(t,50);for(const o of r)this.ce(o,t)}me(e,t){this.he(t,37),qe.fromName(e).path.forEach(r=>{this.he(t,60),this.pe(r,t)})}he(e,t){e.le(t)}_e(e){e.le(2)}}function lm(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function Yb(n){const e=64-function(t){let r=0;for(let o=0;o<8;++o){const u=lm(255&t[o]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Ba.Ie=new Ba;class rM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Te(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ee(r.value),r=t.next();this.Ae()}Re(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.be(r.value),r=t.next();this.Pe()}ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ee(r);else if(r<2048)this.Ee(960|r>>>6),this.Ee(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ee(480|r>>>12),this.Ee(128|63&r>>>6),this.Ee(128|63&r);else{const o=t.codePointAt(0);this.Ee(240|o>>>18),this.Ee(128|63&o>>>12),this.Ee(128|63&o>>>6),this.Ee(128|63&o)}}this.Ae()}Ve(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.be(r);else if(r<2048)this.be(960|r>>>6),this.be(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.be(480|r>>>12),this.be(128|63&r>>>6),this.be(128|63&r);else{const o=t.codePointAt(0);this.be(240|o>>>18),this.be(128|63&o>>>12),this.be(128|63&o>>>6),this.be(128|63&o)}}this.Pe()}Se(e){const t=this.De(e),r=Yb(t);this.Ce(1+r),this.buffer[this.position++]=255&r;for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=255&t[o]}xe(e){const t=this.De(e),r=Yb(t);this.Ce(1+r),this.buffer[this.position++]=~(255&r);for(let o=t.length-r;o<t.length;++o)this.buffer[this.position++]=~(255&t[o])}Ne(){this.ke(255),this.ke(255)}Oe(){this.Me(255),this.Me(255)}reset(){this.position=0}seed(e){this.Ce(e.length),this.buffer.set(e,this.position),this.position+=e.length}Fe(){return this.buffer.slice(0,this.position)}De(e){const t=function(o){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,o,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let o=1;o<t.length;++o)t[o]^=r?255:0;return t}Ee(e){const t=255&e;0===t?(this.ke(0),this.ke(255)):255===t?(this.ke(255),this.ke(0)):this.ke(t)}be(e){const t=255&e;0===t?(this.Me(0),this.Me(255)):255===t?(this.Me(255),this.Me(0)):this.Me(e)}Ae(){this.ke(0),this.ke(1)}Pe(){this.Me(0),this.Me(1)}ke(e){this.Ce(1),this.buffer[this.position++]=e}Me(e){this.Ce(1),this.buffer[this.position++]=~e}Ce(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class iM{constructor(e){this.$e=e}we(e){this.$e.Te(e)}fe(e){this.$e.ve(e)}le(e){this.$e.Se(e)}ae(){this.$e.Ne()}}class sM{constructor(e){this.$e=e}we(e){this.$e.Re(e)}fe(e){this.$e.Ve(e)}le(e){this.$e.xe(e)}ae(){this.$e.Oe()}}class xd{constructor(){this.$e=new rM,this.Be=new iM(this.$e),this.Le=new sM(this.$e)}seed(e){this.$e.seed(e)}qe(e){return 0===e?this.Be:this.Le}Fe(){return this.$e.Fe()}reset(){this.$e.reset()}}class zl{constructor(e,t,r,o){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=o}Ue(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new zl(this.indexId,this.documentKey,this.arrayValue,r)}}function Uu(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=UI(n.arrayValue,e.arrayValue),0!==t?t:(t=UI(n.directionalValue,e.directionalValue),0!==t?t:qe.comparator(n.documentKey,e.documentKey)))}function UI(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class Qb{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ke=e.orderBy,this.Ge=[];for(const t of e.filters){const r=t;r.isInequality()?this.Qe=r:this.Ge.push(r)}}je(e){vt(e.collectionGroup===this.collectionId);const t=P_(e);if(void 0!==t&&!this.We(t))return!1;const r=Ol(e);let o=0,u=0;for(;o<r.length&&this.We(r[o]);++o);if(o===r.length)return!0;if(void 0!==this.Qe){const d=r[o];if(!this.ze(this.Qe,d)||!this.He(this.Ke[u++],d))return!1;++o}for(;o<r.length;++o){const d=r[o];if(u>=this.Ke.length||!this.He(this.Ke[u++],d))return!1}return!0}We(e){for(const t of this.Ge)if(this.ze(t,e))return!0;return!1}ze(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}He(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function Ov(n){var e,t;if(vt(n instanceof rn||n instanceof bn),n instanceof rn){if(n instanceof nI){const o=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>rn.create(n.field,"==",u)))||[];return bn.create(o,"or")}return n}const r=n.filters.map(o=>Ov(o));return bn.create(r,n.op)}function BI(n){if(0===n.getFilters().length)return[];const e=dm(Ov(n));return vt($I(e)),cm(e)||Pv(e)?[e]:e.getFilters()}function cm(n){return n instanceof rn}function Pv(n){return n instanceof bn&&Z_(n)}function $I(n){return cm(n)||Pv(n)||function(e){if(e instanceof bn&&Ll(e)){for(const t of e.getFilters())if(!cm(t)&&!Pv(t))return!1;return!0}return!1}(n)}function dm(n){if(vt(n instanceof rn||n instanceof bn),n instanceof rn)return n;if(1===n.filters.length)return dm(n.filters[0]);const e=n.filters.map(r=>dm(r));let t=bn.create(e,n.op);return t=Ff(t),$I(t)?t:(vt(t instanceof bn),vt(pd(t)),vt(t.filters.length>1),t.filters.reduce((r,o)=>kf(r,o)))}function kf(n,e){let t;return vt(n instanceof rn||n instanceof bn),vt(e instanceof rn||e instanceof bn),t=n instanceof rn?e instanceof rn?bn.create([n,e],"and"):Jb(n,e):e instanceof rn?Jb(e,n):function(r,o){if(vt(r.filters.length>0&&o.filters.length>0),pd(r)&&pd(o))return $g(r,o.getFilters());const u=Ll(r)?r:o,d=Ll(r)?o:r,g=u.filters.map(v=>kf(v,d));return bn.create(g,"or")}(n,e),Ff(t)}function Jb(n,e){if(pd(e))return $g(e,n.getFilters());{const t=e.filters.map(r=>kf(n,r));return bn.create(t,"or")}}function Ff(n){if(vt(n instanceof rn||n instanceof bn),n instanceof rn)return n;const e=n.getFilters();if(1===e.length)return Ff(e[0]);if(Bg(n))return n;const t=e.map(o=>Ff(o)),r=[];return t.forEach(o=>{o instanceof rn?r.push(o):o instanceof bn&&(o.op===n.op?r.push(...o.filters):r.push(o))}),1===r.length?r[0]:bn.create(r,n.op)}class kv{constructor(){this.Je=new Fv}addToCollectionParentIndex(e,t){return this.Je.add(t),oe.resolve()}getCollectionParents(e,t){return oe.resolve(this.Je.getEntries(t))}addFieldIndex(e,t){return oe.resolve()}deleteFieldIndex(e,t){return oe.resolve()}getDocumentsMatchingTarget(e,t){return oe.resolve(null)}getIndexType(e,t){return oe.resolve(0)}getFieldIndexes(e,t){return oe.resolve([])}getNextCollectionGroupToUpdate(e){return oe.resolve(null)}getMinOffset(e,t){return oe.resolve(es.min())}getMinOffsetFromCollectionGroup(e,t){return oe.resolve(es.min())}updateCollectionGroup(e,t,r){return oe.resolve()}updateIndexEntries(e,t){return oe.resolve()}}class Fv{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t]||new On(un.comparator),u=!o.has(r);return this.index[t]=o.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),o=this.index[t];return o&&o.has(r)}getEntries(e){return(this.index[e]||new On(un.comparator)).toArray()}}const hm=new Uint8Array(0);class oM{constructor(e,t){this.user=e,this.databaseId=t,this.Ye=new Fv,this.Xe=new ku(r=>Ul(r),(r,o)=>md(r,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.Ye.has(t)){const r=t.lastSegment(),o=t.popLast();e.addOnCommittedListener(()=>{this.Ye.add(t)});const u={collectionId:r,parent:_i(o)};return Xb(e).put(u)}return oe.resolve()}getCollectionParents(e,t){const r=[],o=IDBKeyRange.bound([t,""],[UE(t),""],!1,!0);return Xb(e).W(o).next(u=>{for(const d of u){if(d.collectionId!==t)break;r.push(Wo(d.parent))}return r})}addFieldIndex(e,t){const r=fm(e),o={indexId:(d=t).indexId,collectionGroup:d.collectionGroup,fields:d.fields.map(g=>[g.fieldPath.canonicalString(),g.kind])};var d;delete o.indexId;const u=r.add(o);if(t.indexState){const d=Vf(e);return u.next(g=>{d.put(Vu(g,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=fm(e),o=Vf(e),u=Lf(e);return r.delete(t.indexId).next(()=>o.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Lf(e);let o=!0;const u=new Map;return oe.forEach(this.Ze(t),d=>this.tn(e,d).next(g=>{o&&(o=!!g),u.set(d,g)})).next(()=>{if(o){let d=jt();const g=[];return oe.forEach(u,(v,C)=>{var A;Ve("IndexedDbIndexManager",`Using index ${A=v,`id=${A.indexId}|cg=${A.collectionGroup}|f=${A.fields.map(Wt=>`${Wt.fieldPath}:${Wt.kind}`).join(",")}`} to execute ${Ul(t)}`);const N=function(Wt,zt){const Gt=P_(zt);if(void 0===Gt)return null;for(const tn of bf(Wt,Gt.fieldPath))switch(tn.op){case"array-contains-any":return tn.value.arrayValue.values||[];case"array-contains":return[tn.value]}return null}(C,v),W=function(Wt,zt){const Gt=new Map;for(const tn of Ol(zt))for(const ri of bf(Wt,tn.fieldPath))switch(ri.op){case"==":case"in":Gt.set(tn.fieldPath.canonicalString(),ri.value);break;case"not-in":case"!=":return Gt.set(tn.fieldPath.canonicalString(),ri.value),Array.from(Gt.values())}return null}(C,v),ne=function(Wt,zt){const Gt=[];let tn=!0;for(const ri of Ol(zt)){const h0=0===ri.kind?iI(Wt,ri.fieldPath,Wt.startAt):Q_(Wt,ri.fieldPath,Wt.startAt);Gt.push(h0.value),tn&&(tn=h0.inclusive)}return new Ou(Gt,tn)}(C,v),ge=function(Wt,zt){const Gt=[];let tn=!0;for(const ri of Ol(zt)){const h0=0===ri.kind?Q_(Wt,ri.fieldPath,Wt.endAt):iI(Wt,ri.fieldPath,Wt.endAt);Gt.push(h0.value),tn&&(tn=h0.inclusive)}return new Ou(Gt,tn)}(C,v),Be=this.en(v,C,ne),He=this.en(v,C,ge),Zt=this.nn(v,C,W),Yt=this.sn(v.indexId,N,Be,ne.inclusive,He,ge.inclusive,Zt);return oe.forEach(Yt,Wt=>r.J(Wt,t.limit).next(zt=>{zt.forEach(Gt=>{const tn=qe.fromSegments(Gt.documentKey);d.has(tn)||(d=d.add(tn),g.push(tn))})}))}).next(()=>g)}return oe.resolve(null)})}Ze(e){let t=this.Xe.get(e);return t||(t=0===e.filters.length?[e]:BI(bn.create(e.filters,"and")).map(r=>Y_(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.Xe.set(e,t),t)}sn(e,t,r,o,u,d,g){const v=(null!=t?t.length:1)*Math.max(r.length,u.length),C=v/(null!=t?t.length:1),A=[];for(let N=0;N<v;++N){const W=t?this.rn(t[N/C]):hm,ne=this.on(e,W,r[N%C],o),ge=this.un(e,W,u[N%C],d),Be=g.map(He=>this.on(e,W,He,!0));A.push(...this.createRange(ne,ge,Be))}return A}on(e,t,r,o){const u=new zl(e,qe.empty(),t,r);return o?u:u.Ue()}un(e,t,r,o){const u=new zl(e,qe.empty(),t,r);return o?u.Ue():u}tn(e,t){const r=new Qb(t),o=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,o).next(u=>{let d=null;for(const g of u)r.je(g)&&(!d||g.fields.length>d.fields.length)&&(d=g);return d})}getIndexType(e,t){let r=2;const o=this.Ze(t);return oe.forEach(o,u=>this.tn(e,u).next(d=>{d?0!==r&&d.fields.length<function(g){let v=new On(mr.comparator),C=!1;for(const A of g.filters)for(const N of A.getFlattenedFilters())N.field.isKeyField()||("array-contains"===N.op||"array-contains-any"===N.op?C=!0:v=v.add(N.field));for(const A of g.orderBy)A.field.isKeyField()||(v=v.add(A.field));return v.size+(C?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&o.length>1&&2===r?1:r)}cn(e,t){const r=new xd;for(const o of Ol(e)){const u=t.data.field(o.fieldPath);if(null==u)return null;const d=r.qe(o.kind);Ba.Ie.ue(u,d)}return r.Fe()}rn(e){const t=new xd;return Ba.Ie.ue(e,t.qe(0)),t.Fe()}an(e,t){const r=new xd;return Ba.Ie.ue(Fl(this.databaseId,t),r.qe(function(o){const u=Ol(o);return 0===u.length?0:u[u.length-1].kind}(e))),r.Fe()}nn(e,t,r){if(null===r)return[];let o=[];o.push(new xd);let u=0;for(const d of Ol(e)){const g=r[u++];for(const v of o)if(this.hn(t,d.fieldPath)&&Df(g))o=this.ln(o,d,g);else{const C=v.qe(d.kind);Ba.Ie.ue(g,C)}}return this.fn(o)}en(e,t,r){return this.nn(e,t,r.position)}fn(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Fe();return t}ln(e,t,r){const o=[...e],u=[];for(const d of r.arrayValue.values||[])for(const g of o){const v=new xd;v.seed(g.Fe()),Ba.Ie.ue(d,v.qe(t.kind)),u.push(v)}return u}hn(e,t){return!!e.filters.find(r=>r instanceof rn&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=fm(e),o=Vf(e);return(t?r.W("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.W()).next(u=>{const d=[];return oe.forEach(u,g=>o.get([g.indexId,this.uid]).next(v=>{d.push(function(C,A){const N=A?new vf(A.sequenceNumber,new es(Sd(A.readTime),new qe(Wo(A.documentKey)),A.largestBatchId)):vf.empty(),W=C.fields.map(([ne,ge])=>new _f(mr.fromServerFormat(ne),ge));return new kg(C.indexId,C.collectionGroup,W,N)}(g,v))})).next(()=>d)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return 0!==u?u:$t(r.collectionGroup,o.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const o=fm(e),u=Vf(e);return this.dn(e).next(d=>o.W("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(g=>oe.forEach(g,v=>u.put(Vu(v.indexId,this.user,d,r)))))}updateIndexEntries(e,t){const r=new Map;return oe.forEach(t,(o,u)=>{const d=r.get(o.collectionGroup);return(d?oe.resolve(d):this.getFieldIndexes(e,o.collectionGroup)).next(g=>(r.set(o.collectionGroup,g),oe.forEach(g,v=>this._n(e,o,v).next(C=>{const A=this.wn(u,v);return C.isEqual(A)?oe.resolve():this.mn(e,u,v,C,A)}))))})}gn(e,t,r,o){return Lf(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,orderedDocumentKey:this.an(r,t.key),documentKey:t.key.path.toArray()})}yn(e,t,r,o){return Lf(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,this.an(r,t.key),t.key.path.toArray()])}_n(e,t,r){const o=Lf(e);let u=new On(Uu);return o.Z({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.an(r,t)])},(d,g)=>{u=u.add(new zl(r.indexId,t,g.arrayValue,g.directionalValue))}).next(()=>u)}wn(e,t){let r=new On(Uu);const o=this.cn(t,e);if(null==o)return r;const u=P_(t);if(null!=u){const d=e.data.field(u.fieldPath);if(Df(d))for(const g of d.arrayValue.values||[])r=r.add(new zl(t.indexId,e.key,this.rn(g),o))}else r=r.add(new zl(t.indexId,e.key,hm,o));return r}mn(e,t,r,o,u){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const d=[];return function(g,v,C,A,N){const W=g.getIterator(),ne=v.getIterator();let ge=Pu(W),Be=Pu(ne);for(;ge||Be;){let He=!1,Zt=!1;if(ge&&Be){const Yt=C(ge,Be);Yt<0?Zt=!0:Yt>0&&(He=!0)}else null!=ge?Zt=!0:He=!0;He?(A(Be),Be=Pu(ne)):Zt?(N(ge),ge=Pu(W)):(ge=Pu(W),Be=Pu(ne))}}(o,u,Uu,g=>{d.push(this.gn(e,t,r,g))},g=>{d.push(this.yn(e,t,r,g))}),oe.waitFor(d)}dn(e){let t=1;return Vf(e).Z({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,o,u)=>{u.done(),t=o.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((d,g)=>Uu(d,g)).filter((d,g,v)=>!g||0!==Uu(d,v[g-1]));const o=[];o.push(e);for(const d of r){const g=Uu(d,e),v=Uu(d,t);if(0===g)o[0]=e.Ue();else if(g>0&&v<0)o.push(d),o.push(d.Ue());else if(v>0)break}o.push(t);const u=[];for(let d=0;d<o.length;d+=2){if(this.pn(o[d],o[d+1]))return[];u.push(IDBKeyRange.bound([o[d].indexId,this.uid,o[d].arrayValue,o[d].directionalValue,hm,[]],[o[d+1].indexId,this.uid,o[d+1].arrayValue,o[d+1].directionalValue,hm,[]]))}return u}pn(e,t){return Uu(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(eT)}getMinOffset(e,t){return oe.mapArray(this.Ze(t),r=>this.tn(e,r).next(o=>o||ot())).next(eT)}}function Xb(n){return Gr(n,"collectionParents")}function Lf(n){return Gr(n,"indexEntries")}function fm(n){return Gr(n,"indexConfiguration")}function Vf(n){return Gr(n,"indexState")}function eT(n){vt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const o=n[r].indexState.offset;F_(o,e)<0&&(e=o),t<o.largestBatchId&&(t=o.largestBatchId)}return new es(e.readTime,e.documentKey,t)}const tT={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ns{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new ns(e,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function nT(n,e,t){const r=n.store("mutations"),o=n.store("documentMutations"),u=[],d=IDBKeyRange.only(t.batchId);let g=0;const v=r.Z({range:d},(A,N,W)=>(g++,W.delete()));u.push(v.next(()=>{vt(1===g)}));const C=[];for(const A of t.mutations){const N=DI(e,A.key.path,t.batchId);u.push(o.delete(N)),C.push(A.key)}return oe.waitFor(u).next(()=>C)}function Lv(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw ot();e=n.noDocument}return JSON.stringify(e).length}ns.DEFAULT_COLLECTION_PERCENTILE=10,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ns.DEFAULT=new ns(41943040,ns.DEFAULT_COLLECTION_PERCENTILE,ns.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ns.DISABLED=new ns(-1,0,0);class pm{constructor(e,t,r,o){this.userId=e,this.yt=t,this.indexManager=r,this.referenceDelegate=o,this.In={}}static re(e,t,r,o){vt(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new pm(u,t,r,o)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).Z({index:"userMutationsIndex",range:r},(o,u,d)=>{t=!1,d.done()}).next(()=>t)}addMutationBatch(e,t,r,o){const u=Uf(e),d=ql(e);return d.add({}).next(g=>{vt("number"==typeof g);const v=new kI(g,t,r,o),C=function(W,ne,ge){const Be=ge.baseMutations.map(Zt=>yi(W.ie,Zt)),He=ge.mutations.map(Zt=>yi(W.ie,Zt));return{userId:ne,batchId:ge.batchId,localWriteTimeMs:ge.localWriteTime.toMillis(),baseMutations:Be,mutations:He}}(this.yt,this.userId,v),A=[];let N=new On((W,ne)=>$t(W.canonicalString(),ne.canonicalString()));for(const W of o){const ne=DI(this.userId,W.key.path,g);N=N.add(W.key.path.popLast()),A.push(d.put(C)),A.push(u.put(ne,Wb))}return N.forEach(W=>{A.push(this.indexManager.addToCollectionParentIndex(e,W))}),e.addOnCommittedListener(()=>{this.In[g]=v.keys()}),oe.waitFor(A).next(()=>v)})}lookupMutationBatch(e,t){return ql(e).get(t).next(r=>r?(vt(r.userId===this.userId),Md(this.yt,r)):null)}Tn(e,t){return this.In[t]?oe.resolve(this.In[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const o=r.keys();return this.In[t]=o,o}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return ql(e).Z({index:"userMutationsIndex",range:o},(d,g,v)=>{g.userId===this.userId&&(vt(g.batchId>=r),u=Md(this.yt,g)),v.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ql(e).Z({index:"userMutationsIndex",range:t,reverse:!0},(o,u,d)=>{r=u.batchId,d.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ql(e).W("userMutationsIndex",t).next(r=>r.map(o=>Md(this.yt,o)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=rm(this.userId,t.path),o=IDBKeyRange.lowerBound(r),u=[];return Uf(e).Z({range:o},(d,g,v)=>{const[C,A,N]=d,W=Wo(A);if(C===this.userId&&t.path.isEqual(W))return ql(e).get(N).next(ne=>{if(!ne)throw ot();vt(ne.userId===this.userId),u.push(Md(this.yt,ne))});v.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On($t);const o=[];return t.forEach(u=>{const d=rm(this.userId,u.path),g=IDBKeyRange.lowerBound(d),v=Uf(e).Z({range:g},(C,A,N)=>{const[W,ne,ge]=C,Be=Wo(ne);W===this.userId&&u.path.isEqual(Be)?r=r.add(ge):N.done()});o.push(v)}),oe.waitFor(o).next(()=>this.En(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1,u=rm(this.userId,r),d=IDBKeyRange.lowerBound(u);let g=new On($t);return Uf(e).Z({range:d},(v,C,A)=>{const[N,W,ne]=v,ge=Wo(W);N===this.userId&&r.isPrefixOf(ge)?ge.length===o&&(g=g.add(ne)):A.done()}).next(()=>this.En(e,g))}En(e,t){const r=[],o=[];return t.forEach(u=>{o.push(ql(e).get(u).next(d=>{if(null===d)throw ot();vt(d.userId===this.userId),r.push(Md(this.yt,d))}))}),oe.waitFor(o).next(()=>r)}removeMutationBatch(e,t){return nT(e.se,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.An(t.batchId)}),oe.forEach(r,o=>this.referenceDelegate.markPotentiallyOrphaned(e,o))))}An(e){delete this.In[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return oe.resolve();const r=IDBKeyRange.lowerBound([this.userId]),o=[];return Uf(e).Z({range:r},(u,d,g)=>{if(u[0]===this.userId){const v=Wo(u[1]);o.push(v)}else g.done()}).next(()=>{vt(0===o.length)})})}containsKey(e,t){return rT(e,this.userId,t)}Rn(e){return iT(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function rT(n,e,t){const r=rm(e,t.path),o=r[1],u=IDBKeyRange.lowerBound(r);let d=!1;return Uf(n).Z({range:u,X:!0},(g,v,C)=>{const[A,N,W]=g;A===e&&N===o&&(d=!0),C.done()}).next(()=>d)}function ql(n){return Gr(n,"mutations")}function Uf(n){return Gr(n,"documentMutations")}function iT(n){return Gr(n,"mutationQueues")}class Rd{constructor(e){this.bn=e}next(){return this.bn+=2,this.bn}static Pn(){return new Rd(0)}static vn(){return new Rd(-1)}}class aM{constructor(e,t){this.referenceDelegate=e,this.yt=t}allocateTargetId(e){return this.Vn(e).next(t=>{const r=new Rd(t.highestTargetId);return t.highestTargetId=r.next(),this.Sn(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Vn(e).next(t=>Dt.fromTimestamp(new kn(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Vn(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.Vn(e).next(o=>(o.highestListenSequenceNumber=t,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),t>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=t),this.Sn(e,o)))}addTargetData(e,t){return this.Dn(e,t).next(()=>this.Vn(e).next(r=>(r.targetCount+=1,this.Cn(t,r),this.Sn(e,r))))}updateTargetData(e,t){return this.Dn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>i(e).delete(t.targetId)).next(()=>this.Vn(e)).next(r=>(vt(r.targetCount>0),r.targetCount-=1,this.Sn(e,r)))}removeTargets(e,t,r){let o=0;const u=[];return i(e).Z((d,g)=>{const v=Of(g);v.sequenceNumber<=t&&null===r.get(v.targetId)&&(o++,u.push(this.removeTargetData(e,v)))}).next(()=>oe.waitFor(u)).next(()=>o)}forEachTarget(e,t){return i(e).Z((r,o)=>{const u=Of(o);t(u)})}Vn(e){return s(e).get("targetGlobalKey").next(t=>(vt(null!==t),t))}Sn(e,t){return s(e).put("targetGlobalKey",t)}Dn(e,t){return i(e).put(Pf(this.yt,t))}Cn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.Vn(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Ul(t),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return i(e).Z({range:o,index:"queryTargetsIndex"},(d,g,v)=>{const C=Of(g);md(t,C.target)&&(u=C,v.done())}).next(()=>u)}addMatchingKeys(e,t,r){const o=[],u=a(e);return t.forEach(d=>{const g=_i(d.path);o.push(u.put({targetId:r,path:g})),o.push(this.referenceDelegate.addReference(e,r,d))}),oe.waitFor(o)}removeMatchingKeys(e,t,r){const o=a(e);return oe.forEach(t,u=>{const d=_i(u.path);return oe.waitFor([o.delete([r,d]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=a(e),o=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),o=a(e);let u=jt();return o.Z({range:r,X:!0},(d,g,v)=>{const C=Wo(d[1]),A=new qe(C);u=u.add(A)}).next(()=>u)}containsKey(e,t){const r=_i(t.path),o=IDBKeyRange.bound([r],[UE(r)],!1,!0);let u=0;return a(e).Z({index:"documentTargetsIndex",X:!0,range:o},([d,g],v,C)=>{0!==d&&(u++,C.done())}).next(()=>u>0)}ne(e,t){return i(e).get(t).next(r=>r?Of(r):null)}}function i(n){return Gr(n,"targets")}function s(n){return Gr(n,"targetGlobal")}function a(n){return Gr(n,"targetDocuments")}function l([n,e],[t,r]){const o=$t(n,t);return 0===o?$t(e,r):o}class c{constructor(e){this.xn=e,this.buffer=new On(l),this.Nn=0}kn(){return++this.Nn}On(e){const t=[e,this.kn()];if(this.buffer.size<this.xn)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();l(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class f{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Mn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Fn(6e4)}stop(){this.Mn&&(this.Mn.cancel(),this.Mn=null)}get started(){return null!==this.Mn}Fn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Mn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ie.Z)(function*(){t.Mn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){ka(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Uo(r)}yield t.Fn(3e5)}))}}class y{constructor(e,t){this.$n=e,this.params=t}calculateTargetCount(e,t){return this.$n.Bn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return oe.resolve(ts.at);const r=new c(t);return this.$n.forEachTarget(e,o=>r.On(o.sequenceNumber)).next(()=>this.$n.Ln(e,o=>r.On(o))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.$n.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.$n.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),oe.resolve(tT)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),tT):this.qn(e,t))}getCacheSize(e){return this.$n.getCacheSize(e)}qn(e,t){let r,o,u,d,g,v,C;const A=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(N=>(N>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${N}`),o=this.params.maximumSequenceNumbersToCollect):o=N,d=Date.now(),this.nthSequenceNumber(e,o))).next(N=>(r=N,g=Date.now(),this.removeTargets(e,r,t))).next(N=>(u=N,v=Date.now(),this.removeOrphanedDocuments(e,r))).next(N=>(C=Date.now(),x_()<=Ma.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${d-A}ms\n\tDetermined least recently used ${o} in `+(g-d)+`ms\n\tRemoved ${u} targets in `+(v-g)+`ms\n\tRemoved ${N} documents in `+(C-v)+`ms\nTotal Duration: ${C-A}ms`),oe.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:N})))}}class w{constructor(e,t){this.db=e,this.garbageCollector=new y(this,t)}Bn(e){const t=this.Un(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(o=>r+o))}Un(e){let t=0;return this.Ln(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Ln(e,t){return this.Kn(e,(r,o)=>t(o))}addReference(e,t,r){return I(e,r)}removeReference(e,t,r){return I(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return I(e,t)}Gn(e,t){return function(r,o){let u=!1;return iT(r).tt(d=>rT(r,d,o).next(g=>(g&&(u=!0),oe.resolve(!g)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Kn(e,(d,g)=>{if(g<=t){const v=this.Gn(e,d).next(C=>{if(!C)return u++,r.getEntry(e,d).next(()=>(r.removeEntry(d,Dt.min()),a(e).delete([0,_i(d.path)])))});o.push(v)}}).next(()=>oe.waitFor(o)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return I(e,t)}Kn(e,t){const r=a(e);let o,u=ts.at;return r.Z({index:"documentTargetsIndex"},([d,g],{path:v,sequenceNumber:C})=>{0===d?(u!==ts.at&&t(new qe(Wo(o)),u),u=C,o=v):u=ts.at}).next(()=>{u!==ts.at&&t(new qe(Wo(o)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function I(n,e){return a(n).put((r=n.currentSequenceNumber,{targetId:0,path:_i(e.path),sequenceNumber:r}));var r}class T{constructor(){this.changes=new ku(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Gn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?oe.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class R{constructor(e){this.yt=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return me(e).put(r)}removeEntry(e,t,r){return me(e).delete(function(o,u){const d=o.path.toArray();return[d.slice(0,d.length-2),d[d.length-2],Mv(u),d[d.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Qn(e,r)))}getEntry(e,t){let r=Gn.newInvalidDocument(t);return me(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ue(t))},(o,u)=>{r=this.jn(t,u)}).next(()=>r)}Wn(e,t){let r={size:0,document:Gn.newInvalidDocument(t)};return me(e).Z({index:"documentKeyIndex",range:IDBKeyRange.only(Ue(t))},(o,u)=>{r={document:this.jn(t,u),size:Lv(u)}}).next(()=>r)}getEntries(e,t){let r=Ai();return this.zn(e,t,(o,u)=>{const d=this.jn(o,u);r=r.insert(o,d)}).next(()=>r)}Hn(e,t){let r=Ai(),o=new ur(qe.comparator);return this.zn(e,t,(u,d)=>{const g=this.jn(u,d);r=r.insert(u,g),o=o.insert(u,Lv(d))}).next(()=>({documents:r,Jn:o}))}zn(e,t,r){if(t.isEmpty())return oe.resolve();let o=new On(lt);t.forEach(v=>o=o.add(v));const u=IDBKeyRange.bound(Ue(o.first()),Ue(o.last())),d=o.getIterator();let g=d.getNext();return me(e).Z({index:"documentKeyIndex",range:u},(v,C,A)=>{const N=qe.fromSegments([...C.prefixPath,C.collectionGroup,C.documentId]);for(;g&&lt(g,N)<0;)r(g,null),g=d.getNext();g&&g.isEqual(N)&&(r(g,C),g=d.hasNext()?d.getNext():null),g?A.j(Ue(g)):A.done()}).next(()=>{for(;g;)r(g,null),g=d.hasNext()?d.getNext():null})}getDocumentsMatchingQuery(e,t,r,o){const u=t.path,d=[u.popLast().toArray(),u.lastSegment(),Mv(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return me(e).W(IDBKeyRange.bound(d,g,!0)).next(v=>{let C=Ai();for(const A of v){const N=this.jn(qe.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);N.isFoundDocument()&&(_d(t,N)||o.has(N.key))&&(C=C.insert(N.key,N))}return C})}getAllFromCollectionGroup(e,t,r,o){let u=Ai();const d=ze(t,r),g=ze(t,es.max());return me(e).Z({index:"collectionGroupIndex",range:IDBKeyRange.bound(d,g,!0)},(v,C,A)=>{const N=this.jn(qe.fromSegments(C.prefixPath.concat(C.collectionGroup,C.documentId)),C);u=u.insert(N.key,N),u.size===o&&A.done()}).next(()=>u)}newChangeBuffer(e){return new z(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Q(e).get("remoteDocumentGlobalKey").next(t=>(vt(!!t),t))}Qn(e,t){return Q(e).put("remoteDocumentGlobalKey",t)}jn(e,t){if(t){const r=function Zb(n,e){let t;if(e.document)t=yI(n.ie,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=qe.fromSegments(e.noDocument.path),o=Sd(e.noDocument.readTime);t=Gn.newNoDocument(r,o),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return ot();{const r=qe.fromSegments(e.unknownDocument.path),o=Sd(e.unknownDocument.version);t=Gn.newUnknownDocument(r,o)}}return e.readTime&&t.setReadTime(function(r){const o=new kn(r[0],r[1]);return Dt.fromTimestamp(o)}(e.readTime)),t}(this.yt,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return Gn.newInvalidDocument(e)}}function F(n){return new R(n)}class z extends T{constructor(e,t){super(),this.Yn=e,this.trackRemovals=t,this.Xn=new ku(r=>r.toString(),(r,o)=>r.isEqual(o))}applyChanges(e){const t=[];let r=0,o=new On((u,d)=>$t(u.canonicalString(),d.canonicalString()));return this.changes.forEach((u,d)=>{const g=this.Xn.get(u);if(t.push(this.Yn.removeEntry(e,u,g.readTime)),d.isValidDocument()){const v=Kb(this.Yn.yt,d);o=o.add(u.path.popLast()),r+=Lv(v)-g.size,t.push(this.Yn.addEntry(e,u,v))}else if(r-=g.size,this.trackRemovals){const v=Kb(this.Yn.yt,d.convertToNoDocument(Dt.min()));t.push(this.Yn.addEntry(e,u,v))}}),o.forEach(u=>{t.push(this.Yn.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.Yn.updateMetadata(e,r)),oe.waitFor(t)}getFromCache(e,t){return this.Yn.Wn(e,t).next(r=>(this.Xn.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.Yn.Hn(e,t).next(({documents:r,Jn:o})=>(o.forEach((u,d)=>{this.Xn.set(u,{size:d,readTime:r.get(u).readTime})}),r))}}function Q(n){return Gr(n,"remoteDocumentGlobal")}function me(n){return Gr(n,"remoteDocumentsV14")}function Ue(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function ze(n,e){const t=e.documentKey.path.toArray();return[n,Mv(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function lt(n,e){const t=n.path.toArray(),r=e.path.toArray();let o=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(o=$t(t[u],r[u]),o)return o;return o=$t(t.length,r.length),o||(o=$t(t[t.length-2],r[r.length-2]),o||$t(t[t.length-1],r[r.length-1]))}class Tt{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Re{constructor(e,t,r,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=o}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(o=>(r=o,this.remoteDocumentCache.getEntry(e,t))).next(o=>(null!==r&&Sf(r.mutation,o,Ti.empty(),kn.now()),o))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,jt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=jt()){const o=La();return this.populateOverlays(e,o,t).next(()=>this.computeViews(e,t,o,r).next(u=>{let d=Jg();return u.forEach((g,v)=>{d=d.insert(g,v.overlayedDocument)}),d}))}getOverlayedDocuments(e,t){const r=La();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,jt()))}populateOverlays(e,t,r){const o=[];return r.forEach(u=>{t.has(u)||o.push(u)}),this.documentOverlayCache.getOverlays(e,o).next(u=>{u.forEach((d,g)=>{t.set(d,g)})})}computeViews(e,t,r,o){let u=Ai();const d=Xg(),g=Xg();return t.forEach((v,C)=>{const A=r.get(C.key);o.has(C.key)&&(void 0===A||A.mutation instanceof Ho)?u=u.insert(C.key,C):void 0!==A?(d.set(C.key,A.mutation.getFieldMask()),Sf(A.mutation,C,A.mutation.getFieldMask(),kn.now())):d.set(C.key,Ti.empty())}),this.recalculateAndSaveOverlays(e,u).next(v=>(v.forEach((C,A)=>d.set(C,A)),t.forEach((C,A)=>{var N;return g.set(C,new Tt(A,null!==(N=d.get(C))&&void 0!==N?N:null))}),g))}recalculateAndSaveOverlays(e,t){const r=Xg();let o=new ur((d,g)=>d-g),u=jt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(d=>{for(const g of d)g.keys().forEach(v=>{const C=t.get(v);if(null===C)return;let A=r.get(v)||Ti.empty();A=g.applyToLocalView(C,A),r.set(v,A);const N=(o.get(g.batchId)||jt()).add(v);o=o.insert(g.batchId,N)})}).next(()=>{const d=[],g=o.getReverseIterator();for(;g.hasNext();){const v=g.getNext(),C=v.key,A=v.value,N=Pb();A.forEach(W=>{if(!u.has(W)){const ne=cI(t.get(W),r.get(W));null!==ne&&N.set(W,ne),u=u.add(W)}}),d.push(this.documentOverlayCache.saveOverlays(e,C,N))}return oe.waitFor(d)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return qe.isDocumentKey((o=t).path)&&null===o.collectionGroup&&0===o.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):ev(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var o}getNextDocuments(e,t,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,o).next(u=>{const d=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,o-u.size):oe.resolve(La());let g=-1,v=u;return d.next(C=>oe.forEach(C,(A,N)=>(g<N.largestBatchId&&(g=N.largestBatchId),u.get(A)?oe.resolve():this.remoteDocumentCache.getEntry(e,A).next(W=>{v=v.insert(A,W)}))).next(()=>this.populateOverlays(e,C,u)).next(()=>this.computeViews(e,v,C,jt())).next(A=>({batchId:g,changes:Ob(A)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new qe(t)).next(r=>{let o=Jg();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const o=t.collectionGroup;let u=Jg();return this.indexManager.getCollectionParents(e,o).next(d=>oe.forEach(d,g=>{const v=(C=t,A=g.child(o),new $o(A,null,C.explicitOrderBy.slice(),C.filters.slice(),C.limit,C.limitType,C.startAt,C.endAt));var C,A;return this.getDocumentsMatchingCollectionQuery(e,v,r).next(C=>{C.forEach((A,N)=>{u=u.insert(A,N)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(o=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o))).next(u=>{o.forEach((g,v)=>{const C=v.getKey();null===u.get(C)&&(u=u.insert(C,Gn.newInvalidDocument(C)))});let d=Jg();return u.forEach((g,v)=>{const C=o.get(g);void 0!==C&&Sf(C.mutation,v,Ti.empty(),kn.now()),_d(t,v)&&(d=d.insert(g,v))}),d})}}class Pt{constructor(e){this.yt=e,this.Zn=new Map,this.ts=new Map}getBundleMetadata(e,t){return oe.resolve(this.Zn.get(t))}saveBundleMetadata(e,t){var r;return this.Zn.set(t.id,{id:(r=t).id,version:r.version,createTime:xr(r.createTime)}),oe.resolve()}getNamedQuery(e,t){return oe.resolve(this.ts.get(t))}saveNamedQuery(e,t){return this.ts.set(t.name,{name:(r=t).name,query:xv(r.bundledQuery),readTime:xr(r.readTime)}),oe.resolve();var r}}class yn{constructor(){this.overlays=new ur(qe.comparator),this.es=new Map}getOverlay(e,t){return oe.resolve(this.overlays.get(t))}getOverlays(e,t){const r=La();return oe.forEach(t,o=>this.getOverlay(e,o).next(u=>{null!==u&&r.set(o,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((o,u)=>{this.oe(e,t,u)}),oe.resolve()}removeOverlaysForBatchId(e,t,r){const o=this.es.get(r);return void 0!==o&&(o.forEach(u=>this.overlays=this.overlays.remove(u)),this.es.delete(r)),oe.resolve()}getOverlaysForCollection(e,t,r){const o=La(),u=t.length+1,d=new qe(t.child("")),g=this.overlays.getIteratorFrom(d);for(;g.hasNext();){const v=g.getNext().value,C=v.getKey();if(!t.isPrefixOf(C.path))break;C.path.length===u&&v.largestBatchId>r&&o.set(v.getKey(),v)}return oe.resolve(o)}getOverlaysForCollectionGroup(e,t,r,o){let u=new ur((C,A)=>C-A);const d=this.overlays.getIterator();for(;d.hasNext();){const C=d.getNext().value;if(C.getKey().getCollectionGroup()===t&&C.largestBatchId>r){let A=u.get(C.largestBatchId);null===A&&(A=La(),u=u.insert(C.largestBatchId,A)),A.set(C.getKey(),C)}}const g=La(),v=u.getIterator();for(;v.hasNext()&&(v.getNext().value.forEach((C,A)=>g.set(C,A)),!(g.size()>=o)););return oe.resolve(g)}oe(e,t,r){const o=this.overlays.get(r.key);if(null!==o){const d=this.es.get(o.largestBatchId).delete(r.key);this.es.set(o.largestBatchId,d)}this.overlays=this.overlays.insert(r.key,new sm(t,r));let u=this.es.get(t);void 0===u&&(u=jt(),this.es.set(t,u)),this.es.set(t,u.add(r.key))}}class Fn{constructor(){this.ns=new On(Kn.ss),this.rs=new On(Kn.os)}isEmpty(){return this.ns.isEmpty()}addReference(e,t){const r=new Kn(e,t);this.ns=this.ns.add(r),this.rs=this.rs.add(r)}us(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.cs(new Kn(e,t))}hs(e,t){e.forEach(r=>this.removeReference(r,t))}ls(e){const t=new qe(new un([])),r=new Kn(t,e),o=new Kn(t,e+1),u=[];return this.rs.forEachInRange([r,o],d=>{this.cs(d),u.push(d.key)}),u}fs(){this.ns.forEach(e=>this.cs(e))}cs(e){this.ns=this.ns.delete(e),this.rs=this.rs.delete(e)}ds(e){const t=new qe(new un([])),r=new Kn(t,e),o=new Kn(t,e+1);let u=jt();return this.rs.forEachInRange([r,o],d=>{u=u.add(d.key)}),u}containsKey(e){const t=new Kn(e,0),r=this.ns.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class Kn{constructor(e,t){this.key=e,this._s=t}static ss(e,t){return qe.comparator(e.key,t.key)||$t(e._s,t._s)}static os(e,t){return $t(e._s,t._s)||qe.comparator(e.key,t.key)}}class Vv{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.ws=1,this.gs=new On(Kn.ss)}checkEmpty(e){return oe.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,o){const u=this.ws;this.ws++;const d=new kI(u,t,r,o);this.mutationQueue.push(d);for(const g of o)this.gs=this.gs.add(new Kn(g.key,u)),this.indexManager.addToCollectionParentIndex(e,g.key.path.popLast());return oe.resolve(d)}lookupMutationBatch(e,t){return oe.resolve(this.ys(t))}getNextMutationBatchAfterBatchId(e,t){const o=this.ps(t+1),u=o<0?0:o;return oe.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return oe.resolve(0===this.mutationQueue.length?-1:this.ws-1)}getAllMutationBatches(e){return oe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new Kn(t,0),o=new Kn(t,Number.POSITIVE_INFINITY),u=[];return this.gs.forEachInRange([r,o],d=>{const g=this.ys(d._s);u.push(g)}),oe.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new On($t);return t.forEach(o=>{const u=new Kn(o,0),d=new Kn(o,Number.POSITIVE_INFINITY);this.gs.forEachInRange([u,d],g=>{r=r.add(g._s)})}),oe.resolve(this.Is(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,o=r.length+1;let u=r;qe.isDocumentKey(u)||(u=u.child(""));const d=new Kn(new qe(u),0);let g=new On($t);return this.gs.forEachWhile(v=>{const C=v.key.path;return!!r.isPrefixOf(C)&&(C.length===o&&(g=g.add(v._s)),!0)},d),oe.resolve(this.Is(g))}Is(e){const t=[];return e.forEach(r=>{const o=this.ys(r);null!==o&&t.push(o)}),t}removeMutationBatch(e,t){vt(0===this.Ts(t.batchId,"removed")),this.mutationQueue.shift();let r=this.gs;return oe.forEach(t.mutations,o=>{const u=new Kn(o.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)}).next(()=>{this.gs=r})}An(e){}containsKey(e,t){const r=new Kn(t,0),o=this.gs.firstAfterOrEqual(r);return oe.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return oe.resolve()}Ts(e,t){return this.ps(e)}ps(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}ys(e){const t=this.ps(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Uv{constructor(e){this.Es=e,this.docs=new ur(qe.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,o=this.docs.get(r),u=o?o.size:0,d=this.Es(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:d}),this.size+=d-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return oe.resolve(r?r.document.mutableCopy():Gn.newInvalidDocument(t))}getEntries(e,t){let r=Ai();return t.forEach(o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():Gn.newInvalidDocument(o))}),oe.resolve(r)}getDocumentsMatchingQuery(e,t,r,o){let u=Ai();const d=t.path,g=new qe(d.child("")),v=this.docs.getIteratorFrom(g);for(;v.hasNext();){const{key:C,value:{document:A}}=v.getNext();if(!d.isPrefixOf(C.path))break;C.path.length>d.length+1||F_(k_(A),r)<=0||(o.has(A.key)||_d(t,A))&&(u=u.insert(A.key,A.mutableCopy()))}return oe.resolve(u)}getAllFromCollectionGroup(e,t,r,o){ot()}As(e,t){return oe.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new Bv(this)}getSize(e){return oe.resolve(this.size)}}class Bv extends T{constructor(e){super(),this.Yn=e}applyChanges(e){const t=[];return this.changes.forEach((r,o)=>{o.isValidDocument()?t.push(this.Yn.addEntry(e,o)):this.Yn.removeEntry(r)}),oe.waitFor(t)}getFromCache(e,t){return this.Yn.getEntry(e,t)}getAllFromCache(e,t){return this.Yn.getEntries(e,t)}}class $v{constructor(e){this.persistence=e,this.Rs=new ku(t=>Ul(t),md),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.bs=0,this.Ps=new Fn,this.targetCount=0,this.vs=Rd.Pn()}forEachTarget(e,t){return this.Rs.forEach((r,o)=>t(o)),oe.resolve()}getLastRemoteSnapshotVersion(e){return oe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return oe.resolve(this.bs)}allocateTargetId(e){return this.highestTargetId=this.vs.next(),oe.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.bs&&(this.bs=t),oe.resolve()}Dn(e){this.Rs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.vs=new Rd(t),this.highestTargetId=t),e.sequenceNumber>this.bs&&(this.bs=e.sequenceNumber)}addTargetData(e,t){return this.Dn(t),this.targetCount+=1,oe.resolve()}updateTargetData(e,t){return this.Dn(t),oe.resolve()}removeTargetData(e,t){return this.Rs.delete(t.target),this.Ps.ls(t.targetId),this.targetCount-=1,oe.resolve()}removeTargets(e,t,r){let o=0;const u=[];return this.Rs.forEach((d,g)=>{g.sequenceNumber<=t&&null===r.get(g.targetId)&&(this.Rs.delete(d),u.push(this.removeMatchingKeysForTargetId(e,g.targetId)),o++)}),oe.waitFor(u).next(()=>o)}getTargetCount(e){return oe.resolve(this.targetCount)}getTargetData(e,t){const r=this.Rs.get(t)||null;return oe.resolve(r)}addMatchingKeys(e,t,r){return this.Ps.us(t,r),oe.resolve()}removeMatchingKeys(e,t,r){this.Ps.hs(t,r);const o=this.persistence.referenceDelegate,u=[];return o&&t.forEach(d=>{u.push(o.markPotentiallyOrphaned(e,d))}),oe.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.Ps.ls(t),oe.resolve()}getMatchingKeysForTargetId(e,t){const r=this.Ps.ds(t);return oe.resolve(r)}containsKey(e,t){return oe.resolve(this.Ps.containsKey(t))}}class gm{constructor(e,t){this.Vs={},this.overlays={},this.Ss=new ts(0),this.Ds=!1,this.Ds=!0,this.referenceDelegate=e(this),this.Cs=new $v(this),this.indexManager=new kv,this.remoteDocumentCache=new Uv(r=>this.referenceDelegate.xs(r)),this.yt=new LI(t),this.Ns=new Pt(this.yt)}start(){return Promise.resolve()}shutdown(){return this.Ds=!1,Promise.resolve()}get started(){return this.Ds}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yn,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.Vs[e.toKey()];return r||(r=new Vv(t,this.referenceDelegate),this.Vs[e.toKey()]=r),r}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const o=new jv(this.Ss.next());return this.referenceDelegate.ks(),r(o).next(u=>this.referenceDelegate.Os(o).next(()=>u)).toPromise().then(u=>(o.raiseOnCommittedEvent(),u))}Ms(e,t){return oe.or(Object.values(this.Vs).map(r=>()=>r.containsKey(e,t)))}}class jv extends Fg{constructor(e){super(),this.currentSequenceNumber=e}}class Nd{constructor(e){this.persistence=e,this.Fs=new Fn,this.$s=null}static Bs(e){return new Nd(e)}get Ls(){if(this.$s)return this.$s;throw ot()}addReference(e,t,r){return this.Fs.addReference(r,t),this.Ls.delete(r.toString()),oe.resolve()}removeReference(e,t,r){return this.Fs.removeReference(r,t),this.Ls.add(r.toString()),oe.resolve()}markPotentiallyOrphaned(e,t){return this.Ls.add(t.toString()),oe.resolve()}removeTarget(e,t){this.Fs.ls(t.targetId).forEach(o=>this.Ls.add(o.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(o=>{o.forEach(u=>this.Ls.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}ks(){this.$s=new Set}Os(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return oe.forEach(this.Ls,r=>{const o=qe.fromPath(r);return this.qs(e,o).next(u=>{u||t.removeEntry(o,Dt.min())})}).next(()=>(this.$s=null,t.apply(e)))}updateLimboDocument(e,t){return this.qs(e,t).next(r=>{r?this.Ls.delete(t.toString()):this.Ls.add(t.toString())})}xs(e){return 0}qs(e,t){return oe.or([()=>oe.resolve(this.Fs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ms(e,t)])}}class Hv{constructor(e){this.yt=e}$(e,t,r,o){const u=new Vg("createOrUpgrade",t);var g;r<1&&o>=1&&(e.createObjectStore("owner"),(g=e).createObjectStore("mutationQueues",{keyPath:"userId"}),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gb,{unique:!0}),g.createObjectStore("documentMutations"),mm(e),function(g){g.createObjectStore("remoteDocuments")}(e));let d=oe.resolve();return r<3&&o>=3&&(0!==r&&(function(g){g.deleteObjectStore("targetDocuments"),g.deleteObjectStore("targets"),g.deleteObjectStore("targetGlobal")}(e),mm(e)),d=d.next(()=>function(g){const v=g.store("targetGlobal"),C={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return v.put("targetGlobalKey",C)}(u))),r<4&&o>=4&&(0!==r&&(d=d.next(()=>function(g,v){return v.store("mutations").W().next(C=>{g.deleteObjectStore("mutations"),g.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Gb,{unique:!0});const A=v.store("mutations"),N=C.map(W=>A.put(W));return oe.waitFor(N)})}(e,u))),d=d.next(()=>{!function(g){g.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&o>=5&&(d=d.next(()=>this.Us(u))),r<6&&o>=6&&(d=d.next(()=>(function(g){g.createObjectStore("remoteDocumentGlobal")}(e),this.Ks(u)))),r<7&&o>=7&&(d=d.next(()=>this.Gs(u))),r<8&&o>=8&&(d=d.next(()=>this.Qs(e,u))),r<9&&o>=9&&(d=d.next(()=>{!function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&o>=10&&(d=d.next(()=>this.js(u))),r<11&&o>=11&&(d=d.next(()=>{(function(g){g.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(g){g.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&o>=12&&(d=d.next(()=>{!function(g){const v=g.createObjectStore("documentOverlays",{keyPath:xI});v.createIndex("collectionPathOverlayIndex",RI,{unique:!1}),v.createIndex("collectionGroupOverlayIndex",im,{unique:!1})}(e)})),r<13&&o>=13&&(d=d.next(()=>function(g){const v=g.createObjectStore("remoteDocumentsV14",{keyPath:zb});v.createIndex("documentKeyIndex",CI),v.createIndex("collectionGroupIndex",tM)}(e)).next(()=>this.Ws(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&o>=14&&(d=d.next(()=>this.zs(e,u))),r<15&&o>=15&&(d=d.next(()=>function(g){g.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),g.createObjectStore("indexState",{keyPath:Tv}).createIndex("sequenceNumberIndex",AI,{unique:!1}),g.createObjectStore("indexEntries",{keyPath:SI}).createIndex("documentKeyIndex",MI,{unique:!1})}(e))),d}Ks(e){let t=0;return e.store("remoteDocuments").Z((r,o)=>{t+=Lv(o)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Us(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.W().next(o=>oe.forEach(o,u=>{const d=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.W("userMutationsIndex",d).next(g=>oe.forEach(g,v=>{vt(v.userId===u.userId);const C=Md(this.yt,v);return nT(e,u.userId,C).next(()=>{})}))}))}Gs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(o=>{const u=[];return r.Z((d,g)=>{const v=new un(d),C=[0,_i(v)];u.push(t.get(C).next(A=>A?oe.resolve():t.put({targetId:0,path:_i(v),sequenceNumber:o.highestListenSequenceNumber})))}).next(()=>oe.waitFor(u))})}Qs(e,t){e.createObjectStore("collectionParents",{keyPath:nM});const r=t.store("collectionParents"),o=new Fv,u=d=>{if(o.add(d)){const g=d.lastSegment(),v=d.popLast();return r.put({collectionId:g,parent:_i(v)})}};return t.store("remoteDocuments").Z({X:!0},(d,g)=>{const v=new un(d);return u(v.popLast())}).next(()=>t.store("documentMutations").Z({X:!0},([d,g,v],C)=>{const A=Wo(g);return u(A.popLast())}))}js(e){const t=e.store("targets");return t.Z((r,o)=>{const u=Of(o),d=Pf(this.yt,u);return t.put(d)})}Ws(e,t){const r=t.store("remoteDocuments"),o=[];return r.Z((u,d)=>{const g=t.store("remoteDocumentsV14"),v=(C=d,C.document?new qe(un.fromString(C.document.name).popFirst(5)):C.noDocument?qe.fromSegments(C.noDocument.path):C.unknownDocument?qe.fromSegments(C.unknownDocument.path):ot()).path.toArray();var C;const A={prefixPath:v.slice(0,v.length-2),collectionGroup:v[v.length-2],documentId:v[v.length-1],readTime:d.readTime||[0,0],unknownDocument:d.unknownDocument,noDocument:d.noDocument,document:d.document,hasCommittedMutations:!!d.hasCommittedMutations};o.push(g.put(A))}).next(()=>oe.waitFor(o))}zs(e,t){const r=t.store("mutations"),o=F(this.yt),u=new gm(Nd.Bs,this.yt.ie);return r.W().next(d=>{const g=new Map;return d.forEach(v=>{var C;let A=null!==(C=g.get(v.userId))&&void 0!==C?C:jt();Md(this.yt,v).keys().forEach(N=>A=A.add(N)),g.set(v.userId,A)}),oe.forEach(g,(v,C)=>{const A=new ti(C),N=um.re(this.yt,A),W=u.getIndexManager(A),ne=pm.re(A,this.yt,W,u.referenceDelegate);return new Re(o,ne,N,W).recalculateAndSaveOverlaysForDocumentKeys(new Sv(t,ts.at),v).next()})})}}function mm(n){n.createObjectStore("targetDocuments",{keyPath:qb}).createIndex("documentTargetsIndex",TI,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bI,{unique:!0}),n.createObjectStore("targetGlobal")}const sT="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class oT{constructor(e,t,r,o,u,d,g,v,C,A,N=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.Hs=u,this.window=d,this.document=g,this.Js=C,this.Ys=A,this.Xs=N,this.Ss=null,this.Ds=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Zs=null,this.inForeground=!1,this.ti=null,this.ei=null,this.ni=Number.NEGATIVE_INFINITY,this.si=W=>Promise.resolve(),!oT.C())throw new Fe(ue.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new w(this,o),this.ii=t+"main",this.yt=new LI(v),this.ri=new Ys(this.ii,this.Xs,new Hv(this.yt)),this.Cs=new aM(this.referenceDelegate,this.yt),this.remoteDocumentCache=F(this.yt),this.Ns=new VI,this.window&&this.window.localStorage?this.oi=this.window.localStorage:(this.oi=null,!1===A&&Hn("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ui().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Fe(ue.FAILED_PRECONDITION,sT);return this.ci(),this.ai(),this.hi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Cs.getHighestSequenceNumber(e))}).then(e=>{this.Ss=new ts(e,this.Js)}).then(()=>{this.Ds=!0}).catch(e=>(this.ri&&this.ri.close(),Promise.reject(e)))}li(e){var t=this;return this.si=function(){var r=(0,Ie.Z)(function*(o){if(t.started)return e(o)});return function(o){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.ri.L(function(){var t=(0,Ie.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Hs.enqueueAndForget((0,Ie.Z)(function*(){t.started&&(yield t.ui())})))}ui(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>jI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.fi(e).next(t=>{t||(this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)))})}).next(()=>this.di(e)).next(t=>this.isPrimary&&!t?this._i(e).next(()=>!1):!!t&&this.wi(e).next(()=>!0))).catch(e=>{if(ka(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Hs.enqueueRetryable(()=>this.si(e)),this.isPrimary=e})}fi(e){return Gv(e).get("owner").next(t=>oe.resolve(this.mi(t)))}gi(e){return jI(e).delete(this.clientId)}yi(){var e=this;return(0,Ie.Z)(function*(){if(e.isPrimary&&!e.pi(e.ni,18e5)){e.ni=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const o=Gr(r,"clientMetadata");return o.W().next(u=>{const d=e.Ii(u,18e5),g=u.filter(v=>-1===d.indexOf(v));return oe.forEach(g,v=>o.delete(v.clientId)).next(()=>g)})}).catch(()=>[]);if(e.oi)for(const r of t)e.oi.removeItem(e.Ti(r.clientId))}})()}hi(){this.ei=this.Hs.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ui().then(()=>this.yi()).then(()=>this.hi()))}mi(e){return!!e&&e.ownerId===this.clientId}di(e){return this.Ys?oe.resolve(!0):Gv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)){if(this.mi(t)&&this.networkEnabled)return!0;if(!this.mi(t)){if(!t.allowTabSynchronization)throw new Fe(ue.FAILED_PRECONDITION,sT);return!1}}return!(!this.networkEnabled||!this.inForeground)||jI(e).W().next(r=>void 0===this.Ii(r,5e3).find(o=>{if(this.clientId!==o.clientId){const d=!this.inForeground&&o.inForeground,g=this.networkEnabled===o.networkEnabled;if(!this.networkEnabled&&o.networkEnabled||d&&g)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ie.Z)(function*(){e.Ds=!1,e.Ai(),e.ei&&(e.ei.cancel(),e.ei=null),e.Ri(),e.bi(),yield e.ri.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Sv(t,ts.at);return e._i(r).next(()=>e.gi(r))}),e.ri.close(),e.Pi()})()}Ii(e,t){return e.filter(r=>this.pi(r.updateTimeMs,t)&&!this.Ei(r.clientId))}vi(){return this.runTransaction("getActiveClients","readonly",e=>jI(e).W().next(t=>this.Ii(t,18e5).map(r=>r.clientId)))}get started(){return this.Ds}getMutationQueue(e,t){return pm.re(e,this.yt,t,this.referenceDelegate)}getTargetCache(){return this.Cs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new oM(e,this.yt.ie.databaseId)}getDocumentOverlayCache(e){return um.re(this.yt,e)}getBundleCache(){return this.Ns}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const o="readonly"===t?"readonly":"readwrite",u=15===(d=this.Xs)?PI:14===d?Av:13===d?OI:12===d?NI:11===d?Nf:void ot();var d;let g;return this.ri.runTransaction(e,o,u,v=>(g=new Sv(v,this.Ss?this.Ss.next():ts.at),"readwrite-primary"===t?this.fi(g).next(C=>!!C||this.di(g)).next(C=>{if(!C)throw Hn(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Hs.enqueueRetryable(()=>this.si(!1)),new Fe(ue.FAILED_PRECONDITION,jE);return r(g)}).next(C=>this.wi(g).next(()=>C)):this.Vi(g).next(()=>r(g)))).then(v=>(g.raiseOnCommittedEvent(),v))}Vi(e){return Gv(e).get("owner").next(t=>{if(null!==t&&this.pi(t.leaseTimestampMs,5e3)&&!this.Ei(t.ownerId)&&!this.mi(t)&&!(this.Ys||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Fe(ue.FAILED_PRECONDITION,sT)})}wi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Gv(e).put("owner",t)}static C(){return Ys.C()}_i(e){const t=Gv(e);return t.get("owner").next(r=>this.mi(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):oe.resolve())}pi(e,t){const r=Date.now();return!(e<r-t||e>r&&(Hn(`Detected an update time that is in the future: ${e} > ${r}`),1))}ci(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ti=()=>{this.Hs.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ui()))},this.document.addEventListener("visibilitychange",this.ti),this.inForeground="visible"===this.document.visibilityState)}Ri(){this.ti&&(this.document.removeEventListener("visibilitychange",this.ti),this.ti=null)}ai(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Zs=()=>{this.Ai(),(0,an.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Hs.enterRestrictedMode(!0),this.Hs.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Zs))}bi(){this.Zs&&(this.window.removeEventListener("pagehide",this.Zs),this.Zs=null)}Ei(e){var t;try{const r=null!==(null===(t=this.oi)||void 0===t?void 0:t.getItem(this.Ti(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return Hn("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}Ai(){if(this.oi)try{this.oi.setItem(this.Ti(this.clientId),String(Date.now()))}catch(e){Hn("Failed to set zombie client id.",e)}}Pi(){if(this.oi)try{this.oi.removeItem(this.Ti(this.clientId))}catch{}}Ti(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function Gv(n){return Gr(n,"owner")}function jI(n){return Gr(n,"clientMetadata")}function aT(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class uT{constructor(e,t,r,o){this.targetId=e,this.fromCache=t,this.Si=r,this.Di=o}static Ci(e,t){let r=jt(),o=jt();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new uT(e,t.fromCache,r,o)}}class uM{constructor(){this.xi=!1}initialize(e,t){this.Ni=e,this.indexManager=t,this.xi=!0}getDocumentsMatchingQuery(e,t,r,o){return this.ki(e,t).next(u=>u||this.Oi(e,t,o,r)).next(u=>u||this.Mi(e,t))}ki(e,t){if(J_(t))return oe.resolve(null);let r=Mr(t);return this.indexManager.getIndexType(e,r).next(o=>0===o?null:(null!==t.limit&&1===o&&(t=zg(t,null,"F"),r=Mr(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const d=jt(...u);return this.Ni.getDocuments(e,d).next(g=>this.indexManager.getMinOffset(e,r).next(v=>{const C=this.Fi(t,g);return this.$i(t,C,d,v.readTime)?this.ki(e,zg(t,null,"F")):this.Bi(e,C,t,v)}))})))}Oi(e,t,r,o){return J_(t)||o.isEqual(Dt.min())?this.Mi(e,t):this.Ni.getDocuments(e,r).next(u=>{const d=this.Fi(t,u);return this.$i(t,d,r,o)?this.Mi(e,t):(x_()<=Ma.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Zg(t)),this.Bi(e,d,t,$E(o,-1)))})}Fi(e,t){let r=new On(oI(e));return t.forEach((o,u)=>{_d(e,u)&&(r=r.add(u))}),r}$i(e,t,r,o){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Mi(e,t){return x_()<=Ma.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",Zg(t)),this.Ni.getDocumentsMatchingQuery(e,t,es.min())}Bi(e,t,r,o){return this.Ni.getDocumentsMatchingQuery(e,r,o).next(u=>(t.forEach(d=>{u=u.insert(d.key,d)}),u))}}class JR{constructor(e,t,r,o){this.persistence=e,this.Li=t,this.yt=o,this.qi=new ur($t),this.Ui=new ku(u=>Ul(u),md),this.Ki=new Map,this.Gi=e.getRemoteDocumentCache(),this.Cs=e.getTargetCache(),this.Ns=e.getBundleCache(),this.Qi(r)}Qi(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Re(this.Gi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Gi.setIndexManager(this.indexManager),this.Li.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.qi))}}function lM(n,e,t,r){return new JR(n,e,t,r)}function cM(n,e){return lT.apply(this,arguments)}function lT(){return lT=(0,Ie.Z)(function*(n,e){const t=Ke(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let o;return t.mutationQueue.getAllMutationBatches(r).next(u=>(o=u,t.Qi(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const d=[],g=[];let v=jt();for(const C of o){d.push(C.batchId);for(const A of C.mutations)v=v.add(A.key)}for(const C of u){g.push(C.batchId);for(const A of C.mutations)v=v.add(A.key)}return t.localDocuments.getDocuments(r,v).next(C=>({ji:C,removedBatchIds:d,addedBatchIds:g}))})})}),lT.apply(this,arguments)}function XR(n,e){const t=Ke(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const o=e.batch.keys(),u=t.Gi.newChangeBuffer({trackRemovals:!0});return function(d,g,v,C){const A=v.batch,N=A.keys();let W=oe.resolve();return N.forEach(ne=>{W=W.next(()=>C.getEntry(g,ne)).next(ge=>{const Be=v.docVersions.get(ne);vt(null!==Be),ge.version.compareTo(Be)<0&&(A.applyToRemoteDocument(ge,v),ge.isValidDocument()&&(ge.setReadTime(v.commitVersion),C.addEntry(ge)))})}),W.next(()=>d.mutationQueue.removeMutationBatch(g,A))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,o,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(d){let g=jt();for(let v=0;v<d.mutationResults.length;++v)d.mutationResults[v].transformResults.length>0&&(g=g.add(d.batch.mutations[v].key));return g}(e))).next(()=>t.localDocuments.getDocuments(r,o))})}function dM(n){const e=Ke(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Cs.getLastRemoteSnapshotVersion(t))}function eN(n,e){const t=Ke(n),r=e.snapshotVersion;let o=t.qi;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const d=t.Gi.newChangeBuffer({trackRemovals:!0});o=t.qi;const g=[];e.targetChanges.forEach((A,N)=>{const W=o.get(N);if(!W)return;g.push(t.Cs.removeMatchingKeys(u,A.removedDocuments,N).next(()=>t.Cs.addMatchingKeys(u,A.addedDocuments,N)));let ne=W.withSequenceNumber(u.currentSequenceNumber);var ge,Be,He;e.targetMismatches.has(N)?ne=ne.withResumeToken(Lr.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):A.resumeToken.approximateByteSize()>0&&(ne=ne.withResumeToken(A.resumeToken,r)),o=o.insert(N,ne),Be=ne,He=A,(0===(ge=W).resumeToken.approximateByteSize()||Be.snapshotVersion.toMicroseconds()-ge.snapshotVersion.toMicroseconds()>=3e8||He.addedDocuments.size+He.modifiedDocuments.size+He.removedDocuments.size>0)&&g.push(t.Cs.updateTargetData(u,ne))});let v=Ai(),C=jt();if(e.documentUpdates.forEach(A=>{e.resolvedLimboDocuments.has(A)&&g.push(t.persistence.referenceDelegate.updateLimboDocument(u,A))}),g.push(hM(u,d,e.documentUpdates).next(A=>{v=A.Wi,C=A.zi})),!r.isEqual(Dt.min())){const A=t.Cs.getLastRemoteSnapshotVersion(u).next(N=>t.Cs.setTargetsMetadata(u,u.currentSequenceNumber,r));g.push(A)}return oe.waitFor(g).next(()=>d.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,v,C)).next(()=>v)}).then(u=>(t.qi=o,u))}function hM(n,e,t){let r=jt(),o=jt();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let d=Ai();return t.forEach((g,v)=>{const C=u.get(g);v.isFoundDocument()!==C.isFoundDocument()&&(o=o.add(g)),v.isNoDocument()&&v.version.isEqual(Dt.min())?(e.removeEntry(g,v.readTime),d=d.insert(g,v)):!C.isValidDocument()||v.version.compareTo(C.version)>0||0===v.version.compareTo(C.version)&&C.hasPendingWrites?(e.addEntry(v),d=d.insert(g,v)):Ve("LocalStore","Ignoring outdated watch update for ",g,". Current version:",C.version," Watch version:",v.version)}),{Wi:d,zi:o}})}function tN(n,e){const t=Ke(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function ym(n,e){const t=Ke(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let o;return t.Cs.getTargetData(r,e).next(u=>u?(o=u,oe.resolve(o)):t.Cs.allocateTargetId(r).next(d=>(o=new Lu(e,d,0,r.currentSequenceNumber),t.Cs.addTargetData(r,o).next(()=>o))))}).then(r=>{const o=t.qi.get(r.targetId);return(null===o||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.qi=t.qi.insert(r.targetId,r),t.Ui.set(e,r.targetId)),r})}function _m(n,e,t){return cT.apply(this,arguments)}function cT(){return cT=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),o=r.qi.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,d=>r.persistence.referenceDelegate.removeTarget(d,o)))}catch(d){if(!ka(d))throw d;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${d}`)}r.qi=r.qi.remove(e),r.Ui.delete(o.target)}),cT.apply(this,arguments)}function HI(n,e,t){const r=Ke(n);let o=Dt.min(),u=jt();return r.persistence.runTransaction("Execute query","readonly",d=>function(g,v,C){const A=Ke(g),N=A.Ui.get(C);return void 0!==N?oe.resolve(A.qi.get(N)):A.Cs.getTargetData(v,C)}(r,d,Mr(e)).next(g=>{if(g)return o=g.lastLimboFreeSnapshotVersion,r.Cs.getMatchingKeysForTargetId(d,g.targetId).next(v=>{u=v})}).next(()=>r.Li.getDocumentsMatchingQuery(d,e,t?o:Dt.min(),t?u:jt())).next(g=>(gM(r,vd(e),g),{documents:g,Hi:u})))}function fM(n,e){const t=Ke(n),r=Ke(t.Cs),o=t.qi.get(e);return o?Promise.resolve(o.target):t.persistence.runTransaction("Get target data","readonly",u=>r.ne(u,e).next(d=>d?d.target:null))}function pM(n,e){const t=Ke(n),r=t.Ki.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",o=>t.Gi.getAllFromCollectionGroup(o,e,$E(r,-1),Number.MAX_SAFE_INTEGER)).then(o=>(gM(t,e,o),o))}function gM(n,e,t){let r=n.Ki.get(e)||Dt.min();t.forEach((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Ki.set(e,r)}function dT(){return dT=(0,Ie.Z)(function*(n,e,t,r){const o=Ke(n);let u=jt(),d=Ai();for(const C of t){const A=e.Ji(C.metadata.name);C.document&&(u=u.add(A));const N=e.Yi(C);N.setReadTime(e.Xi(C.metadata.readTime)),d=d.insert(A,N)}const g=o.Gi.newChangeBuffer({trackRemovals:!0}),v=yield ym(o,(C=r,Mr(Bl(un.fromString(`__bundle__/docs/${C}`)))));var C;return o.persistence.runTransaction("Apply bundle documents","readwrite",C=>hM(C,g,d).next(A=>(g.apply(C),A)).next(A=>o.Cs.removeMatchingKeysForTargetId(C,v.targetId).next(()=>o.Cs.addMatchingKeys(C,u,v.targetId)).next(()=>o.localDocuments.getLocalViewOfDocuments(C,A.Wi,A.zi)).next(()=>A.Wi)))}),dT.apply(this,arguments)}function rN(n,e){return hT.apply(this,arguments)}function hT(){return hT=(0,Ie.Z)(function*(n,e,t=jt()){const r=yield ym(n,Mr(xv(e.bundledQuery))),o=Ke(n);return o.persistence.runTransaction("Save named query","readwrite",u=>{const d=xr(e.readTime);if(r.snapshotVersion.compareTo(d)>=0)return o.Ns.saveNamedQuery(u,e);const g=r.withResumeToken(Lr.EMPTY_BYTE_STRING,d);return o.qi=o.qi.insert(g.targetId,g),o.Cs.updateTargetData(u,g).next(()=>o.Cs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>o.Cs.addMatchingKeys(u,t,r.targetId)).next(()=>o.Ns.saveNamedQuery(u,e))})}),hT.apply(this,arguments)}function mM(n,e){return`firestore_clients_${n}_${e}`}function yM(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function fT(n,e){return`firestore_targets_${n}_${e}`}class GI{constructor(e,t,r,o){this.user=e,this.batchId=t,this.state=r,this.error=o}static Zi(e,t,r){const o=JSON.parse(r);let u,d="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return d&&o.error&&(d="string"==typeof o.error.message&&"string"==typeof o.error.code,d&&(u=new Fe(o.error.code,o.error.message))),d?new GI(e,t,o.state,u):(Hn("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Wv{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static Zi(e,t){const r=JSON.parse(t);let o,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(o=new Fe(r.error.code,r.error.message))),u?new Wv(e,r.state,o):(Hn("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}tr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class WI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static Zi(e,t){const r=JSON.parse(t);let o="object"==typeof r&&r.activeTargetIds instanceof Array,u=Mf();for(let d=0;o&&d<r.activeTargetIds.length;++d)o=j_(r.activeTargetIds[d]),u=u.add(r.activeTargetIds[d]);return o?new WI(e,u):(Hn("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class pT{constructor(e,t){this.clientId=e,this.onlineState=t}static Zi(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new pT(t.clientId,t.onlineState):(Hn("SharedClientState",`Failed to parse online state: ${e}`),null)}}class gT{constructor(){this.activeTargetIds=Mf()}er(e){this.activeTargetIds=this.activeTargetIds.add(e)}nr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}tr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class mT{constructor(e,t,r,o,u){this.window=e,this.Hs=t,this.persistenceKey=r,this.sr=o,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.ir=this.rr.bind(this),this.ur=new ur($t),this.started=!1,this.cr=[];const d=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.ar=mM(this.persistenceKey,this.sr),this.hr=`firestore_sequence_number_${this.persistenceKey}`,this.ur=this.ur.insert(this.sr,new gT),this.lr=new RegExp(`^firestore_clients_${d}_([^_]*)$`),this.dr=new RegExp(`^firestore_mutations_${d}_(\\d+)(?:_(.*))?$`),this._r=new RegExp(`^firestore_targets_${d}_(\\d+)$`),this.wr=`firestore_online_state_${this.persistenceKey}`,this.mr=function(g){return`firestore_bundle_loaded_v2_${g}`}(this.persistenceKey),this.window.addEventListener("storage",this.ir)}static C(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.syncEngine.vi();for(const o of t){if(o===e.sr)continue;const u=e.getItem(mM(e.persistenceKey,o));if(u){const d=WI.Zi(o,u);d&&(e.ur=e.ur.insert(d.clientId,d))}}e.gr();const r=e.storage.getItem(e.wr);if(r){const o=e.yr(r);o&&e.pr(o)}for(const o of e.cr)e.rr(o);e.cr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.hr,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Ir(this.ur)}isActiveQueryTarget(e){let t=!1;return this.ur.forEach((r,o)=>{o.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Tr(e,"pending")}updateMutationState(e,t,r){this.Tr(e,t,r),this.Er(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(fT(this.persistenceKey,e));if(r){const o=Wv.Zi(e,r);o&&(t=o.state)}}return this.Ar.er(e),this.gr(),t}removeLocalQueryTarget(e){this.Ar.nr(e),this.gr()}isLocalQueryTarget(e){return this.Ar.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(fT(this.persistenceKey,e))}updateQueryState(e,t,r){this.Rr(e,t,r)}handleUserChange(e,t,r){t.forEach(o=>{this.Er(o)}),this.currentUser=e,r.forEach(o=>{this.addPendingMutation(o)})}setOnlineState(e){this.br(e)}notifyBundleLoaded(e){this.Pr(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.ir),this.removeItem(this.ar),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}rr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.ar)return void Hn("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Hs.enqueueRetryable((0,Ie.Z)(function*(){if(t.started){if(null!==r.key)if(t.lr.test(r.key)){if(null==r.newValue){const o=t.vr(r.key);return t.Vr(o,null)}{const o=t.Sr(r.key,r.newValue);if(o)return t.Vr(o.clientId,o)}}else if(t.dr.test(r.key)){if(null!==r.newValue){const o=t.Dr(r.key,r.newValue);if(o)return t.Cr(o)}}else if(t._r.test(r.key)){if(null!==r.newValue){const o=t.Nr(r.key,r.newValue);if(o)return t.kr(o)}}else if(r.key===t.wr){if(null!==r.newValue){const o=t.yr(r.newValue);if(o)return t.pr(o)}}else if(r.key===t.hr){const o=function(u){let d=ts.at;if(null!=u)try{const g=JSON.parse(u);vt("number"==typeof g),d=g}catch(g){Hn("SharedClientState","Failed to read sequence number from WebStorage",g)}return d}(r.newValue);o!==ts.at&&t.sequenceNumberHandler(o)}else if(r.key===t.mr){const o=t.Or(r.newValue);yield Promise.all(o.map(u=>t.syncEngine.Mr(u)))}}else t.cr.push(r)}))}}get Ar(){return this.ur.get(this.sr)}gr(){this.setItem(this.ar,this.Ar.tr())}Tr(e,t,r){const o=new GI(this.currentUser,e,t,r),u=yM(this.persistenceKey,this.currentUser,e);this.setItem(u,o.tr())}Er(e){const t=yM(this.persistenceKey,this.currentUser,e);this.removeItem(t)}br(e){this.storage.setItem(this.wr,JSON.stringify({clientId:this.sr,onlineState:e}))}Rr(e,t,r){const o=fT(this.persistenceKey,e),u=new Wv(e,t,r);this.setItem(o,u.tr())}Pr(e){const t=JSON.stringify(Array.from(e));this.setItem(this.mr,t)}vr(e){const t=this.lr.exec(e);return t?t[1]:null}Sr(e,t){const r=this.vr(e);return WI.Zi(r,t)}Dr(e,t){const r=this.dr.exec(e),o=Number(r[1]);return GI.Zi(new ti(void 0!==r[2]?r[2]:null),o,t)}Nr(e,t){const r=this._r.exec(e),o=Number(r[1]);return Wv.Zi(o,t)}yr(e){return pT.Zi(e)}Or(e){return JSON.parse(e)}Cr(e){var t=this;return(0,Ie.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.Fr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}kr(e){return this.syncEngine.$r(e.targetId,e.state,e.error)}Vr(e,t){const r=t?this.ur.insert(e,t):this.ur.remove(e),o=this.Ir(this.ur),u=this.Ir(r),d=[],g=[];return u.forEach(v=>{o.has(v)||d.push(v)}),o.forEach(v=>{u.has(v)||g.push(v)}),this.syncEngine.Br(d,g).then(()=>{this.ur=r})}pr(e){this.ur.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Ir(e){let t=Mf();return e.forEach((r,o)=>{t=t.unionWith(o.activeTargetIds)}),t}}class _M{constructor(){this.Lr=new gT,this.qr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Lr.er(e),this.qr[e]||"not-current"}updateQueryState(e,t,r){this.qr[e]=t}removeLocalQueryTarget(e){this.Lr.nr(e)}isLocalQueryTarget(e){return this.Lr.activeTargetIds.has(e)}clearQueryState(e){delete this.qr[e]}getAllActiveQueryTargets(){return this.Lr.activeTargetIds}isActiveQueryTarget(e){return this.Lr.activeTargetIds.has(e)}start(){return this.Lr=new gT,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class iN{Ur(e){}shutdown(){}}class vM{constructor(){this.Kr=()=>this.Gr(),this.Qr=()=>this.jr(),this.Wr=[],this.zr()}Ur(e){this.Wr.push(e)}shutdown(){window.removeEventListener("online",this.Kr),window.removeEventListener("offline",this.Qr)}zr(){window.addEventListener("online",this.Kr),window.addEventListener("offline",this.Qr)}Gr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Wr)e(0)}jr(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Wr)e(1)}static C(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const sN={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class oN{constructor(e){this.Hr=e.Hr,this.Jr=e.Jr}Yr(e){this.Xr=e}Zr(e){this.eo=e}onMessage(e){this.no=e}close(){this.Jr()}send(e){this.Hr(e)}so(){this.Xr()}io(e){this.eo(e)}ro(e){this.no(e)}}class aN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.oo=(e.ssl?"https":"http")+"://"+e.host,this.uo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get co(){return!1}ao(e,t,r,o,u){const d=this.ho(e,t);Ve("RestConnection","Sending: ",d,r);const g={};return this.lo(g,o,u),this.fo(e,d,g,r).then(v=>(Ve("RestConnection","Received: ",v),v),v=>{throw Nl("RestConnection",`${e} failed with error: `,v,"url: ",d,"request:",r),v})}_o(e,t,r,o,u,d){return this.ao(e,t,r,o,u)}lo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Rl,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((o,u)=>e[u]=o),r&&r.headers.forEach((o,u)=>e[u]=o)}ho(e,t){return`${this.oo}/v1/${t}:${sN[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}fo(e,t,r,o){return new Promise((u,d)=>{const g=new qS;g.setWithCredentials(!0),g.listenOnce(hb.COMPLETE,()=>{try{switch(g.getLastErrorCode()){case Pg.NO_ERROR:const C=g.getResponseJson();Ve("Connection","XHR received:",JSON.stringify(C)),u(C);break;case Pg.TIMEOUT:Ve("Connection",'RPC "'+e+'" timed out'),d(new Fe(ue.DEADLINE_EXCEEDED,"Request time out"));break;case Pg.HTTP_ERROR:const A=g.getStatus();if(Ve("Connection",'RPC "'+e+'" failed with status:',A,"response text:",g.getResponseText()),A>0){let N=g.getResponseJson();Array.isArray(N)&&(N=N[0]);const W=N?.error;if(W&&W.status&&W.message){const ne=function(ge){const Be=ge.toLowerCase().replace(/_/g,"-");return Object.values(ue).indexOf(Be)>=0?Be:ue.UNKNOWN}(W.status);d(new Fe(ne,W.message))}else d(new Fe(ue.UNKNOWN,"Server responded with status "+g.getStatus()))}else d(new Fe(ue.UNAVAILABLE,"Connection failed."));break;default:ot()}}finally{Ve("Connection",'RPC "'+e+'" completed.')}});const v=JSON.stringify(o);g.send(t,"POST",v,r,15)})}wo(e,t,r){const o=[this.oo,"/","google.firestore.v1.Firestore","/",e,"/channel"],u=ME(),d=xE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(g.xmlHttpFactory=new fb({})),this.lo(g.initMessageHeaders,t,r),g.encodeInitMessageHeaders=!0;const v=o.join("");Ve("Connection","Creating WebChannel: "+v,g);const C=u.createWebChannel(v,g);let A=!1,N=!1;const W=new oN({Hr:ge=>{N?Ve("Connection","Not sending because WebChannel is closed:",ge):(A||(Ve("Connection","Opening WebChannel transport."),C.open(),A=!0),Ve("Connection","WebChannel sending:",ge),C.send(ge))},Jr:()=>C.close()}),ne=(ge,Be,He)=>{ge.listen(Be,Zt=>{try{He(Zt)}catch(Yt){setTimeout(()=>{throw Yt},0)}})};return ne(C,M_.EventType.OPEN,()=>{N||Ve("Connection","WebChannel transport opened.")}),ne(C,M_.EventType.CLOSE,()=>{N||(N=!0,Ve("Connection","WebChannel transport closed"),W.io())}),ne(C,M_.EventType.ERROR,ge=>{N||(N=!0,Nl("Connection","WebChannel transport errored:",ge),W.io(new Fe(ue.UNAVAILABLE,"The operation could not be completed")))}),ne(C,M_.EventType.MESSAGE,ge=>{var Be;if(!N){const He=ge.data[0];vt(!!He);const Zt=He,Yt=Zt.error||(null===(Be=Zt[0])||void 0===Be?void 0:Be.error);if(Yt){Ve("Connection","WebChannel received error:",Yt);const Wt=Yt.status;let zt=function(tn){const ri=Cr[tn];if(void 0!==ri)return gI(ri)}(Wt),Gt=Yt.message;void 0===zt&&(zt=ue.INTERNAL,Gt="Unknown error status: "+Wt+" with message "+Yt.message),N=!0,W.io(new Fe(zt,Gt)),C.close()}else Ve("Connection","WebChannel received:",He),W.ro(He)}}),ne(d,RE.STAT_EVENT,ge=>{ge.stat===NE.PROXY?Ve("Connection","Detected buffering proxy"):ge.stat===NE.NOPROXY&&Ve("Connection","Detected no buffering proxy")}),setTimeout(()=>{W.so()},0),W}}function wM(){return typeof window<"u"?window:null}function zI(){return typeof document<"u"?document:null}function zv(n){return new tm(n,!0)}class yT{constructor(e,t,r=1e3,o=1.5,u=6e4){this.Hs=e,this.timerId=t,this.mo=r,this.yo=o,this.po=u,this.Io=0,this.To=null,this.Eo=Date.now(),this.reset()}reset(){this.Io=0}Ao(){this.Io=this.po}Ro(e){this.cancel();const t=Math.floor(this.Io+this.bo()),r=Math.max(0,Date.now()-this.Eo),o=Math.max(0,t-r);o>0&&Ve("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.Io} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.To=this.Hs.enqueueAfterDelay(this.timerId,o,()=>(this.Eo=Date.now(),e())),this.Io*=this.yo,this.Io<this.mo&&(this.Io=this.mo),this.Io>this.po&&(this.Io=this.po)}Po(){null!==this.To&&(this.To.skipDelay(),this.To=null)}cancel(){null!==this.To&&(this.To.cancel(),this.To=null)}bo(){return(Math.random()-.5)*this.Io}}class EM{constructor(e,t,r,o,u,d,g,v){this.Hs=e,this.vo=r,this.Vo=o,this.connection=u,this.authCredentialsProvider=d,this.appCheckCredentialsProvider=g,this.listener=v,this.state=0,this.So=0,this.Do=null,this.Co=null,this.stream=null,this.xo=new yT(e,t)}No(){return 1===this.state||5===this.state||this.ko()}ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Oo()}stop(){var e=this;return(0,Ie.Z)(function*(){e.No()&&(yield e.close(0))})()}Mo(){this.state=0,this.xo.reset()}Fo(){this.ko()&&null===this.Do&&(this.Do=this.Hs.enqueueAfterDelay(this.vo,6e4,()=>this.$o()))}Bo(e){this.Lo(),this.stream.send(e)}$o(){var e=this;return(0,Ie.Z)(function*(){if(e.ko())return e.close(0)})()}Lo(){this.Do&&(this.Do.cancel(),this.Do=null)}qo(){this.Co&&(this.Co.cancel(),this.Co=null)}close(e,t){var r=this;return(0,Ie.Z)(function*(){r.Lo(),r.qo(),r.xo.cancel(),r.So++,4!==e?r.xo.reset():t&&t.code===ue.RESOURCE_EXHAUSTED?(Hn(t.toString()),Hn("Using maximum backoff delay to prevent overloading the backend."),r.xo.Ao()):t&&t.code===ue.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Uo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.Zr(t)})()}Uo(){}auth(){this.state=1;const e=this.Ko(this.So),t=this.So;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,o])=>{this.So===t&&this.Go(r,o)},r=>{e(()=>{const o=new Fe(ue.UNKNOWN,"Fetching auth token failed: "+r.message);return this.Qo(o)})})}Go(e,t){const r=this.Ko(this.So);this.stream=this.jo(e,t),this.stream.Yr(()=>{r(()=>(this.state=2,this.Co=this.Hs.enqueueAfterDelay(this.Vo,1e4,()=>(this.ko()&&(this.state=3),Promise.resolve())),this.listener.Yr()))}),this.stream.Zr(o=>{r(()=>this.Qo(o))}),this.stream.onMessage(o=>{r(()=>this.onMessage(o))})}Oo(){var e=this;this.state=5,this.xo.Ro((0,Ie.Z)(function*(){e.state=0,e.start()}))}Qo(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Ko(e){return t=>{this.Hs.enqueueAndForget(()=>this.So===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class uN extends EM{constructor(e,t,r,o,u,d){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,o,d),this.yt=u}jo(e,t){return this.connection.wo("Listen",e,t)}onMessage(e){this.xo.reset();const t=function jb(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(v=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===v?1:"REMOVE"===v?2:"CURRENT"===v?3:"RESET"===v?4:ot(),o=e.targetChange.targetIds||[],u=function(v,C){return v.wt?(vt(void 0===C||"string"==typeof C),Lr.fromBase64String(C||"")):(vt(void 0===C||C instanceof Uint8Array),Lr.fromUint8Array(C||new Uint8Array))}(n,e.targetChange.resumeToken),d=e.targetChange.cause,g=d&&function(v){const C=void 0===v.code?ue.UNKNOWN:gI(v.code);return new Fe(C,v.message||"")}(d);t=new em(r,o,u,g||null)}else if("documentChange"in e){const r=e.documentChange,o=Va(n,r.document.name),u=xr(r.document.updateTime),d=r.document.createTime?xr(r.document.createTime):Dt.min(),g=new Vr({mapValue:{fields:r.document.fields}}),v=Gn.newFoundDocument(o,u,d,g);t=new xf(r.targetIds||[],r.removedTargetIds||[],v.key,v)}else if("documentDelete"in e){const r=e.documentDelete,o=Va(n,r.document),u=r.readTime?xr(r.readTime):Dt.min(),d=Gn.newNoDocument(o,u);t=new xf([],r.removedTargetIds||[],d.key,d)}else if("documentRemove"in e){const r=e.documentRemove,o=Va(n,r.document);t=new xf([],r.removedTargetIds||[],o,null)}else{if(!("filter"in e))return ot();{const r=e.filter,u=new pI(r.count||0);t=new kb(r.targetId,u)}}var v;return t}(this.yt,e),r=function(o){if(!("targetChange"in o))return Dt.min();const u=o.targetChange;return u.targetIds&&u.targetIds.length?Dt.min():u.readTime?xr(u.readTime):Dt.min()}(e);return this.listener.Wo(t,r)}zo(e){const t={};t.database=bd(this.yt),t.addTarget=function(o,u){let d;const g=u.target;return d=yd(g)?{documents:_I(o,g)}:{query:Iv(o,g)},d.targetId=u.targetId,u.resumeToken.approximateByteSize()>0?d.resumeToken=Bb(o,u.resumeToken):u.snapshotVersion.compareTo(Dt.min())>0&&(d.readTime=Cd(o,u.snapshotVersion.toTimestamp())),d}(this.yt,e);const r=function vI(n,e){const t=function(r,o){switch(o){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return ot()}}(0,e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Bo(t)}Ho(e){const t={};t.database=bd(this.yt),t.removeTarget=e,this.Bo(t)}}class lN extends EM{constructor(e,t,r,o,u,d){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,o,d),this.yt=u,this.Jo=!1}get Yo(){return this.Jo}start(){this.Jo=!1,this.lastStreamToken=void 0,super.start()}Uo(){this.Jo&&this.Xo([])}jo(e,t){return this.connection.wo("Write",e,t)}onMessage(e){if(vt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Jo){this.xo.reset();const t=function Ev(n,e){return n&&n.length>0?(vt(void 0!==e),n.map(t=>function(r,o){let u=xr(r.updateTime?r.updateTime:o);return u.isEqual(Dt.min())&&(u=xr(o)),new uv(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=xr(e.commitTime);return this.listener.Zo(r,t)}return vt(!e.writeResults||0===e.writeResults.length),this.Jo=!0,this.listener.tu()}eu(){const e={};e.database=bd(this.yt),this.Bo(e)}Xo(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>yi(this.yt,r))};this.Bo(t)}}class cN extends class{}{constructor(e,t,r,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.yt=o,this.nu=!1}su(){if(this.nu)throw new Fe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}ao(e,t,r){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,u])=>this.connection.ao(e,t,r,o,u)).catch(o=>{throw"FirebaseError"===o.name?(o.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Fe(ue.UNKNOWN,o.toString())})}_o(e,t,r,o){return this.su(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,d])=>this.connection._o(e,t,r,u,d,o)).catch(u=>{throw"FirebaseError"===u.name?(u.code===ue.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Fe(ue.UNKNOWN,u.toString())})}terminate(){this.nu=!0}}class hN{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.iu=0,this.ru=null,this.ou=!0}uu(){0===this.iu&&(this.cu("Unknown"),this.ru=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.ru=null,this.au("Backend didn't respond within 10 seconds."),this.cu("Offline"),Promise.resolve())))}hu(e){"Online"===this.state?this.cu("Unknown"):(this.iu++,this.iu>=1&&(this.lu(),this.au(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.cu("Offline")))}set(e){this.lu(),this.iu=0,"Online"===e&&(this.ou=!1),this.cu(e)}cu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}au(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ou?(Hn(t),this.ou=!1):Ve("OnlineStateTracker",t)}lu(){null!==this.ru&&(this.ru.cancel(),this.ru=null)}}class fN{constructor(e,t,r,o,u){var d=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.fu=[],this.du=new Map,this._u=new Set,this.wu=[],this.mu=u,this.mu.Ur(g=>{r.enqueueAndForget((0,Ie.Z)(function*(){var v;Zl(d)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(v=(0,Ie.Z)(function*(C){const A=Ke(C);A._u.add(4),yield vm(A),A.gu.set("Unknown"),A._u.delete(4),yield qv(A)}),function(C){return v.apply(this,arguments)})(d))}))}),this.gu=new hN(r,o)}}function qv(n){return vT.apply(this,arguments)}function vT(){return vT=(0,Ie.Z)(function*(n){if(Zl(n))for(const e of n.wu)yield e(!0)}),vT.apply(this,arguments)}function vm(n){return wT.apply(this,arguments)}function wT(){return wT=(0,Ie.Z)(function*(n){for(const e of n.wu)yield e(!1)}),wT.apply(this,arguments)}function qI(n,e){const t=Ke(n);t.du.has(e.targetId)||(t.du.set(e.targetId,e),DT(t)?IT(t):Em(t).ko()&&ET(t,e))}function Zv(n,e){const t=Ke(n),r=Em(t);t.du.delete(e),r.ko()&&IM(t,e),0===t.du.size&&(r.ko()?r.Fo():Zl(t)&&t.gu.set("Unknown"))}function ET(n,e){n.yu.Ot(e.targetId),Em(n).zo(e)}function IM(n,e){n.yu.Ot(e),Em(n).Ho(e)}function IT(n){n.yu=new Fb({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ne:e=>n.du.get(e)||null}),Em(n).start(),n.gu.uu()}function DT(n){return Zl(n)&&!Em(n).No()&&n.du.size>0}function Zl(n){return 0===Ke(n)._u.size}function DM(n){n.yu=void 0}function pN(n){return CT.apply(this,arguments)}function CT(){return CT=(0,Ie.Z)(function*(n){n.du.forEach((e,t)=>{ET(n,e)})}),CT.apply(this,arguments)}function gN(n,e){return bT.apply(this,arguments)}function bT(){return bT=(0,Ie.Z)(function*(n,e){DM(n),DT(n)?(n.gu.hu(e),IT(n)):n.gu.set("Unknown")}),bT.apply(this,arguments)}function mN(n,e,t){return TT.apply(this,arguments)}function TT(){return TT=(0,Ie.Z)(function*(n,e,t){if(n.gu.set("Online"),e instanceof em&&2===e.state&&e.cause)try{yield(r=(0,Ie.Z)(function*(o,u){const d=u.cause;for(const g of u.targetIds)o.du.has(g)&&(yield o.remoteSyncer.rejectListen(g,d),o.du.delete(g),o.yu.removeTarget(g))}),function(o,u){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ZI(n,r)}else if(e instanceof xf?n.yu.Kt(e):e instanceof kb?n.yu.Jt(e):n.yu.jt(e),!t.isEqual(Dt.min()))try{const r=yield dM(n.localStore);t.compareTo(r)>=0&&(yield function(o,u){const d=o.yu.Zt(u);return d.targetChanges.forEach((g,v)=>{if(g.resumeToken.approximateByteSize()>0){const C=o.du.get(v);C&&o.du.set(v,C.withResumeToken(g.resumeToken,u))}}),d.targetMismatches.forEach(g=>{const v=o.du.get(g);if(!v)return;o.du.set(g,v.withResumeToken(Lr.EMPTY_BYTE_STRING,v.snapshotVersion)),IM(o,g);const C=new Lu(v.target,g,1,v.sequenceNumber);ET(o,C)}),o.remoteSyncer.applyRemoteEvent(d)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield ZI(n,r)}var r}),TT.apply(this,arguments)}function ZI(n,e,t){return AT.apply(this,arguments)}function AT(){return AT=(0,Ie.Z)(function*(n,e,t){if(!ka(e))throw e;n._u.add(1),yield vm(n),n.gu.set("Offline"),t||(t=()=>dM(n.localStore)),n.asyncQueue.enqueueRetryable((0,Ie.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n._u.delete(1),yield qv(n)}))}),AT.apply(this,arguments)}function CM(n,e){return e().catch(t=>ZI(n,t,e))}function wm(n){return ST.apply(this,arguments)}function ST(){return ST=(0,Ie.Z)(function*(n){const e=Ke(n),t=Od(e);let r=e.fu.length>0?e.fu[e.fu.length-1].batchId:-1;for(;yN(e);)try{const o=yield tN(e.localStore,r);if(null===o){0===e.fu.length&&t.Fo();break}r=o.batchId,_N(e,o)}catch(o){yield ZI(e,o)}bM(e)&&TM(e)}),ST.apply(this,arguments)}function yN(n){return Zl(n)&&n.fu.length<10}function _N(n,e){n.fu.push(e);const t=Od(n);t.ko()&&t.Yo&&t.Xo(e.mutations)}function bM(n){return Zl(n)&&!Od(n).No()&&n.fu.length>0}function TM(n){Od(n).start()}function vN(n){return MT.apply(this,arguments)}function MT(){return MT=(0,Ie.Z)(function*(n){Od(n).eu()}),MT.apply(this,arguments)}function wN(n){return xT.apply(this,arguments)}function xT(){return xT=(0,Ie.Z)(function*(n){const e=Od(n);for(const t of n.fu)e.Xo(t.mutations)}),xT.apply(this,arguments)}function EN(n,e,t){return RT.apply(this,arguments)}function RT(){return RT=(0,Ie.Z)(function*(n,e,t){const r=n.fu.shift(),o=FI.from(r,e,t);yield CM(n,()=>n.remoteSyncer.applySuccessfulWrite(o)),yield wm(n)}),RT.apply(this,arguments)}function IN(n,e){return NT.apply(this,arguments)}function NT(){return NT=(0,Ie.Z)(function*(n,e){var t;e&&Od(n).Yo&&(yield(t=(0,Ie.Z)(function*(r,o){if(fv(u=o.code)&&u!==ue.ABORTED){const d=r.fu.shift();Od(r).Mo(),yield CM(r,()=>r.remoteSyncer.rejectFailedWrite(d.batchId,o)),yield wm(r)}var u}),function(r,o){return t.apply(this,arguments)})(n,e)),bM(n)&&TM(n)}),NT.apply(this,arguments)}function AM(n,e){return OT.apply(this,arguments)}function OT(){return OT=(0,Ie.Z)(function*(n,e){const t=Ke(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Zl(t);t._u.add(3),yield vm(t),r&&t.gu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t._u.delete(3),yield qv(t)}),OT.apply(this,arguments)}function PT(n,e){return kT.apply(this,arguments)}function kT(){return kT=(0,Ie.Z)(function*(n,e){const t=Ke(n);e?(t._u.delete(2),yield qv(t)):e||(t._u.add(2),yield vm(t),t.gu.set("Unknown"))}),kT.apply(this,arguments)}function Em(n){return n.pu||(n.pu=function(e,t,r){const o=Ke(e);return o.su(),new uN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:pN.bind(null,n),Zr:gN.bind(null,n),Wo:mN.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.pu.Mo(),DT(n)?IT(n):n.gu.set("Unknown")):(yield n.pu.stop(),DM(n))});return function(t){return e.apply(this,arguments)}}())),n.pu}function Od(n){return n.Iu||(n.Iu=function(e,t,r){const o=Ke(e);return o.su(),new lN(t,o.connection,o.authCredentials,o.appCheckCredentials,o.yt,r)}(n.datastore,n.asyncQueue,{Yr:vN.bind(null,n),Zr:IN.bind(null,n),tu:wN.bind(null,n),Zo:EN.bind(null,n)}),n.wu.push(function(){var e=(0,Ie.Z)(function*(t){t?(n.Iu.Mo(),yield wm(n)):(yield n.Iu.stop(),n.fu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.fu.length} pending writes`),n.fu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Iu}class FT{constructor(e,t,r,o,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new or,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(d=>{})}static createAndSchedule(e,t,r,o,u){const d=Date.now()+r,g=new FT(e,t,d,o,u);return g.start(r),g}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Fe(ue.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Im(n,e){if(Hn("AsyncQueue",`${e}: ${n}`),ka(n))return new Fe(ue.UNAVAILABLE,`${e}: ${n}`);throw n}class Dm{constructor(e){this.comparator=e?(t,r)=>e(t,r)||qe.comparator(t.key,r.key):(t,r)=>qe.comparator(t.key,r.key),this.keyedMap=Jg(),this.sortedSet=new ur(this.comparator)}static emptySet(e){return new Dm(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Dm)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Dm;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class SM{constructor(){this.Tu=new ur(qe.comparator)}track(e){const t=e.doc.key,r=this.Tu.get(t);r?0!==e.type&&3===r.type?this.Tu=this.Tu.insert(t,e):3===e.type&&1!==r.type?this.Tu=this.Tu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Tu=this.Tu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Tu=this.Tu.remove(t):1===e.type&&2===r.type?this.Tu=this.Tu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Tu=this.Tu.insert(t,{type:2,doc:e.doc}):ot():this.Tu=this.Tu.insert(t,e)}Eu(){const e=[];return this.Tu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Cm{constructor(e,t,r,o,u,d,g,v,C){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=d,this.syncStateChanged=g,this.excludesMetadataChanges=v,this.hasCachedResults=C}static fromInitialDocuments(e,t,r,o,u){const d=[];return t.forEach(g=>{d.push({type:0,doc:g})}),new Cm(e,t,Dm.emptySet(t),d,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&qg(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==r[o].type||!t[o].doc.isEqual(r[o].doc))return!1;return!0}}class DN{constructor(){this.Au=void 0,this.listeners=[]}}class CN{constructor(){this.queries=new ku(e=>Mb(e),qg),this.onlineState="Unknown",this.Ru=new Set}}function LT(n,e){return VT.apply(this,arguments)}function VT(){return VT=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1,u=t.queries.get(r);if(u||(o=!0,u=new DN),o)try{u.Au=yield t.onListen(r)}catch(d){const g=Im(d,`Initialization of query '${Zg(e.query)}' failed`);return void e.onError(g)}t.queries.set(r,u),u.listeners.push(e),e.bu(t.onlineState),u.Au&&e.Pu(u.Au)&&$T(t)}),VT.apply(this,arguments)}function UT(n,e){return BT.apply(this,arguments)}function BT(){return BT=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.query;let o=!1;const u=t.queries.get(r);if(u){const d=u.listeners.indexOf(e);d>=0&&(u.listeners.splice(d,1),o=0===u.listeners.length)}if(o)return t.queries.delete(r),t.onUnlisten(r)}),BT.apply(this,arguments)}function bN(n,e){const t=Ke(n);let r=!1;for(const o of e){const d=t.queries.get(o.query);if(d){for(const g of d.listeners)g.Pu(o)&&(r=!0);d.Au=o}}r&&$T(t)}function TN(n,e,t){const r=Ke(n),o=r.queries.get(e);if(o)for(const u of o.listeners)u.onError(t);r.queries.delete(e)}function $T(n){n.Ru.forEach(e=>{e.next()})}class jT{constructor(e,t,r){this.query=e,this.vu=t,this.Vu=!1,this.Su=null,this.onlineState="Unknown",this.options=r||{}}Pu(e){if(!this.options.includeMetadataChanges){const r=[];for(const o of e.docChanges)3!==o.type&&r.push(o);e=new Cm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Vu?this.Du(e)&&(this.vu.next(e),t=!0):this.Cu(e,this.onlineState)&&(this.xu(e),t=!0),this.Su=e,t}onError(e){this.vu.error(e)}bu(e){this.onlineState=e;let t=!1;return this.Su&&!this.Vu&&this.Cu(this.Su,e)&&(this.xu(this.Su),t=!0),t}Cu(e,t){return!e.fromCache||(!this.options.Nu||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Du(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Su&&this.Su.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}xu(e){e=Cm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Vu=!0,this.vu.next(e)}}class AN{constructor(e,t){this.ku=e,this.byteLength=t}Ou(){return"metadata"in this.ku}}class MM{constructor(e){this.yt=e}Ji(e){return Va(this.yt,e)}Yi(e){return e.metadata.exists?yI(this.yt,e.document,!1):Gn.newNoDocument(this.Ji(e.metadata.name),this.Xi(e.metadata.readTime))}Xi(e){return xr(e)}}class SN{constructor(e,t,r){this.Mu=e,this.localStore=t,this.yt=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=xM(e)}Fu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ku.namedQuery)this.queries.push(e.ku.namedQuery);else if(e.ku.documentMetadata){this.documents.push({metadata:e.ku.documentMetadata}),e.ku.documentMetadata.exists||++t;const r=un.fromString(e.ku.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.ku.document&&(this.documents[this.documents.length-1].document=e.ku.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}$u(e){const t=new Map,r=new MM(this.yt);for(const o of e)if(o.metadata.queries){const u=r.Ji(o.metadata.name);for(const d of o.metadata.queries){const g=(t.get(d)||jt()).add(u);t.set(d,g)}}return t}complete(){var e=this;return(0,Ie.Z)(function*(){const t=yield function nN(n,e,t,r){return dT.apply(this,arguments)}(e.localStore,new MM(e.yt),e.documents,e.Mu.id),r=e.$u(e.documents);for(const o of e.queries)yield rN(e.localStore,o,r.get(o.name));return e.progress.taskState="Success",{progress:e.progress,Bu:e.collectionGroups,Lu:t}})()}}function xM(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class RM{constructor(e){this.key=e}}class NM{constructor(e){this.key=e}}class OM{constructor(e,t){this.query=e,this.qu=t,this.Uu=null,this.hasCachedResults=!1,this.current=!1,this.Ku=jt(),this.mutatedKeys=jt(),this.Gu=oI(e),this.Qu=new Dm(this.Gu)}get ju(){return this.qu}Wu(e,t){const r=t?t.zu:new SM,o=t?t.Qu:this.Qu;let u=t?t.mutatedKeys:this.mutatedKeys,d=o,g=!1;const v="F"===this.query.limitType&&o.size===this.query.limit?o.last():null,C="L"===this.query.limitType&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal((A,N)=>{const W=o.get(A),ne=_d(this.query,N)?N:null,ge=!!W&&this.mutatedKeys.has(W.key),Be=!!ne&&(ne.hasLocalMutations||this.mutatedKeys.has(ne.key)&&ne.hasCommittedMutations);let He=!1;W&&ne?W.data.isEqual(ne.data)?ge!==Be&&(r.track({type:3,doc:ne}),He=!0):this.Hu(W,ne)||(r.track({type:2,doc:ne}),He=!0,(v&&this.Gu(ne,v)>0||C&&this.Gu(ne,C)<0)&&(g=!0)):!W&&ne?(r.track({type:0,doc:ne}),He=!0):W&&!ne&&(r.track({type:1,doc:W}),He=!0,(v||C)&&(g=!0)),He&&(ne?(d=d.add(ne),u=Be?u.add(A):u.delete(A)):(d=d.delete(A),u=u.delete(A)))}),null!==this.query.limit)for(;d.size>this.query.limit;){const A="F"===this.query.limitType?d.last():d.first();d=d.delete(A.key),u=u.delete(A.key),r.track({type:1,doc:A})}return{Qu:d,zu:r,$i:g,mutatedKeys:u}}Hu(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const o=this.Qu;this.Qu=e.Qu,this.mutatedKeys=e.mutatedKeys;const u=e.zu.Eu();u.sort((C,A)=>function(N,W){const ne=ge=>{switch(ge){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot()}};return ne(N)-ne(W)}(C.type,A.type)||this.Gu(C.doc,A.doc)),this.Ju(r);const d=t?this.Yu():[],g=0===this.Ku.size&&this.current?1:0,v=g!==this.Uu;return this.Uu=g,0!==u.length||v?{snapshot:new Cm(this.query,e.Qu,o,u,e.mutatedKeys,0===g,v,!1,!!r&&r.resumeToken.approximateByteSize()>0),Xu:d}:{Xu:d}}bu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Qu:this.Qu,zu:new SM,mutatedKeys:this.mutatedKeys,$i:!1},!1)):{Xu:[]}}Zu(e){return!this.qu.has(e)&&!!this.Qu.has(e)&&!this.Qu.get(e).hasLocalMutations}Ju(e){e&&(e.addedDocuments.forEach(t=>this.qu=this.qu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.qu=this.qu.delete(t)),this.current=e.current)}Yu(){if(!this.current)return[];const e=this.Ku;this.Ku=jt(),this.Qu.forEach(r=>{this.Zu(r.key)&&(this.Ku=this.Ku.add(r.key))});const t=[];return e.forEach(r=>{this.Ku.has(r)||t.push(new NM(r))}),this.Ku.forEach(r=>{e.has(r)||t.push(new RM(r))}),t}tc(e){this.qu=e.Hi,this.Ku=jt();const t=this.Wu(e.documents);return this.applyChanges(t,!0)}ec(){return Cm.fromInitialDocuments(this.query,this.Qu,this.mutatedKeys,0===this.Uu,this.hasCachedResults)}}class MN{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class xN{constructor(e){this.key=e,this.nc=!1}}class RN{constructor(e,t,r,o,u,d){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=d,this.sc={},this.ic=new ku(g=>Mb(g),qg),this.rc=new Map,this.oc=new Set,this.uc=new ur(qe.comparator),this.cc=new Map,this.ac=new Fn,this.hc={},this.lc=new Map,this.fc=Rd.vn(),this.onlineState="Unknown",this.dc=void 0}get isPrimaryClient(){return!0===this.dc}}function NN(n,e){return HT.apply(this,arguments)}function HT(){return HT=(0,Ie.Z)(function*(n,e){const t=hA(n);let r,o;const u=t.ic.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),o=u.view.ec();else{const d=yield ym(t.localStore,Mr(e));t.isPrimaryClient&&qI(t.remoteStore,d);const g=t.sharedClientState.addLocalQueryTarget(d.targetId);r=d.targetId,o=yield GT(t,e,r,"current"===g,d.resumeToken)}return o}),HT.apply(this,arguments)}function GT(n,e,t,r,o){return WT.apply(this,arguments)}function WT(){return WT=(0,Ie.Z)(function*(n,e,t,r,o){n._c=(N,W,ne)=>{return(ge=(0,Ie.Z)(function*(Be,He,Zt,Yt){let Wt=He.view.Wu(Zt);Wt.$i&&(Wt=yield HI(Be.localStore,He.query,!1).then(({documents:tn})=>He.view.Wu(tn,Wt)));const zt=Yt&&Yt.targetChanges.get(He.targetId),Gt=He.view.applyChanges(Wt,Be.isPrimaryClient,zt);return tA(Be,He.targetId,Gt.Xu),Gt.snapshot}),function(Be,He,Zt,Yt){return ge.apply(this,arguments)})(n,N,W,ne);var ge};const u=yield HI(n.localStore,e,!0),d=new OM(e,u.Hi),g=d.Wu(u.documents),v=Dd.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,o),C=d.applyChanges(g,n.isPrimaryClient,v);tA(n,t,C.Xu);const A=new MN(e,t,d);return n.ic.set(e,A),n.rc.has(t)?n.rc.get(t).push(e):n.rc.set(t,[e]),C.snapshot}),WT.apply(this,arguments)}function ON(n,e){return zT.apply(this,arguments)}function zT(){return zT=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=t.ic.get(e),o=t.rc.get(r.targetId);if(o.length>1)return t.rc.set(r.targetId,o.filter(u=>!qg(u,e))),void t.ic.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield _m(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),Zv(t.remoteStore,r.targetId),bm(t,r.targetId)}).catch(Uo))):(bm(t,r.targetId),yield _m(t.localStore,r.targetId,!0))}),zT.apply(this,arguments)}function qT(){return qT=(0,Ie.Z)(function*(n,e,t){const r=fA(n);try{const o=yield function(u,d){const g=Ke(u),v=kn.now(),C=d.reduce((W,ne)=>W.add(ne.key),jt());let A,N;return g.persistence.runTransaction("Locally write mutations","readwrite",W=>{let ne=Ai(),ge=jt();return g.Gi.getEntries(W,C).next(Be=>{ne=Be,ne.forEach((He,Zt)=>{Zt.isValidDocument()||(ge=ge.add(He))})}).next(()=>g.localDocuments.getOverlayedDocuments(W,ne)).next(Be=>{A=Be;const He=[];for(const Zt of d){const Yt=dI(Zt,A.get(Zt.key).overlayedDocument);null!=Yt&&He.push(new Ho(Zt.key,Yt,Wg(Yt.value.mapValue),lr.exists(!0)))}return g.mutationQueue.addMutationBatch(W,v,He,d)}).next(Be=>{N=Be;const He=Be.applyToLocalDocumentSet(A,ge);return g.documentOverlayCache.saveOverlays(W,Be.batchId,He)})}).then(()=>({batchId:N.batchId,changes:Ob(A)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(o.batchId),function(u,d,g){let v=u.hc[u.currentUser.toKey()];v||(v=new ur($t)),v=v.insert(d,g),u.hc[u.currentUser.toKey()]=v}(r,o.batchId,t),yield Kl(r,o.changes),yield wm(r.remoteStore)}catch(o){const u=Im(o,"Failed to persist write");t.reject(u)}}),qT.apply(this,arguments)}function PM(n,e){return ZT.apply(this,arguments)}function ZT(){return ZT=(0,Ie.Z)(function*(n,e){const t=Ke(n);try{const r=yield eN(t.localStore,e);e.targetChanges.forEach((o,u)=>{const d=t.cc.get(u);d&&(vt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1),o.addedDocuments.size>0?d.nc=!0:o.modifiedDocuments.size>0?vt(d.nc):o.removedDocuments.size>0&&(vt(d.nc),d.nc=!1))}),yield Kl(t,r,e)}catch(r){yield Uo(r)}}),ZT.apply(this,arguments)}function kM(n,e,t){const r=Ke(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const o=[];r.ic.forEach((u,d)=>{const g=d.view.bu(e);g.snapshot&&o.push(g.snapshot)}),function(u,d){const g=Ke(u);g.onlineState=d;let v=!1;g.queries.forEach((C,A)=>{for(const N of A.listeners)N.bu(d)&&(v=!0)}),v&&$T(g)}(r.eventManager,e),o.length&&r.sc.Wo(o),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function kN(n,e,t){return KT.apply(this,arguments)}function KT(){return KT=(0,Ie.Z)(function*(n,e,t){const r=Ke(n);r.sharedClientState.updateQueryState(e,"rejected",t);const o=r.cc.get(e),u=o&&o.key;if(u){let d=new ur(qe.comparator);d=d.insert(u,Gn.newNoDocument(u,Dt.min()));const g=jt().add(u),v=new Fu(Dt.min(),new Map,new On($t),d,g);yield PM(r,v),r.uc=r.uc.remove(u),r.cc.delete(e),nA(r)}else yield _m(r.localStore,e,!1).then(()=>bm(r,e,t)).catch(Uo)}),KT.apply(this,arguments)}function FN(n,e){return YT.apply(this,arguments)}function YT(){return YT=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=e.batch.batchId;try{const o=yield XR(t.localStore,e);eA(t,r,null),XT(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Kl(t,o)}catch(o){yield Uo(o)}}),YT.apply(this,arguments)}function LN(n,e,t){return QT.apply(this,arguments)}function QT(){return QT=(0,Ie.Z)(function*(n,e,t){const r=Ke(n);try{const o=yield function(u,d){const g=Ke(u);return g.persistence.runTransaction("Reject batch","readwrite-primary",v=>{let C;return g.mutationQueue.lookupMutationBatch(v,d).next(A=>(vt(null!==A),C=A.keys(),g.mutationQueue.removeMutationBatch(v,A))).next(()=>g.mutationQueue.performConsistencyCheck(v)).next(()=>g.documentOverlayCache.removeOverlaysForBatchId(v,C,d)).next(()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(v,C)).next(()=>g.localDocuments.getDocuments(v,C))})}(r.localStore,e);eA(r,e,t),XT(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Kl(r,o)}catch(o){yield Uo(o)}}),QT.apply(this,arguments)}function JT(){return JT=(0,Ie.Z)(function*(n,e){const t=Ke(n);Zl(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const d=Ke(u);return d.persistence.runTransaction("Get highest unacknowledged batch id","readonly",g=>d.mutationQueue.getHighestUnacknowledgedBatchId(g))}(t.localStore);if(-1===r)return void e.resolve();const o=t.lc.get(r)||[];o.push(e),t.lc.set(r,o)}catch(r){const o=Im(r,"Initialization of waitForPendingWrites() operation failed");e.reject(o)}}),JT.apply(this,arguments)}function XT(n,e){(n.lc.get(e)||[]).forEach(t=>{t.resolve()}),n.lc.delete(e)}function eA(n,e,t){const r=Ke(n);let o=r.hc[r.currentUser.toKey()];if(o){const u=o.get(e);u&&(t?u.reject(t):u.resolve(),o=o.remove(e)),r.hc[r.currentUser.toKey()]=o}}function bm(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n.rc.get(e))n.ic.delete(r),t&&n.sc.wc(r,t);n.rc.delete(e),n.isPrimaryClient&&n.ac.ls(e).forEach(r=>{n.ac.containsKey(r)||FM(n,r)})}function FM(n,e){n.oc.delete(e.path.canonicalString());const t=n.uc.get(e);null!==t&&(Zv(n.remoteStore,t),n.uc=n.uc.remove(e),n.cc.delete(t),nA(n))}function tA(n,e,t){for(const r of t)r instanceof RM?(n.ac.addReference(r.key,e),UN(n,r)):r instanceof NM?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.ac.removeReference(r.key,e),n.ac.containsKey(r.key)||FM(n,r.key)):ot()}function UN(n,e){const t=e.key,r=t.path.canonicalString();n.uc.get(t)||n.oc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.oc.add(r),nA(n))}function nA(n){for(;n.oc.size>0&&n.uc.size<n.maxConcurrentLimboResolutions;){const e=n.oc.values().next().value;n.oc.delete(e);const t=new qe(un.fromString(e)),r=n.fc.next();n.cc.set(r,new xN(t)),n.uc=n.uc.insert(t,r),qI(n.remoteStore,new Lu(Mr(Bl(t.path)),r,2,ts.at))}}function Kl(n,e,t){return rA.apply(this,arguments)}function rA(){return rA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[],d=[];var g;r.ic.isEmpty()||(r.ic.forEach((g,v)=>{d.push(r._c(v,e,t).then(C=>{if((C||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(v.targetId,C?.fromCache?"not-current":"current"),C){o.push(C);const A=uT.Ci(v.targetId,C);u.push(A)}}))}),yield Promise.all(d),r.sc.Wo(o),yield(g=(0,Ie.Z)(function*(v,C){const A=Ke(v);try{yield A.persistence.runTransaction("notifyLocalViewChanges","readwrite",N=>oe.forEach(C,W=>oe.forEach(W.Si,ne=>A.persistence.referenceDelegate.addReference(N,W.targetId,ne)).next(()=>oe.forEach(W.Di,ne=>A.persistence.referenceDelegate.removeReference(N,W.targetId,ne)))))}catch(N){if(!ka(N))throw N;Ve("LocalStore","Failed to update sequence numbers: "+N)}for(const N of C){const W=N.targetId;if(!N.fromCache){const ne=A.qi.get(W),Be=ne.withLastLimboFreeSnapshotVersion(ne.snapshotVersion);A.qi=A.qi.insert(W,Be)}}}),function(v,C){return g.apply(this,arguments)})(r.localStore,u))}),rA.apply(this,arguments)}function BN(n,e){return iA.apply(this,arguments)}function iA(){return iA=(0,Ie.Z)(function*(n,e){const t=Ke(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield cM(t.localStore,e);t.currentUser=e,(o=t).lc.forEach(d=>{d.forEach(g=>{g.reject(new Fe(ue.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),o.lc.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Kl(t,r.ji)}var o}),iA.apply(this,arguments)}function $N(n,e){const t=Ke(n),r=t.cc.get(e);if(r&&r.nc)return jt().add(r.key);{let o=jt();const u=t.rc.get(e);if(!u)return o;for(const d of u){const g=t.ic.get(d);o=o.unionWith(g.view.ju)}return o}}function jN(n,e){return sA.apply(this,arguments)}function sA(){return sA=(0,Ie.Z)(function*(n,e){const t=Ke(n),r=yield HI(t.localStore,e.query,!0),o=e.view.tc(r);return t.isPrimaryClient&&tA(t,e.targetId,o.Xu),o}),sA.apply(this,arguments)}function HN(n,e){return oA.apply(this,arguments)}function oA(){return oA=(0,Ie.Z)(function*(n,e){const t=Ke(n);return pM(t.localStore,e).then(r=>Kl(t,r))}),oA.apply(this,arguments)}function GN(n,e,t,r){return aA.apply(this,arguments)}function aA(){return aA=(0,Ie.Z)(function*(n,e,t,r){const o=Ke(n),u=yield function(d,g){const v=Ke(d),C=Ke(v.mutationQueue);return v.persistence.runTransaction("Lookup mutation documents","readonly",A=>C.Tn(A,g).next(N=>N?v.localDocuments.getDocuments(A,N):oe.resolve(null)))}(o.localStore,e);var g;null!==u?("pending"===t?yield wm(o.remoteStore):"acknowledged"===t||"rejected"===t?(eA(o,e,r||null),XT(o,e),g=e,Ke(Ke(o.localStore).mutationQueue).An(g)):ot(),yield Kl(o,u)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),aA.apply(this,arguments)}function uA(){return uA=(0,Ie.Z)(function*(n,e){const t=Ke(n);if(hA(t),fA(t),!0===e&&!0!==t.dc){const r=t.sharedClientState.getAllActiveQueryTargets(),o=yield LM(t,r.toArray());t.dc=!0,yield PT(t.remoteStore,!0);for(const u of o)qI(t.remoteStore,u)}else if(!1===e&&!1!==t.dc){const r=[];let o=Promise.resolve();t.rc.forEach((u,d)=>{t.sharedClientState.isLocalQueryTarget(d)?r.push(d):o=o.then(()=>(bm(t,d),_m(t.localStore,d,!0))),Zv(t.remoteStore,d)}),yield o,yield LM(t,r),function(u){const d=Ke(u);d.cc.forEach((g,v)=>{Zv(d.remoteStore,v)}),d.ac.fs(),d.cc=new Map,d.uc=new ur(qe.comparator)}(t),t.dc=!1,yield PT(t.remoteStore,!1)}}),uA.apply(this,arguments)}function LM(n,e,t){return lA.apply(this,arguments)}function lA(){return lA=(0,Ie.Z)(function*(n,e,t){const r=Ke(n),o=[],u=[];for(const d of e){let g;const v=r.rc.get(d);if(v&&0!==v.length){g=yield ym(r.localStore,Mr(v[0]));for(const C of v){const A=r.ic.get(C),N=yield jN(r,A);N.snapshot&&u.push(N.snapshot)}}else{const C=yield fM(r.localStore,d);g=yield ym(r.localStore,C),yield GT(r,VM(C),d,!1,g.resumeToken)}o.push(g)}return r.sc.Wo(u),o}),lA.apply(this,arguments)}function VM(n){return sI(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function zN(n){const e=Ke(n);return Ke(Ke(e.localStore).persistence).vi()}function qN(n,e,t,r){return cA.apply(this,arguments)}function cA(){return cA=(0,Ie.Z)(function*(n,e,t,r){const o=Ke(n);if(o.dc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const u=o.rc.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const d=yield pM(o.localStore,vd(u[0])),g=Fu.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Lr.EMPTY_BYTE_STRING);yield Kl(o,d,g);break}case"rejected":yield _m(o.localStore,e,!0),bm(o,e,r);break;default:ot()}}),cA.apply(this,arguments)}function ZN(n,e,t){return dA.apply(this,arguments)}function dA(){return dA=(0,Ie.Z)(function*(n,e,t){const r=hA(n);if(r.dc){for(const o of e){if(r.rc.has(o)){Ve("SyncEngine","Adding an already active target "+o);continue}const u=yield fM(r.localStore,o),d=yield ym(r.localStore,u);yield GT(r,VM(u),d.targetId,!1,d.resumeToken),qI(r.remoteStore,d)}for(const o of t)r.rc.has(o)&&(yield _m(r.localStore,o,!1).then(()=>{Zv(r.remoteStore,o),bm(r,o)}).catch(Uo))}}),dA.apply(this,arguments)}function hA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=PM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$N.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=kN.bind(null,e),e.sc.Wo=bN.bind(null,e.eventManager),e.sc.wc=TN.bind(null,e.eventManager),e}function fA(n){const e=Ke(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=FN.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=LN.bind(null,e),e}class UM{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ie.Z)(function*(){t.yt=zv(e.databaseInfo.databaseId),t.sharedClientState=t.gc(e),t.persistence=t.yc(e),yield t.persistence.start(),t.localStore=t.Ic(e),t.gcScheduler=t.Tc(e,t.localStore),t.indexBackfillerScheduler=t.Ec(e,t.localStore)})()}Tc(e,t){return null}Ec(e,t){return null}Ic(e){return lM(this.persistence,new uM,e.initialUser,this.yt)}yc(e){return new gm(Nd.Bs,this.yt)}gc(e){return new _M}terminate(){var e=this;return(0,Ie.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class BM extends UM{constructor(e,t,r){super(),this.Ac=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e),yield r.Ac.initialize(r,e),yield fA(r.Ac.syncEngine),yield wm(r.Ac.remoteStore),yield r.persistence.li(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}Ic(e){return lM(this.persistence,new uM,e.initialUser,this.yt)}Tc(e,t){return new f(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}Ec(e,t){const r=new V_(t,this.persistence);return new WE(e.asyncQueue,r)}yc(e){const t=aT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?ns.withCacheSize(this.cacheSizeBytes):ns.DEFAULT;return new oT(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,wM(),zI(),this.yt,this.sharedClientState,!!this.forceOwnership)}gc(e){return new _M}}class YN extends BM{constructor(e,t){super(e,t,!1),this.Ac=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,Ie.Z)(function*(){yield t().call(r,e);const o=r.Ac.syncEngine;r.sharedClientState instanceof mT&&(r.sharedClientState.syncEngine={Fr:GN.bind(null,o),$r:qN.bind(null,o),Br:ZN.bind(null,o),vi:zN.bind(null,o),Mr:HN.bind(null,o)},yield r.sharedClientState.start()),yield r.persistence.li(function(){var u=(0,Ie.Z)(function*(d){yield function WN(n,e){return uA.apply(this,arguments)}(r.Ac.syncEngine,d),r.gcScheduler&&(d&&!r.gcScheduler.started?r.gcScheduler.start():d||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(d&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():d||r.indexBackfillerScheduler.stop())});return function(d){return u.apply(this,arguments)}}())})()}gc(e){const t=wM();if(!mT.C(t))throw new Fe(ue.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=aT(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new mT(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class pA{initialize(e,t){var r=this;return(0,Ie.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=o=>kM(r.syncEngine,o,1),r.remoteStore.remoteSyncer.handleCredentialChange=BN.bind(null,r.syncEngine),yield PT(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new CN}createDatastore(e){const t=zv(e.databaseInfo.databaseId),r=new aN(e.databaseInfo);return new cN(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,o=e.asyncQueue,u=g=>kM(this.syncEngine,g,0),d=vM.C()?new vM:new iN,new fN(t,r,o,u,d);var t,r,o,u,d}createSyncEngine(e,t){return function(r,o,u,d,g,v,C){const A=new RN(r,o,u,d,g,v);return C&&(A.dc=!0),A}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ie.Z)(function*(t){const r=Ke(t);Ve("RemoteStore","RemoteStore shutting down."),r._u.add(5),yield vm(r),r.mu.shutdown(),r.gu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function gA(n,e,t){if(!t)throw new Fe(ue.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function $M(n,e,t,r){if(!0===e&&!0===r)throw new Fe(ue.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function jM(n){if(!qe.isDocumentKey(n))throw new Fe(ue.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function HM(n){if(qe.isDocumentKey(n))throw new Fe(ue.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function KI(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":ot()}function ln(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Fe(ue.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=KI(n);throw new Fe(ue.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function GM(n,e){if(e<=0)throw new Fe(ue.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}const WM=new Map;class zM{constructor(e){var t;if(void 0===e.host){if(void 0!==e.ssl)throw new Fe(ue.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Fe(ue.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,$M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Kv{constructor(e,t,r,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new zM({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Fe(ue.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Fe(ue.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new zM(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new PE;switch(t.type){case"gapi":return new FE(t.client,t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Fe(ue.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=WM.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),WM.delete(e),t.terminate())}(this),Promise.resolve()}}function qM(n,e,t,r={}){var o;const u=(n=ln(n,Kv))._getSettings();if("firestore.googleapis.com"!==u.host&&u.host!==e&&Nl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},u),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let d,g;if("string"==typeof r.mockUserToken)d=r.mockUserToken,g=ti.MOCK_USER;else{d=(0,an.Sg)(r.mockUserToken,null===(o=n._app)||void 0===o?void 0:o.options.projectId);const v=r.mockUserToken.sub||r.mockUserToken.user_id;if(!v)throw new Fe(ue.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");g=new ti(v)}n._authCredentials=new yb(new OE(d,g))}}class cr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Bu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new cr(this.firestore,e,this._key)}}class Si{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Si(this.firestore,e,this._query)}}class Bu extends Si{constructor(e,t,r){super(e,t,Bl(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new cr(this.firestore,null,new qe(e))}withConverter(e){return new Bu(this.firestore,e,this._path)}}function ZM(n,e,...t){if(n=(0,an.m9)(n),gA("collection","path",e),n instanceof Kv){const r=un.fromString(e,...t);return HM(r),new Bu(n,null,r)}{if(!(n instanceof cr||n instanceof Bu))throw new Fe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return HM(r),new Bu(n.firestore,null,r)}}function YI(n,e,...t){if(n=(0,an.m9)(n),1===arguments.length&&(e=O_.R()),gA("doc","path",e),n instanceof Kv){const r=un.fromString(e,...t);return jM(r),new cr(n,null,new qe(r))}{if(!(n instanceof cr||n instanceof Bu))throw new Fe(ue.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(un.fromString(e,...t));return jM(r),new cr(n.firestore,n instanceof Bu?n.converter:null,new qe(r))}}function KM(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),(n instanceof cr||n instanceof Bu)&&(e instanceof cr||e instanceof Bu)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function mA(n,e){return n=(0,an.m9)(n),e=(0,an.m9)(e),n instanceof Si&&e instanceof Si&&n.firestore===e.firestore&&qg(n._query,e._query)&&n.converter===e.converter}function YM(n,e=10240){let t=0;return{read:()=>(0,Ie.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,Ie.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class QI{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Rc(this.observer.next,e)}error(e){this.observer.error?this.Rc(this.observer.error,e):Hn("Uncaught Error in snapshot listener:",e.toString())}bc(){this.muted=!0}Rc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class JN{constructor(e,t){this.Pc=e,this.yt=t,this.metadata=new or,this.buffer=new Uint8Array,this.vc=new TextDecoder("utf-8"),this.Vc().then(r=>{r&&r.Ou()?this.metadata.resolve(r.ku.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.ku)}`))},r=>this.metadata.reject(r))}close(){return this.Pc.cancel()}getMetadata(){var e=this;return(0,Ie.Z)(function*(){return e.metadata.promise})()}mc(){var e=this;return(0,Ie.Z)(function*(){return yield e.getMetadata(),e.Vc()})()}Vc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Sc();if(null===t)return null;const r=e.vc.decode(t),o=Number(r);isNaN(o)&&e.Dc(`length string (${r}) is not valid number`);const u=yield e.Cc(o);return new AN(JSON.parse(u),t.length+o)})()}xc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Sc(){var e=this;return(0,Ie.Z)(function*(){for(;e.xc()<0&&!(yield e.Nc()););if(0===e.buffer.length)return null;const t=e.xc();t<0&&e.Dc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}Cc(e){var t=this;return(0,Ie.Z)(function*(){for(;t.buffer.length<e;)(yield t.Nc())&&t.Dc("Reached the end of bundle when more is expected.");const r=t.vc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Dc(e){throw this.Pc.cancel(),new Error(`Invalid bundle format: ${e}`)}Nc(){var e=this;return(0,Ie.Z)(function*(){const t=yield e.Pc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class t1{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ie.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Fe(ue.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(o=(0,Ie.Z)(function*(u,d){const g=Ke(u),v=bd(g.yt)+"/documents",C={documents:d.map(ne=>Rf(g.yt,ne))},A=yield g._o("BatchGetDocuments",v,C,d.length),N=new Map;A.forEach(ne=>{const ge=function vv(n,e){return"found"in e?function(t,r){vt(!!r.found);const o=Va(t,r.found.name),u=xr(r.found.updateTime),d=r.found.createTime?xr(r.found.createTime):Dt.min(),g=new Vr({mapValue:{fields:r.found.fields}});return Gn.newFoundDocument(o,u,d,g)}(n,e):"missing"in e?function(t,r){vt(!!r.missing),vt(!!r.readTime);const o=Va(t,r.missing),u=xr(r.readTime);return Gn.newNoDocument(o,u)}(n,e):ot()}(g.yt,ne);N.set(ge.key.toString(),ge)});const W=[];return d.forEach(ne=>{const ge=N.get(ne.toString());vt(!!ge),W.push(ge)}),W}),function(u,d){return o.apply(this,arguments)})(t.datastore,e);var o;return r.forEach(o=>t.recordVersion(o)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Hl(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ie.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,o)=>{const u=qe.fromPath(o);e.mutations.push(new hv(u,e.precondition(u)))}),yield(r=(0,Ie.Z)(function*(o,u){const d=Ke(o),g=bd(d.yt)+"/documents",v={writes:u.map(C=>yi(d.yt,C))};yield d.ao("Commit",g,v)}),function(o,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw ot();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Fe(ue.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?lr.exists(!1):lr.updateTime(t):lr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Fe(ue.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return lr.updateTime(t)}return lr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class n1{constructor(e,t,r,o,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=o,this.deferred=u,this.kc=r.maxAttempts,this.xo=new yT(this.asyncQueue,"transaction_retry")}run(){this.kc-=1,this.Oc()}Oc(){var e=this;this.xo.Ro((0,Ie.Z)(function*(){const t=new t1(e.datastore),r=e.Mc(t);r&&r.then(o=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(o)}).catch(u=>{e.Fc(u)}))}).catch(o=>{e.Fc(o)})}))}Mc(e){try{const t=this.updateFunction(e);return!ld(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Fc(e){this.kc>0&&this.$c(e)?(this.kc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Oc(),Promise.resolve()))):this.deferred.reject(e)}$c(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!fv(t)}return!1}}class r1{constructor(e,t,r,o){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=o,this.user=ti.UNAUTHENTICATED,this.clientId=O_.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var d=(0,Ie.Z)(function*(g){Ve("FirestoreClient","Received user=",g.uid),yield u.authCredentialListener(g),u.user=g});return function(g){return d.apply(this,arguments)}}()),this.appCheckCredentials.start(r,d=>(Ve("FirestoreClient","Received new app check token=",d),this.appCheckCredentialListener(d,this.user)))}getConfiguration(){var e=this;return(0,Ie.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Fe(ue.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new or;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const o=Im(r,"Failed to shutdown persistence");t.reject(o)}})),t.promise}}function QM(n,e){return yA.apply(this,arguments)}function yA(){return yA=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var o=(0,Ie.Z)(function*(u){r.isEqual(u)||(yield cM(e.localStore,u),r=u)});return function(u){return o.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n.offlineComponents=e}),yA.apply(this,arguments)}function JM(n,e){return _A.apply(this,arguments)}function _A(){return _A=(0,Ie.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield vA(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(o=>AM(e.remoteStore,o)),n.setAppCheckTokenChangeListener((o,u)=>AM(e.remoteStore,u)),n.onlineComponents=e}),_A.apply(this,arguments)}function vA(n){return wA.apply(this,arguments)}function wA(){return wA=(0,Ie.Z)(function*(n){return n.offlineComponents||(Ve("FirestoreClient","Using default OfflineComponentProvider"),yield QM(n,new UM)),n.offlineComponents}),wA.apply(this,arguments)}function JI(n){return EA.apply(this,arguments)}function EA(){return EA=(0,Ie.Z)(function*(n){return n.onlineComponents||(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield JM(n,new pA)),n.onlineComponents}),EA.apply(this,arguments)}function XM(n){return vA(n).then(e=>e.persistence)}function XI(n){return vA(n).then(e=>e.localStore)}function IA(n){return JI(n).then(e=>e.remoteStore)}function DA(n){return JI(n).then(e=>e.syncEngine)}function Tm(n){return CA.apply(this,arguments)}function CA(){return CA=(0,Ie.Z)(function*(n){const e=yield JI(n),t=e.eventManager;return t.onListen=NN.bind(null,e.syncEngine),t.onUnlisten=ON.bind(null,e.syncEngine),t}),CA.apply(this,arguments)}function tx(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,v){const C=new QI({next:N=>{u.enqueueAndForget(()=>UT(o,A));const W=N.docs.has(d);!W&&N.fromCache?v.reject(new Fe(ue.UNAVAILABLE,"Failed to get document because the client is offline.")):W&&N.fromCache&&g&&"server"===g.source?v.reject(new Fe(ue.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new jT(Bl(d.path),C,{includeMetadataChanges:!0,Nu:!0});return LT(o,A)}(yield Tm(n),n.asyncQueue,e,t,r)})),r.promise}function nx(n,e,t={}){const r=new or;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function(o,u,d,g,v){const C=new QI({next:N=>{u.enqueueAndForget(()=>UT(o,A)),N.fromCache&&"server"===g.source?v.reject(new Fe(ue.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):v.resolve(N)},error:N=>v.reject(N)}),A=new jT(d,C,{includeMetadataChanges:!0,Nu:!0});return LT(o,A)}(yield Tm(n),n.asyncQueue,e,t,r)})),r.promise}class d1{constructor(){this.Bc=Promise.resolve(),this.Lc=[],this.qc=!1,this.Uc=[],this.Kc=null,this.Gc=!1,this.Qc=!1,this.jc=[],this.xo=new yT(this,"async_queue_retry"),this.Wc=()=>{const t=zI();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.xo.Po()};const e=zI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Wc)}get isShuttingDown(){return this.qc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.zc(),this.Hc(e)}enterRestrictedMode(e){if(!this.qc){this.qc=!0,this.Qc=e||!1;const t=zI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Wc)}}enqueue(e){if(this.zc(),this.qc)return new Promise(()=>{});const t=new or;return this.Hc(()=>this.qc&&this.Qc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Lc.push(e),this.Jc()))}Jc(){var e=this;return(0,Ie.Z)(function*(){if(0!==e.Lc.length){try{yield e.Lc[0](),e.Lc.shift(),e.xo.reset()}catch(t){if(!ka(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Lc.length>0&&e.xo.Ro(()=>e.Jc())}})()}Hc(e){const t=this.Bc.then(()=>(this.Gc=!0,e().catch(r=>{throw this.Kc=r,this.Gc=!1,Hn("INTERNAL UNHANDLED ERROR: ",function(u){let d=u.message||"";return u.stack&&(d=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),d}(r)),r}).then(r=>(this.Gc=!1,r))));return this.Bc=t,t}enqueueAfterDelay(e,t,r){this.zc(),this.jc.indexOf(e)>-1&&(t=0);const o=FT.createAndSchedule(this,e,t,r,u=>this.Yc(u));return this.Uc.push(o),o}zc(){this.Kc&&ot()}verifyOperationInProgress(){}Xc(){var e=this;return(0,Ie.Z)(function*(){let t;do{t=e.Bc,yield t}while(t!==e.Bc)})()}Zc(e){for(const t of this.Uc)if(t.timerId===e)return!0;return!1}ta(e){return this.Xc().then(()=>{this.Uc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.Uc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Xc()})}ea(e){this.jc.push(e)}Yc(e){const t=this.Uc.indexOf(e);this.Uc.splice(t,1)}}function bA(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const o of["next","error","complete"])if(o in r&&"function"==typeof r[o])return!0;return!1}(n)}class h1{constructor(){this._progressObserver={},this._taskCompletionResolver=new or,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class dr extends Kv{constructor(e,t,r,o){super(e,t,r,o),this.type="firestore",this._queue=new d1,this._persistenceKey=o?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||rx(this),this._firestoreClient.terminate()}}function p1(n,e){const t="object"==typeof n?n:(0,Sa.getApp)(),r="string"==typeof n?n:e||"(default)",o=(0,Sa._getProvider)(t,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=(0,an.P0)("firestore");u&&qM(o,...u)}return o}function Ur(n){return n._firestoreClient||rx(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function rx(n){var e;const t=n._freezeSettings(),r=(u=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new U_(n._databaseId,u,n._persistenceKey,(g=t).host,g.ssl,g.experimentalForceLongPolling,g.experimentalAutoDetectLongPolling,g.useFetchStreams));var u,g;n._firestoreClient=new r1(n._authCredentials,n._appCheckCredentials,n._queue,r)}function ix(n,e,t){const r=new or;return n.asyncQueue.enqueue((0,Ie.Z)(function*(){try{yield QM(n,t),yield JM(n,e),r.resolve()}catch(o){const u=o;if(!("FirebaseError"===(d=u).name?d.code===ue.FAILED_PRECONDITION||d.code===ue.UNIMPLEMENTED:!(typeof DOMException<"u"&&d instanceof DOMException)||22===d.code||20===d.code||11===d.code))throw u;Nl("Error enabling offline persistence. Falling back to persistence disabled: "+u),r.reject(u)}var d})).then(()=>r.promise)}function sx(n){if(n._initialized||n._terminated)throw new Fe(ue.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class $u{constructor(e){this._byteString=e}static fromBase64String(e){try{return new $u(Lr.fromBase64String(e))}catch(t){throw new Fe(ue.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new $u(Lr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yl{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Fe(ue.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new mr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Bf{constructor(e){this._methodName=e}}class eD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Fe(ue.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Fe(ue.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return $t(this._lat,e._lat)||$t(this._long,e._long)}}const D1=/^__.*__$/;class C1{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms):new Id(e,this.data,t,this.fieldTransforms)}}class ox{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Ho(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ax(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot()}}class tD{constructor(e,t,r,o,u,d){this.settings=e,this.databaseId=t,this.yt=r,this.ignoreUndefinedProperties=o,void 0===u&&this.na(),this.fieldTransforms=u||[],this.fieldMask=d||[]}get path(){return this.settings.path}get sa(){return this.settings.sa}ia(e){return new tD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.yt,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ra(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.ua(e),o}ca(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),o=this.ia({path:r,oa:!1});return o.na(),o}aa(e){return this.ia({path:void 0,oa:!0})}ha(e){return iD(e,this.settings.methodName,this.settings.la||!1,this.path,this.settings.fa)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}na(){if(this.path)for(let e=0;e<this.path.length;e++)this.ua(this.path.get(e))}ua(e){if(0===e.length)throw this.ha("Document fields must not be empty");if(ax(this.sa)&&D1.test(e))throw this.ha('Document fields cannot begin and end with "__"')}}class b1{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.yt=r||zv(e)}da(e,t,r,o=!1){return new tD({sa:e,methodName:t,fa:r,path:mr.emptyPath(),oa:!1,la:o},this.databaseId,this.yt,this.ignoreUndefinedProperties)}}function $f(n){const e=n._freezeSettings(),t=zv(n._databaseId);return new b1(n._databaseId,!!e.ignoreUndefinedProperties,t)}function nD(n,e,t,r,o,u={}){const d=n.da(u.merge||u.mergeFields?2:0,e,t,o);MA("Data must be an object, but it was:",d,r);const g=cx(r,d);let v,C;if(u.merge)v=new Ti(d.fieldMask),C=d.fieldTransforms;else if(u.mergeFields){const A=[];for(const N of u.mergeFields){const W=xA(e,N,t);if(!d.contains(W))throw new Fe(ue.INVALID_ARGUMENT,`Field '${W}' is specified in your field mask but missing from your input data.`);hx(A,W)||A.push(W)}v=new Ti(A),C=d.fieldTransforms.filter(N=>v.covers(N.field))}else v=null,C=d.fieldTransforms;return new C1(new Vr(g),v,C)}class Yv extends Bf{_toFieldTransform(e){if(2!==e.sa)throw e.ha(1===e.sa?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Yv}}function ux(n,e,t){return new tD({sa:3,fa:e.settings.fa,methodName:n._methodName,oa:t},e.databaseId,e.yt,e.ignoreUndefinedProperties)}class TA extends Bf{_toFieldTransform(e){return new Af(e.path,new $l)}isEqual(e){return e instanceof TA}}class T1 extends Bf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ux(this,e,!0),r=this._a.map(u=>jf(u,t)),o=new jo(r);return new Af(e.path,o)}isEqual(e){return this===e}}class A1 extends Bf{constructor(e,t){super(e),this._a=t}_toFieldTransform(e){const t=ux(this,e,!0),r=this._a.map(u=>jf(u,t)),o=new wd(r);return new Af(e.path,o)}isEqual(e){return this===e}}class S1 extends Bf{constructor(e,t){super(e),this.wa=t}_toFieldTransform(e){const t=new Ed(e.yt,uI(e.yt,this.wa));return new Af(e.path,t)}isEqual(e){return this===e}}function AA(n,e,t,r){const o=n.da(1,e,t);MA("Data must be an object, but it was:",o,r);const u=[],d=Vr.empty();Fa(r,(v,C)=>{const A=rD(e,v,t);C=(0,an.m9)(C);const N=o.ca(A);if(C instanceof Yv)u.push(A);else{const W=jf(C,N);null!=W&&(u.push(A),d.set(A,W))}});const g=new Ti(u);return new ox(d,g,o.fieldTransforms)}function SA(n,e,t,r,o,u){const d=n.da(1,e,t),g=[xA(e,r,t)],v=[o];if(u.length%2!=0)throw new Fe(ue.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let W=0;W<u.length;W+=2)g.push(xA(e,u[W])),v.push(u[W+1]);const C=[],A=Vr.empty();for(let W=g.length-1;W>=0;--W)if(!hx(C,g[W])){const ne=g[W];let ge=v[W];ge=(0,an.m9)(ge);const Be=d.ca(ne);if(ge instanceof Yv)C.push(ne);else{const He=jf(ge,Be);null!=He&&(C.push(ne),A.set(ne,He))}}const N=new Ti(C);return new ox(A,N,d.fieldTransforms)}function lx(n,e,t,r=!1){return jf(t,n.da(r?4:3,e))}function jf(n,e){if(dx(n=(0,an.m9)(n)))return MA("Unsupported field value:",e,n),cx(n,e);if(n instanceof Bf)return function(t,r){if(!ax(r.sa))throw r.ha(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r.ha(`${t._methodName}() is not currently supported inside arrays`);const o=t._toFieldTransform(r);o&&r.fieldTransforms.push(o)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.oa&&4!==e.sa)throw e.ha("Nested arrays are not supported");return function(t,r){const o=[];let u=0;for(const d of t){let g=jf(d,r.aa(u));null==g&&(g={nullValue:"NULL_VALUE"}),o.push(g),u++}return{arrayValue:{values:o}}}(n,e)}return function(t,r){if(null===(t=(0,an.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return uI(r.yt,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const o=kn.fromDate(t);return{timestampValue:Cd(r.yt,o)}}if(t instanceof kn){const o=new kn(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cd(r.yt,o)}}if(t instanceof eD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof $u)return{bytesValue:Bb(r.yt,t._byteString)};if(t instanceof cr){const o=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(o))throw r.ha(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:mv(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r.ha(`Unsupported field value: ${KI(t)}`)}(n,e)}function cx(n,e){const t={};return $_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Fa(n,(r,o)=>{const u=jf(o,e.ra(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function dx(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof kn||n instanceof eD||n instanceof $u||n instanceof cr||n instanceof Bf)}function MA(n,e,t){if(!dx(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=KI(t);throw e.ha("an object"===r?n+" a custom object":n+" "+r)}var r}function xA(n,e,t){if((e=(0,an.m9)(e))instanceof Yl)return e._internalPath;if("string"==typeof e)return rD(n,e);throw iD("Field path arguments must be of type string or ",n,!1,void 0,t)}const M1=new RegExp("[~\\*/\\[\\]]");function rD(n,e,t){if(e.search(M1)>=0)throw iD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yl(...e.split("."))._internalPath}catch{throw iD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function iD(n,e,t,r,o){const u=r&&!r.isEmpty(),d=void 0!==o;let g=`Function ${e}() called with invalid data`;t&&(g+=" (via `toFirestore()`)"),g+=". ";let v="";return(u||d)&&(v+=" (found",u&&(v+=` in field ${r}`),d&&(v+=` in document ${o}`),v+=")"),new Fe(ue.INVALID_ARGUMENT,g+n+v)}function hx(n,e){return n.some(t=>t.isEqual(e))}class Qv{constructor(e,t,r,o,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new cr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new x1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(sD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class x1 extends Qv{data(){return super.data()}}function sD(n,e){return"string"==typeof e?rD(n,e):e instanceof Yl?e._internalPath:e._delegate._internalPath}function fx(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Fe(ue.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class RA{}class Jv extends RA{}function Pd(n,e,...t){let r=[];e instanceof RA&&r.push(e),r=r.concat(t),function(o){const u=o.filter(g=>g instanceof Am).length,d=o.filter(g=>g instanceof Xv).length;if(u>1||u>0&&d>0)throw new Fe(ue.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const o of r)n=o._apply(n);return n}class Xv extends Jv{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Xv(e,t,r)}_apply(e){const t=this._parse(e);return yx(e._query,t),new Si(e.firestore,e.converter,tv(e._query,t))}_parse(e){const t=$f(e.firestore);return function(o,u,d,g,v,C,A){let N;if(v.isKeyField()){if("array-contains"===C||"array-contains-any"===C)throw new Fe(ue.INVALID_ARGUMENT,`Invalid Query. You can't perform '${C}' queries on documentId().`);if("in"===C||"not-in"===C){mx(A,C);const W=[];for(const ne of A)W.push(gx(g,o,ne));N={arrayValue:{values:W}}}else N=gx(g,o,A)}else"in"!==C&&"not-in"!==C&&"array-contains-any"!==C||mx(A,C),N=lx(d,"where",A,"in"===C||"not-in"===C);return rn.create(v,C,N)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Am extends RA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Am(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:bn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,o){let u=r;const d=o.getFlattenedFilters();for(const g of d)yx(u,g),u=tv(u,g)}(e._query,t),new Si(e.firestore,e.converter,tv(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class NA extends Jv{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new NA(e,t)}_apply(e){const t=function(r,o,u){if(null!==r.startAt)throw new Fe(ue.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Fe(ue.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const d=new Vl(o,u);return function(g,v){if(null===X_(g)){const C=Tf(g);null!==C&&_x(0,C,v.field)}}(r,d),d}(e._query,this._field,this._direction);return new Si(e.firestore,e.converter,function(r,o){const u=r.explicitOrderBy.concat([o]);return new $o(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class oD extends Jv{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new oD(e,t,r)}_apply(e){return new Si(e.firestore,e.converter,zg(e._query,this._limit,this._limitType))}}class aD extends Jv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new aD(e,t,r)}_apply(e){const t=px(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(o=t,new $o((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,o,r.endAt)));var r,o}}class uD extends Jv{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new uD(e,t,r)}_apply(e){const t=px(e,this.type,this._docOrFields,this._inclusive);return new Si(e.firestore,e.converter,(o=t,new $o((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,o)));var r,o}}function px(n,e,t,r){if(t[0]=(0,an.m9)(t[0]),t[0]instanceof Qv)return function(o,u,d,g,v){if(!g)throw new Fe(ue.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${d}().`);const C=[];for(const A of Dr(o))if(A.field.isKeyField())C.push(Fl(u,g.key));else{const N=g.data.field(A.field);if(Ug(N))throw new Fe(ue.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+A.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===N){const W=A.field.canonicalString();throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${W}' (used as the orderBy) does not exist.`)}C.push(N)}return new Ou(C,v)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const o=$f(n.firestore);return function(u,d,g,v,C,A){const N=u.explicitOrderBy;if(C.length>N.length)throw new Fe(ue.INVALID_ARGUMENT,`Too many arguments provided to ${v}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const W=[];for(let ne=0;ne<C.length;ne++){const ge=C[ne];if(N[ne].field.isKeyField()){if("string"!=typeof ge)throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${v}(), but got a ${typeof ge}`);if(!ev(u)&&-1!==ge.indexOf("/"))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${v}() must be a plain document ID, but '${ge}' contains a slash.`);const Be=u.path.child(un.fromString(ge));if(!qe.isDocumentKey(Be))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${v}() must result in a valid document path, but '${Be}' is not because it contains an odd number of segments.`);const He=new qe(Be);W.push(Fl(d,He))}else{const Be=lx(g,v,ge);W.push(Be)}}return new Ou(W,A)}(n._query,n.firestore._databaseId,o,e,t,r)}}function gx(n,e,t){if("string"==typeof(t=(0,an.m9)(t))){if(""===t)throw new Fe(ue.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ev(e)&&-1!==t.indexOf("/"))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(un.fromString(t));if(!qe.isDocumentKey(r))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Fl(n,new qe(r))}if(t instanceof cr)return Fl(n,t._key);throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${KI(t)}.`)}function mx(n,e){if(!Array.isArray(n)||0===n.length)throw new Fe(ue.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(n.length>10)throw new Fe(ue.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function yx(n,e){if(e.isInequality()){const r=Tf(n),o=e.field;if(null!==r&&!r.isEqual(o))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${o.toString()}'`);const u=X_(n);null!==u&&_x(0,o,u)}const t=function(r,o){for(const u of r)for(const d of u.getFlattenedFilters())if(o.indexOf(d.op)>=0)return d.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Fe(ue.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function _x(n,e,t){if(!t.isEqual(e))throw new Fe(ue.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class OA{convertValue(e,t="none"){switch(kl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ar(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(dd(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw ot()}}convertObject(e,t){const r={};return Fa(e.fields,(o,u)=>{r[o]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new eD(ar(e.latitude),ar(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=zE(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ef(e));default:return null}}convertTimestamp(e){const t=xu(e);return new kn(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=un.fromString(e);vt(Ua(r));const o=new Mu(r.get(1),r.get(3)),u=new qe(r.popFirst(5));return o.isEqual(t)||Hn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function lD(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class U1 extends OA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}class Hf{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Ql extends Qv{constructor(e,t,r,o,u,d){super(e,t,r,o,d),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new e0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(sD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class e0 extends Ql{data(e={}){return super.data(e)}}class kd{constructor(e,t,r,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new Hf(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new e0(this._firestore,this._userDataWriter,r.key,r,new Hf(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Fe(ue.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,o){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(d=>({type:"added",doc:new e0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Hf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(d=>o||3!==d.type).map(d=>{const g=new e0(r._firestore,r._userDataWriter,d.doc.key,d.doc,new Hf(r._snapshot.mutatedKeys.has(d.doc.key),r._snapshot.fromCache),r.query.converter);let v=-1,C=-1;return 0!==d.type&&(v=u.indexOf(d.doc.key),u=u.delete(d.doc.key)),1!==d.type&&(u=u.add(d.doc),C=u.indexOf(d.doc.key)),{type:B1(d.type),doc:g,oldIndex:v,newIndex:C}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function B1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot()}}function wx(n,e){return n instanceof Ql&&e instanceof Ql?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof kd&&e instanceof kd&&n._firestore===e._firestore&&mA(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Fd extends OA{constructor(e){super(),this.firestore=e}convertBytes(e){return new $u(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new cr(this.firestore,null,t)}}function Ex(n,e,t){n=ln(n,cr);const r=ln(n.firestore,dr),o=lD(n.converter,e,t);return Sm(r,[nD($f(r),"setDoc",n._key,o,null!==n.converter,t).toMutation(n._key,lr.none())])}function Ix(n,e,t,...r){n=ln(n,cr);const o=ln(n.firestore,dr),u=$f(o);let d;return d="string"==typeof(e=(0,an.m9)(e))||e instanceof Yl?SA(u,"updateDoc",n._key,e,t,r):AA(u,"updateDoc",n._key,e),Sm(o,[d.toMutation(n._key,lr.exists(!0))])}function Dx(n,...e){var t,r,o;n=(0,an.m9)(n);let u={includeMetadataChanges:!1},d=0;"object"!=typeof e[d]||bA(e[d])||(u=e[d],d++);const g={includeMetadataChanges:u.includeMetadataChanges};if(bA(e[d])){const N=e[d];e[d]=null===(t=N.next)||void 0===t?void 0:t.bind(N),e[d+1]=null===(r=N.error)||void 0===r?void 0:r.bind(N),e[d+2]=null===(o=N.complete)||void 0===o?void 0:o.bind(N)}let v,C,A;if(n instanceof cr)C=ln(n.firestore,dr),A=Bl(n._key.path),v={next:N=>{e[d]&&e[d](PA(C,n,N))},error:e[d+1],complete:e[d+2]};else{const N=ln(n,Si);C=ln(N.firestore,dr),A=N._query;const W=new Fd(C);v={next:ne=>{e[d]&&e[d](new kd(C,W,N,ne))},error:e[d+1],complete:e[d+2]},fx(n._query)}return function(N,W,ne,ge){const Be=new QI(ge),He=new jT(W,Be,ne);return N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return LT(yield Tm(N),He)})),()=>{Be.bc(),N.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return UT(yield Tm(N),He)}))}}(Ur(C),A,g,v)}function Sm(n,e){return function(t,r){const o=new or;return t.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function PN(n,e,t){return qT.apply(this,arguments)}(yield DA(t),r,o)})),o.promise}(Ur(n),e)}function PA(n,e,t){const r=t.docs.get(e._key),o=new Fd(n);return new Ql(n,o,e._key,r,new Hf(t.hasPendingWrites,t.fromCache),e.converter)}const Y1={maxAttempts:5};class Cx{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=$f(e)}set(e,t,r){this._verifyNotCommitted();const o=Ld(e,this._firestore),u=lD(o.converter,t,r),d=nD(this._dataReader,"WriteBatch.set",o._key,u,null!==o.converter,r);return this._mutations.push(d.toMutation(o._key,lr.none())),this}update(e,t,r,...o){this._verifyNotCommitted();const u=Ld(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Yl?SA(this._dataReader,"WriteBatch.update",u._key,t,r,o):AA(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(d.toMutation(u._key,lr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Ld(e,this._firestore);return this._mutations=this._mutations.concat(new Hl(t._key,lr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Fe(ue.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Ld(n,e){if((n=(0,an.m9)(n)).firestore!==e)throw new Fe(ue.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class Q1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=$f(e)}get(e){const t=Ld(e,this._firestore),r=new U1(this._firestore);return this._transaction.lookup([t._key]).then(o=>{if(!o||1!==o.length)return ot();const u=o[0];if(u.isFoundDocument())return new Qv(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Qv(this._firestore,r,t._key,null,t.converter);throw ot()})}set(e,t,r){const o=Ld(e,this._firestore),u=lD(o.converter,t,r),d=nD(this._dataReader,"Transaction.set",o._key,u,null!==o.converter,r);return this._transaction.set(o._key,d),this}update(e,t,r,...o){const u=Ld(e,this._firestore);let d;return d="string"==typeof(t=(0,an.m9)(t))||t instanceof Yl?SA(this._dataReader,"Transaction.update",u._key,t,r,o):AA(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,d),this}delete(e){const t=Ld(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Ld(e,this._firestore),r=new Fd(this._firestore);return super.get(e).then(o=>new Ql(this._firestore,r,t._key,o._document,new Hf(!1,!1),t.converter))}}function kA(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Fe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Tx(){if(typeof Uint8Array>"u")throw new Fe("unimplemented","Uint8Arrays are not available in this environment.")}function Ax(){if(!function Eb(){return typeof atob<"u"}())throw new Fe("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Rl=Sa.SDK_VERSION,(0,Sa._registerComponent)(new Bp.wA("firestore",(t,{instanceIdentifier:r,options:o})=>{const u=t.getProvider("app").getImmediate(),d=new dr(new kE(t.getProvider("auth-internal")),new N_(t.getProvider("app-check-internal")),function(g,v){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new Fe(ue.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Mu(g.options.projectId,v)}(u,r),u);return o=Object.assign({useFetchStreams:e},o),d._setSettings(o),d},"PUBLIC").setMultipleInstances(!0)),(0,Sa.registerVersion)(pb,"3.8.3",n),(0,Sa.registerVersion)(pb,"3.8.3","esm2017")}();class t0{constructor(e){this._delegate=e}static fromBase64String(e){return Ax(),new t0($u.fromBase64String(e))}static fromUint8Array(e){return Tx(),new t0($u.fromUint8Array(e))}toBase64(){return Ax(),this._delegate.toBase64()}toUint8Array(){return Tx(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function FA(n){return function oO(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class aO{enableIndexedDbPersistence(e,t){return function g1(n,e){sx(n=ln(n,dr));const t=Ur(n),r=n._freezeSettings(),o=new pA;return ix(t,o,new BM(o,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function m1(n){sx(n=ln(n,dr));const e=Ur(n),t=n._freezeSettings(),r=new pA;return ix(e,r,new YN(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function y1(n){if(n._initialized&&!n._terminated)throw new Fe(ue.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new or;return n._queue.enqueueAndForgetEvenWhileRestricted((0,Ie.Z)(function*(){try{yield(t=(0,Ie.Z)(function*(r){if(!Ys.C())return Promise.resolve();const o=r+"main";yield Ys.delete(o)}),function(r){return t.apply(this,arguments)})(aT(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Sx{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Mu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&Nl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){qM(this._delegate,e,t,r)}enableNetwork(){return function v1(n){return function i1(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield XM(n),t=yield IA(n);return e.setNetworkEnabled(!0),function(r){const o=Ke(r);return o._u.delete(0),qv(o)}(t)}))}(Ur(n=ln(n,dr)))}(this._delegate)}disableNetwork(){return function w1(n){return function s1(n){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){const e=yield XM(n),t=yield IA(n);return e.setNetworkEnabled(!1),(r=(0,Ie.Z)(function*(o){const u=Ke(o);u._u.add(0),yield vm(u),u.gu.set("Offline")}),function(o){return r.apply(this,arguments)})(t);var r}))}(Ur(n=ln(n,dr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,$M("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function _1(n){return function(e){const t=new or;return e.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return function VN(n,e){return JT.apply(this,arguments)}(yield DA(e),t)})),t.promise}(Ur(n=ln(n,dr)))}(this._delegate)}onSnapshotsInSync(e){return function K1(n,e){return function u1(n,e){const t=new QI(e);return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Tm(n),o=t,Ke(r).Ru.add(o),void o.next();var r,o})),()=>{t.bc(),n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return r=yield Tm(n),o=t,void Ke(r).Ru.delete(o);var r,o}))}}(Ur(n=ln(n,dr)),bA(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Fe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Mm(this,ZM(this._delegate,e))}catch(t){throw rs(t,"collection()","Firestore.collection()")}}doc(e){try{return new zo(this,YI(this._delegate,e))}catch(t){throw rs(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new is(this,function QN(n,e){if(n=ln(n,Kv),gA("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Fe(ue.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Si(n,null,(t=e,new $o(un.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw rs(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function J1(n,e,t){n=ln(n,dr);const r=Object.assign(Object.assign({},Y1),t);return function(o){if(o.maxAttempts<1)throw new Fe(ue.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(o,u,d){const g=new or;return o.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){const v=yield function ex(n){return JI(n).then(e=>e.datastore)}(o);new n1(o.asyncQueue,v,d,u,g).run()})),g.promise}(Ur(n),o=>e(new Q1(n,o)),r)}(this._delegate,t=>e(new Mx(this,t)))}batch(){return Ur(this._delegate),new xx(new Cx(this._delegate,e=>Sm(this._delegate,e)))}loadBundle(e){return function E1(n,e){const t=Ur(n=ln(n,dr)),r=new h1;return function l1(n,e,t,r){const o=function(u,d){let g;return g="string"==typeof u?(new TextEncoder).encode(u):u,v=function(v,C){if(v instanceof Uint8Array)return YM(v,C);if(v instanceof ArrayBuffer)return YM(new Uint8Array(v),C);if(v instanceof ReadableStream)return v.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(g),new JN(v,d);var v}(t,zv(e));n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){!function KN(n,e,t){const r=Ke(n);var o;(o=(0,Ie.Z)(function*(u,d,g){try{const v=yield d.getMetadata();if(yield function(W,ne){const ge=Ke(W),Be=xr(ne.createTime);return ge.persistence.runTransaction("hasNewerBundle","readonly",He=>ge.Ns.getBundleMetadata(He,ne.id)).then(He=>!!He&&He.createTime.compareTo(Be)>=0)}(u.localStore,v))return yield d.close(),g._completeWith({taskState:"Success",documentsLoaded:(W=v).totalDocuments,bytesLoaded:W.totalBytes,totalDocuments:W.totalDocuments,totalBytes:W.totalBytes}),Promise.resolve(new Set);g._updateProgress(xM(v));const C=new SN(v,u.localStore,d.yt);let A=yield d.mc();for(;A;){const W=yield C.Fu(A);W&&g._updateProgress(W),A=yield d.mc()}const N=yield C.complete();return yield Kl(u,N.Lu,void 0),yield function(W,ne){const ge=Ke(W);return ge.persistence.runTransaction("Save bundle","readwrite",Be=>ge.Ns.saveBundleMetadata(Be,ne))}(u.localStore,v),g._completeWith(N.progress),Promise.resolve(N.Bu)}catch(v){return Nl("SyncEngine",`Loading bundle failed with ${v}`),g._failWith(v),Promise.resolve(new Set)}var W}),function(u,d,g){return o.apply(this,arguments)})(r,e,t).then(o=>{r.sharedClientState.notifyBundleLoaded(o)})}(yield DA(n),o,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function I1(n,e){return function c1(n,e){return n.asyncQueue.enqueue((0,Ie.Z)(function*(){return function(t,r){const o=Ke(t);return o.persistence.runTransaction("Get named query","readonly",u=>o.Ns.getNamedQuery(u,r))}(yield XI(n),e)}))}(Ur(n=ln(n,dr)),e).then(t=>t?new Si(n,null,t.query):null)}(this._delegate,e).then(t=>t?new is(this,t):null)}}class cD extends OA{constructor(e){super(),this.firestore=e}convertBytes(e){return new t0(new $u(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return zo.forKey(t,this.firestore,null)}}class Mx{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}get(e){const t=Wf(e);return this._delegate.get(t).then(r=>new n0(this._firestore,new Ql(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const o=Wf(e);return r?(kA("Transaction.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Wf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}}class xx{constructor(e){this._delegate=e}set(e,t,r){const o=Wf(e);return r?(kA("WriteBatch.set",r),this._delegate.set(o,t,r)):this._delegate.set(o,t),this}update(e,t,r,...o){const u=Wf(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...o),this}delete(e){const t=Wf(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Gf{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new e0(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new r0(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Gf.INSTANCES;let o=r.get(e);o||(o=new WeakMap,r.set(e,o));let u=o.get(t);return u||(u=new Gf(e,new cD(e),t),o.set(t,u)),u}}Gf.INSTANCES=new WeakMap;class zo{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Fe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new zo(t,new cr(t._delegate,r,new qe(e)))}static forKey(e,t,r){return new zo(t,new cr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Mm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Mm(this.firestore,ZM(this._delegate,e))}catch(t){throw rs(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,an.m9)(e))instanceof cr&&KM(this._delegate,e)}set(e,t){t=kA("DocumentReference.set",t);try{return t?Ex(this._delegate,e,t):Ex(this._delegate,e)}catch(r){throw rs(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?Ix(this._delegate,e):Ix(this._delegate,e,t,...r)}catch(o){throw rs(o,"updateDoc()","DocumentReference.update()")}}delete(){return function q1(n){return Sm(ln(n.firestore,dr),[new Hl(n._key,lr.none())])}(this._delegate)}onSnapshot(...e){const t=Rx(e),r=Nx(e,o=>new n0(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,o._key,o._document,o.metadata,this._delegate.converter)));return Dx(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function j1(n){n=ln(n,cr);const e=ln(n.firestore,dr),t=Ur(e),r=new Fd(e);return function o1(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield function(v,C){const A=Ke(v);return A.persistence.runTransaction("read document","readonly",N=>A.localDocuments.getDocument(N,C))}(o,u);g.isFoundDocument()?d.resolve(g):g.isNoDocument()?d.resolve(null):d.reject(new Fe(ue.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(g){const v=Im(g,`Failed to get document '${u} from cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield XI(n),e,t);var r})),t.promise}(t,n._key).then(o=>new Ql(e,r,n._key,o,new Hf(null!==o&&o.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function H1(n){n=ln(n,cr);const e=ln(n.firestore,dr);return tx(Ur(e),n._key,{source:"server"}).then(t=>PA(e,n,t))}(this._delegate):function $1(n){n=ln(n,cr);const e=ln(n.firestore,dr);return tx(Ur(e),n._key).then(t=>PA(e,n,t))}(this._delegate),t.then(r=>new n0(this.firestore,new Ql(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new zo(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function rs(n,e,t){return n.message=n.message.replace(e,t),n}function Rx(n){for(const e of n)if("object"==typeof e&&!FA(e))return e;return{}}function Nx(n,e){var t,r;let o;return o=FA(n[0])?n[0]:FA(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{o.next&&o.next(e(u))},error:null===(t=o.error)||void 0===t?void 0:t.bind(o),complete:null===(r=o.complete)||void 0===r?void 0:r.bind(o)}}class n0{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new zo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return wx(this._delegate,e._delegate)}}class r0 extends n0{data(e){const t=this._delegate.data(e);return function mb(n,e){n||ot()}(void 0!==t),t}}class is{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new cD(e)}where(e,t,r){try{return new is(this.firestore,Pd(this._delegate,function R1(n,e,t){const r=e,o=sD("where",n);return Xv._create(o,r,t)}(e,t,r)))}catch(o){throw rs(o,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new is(this.firestore,Pd(this._delegate,function N1(n,e="asc"){const t=e,r=sD("orderBy",n);return NA._create(r,t)}(e,t)))}catch(r){throw rs(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new is(this.firestore,Pd(this._delegate,function O1(n){return GM("limit",n),oD._create("limit",n,"F")}(e)))}catch(t){throw rs(t,"limit()","Query.limit()")}}limitToLast(e){try{return new is(this.firestore,Pd(this._delegate,function P1(n){return GM("limitToLast",n),oD._create("limitToLast",n,"L")}(e)))}catch(t){throw rs(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new is(this.firestore,Pd(this._delegate,function k1(...n){return aD._create("startAt",n,!0)}(...e)))}catch(t){throw rs(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new is(this.firestore,Pd(this._delegate,function F1(...n){return aD._create("startAfter",n,!1)}(...e)))}catch(t){throw rs(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new is(this.firestore,Pd(this._delegate,function L1(...n){return uD._create("endBefore",n,!1)}(...e)))}catch(t){throw rs(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new is(this.firestore,Pd(this._delegate,function V1(...n){return uD._create("endAt",n,!0)}(...e)))}catch(t){throw rs(t,"endAt()","Query.endAt()")}}isEqual(e){return mA(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function W1(n){n=ln(n,Si);const e=ln(n.firestore,dr),t=Ur(e),r=new Fd(e);return function a1(n,e){const t=new or;return n.asyncQueue.enqueueAndForget((0,Ie.Z)(function*(){return(r=(0,Ie.Z)(function*(o,u,d){try{const g=yield HI(o,u,!0),v=new OM(u,g.Hi),C=v.Wu(g.documents),A=v.applyChanges(C,!1);d.resolve(A.snapshot)}catch(g){const v=Im(g,`Failed to execute query '${u} against cache`);d.reject(v)}}),function(o,u,d){return r.apply(this,arguments)})(yield XI(n),e,t);var r})),t.promise}(t,n._query).then(o=>new kd(e,r,n,o))}(this._delegate):"server"===e?.source?function z1(n){n=ln(n,Si);const e=ln(n.firestore,dr),t=Ur(e),r=new Fd(e);return nx(t,n._query,{source:"server"}).then(o=>new kd(e,r,n,o))}(this._delegate):function G1(n){n=ln(n,Si);const e=ln(n.firestore,dr),t=Ur(e),r=new Fd(e);return fx(n._query),nx(t,n._query).then(o=>new kd(e,r,n,o))}(this._delegate),t.then(r=>new LA(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Rx(e),r=Nx(e,o=>new LA(this.firestore,new kd(this.firestore._delegate,this._userDataWriter,this._delegate,o._snapshot)));return Dx(this._delegate,t,r)}withConverter(e){return new is(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}class lO{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new r0(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class LA{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new is(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new r0(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new lO(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new r0(this._firestore,r))})}isEqual(e){return wx(this._delegate,e._delegate)}}class Mm extends is{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new zo(this.firestore,e):null}doc(e){try{return new zo(this.firestore,void 0===e?YI(this._delegate):YI(this._delegate,e))}catch(t){throw rs(t,"doc()","CollectionReference.doc()")}}add(e){return function Z1(n,e){const t=ln(n.firestore,dr),r=YI(n),o=lD(n.converter,e);return Sm(t,[nD($f(n.firestore),"addDoc",r._key,o,null!==n.converter,{}).toMutation(r._key,lr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new zo(this.firestore,t))}isEqual(e){return KM(this._delegate,e._delegate)}withConverter(e){return new Mm(this.firestore,this._delegate.withConverter(e?Gf.getInstance(this.firestore,e):null))}}function Wf(n){return ln(n,cr)}class VA{constructor(...e){this._delegate=new Yl(...e)}static documentId(){return new VA(mr.keyField().canonicalString())}isEqual(e){return(e=(0,an.m9)(e))instanceof Yl&&this._delegate._internalPath.isEqual(e._internalPath)}}class zf{constructor(e){this._delegate=e}static serverTimestamp(){const e=function eO(){return new TA("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new zf(e)}static delete(){const e=function X1(){return new Yv("deleteField")}();return e._methodName="FieldValue.delete",new zf(e)}static arrayUnion(...e){const t=function tO(...n){return new T1("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new zf(t)}static arrayRemove(...e){const t=function nO(...n){return new A1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new zf(t)}static increment(e){const t=function rO(n){return new S1("increment",n)}(e);return t._methodName="FieldValue.increment",new zf(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const cO={Firestore:Sx,GeoPoint:eD,Timestamp:kn,Blob:t0,Transaction:Mx,WriteBatch:xx,DocumentReference:zo,DocumentSnapshot:n0,Query:is,QueryDocumentSnapshot:r0,QuerySnapshot:LA,CollectionReference:Mm,FieldPath:VA,FieldValue:zf,setLogLevel:function uO(n){!function gb(n){Ks.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function Ox(n,e){return function fO(n,e=Ow.z){return new Pr.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function UA(n,e){return Ox(n,e).pipe((0,ft.U)(t=>({payload:t,type:"query"})))}function dD(n,e){return UA(n,e).pipe($s(void 0),lg(),(0,ft.U)(([t,r])=>{const o=r.payload.docChanges(),u=o.map(d=>({type:d.type,payload:d}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((d,g)=>{const v=o.find(A=>A.doc.ref.isEqual(d.ref)),C=t?.payload.docs.find(A=>A.ref.isEqual(d.ref));v&&JSON.stringify(v.doc.metadata)===JSON.stringify(d.metadata)||!v&&C&&JSON.stringify(C.metadata)===JSON.stringify(d.metadata)||u.push({type:"modified",payload:{oldIndex:g,newIndex:g,type:"modified",doc:d}})}),u}))}function Px(n,e,t){return dD(n,t).pipe(_t((r,o)=>function gO(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function mO(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return BA(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return BA(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return BA(n,e.oldIndex,1)}return n}(n,r))}),n}(r,o.map(u=>u.payload),e),[]),function Pw(n,e=Fs.y){return n=n??kw,(0,Rn.e)((t,r)=>{let o,u=!0;t.subscribe((0,pr.x)(r,d=>{const g=e(d);(u||!n(o,g))&&(u=!1,o=g,r.next(d))}))})}(),(0,ft.U)(r=>r.map(o=>({type:o.type,payload:o}))))}function BA(n,e,t,...r){const o=n.slice();return o.splice(e,t,...r),o}function kx(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function hO(n){(function dO(n,e){n.INTERNAL.registerComponent(new Bp.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),o=t.getProvider("firestore").getImmediate();return e(r,o)},"PUBLIC").setServiceProps(Object.assign({},cO)))})(n,(e,t)=>new Sx(e,t,new aO)),n.registerVersion("@firebase/firestore-compat","0.3.3")}(Ra.Z);class Fx{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dD(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,ft.U)(r=>r.filter(o=>e.indexOf(o.type)>-1)))),t.pipe($s(void 0),lg(),di(([r,o])=>o.length>0||!r),(0,ft.U)(([r,o])=>o),vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(_t((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kx(e);return Px(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return UA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),vn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(vn.iC)}add(e){return this.ref.add(e)}doc(e){return new Lx(this.ref.doc(e),this.afs)}}class Lx{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:o,query:u}=Vx(r,t);return new Fx(o,u,this.afs)}snapshotChanges(){return function pO(n,e){return Ox(n,e).pipe($s(void 0),lg(),(0,ft.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,ft.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,dn.D)(this.ref.get(e)).pipe(vn.iC)}}class yO{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dD(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),di(t=>t.length>0),vn.iC):dD(this.query,this.afs.schedulers.outsideAngular).pipe(vn.iC)}auditTrail(e){return this.stateChanges(e).pipe(_t((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=kx(e);return Px(this.query,t,this.afs.schedulers.outsideAngular).pipe(vn.iC)}valueChanges(e={}){return UA(this.query,this.afs.schedulers.outsideAngular).pipe((0,ft.U)(r=>r.payload.docs.map(o=>e.idField?Object.assign({[e.idField]:o.id},o.data()):o.data())),vn.iC)}get(e){return(0,dn.D)(this.query.get(e)).pipe(vn.iC)}}const _O=new h.OlP("angularfire2.enableFirestorePersistence"),vO=new h.OlP("angularfire2.firestore.persistenceSettings"),wO=new h.OlP("angularfire2.firestore.settings"),EO=new h.OlP("angularfire2.firestore.use-emulator");function Vx(n,e=(t=>t)){return{query:e(n),ref:n}}let IO=(()=>{class n{constructor(t,r,o,u,d,g,v,C,A,N,W,ne,ge,Be,He,Zt,Yt){this.schedulers=v;const Wt=(0,No.on)(t,g,r),zt=A;N&&Uh(Wt,g,W,ge,Be,He,ne,Zt),[this.firestore,this.persistenceEnabled$]=(0,No.cc)(`${Wt.name}.firestore`,"AngularFirestore",Wt.name,()=>{const Gt=g.runOutsideAngular(()=>Wt.firestore());if(u&&Gt.settings(u),zt&&Gt.useEmulator(...zt),o&&!io(d)){const tn=()=>{try{return(0,dn.D)(Gt.enablePersistence(C||void 0).then(()=>!0,()=>!1))}catch(ri){return typeof console<"u"&&console.warn(ri),ct(!1)}};return[Gt,g.runOutsideAngular(tn)]}return[Gt,ct(!1)]},[u,zt,o])}collection(t,r){let o;o="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:d}=Vx(o,r),g=this.schedulers.ngZone.run(()=>u);return new Fx(g,d,this)}collectionGroup(t,r){const o=r||(d=>d),u=this.firestore.collectionGroup(t);return new yO(o(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const o=this.schedulers.ngZone.run(()=>r);return new Lx(o,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(No.Dh),h.LFG(No.xv,8),h.LFG(_O,8),h.LFG(wO,8),h.LFG(h.Lbi),h.LFG(h.R0b),h.LFG(vn.HU),h.LFG(vO,8),h.LFG(EO,8),h.LFG(Rw,8),h.LFG(Sw,8),h.LFG(og,8),h.LFG(Mw,8),h.LFG(xw,8),h.LFG(Vh,8),h.LFG(ag,8),h.LFG(Lh,8))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),DO=(()=>{class n{constructor(t){this.afs=t}addStudent(t){return t.id=this.afs.createId(),this.afs.collection("/Students").add(t)}getAllStudents(){return this.afs.collection("/Students").snapshotChanges()}deleteStudent(t){return this.afs.doc("Students/"+t.id).delete()}updateStudent(t){this.deleteStudent(t),this.addStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(IO))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Ux=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=o=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq))},n.\u0275dir=h.lG2({type:n}),n})(),qf=(()=>{class n extends Ux{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=h.n5z(n)))(r||n)}}(),n.\u0275dir=h.lG2({type:n,features:[h.qOj]}),n})();const ju=new h.OlP("NgValueAccessor"),TO={provide:ju,useExisting:(0,h.Gpc)(()=>Zf),multi:!0},SO=new h.OlP("CompositionEventMode");let Zf=(()=>{class n extends Ux{constructor(t,r,o){super(t,r),this._compositionMode=o,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function AO(){const n=O()?O().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(h.Qsj),h.Y36(h.SBq),h.Y36(SO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&h.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[h._Bn([TO]),h.qOj]}),n})();const Ui=new h.OlP("NgValidators"),Ud=new h.OlP("NgAsyncValidators");function Yx(n){return null!=n}function Qx(n){return(0,h.QGY)(n)?(0,dn.D)(n):n}function Jx(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Xx(n,e){return e.map(t=>t(n))}function eR(n){return n.map(e=>function RO(n){return!n.validate}(e)?e:t=>e.validate(t))}function $A(n){return null!=n?function tR(n){if(!n)return null;const e=n.filter(Yx);return 0==e.length?null:function(t){return Jx(Xx(t,e))}}(eR(n)):null}function jA(n){return null!=n?function nR(n){if(!n)return null;const e=n.filter(Yx);return 0==e.length?null:function(t){return function CO(...n){const e=(0,Yi.jO)(n),{args:t,keys:r}=fs(n),o=new Pr.y(u=>{const{length:d}=t;if(!d)return void u.complete();const g=new Array(d);let v=d,C=d;for(let A=0;A<d;A++){let N=!1;(0,Ls.Xf)(t[A]).subscribe((0,pr.x)(u,W=>{N||(N=!0,C--),g[A]=W},()=>v--,void 0,()=>{(!v||!N)&&(C||u.next(r?ga(r,g):g),u.complete())}))}});return e?o.pipe(ru(e)):o}(Xx(t,e).map(Qx)).pipe((0,ft.U)(Jx))}}(eR(n)):null}function rR(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HA(n){return n?Array.isArray(n)?n:[n]:[]}function fD(n,e){return Array.isArray(n)?n.includes(e):n===e}function oR(n,e){const t=HA(e);return HA(n).forEach(o=>{fD(t,o)||t.push(o)}),t}function aR(n,e){return HA(e).filter(t=>!fD(n,t))}class uR{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=$A(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=jA(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class ss extends uR{get formDirective(){return null}get path(){return null}}class Bd extends uR{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class lR{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let s0=(()=>{class n extends lR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Bd,2))},n.\u0275dir=h.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[h.qOj]}),n})(),o0=(()=>{class n extends lR{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ss,10))},n.\u0275dir=h.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&h.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[h.qOj]}),n})();const a0="VALID",gD="INVALID",xm="PENDING",u0="DISABLED";function qA(n){return(mD(n)?n.validators:n)||null}function dR(n){return Array.isArray(n)?$A(n):n||null}function ZA(n,e){return(mD(e)?e.asyncValidators:n)||null}function hR(n){return Array.isArray(n)?jA(n):n||null}function mD(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class gR{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=dR(this._rawValidators),this._composedAsyncValidatorFn=hR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===a0}get invalid(){return this.status===gD}get pending(){return this.status==xm}get disabled(){return this.status===u0}get enabled(){return this.status!==u0}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=dR(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=hR(e)}addValidators(e){this.setValidators(oR(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(oR(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(aR(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(aR(e,this._rawAsyncValidators))}hasValidator(e){return fD(this._rawValidators,e)}hasAsyncValidator(e){return fD(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=xm,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=u0,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=a0,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===a0||this.status===xm)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?u0:a0}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=xm,this._hasOwnPendingAsyncValidator=!0;const t=Qx(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,o)=>r&&r._find(o),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new h.vpe,this.statusChanges=new h.vpe}_calculateStatus(){return this._allControlsDisabled()?u0:this.errors?gD:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xm)?xm:this._anyControlsHaveStatus(gD)?gD:a0}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){mD(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class KA extends gR{constructor(e,t,r){super(qA(t),ZA(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function pR(n,e,t){n._forEachChild((r,o)=>{if(void 0===t[o])throw new h.vHH(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function fR(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new h.vHH(1e3,"");if(!r[t])throw new h.vHH(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,o)=>{r.reset(e[o],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,o)=>((r.enabled||this.disabled)&&(t[o]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((o,u)=>{r=t(r,o,u)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}function l0(n,e){YA(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function BO(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&mR(n,e)})}(n,e),function jO(n,e){const t=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function $O(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&mR(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function UO(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function vD(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function YA(n,e){const t=function iR(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(rR(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function sR(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(rR(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const o=()=>n.updateValueAndValidity();vD(e._rawValidators,o),vD(e._rawAsyncValidators,o)}function mR(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const qO={provide:ss,useExisting:(0,h.Gpc)(()=>Kf)},c0=(()=>Promise.resolve())();let Kf=(()=>{class n extends ss{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new h.vpe,this.form=new KA({},$A(t),jA(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){c0.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),l0(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){c0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){c0.then(()=>{const r=this._findContainer(t.path),o=new KA({});(function yR(n,e){YA(n,e)})(o,t),r.registerControl(t.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){c0.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){c0.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function vR(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(Ui,10),h.Y36(Ud,10))},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&h.NdJ("submit",function(u){return r.onSubmit(u)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[h._Bn([qO]),h.qOj]}),n})();function wR(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ER(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const IR=class extends gR{constructor(e=null,t,r){super(qA(t),ZA(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),mD(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ER(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){wR(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){wR(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ER(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},YO={provide:Bd,useExisting:(0,h.Gpc)(()=>Rm)},bR=(()=>Promise.resolve())();let Rm=(()=>{class n extends Bd{constructor(t,r,o,u,d){super(),this._changeDetectorRef=d,this.control=new IR,this._registered=!1,this.update=new h.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function JA(n,e){if(!e)return null;let t,r,o;return Array.isArray(e),e.forEach(u=>{u.constructor===Zf?t=u:function WO(n){return Object.getPrototypeOf(n.constructor)===qf}(u)?r=u:o=u}),o||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function QA(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){l0(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){bR.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,o=0!==r&&(0,h.D6c)(r);bR.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function yD(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ss,9),h.Y36(Ui,10),h.Y36(Ud,10),h.Y36(ju,10),h.Y36(h.sBO,8))},n.\u0275dir=h.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[h._Bn([YO]),h.qOj,h.TTD]}),n})(),d0=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=h.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),AR=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({}),n})(),wP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[AR]}),n})(),EP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[wP]}),n})();function DP(n,e){if(1&n){const t=h.EpF();h.TgZ(0,"tr")(1,"td"),h._uU(2),h.qZA(),h.TgZ(3,"td"),h._uU(4),h.qZA(),h.TgZ(5,"td"),h._uU(6),h.qZA(),h.TgZ(7,"td"),h._uU(8),h.qZA(),h.TgZ(9,"td")(10,"button",23),h.NdJ("click",function(){const u=h.CHM(t).$implicit,d=h.oxw();return h.KtG(d.deleteStudent(u))}),h._uU(11,"Delete"),h.qZA()()()}if(2&n){const t=e.$implicit;h.xp6(2),h.Oqu(t.first_name),h.xp6(2),h.Oqu(t.last_name),h.xp6(2),h.Oqu(t.email),h.xp6(2),h.Oqu(t.mobile)}}let CP=(()=>{class n{constructor(t,r){this.auth=t,this.data=r,this.studentsList=[],this.studentObj={id:"",first_name:"",last_name:"",email:"",mobile:""},this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}ngOnInit(){this.getAllStudents()}logout(){this.auth.logout()}getAllStudents(){this.data.getAllStudents().subscribe(t=>{this.studentsList=t.map(r=>{const o=r.payload.doc.data();return o.id=r.payload.doc.id,o})},t=>{alert("Error while fetching student data")})}resetForm(){this.id="",this.first_name="",this.last_name="",this.email="",this.mobile=""}addStudent(){""!=this.first_name&&""!=this.last_name&&""!=this.mobile&&""!=this.email?(this.studentObj.id="",this.studentObj.email=this.email,this.studentObj.first_name=this.first_name,this.studentObj.last_name=this.last_name,this.studentObj.mobile=this.mobile,this.data.addStudent(this.studentObj),this.resetForm()):alert("Fill all input fields")}deleteStudent(t){window.confirm("Are you sure you want to delete "+t.first_name+" "+t.last_name+" ?")&&this.data.deleteStudent(t)}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ug),h.Y36(DO))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-dashboard"]],decls:45,vars:5,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","mt-5"],[1,"card","border-0","shadow","p-3"],[1,"form-floating","mb-3","tetx-center"],[1,"text-center","text-warning"],[1,"form-floating","mb-3"],["type","text","id","firstName","name","firstname",1,"form-control",3,"ngModel","ngModelChange"],["for","firstname"],["type","text","id","lastName","name","lastName",1,"form-control",3,"ngModel","ngModelChange"],["for","lastName"],["type","email","id","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","email"],["type","text","id","mobile","name","mobile",1,"form-control",3,"ngModel","ngModelChange"],["for","mobile"],["type","button",1,"btn","btn-outline-success",3,"click"],[1,"col-md-8","mt-2"],[1,"text-danger"],[1,"card","p-3","shadow"],[1,"card-body"],[1,"table","table-hover"],["scope","col"],[4,"ngFor","ngForOf"],[1,"btn","btn-outline-danger",3,"click"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h5",5),h._uU(6,"Add Student"),h.qZA()(),h.TgZ(7,"div",6)(8,"input",7),h.NdJ("ngModelChange",function(u){return r.first_name=u}),h.qZA(),h.TgZ(9,"label",8),h._uU(10,"First name"),h.qZA()(),h.TgZ(11,"div",6)(12,"input",9),h.NdJ("ngModelChange",function(u){return r.last_name=u}),h.qZA(),h.TgZ(13,"label",10),h._uU(14,"Last name"),h.qZA()(),h.TgZ(15,"div",6)(16,"input",11),h.NdJ("ngModelChange",function(u){return r.email=u}),h.qZA(),h.TgZ(17,"label",12),h._uU(18,"Email address"),h.qZA()(),h.TgZ(19,"div",6)(20,"input",13),h.NdJ("ngModelChange",function(u){return r.mobile=u}),h.qZA(),h.TgZ(21,"label",14),h._uU(22,"Mobile"),h.qZA()(),h.TgZ(23,"button",15),h.NdJ("click",function(){return r.addStudent()}),h._uU(24,"Add Student"),h.qZA()()(),h.TgZ(25,"div",16)(26,"h5",17),h._uU(27," Student List"),h.qZA(),h.TgZ(28,"div",18)(29,"div",19)(30,"table",20)(31,"thead")(32,"tr")(33,"th",21),h._uU(34,"First name"),h.qZA(),h.TgZ(35,"th",21),h._uU(36,"Last name"),h.qZA(),h.TgZ(37,"th",21),h._uU(38,"Email"),h.qZA(),h.TgZ(39,"th",21),h._uU(40,"Mobile"),h.qZA(),h.TgZ(41,"th",21),h._uU(42,"Action"),h.qZA()()(),h.TgZ(43,"tbody"),h.YNc(44,DP,12,4,"tr",22),h.qZA()()()()()()()),2&t&&(h.xp6(8),h.Q6J("ngModel",r.first_name),h.xp6(4),h.Q6J("ngModel",r.last_name),h.xp6(4),h.Q6J("ngModel",r.email),h.xp6(4),h.Q6J("ngModel",r.mobile),h.xp6(24),h.Q6J("ngForOf",r.studentsList))},dependencies:[os,Zf,s0,Rm]}),n})(),bP=(()=>{class n{constructor(t){this.auth=t,this.email=""}ngOnInit(){}forgotPassword(){this.auth.forgotPassword(this.email),this.email=""}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ug))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-forgot-password"]],decls:22,vars:1,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form"),h._UZ(7,"div",6),h.TgZ(8,"h4",7),h._uU(9," Forgot Password "),h.qZA(),h.TgZ(10,"div",6)(11,"label",8),h._uU(12,"Email address"),h.qZA(),h.TgZ(13,"input",9),h.NdJ("ngModelChange",function(u){return r.email=u}),h.qZA()(),h.TgZ(14,"button",10),h.NdJ("click",function(){return r.forgotPassword()}),h._uU(15,"Send Link"),h.qZA(),h.TgZ(16,"div",11)(17,"div",12)(18,"a",13),h._uU(19," Back to login "),h.TgZ(20,"span",14),h._uU(21,"Login"),h.qZA()()()()()()()()()()()),2&t&&(h.xp6(13),h.Q6J("ngModel",r.email))},dependencies:[d0,Zf,s0,o0,Rm,Kf]}),n})(),TP=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}login(){""!=this.email?""!=this.password?(this.auth.login(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}signInWithGoogle(){this.auth.googleSignIn()}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ug))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-login"]],decls:35,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/register",2,"text-decoration","none"],[1,"text-danger"],["href","/forgot-password",1,"text-dark",2,"text-decoration","none"],[1,"row","mt-2"],[2,"text-decoration","none","cursor","pointer",3,"click"],[1,"card","shadow","text-center"],["src","assets/icons8-google-48.png","alt","","height","24px","width","24px"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form"),h._UZ(7,"div",6),h.TgZ(8,"h4",7),h._uU(9," Login "),h.qZA(),h.TgZ(10,"div",6)(11,"label",8),h._uU(12,"Email address"),h.qZA(),h.TgZ(13,"input",9),h.NdJ("ngModelChange",function(u){return r.email=u}),h.qZA()(),h.TgZ(14,"div",6)(15,"label",10),h._uU(16,"Password"),h.qZA(),h.TgZ(17,"input",11),h.NdJ("ngModelChange",function(u){return r.password=u}),h.qZA()(),h.TgZ(18,"button",12),h.NdJ("click",function(){return r.login()}),h._uU(19,"Login"),h.qZA(),h.TgZ(20,"div",13)(21,"div",14)(22,"a",15),h._uU(23," Need Account ? "),h.TgZ(24,"span",16),h._uU(25,"Register"),h.qZA()()(),h.TgZ(26,"div",14)(27,"a",17),h._uU(28,"Forgot Password ?"),h.qZA()()(),h.TgZ(29,"div",18)(30,"a",19),h.NdJ("click",function(){return r.signInWithGoogle()}),h.TgZ(31,"div",20)(32,"div",5),h._UZ(33,"img",21),h._uU(34," Sign In With Google "),h.qZA()()()()()()()()()()()),2&t&&(h.xp6(13),h.Q6J("ngModel",r.email),h.xp6(4),h.Q6J("ngModel",r.password))},dependencies:[d0,Zf,s0,o0,Rm,Kf]}),n})(),AP=(()=>{class n{constructor(t){this.auth=t,this.email="",this.password=""}ngOnInit(){}register(){""!=this.email?""!=this.password?(this.auth.register(this.email,this.password),this.email="",this.password=""):alert("Please enter password"):alert("Please enter email")}}return n.\u0275fac=function(t){return new(t||n)(h.Y36(ug))},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-register"]],decls:26,vars:2,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-dark","text-muted"],["for","exampleInputEmail1",1,"form-label"],["type","email","name","email",1,"form-control",3,"ngModel","ngModelChange"],["for","exampleInputPassword1",1,"form-label"],["type","password","name","password",1,"form-control",3,"ngModel","ngModelChange"],["type","button",1,"btn","btn-info",3,"click"],[1,"row"],[1,"col-md-6"],["href","/login",2,"text-decoration","none"],[1,"text-danger"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form"),h._UZ(7,"div",6),h.TgZ(8,"h4",7),h._uU(9," Register "),h.qZA(),h.TgZ(10,"div",6)(11,"label",8),h._uU(12,"Email address"),h.qZA(),h.TgZ(13,"input",9),h.NdJ("ngModelChange",function(u){return r.email=u}),h.qZA()(),h.TgZ(14,"div",6)(15,"label",10),h._uU(16,"Password"),h.qZA(),h.TgZ(17,"input",11),h.NdJ("ngModelChange",function(u){return r.password=u}),h.qZA()(),h.TgZ(18,"button",12),h.NdJ("click",function(){return r.register()}),h._uU(19,"Register"),h.qZA(),h.TgZ(20,"div",13)(21,"div",14)(22,"a",15),h._uU(23," Have an account ? "),h.TgZ(24,"span",16),h._uU(25,"Login"),h.qZA()()()()()()()()()()()),2&t&&(h.xp6(13),h.Q6J("ngModel",r.email),h.xp6(4),h.Q6J("ngModel",r.password))},dependencies:[d0,Zf,s0,o0,Rm,Kf]}),n})(),SP=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-verify-email"]],decls:13,vars:0,consts:[[1,"container-fluid"],[1,"row","mt-5"],[1,"col"],[1,"col-4"],[1,"card","shadow"],[1,"card-body"],[1,"mb-3"],[1,"text-danger","text-muted"],[1,"text-muted"]],template:function(t,r){1&t&&(h.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"form")(7,"div",6)(8,"h4",7),h._uU(9," Welcome "),h.qZA()(),h.TgZ(10,"div",6)(11,"p",8),h._uU(12," Link has been sent to your registred email. Please Verify ! "),h.qZA()()()()()()()()())},dependencies:[d0,o0,Kf]}),n})(),WR=(()=>{class n{constructor(t,r){this.auth=t,this.router=r}canActivate(t,r){return!!this.auth.authenticated()||(console.log("Access denied!"),this.router.navigate(["/login"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(h.LFG(ug),h.LFG(Ir))},n.\u0275prov=h.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const MP=[{path:"",redirectTo:"login",pathMatch:"full"},{path:"login",component:TP},{path:"dashboard",component:CP,canActivate:[WR]},{path:"register",component:AP},{path:"verify-email",component:SP},{path:"forgot-password",component:bP}];let xP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({imports:[gy.forRoot(MP),gy]}),n})(),RP=(()=>{class n{constructor(){this.title="angular-firebase-crud"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=h.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&h._UZ(0,"router-outlet")},dependencies:[ey]}),n})();const sS_firebase={projectId:"wichlist-29062",appId:"1:582367088321:web:d53e4f755d3b1608c64e40",databaseURL:"https://wichlist-29062-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"wichlist-29062.appspot.com",apiKey:"AIzaSyBsgQ-_I5IPp_zOSRVZPtuMtXiSmKvfuAQ",authDomain:"wichlist-29062.firebaseapp.com",messagingSenderId:"582367088321"};class oS{constructor(e){return e}}class qR{constructor(){return(0,vn.vb)("auth")}}const aS=new h.OlP("angularfire2.auth-instances");function OP(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new oS(r)}}const PP={provide:qR,deps:[[new h.FiY,aS]]},kP={provide:oS,useFactory:function NP(n,e){const t=(0,vn.JM)("auth",n,e);return t&&new oS(t)},deps:[[new h.FiY,aS],Nh]};let FP=(()=>{class n{constructor(){(0,Cl.KN)("angularfire",vn.q4.full,"auth")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[kP,PP]}),n})();function LP(n,...e){return{ngModule:FP,providers:[{provide:aS,useFactory:OP(n),multi:!0,deps:[h.R0b,h.zs3,vn.HU,_y,[new h.FiY,Lh],...e]}]}}const VP=(0,vn.u3)(ew.n,!0);class uS{constructor(e){return e}}const ZR="firestore",lS=new h.OlP("angularfire2.firestore-instances");function $P(n){return(e,t)=>{const r=e.runOutsideAngular(()=>n(t));return new uS(r)}}const jP={provide:class UP{constructor(){return(0,vn.vb)(ZR)}},deps:[[new h.FiY,lS]]},HP={provide:uS,useFactory:function BP(n,e){const t=(0,vn.JM)(ZR,n,e);return t&&new uS(t)},deps:[[new h.FiY,lS],Nh]};let GP=(()=>{class n{constructor(){(0,Cl.KN)("angularfire",vn.q4.full,"fst")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n}),n.\u0275inj=h.cJS({providers:[HP,jP]}),n})();function WP(n,...e){return{ngModule:GP,providers:[{provide:lS,useFactory:$P(n),multi:!0,deps:[h.R0b,h.zs3,vn.HU,_y,[new h.FiY,qR],[new h.FiY,Lh],...e]}]}}const zP=(0,vn.u3)(p1,!0);let qP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=h.oAB({type:n,bootstrap:[RP]}),n.\u0275inj=h.cJS({providers:[WR],imports:[_o,xP,No.hO.initializeApp(sS_firebase),SC(()=>xC(sS_firebase)),LP(()=>VP()),WP(()=>zP()),EP]}),n})();(0,h.G48)(),ha().bootstrapModule(qP).catch(n=>console.error(n))},9751:(pt,Te,k)=>{k.d(Te,{y:()=>ae});var h=k(2961),B=k(727),O=k(8822),ee=k(9635),re=k(2416),de=k(576),le=k(2806);let ae=(()=>{class K{constructor(xe){xe&&(this._subscribe=xe)}lift(xe){const De=new K;return De.source=this,De.operator=xe,De}subscribe(xe,De,et){const ye=function H(K){return K&&K instanceof h.Lv||function G(K){return K&&(0,de.m)(K.next)&&(0,de.m)(K.error)&&(0,de.m)(K.complete)}(K)&&(0,B.Nn)(K)}(xe)?xe:new h.Hp(xe,De,et);return(0,le.x)(()=>{const{operator:ce,source:Ye}=this;ye.add(ce?ce.call(ye,Ye):Ye?this._subscribe(ye):this._trySubscribe(ye))}),ye}_trySubscribe(xe){try{return this._subscribe(xe)}catch(De){xe.error(De)}}forEach(xe,De){return new(De=fe(De))((et,ye)=>{const ce=new h.Hp({next:Ye=>{try{xe(Ye)}catch(Xe){ye(Xe),ce.unsubscribe()}},error:ye,complete:et});this.subscribe(ce)})}_subscribe(xe){var De;return null===(De=this.source)||void 0===De?void 0:De.subscribe(xe)}[O.L](){return this}pipe(...xe){return(0,ee.U)(xe)(this)}toPromise(xe){return new(xe=fe(xe))((De,et)=>{let ye;this.subscribe(ce=>ye=ce,ce=>et(ce),()=>De(ye))})}}return K.create=$e=>new K($e),K})();function fe(K){var $e;return null!==($e=K??re.v.Promise)&&void 0!==$e?$e:Promise}},7579:(pt,Te,k)=>{k.d(Te,{x:()=>le});var h=k(9751),B=k(727);const ee=(0,k(3888).d)(fe=>function(){fe(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var re=k(8737),de=k(2806);let le=(()=>{class fe extends h.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const K=new ae(this,this);return K.operator=H,K}_throwIfClosed(){if(this.closed)throw new ee}next(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const K of this.currentObservers)K.next(H)}})}error(H){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:K}=this;for(;K.length;)K.shift().error(H)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:K,isStopped:$e,observers:xe}=this;return K||$e?B.Lc:(this.currentObservers=null,xe.push(H),new B.w0(()=>{this.currentObservers=null,(0,re.P)(xe,H)}))}_checkFinalizedStatuses(H){const{hasError:K,thrownError:$e,isStopped:xe}=this;K?H.error($e):xe&&H.complete()}asObservable(){const H=new h.y;return H.source=this,H}}return fe.create=(G,H)=>new ae(G,H),fe})();class ae extends le{constructor(G,H){super(),this.destination=G,this.source=H}next(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===K||K.call(H,G)}error(G){var H,K;null===(K=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===K||K.call(H,G)}complete(){var G,H;null===(H=null===(G=this.destination)||void 0===G?void 0:G.complete)||void 0===H||H.call(G)}_subscribe(G){var H,K;return null!==(K=null===(H=this.source)||void 0===H?void 0:H.subscribe(G))&&void 0!==K?K:B.Lc}}},2961:(pt,Te,k)=>{k.d(Te,{Hp:()=>et,Lv:()=>K});var h=k(576),B=k(727),O=k(2416),ee=k(7849);function re(){}const de=fe("C",void 0,void 0);function fe(Ae,Se,we){return{kind:Ae,value:Se,error:we}}var G=k(3410),H=k(2806);class K extends B.w0{constructor(Se){super(),this.isStopped=!1,Se?(this.destination=Se,(0,B.Nn)(Se)&&Se.add(this)):this.destination=Xe}static create(Se,we,je){return new et(Se,we,je)}next(Se){this.isStopped?Ye(function ae(Ae){return fe("N",Ae,void 0)}(Se),this):this._next(Se)}error(Se){this.isStopped?Ye(function le(Ae){return fe("E",void 0,Ae)}(Se),this):(this.isStopped=!0,this._error(Se))}complete(){this.isStopped?Ye(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Se){this.destination.next(Se)}_error(Se){try{this.destination.error(Se)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const $e=Function.prototype.bind;function xe(Ae,Se){return $e.call(Ae,Se)}class De{constructor(Se){this.partialObserver=Se}next(Se){const{partialObserver:we}=this;if(we.next)try{we.next(Se)}catch(je){ye(je)}}error(Se){const{partialObserver:we}=this;if(we.error)try{we.error(Se)}catch(je){ye(je)}else ye(Se)}complete(){const{partialObserver:Se}=this;if(Se.complete)try{Se.complete()}catch(we){ye(we)}}}class et extends K{constructor(Se,we,je){let X;if(super(),(0,h.m)(Se)||!Se)X={next:Se??void 0,error:we??void 0,complete:je??void 0};else{let se;this&&O.v.useDeprecatedNextContext?(se=Object.create(Se),se.unsubscribe=()=>this.unsubscribe(),X={next:Se.next&&xe(Se.next,se),error:Se.error&&xe(Se.error,se),complete:Se.complete&&xe(Se.complete,se)}):X=Se}this.destination=new De(X)}}function ye(Ae){O.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Ae):(0,ee.h)(Ae)}function Ye(Ae,Se){const{onStoppedNotification:we}=O.v;we&&G.z.setTimeout(()=>we(Ae,Se))}const Xe={closed:!0,next:re,error:function ce(Ae){throw Ae},complete:re}},727:(pt,Te,k)=>{k.d(Te,{Lc:()=>de,w0:()=>re,Nn:()=>le});var h=k(576);const O=(0,k(3888).d)(fe=>function(H){fe(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((K,$e)=>`${$e+1}) ${K.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ee=k(8737);class re{constructor(G){this.initialTeardown=G,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let G;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const xe of H)xe.remove(this);else H.remove(this);const{initialTeardown:K}=this;if((0,h.m)(K))try{K()}catch(xe){G=xe instanceof O?xe.errors:[xe]}const{_finalizers:$e}=this;if($e){this._finalizers=null;for(const xe of $e)try{ae(xe)}catch(De){G=G??[],De instanceof O?G=[...G,...De.errors]:G.push(De)}}if(G)throw new O(G)}}add(G){var H;if(G&&G!==this)if(this.closed)ae(G);else{if(G instanceof re){if(G.closed||G._hasParent(this))return;G._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(G)}}_hasParent(G){const{_parentage:H}=this;return H===G||Array.isArray(H)&&H.includes(G)}_addParent(G){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(G),H):H?[H,G]:G}_removeParent(G){const{_parentage:H}=this;H===G?this._parentage=null:Array.isArray(H)&&(0,ee.P)(H,G)}remove(G){const{_finalizers:H}=this;H&&(0,ee.P)(H,G),G instanceof re&&G._removeParent(this)}}re.EMPTY=(()=>{const fe=new re;return fe.closed=!0,fe})();const de=re.EMPTY;function le(fe){return fe instanceof re||fe&&"closed"in fe&&(0,h.m)(fe.remove)&&(0,h.m)(fe.add)&&(0,h.m)(fe.unsubscribe)}function ae(fe){(0,h.m)(fe)?fe():fe.unsubscribe()}},2416:(pt,Te,k)=>{k.d(Te,{v:()=>h});const h={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(pt,Te,k)=>{k.d(Te,{E:()=>B});const B=new(k(9751).y)(re=>re.complete())},8996:(pt,Te,k)=>{k.d(Te,{D:()=>Se});var h=k(8421),B=k(5363),O=k(9468),de=k(9751),ae=k(2202),fe=k(576),G=k(9672);function K(we,je){if(!we)throw new Error("Iterable cannot be null");return new de.y(X=>{(0,G.f)(X,je,()=>{const se=we[Symbol.asyncIterator]();(0,G.f)(X,je,()=>{se.next().then(pe=>{pe.done?X.complete():X.next(pe.value)})},0,!0)})})}var $e=k(3670),xe=k(8239),De=k(1144),et=k(6495),ye=k(2206),ce=k(4532),Ye=k(3260);function Se(we,je){return je?function Ae(we,je){if(null!=we){if((0,$e.c)(we))return function ee(we,je){return(0,h.Xf)(we).pipe((0,O.R)(je),(0,B.Q)(je))}(we,je);if((0,De.z)(we))return function le(we,je){return new de.y(X=>{let se=0;return je.schedule(function(){se===we.length?X.complete():(X.next(we[se++]),X.closed||this.schedule())})})}(we,je);if((0,xe.t)(we))return function re(we,je){return(0,h.Xf)(we).pipe((0,O.R)(je),(0,B.Q)(je))}(we,je);if((0,ye.D)(we))return K(we,je);if((0,et.T)(we))return function H(we,je){return new de.y(X=>{let se;return(0,G.f)(X,je,()=>{se=we[ae.h](),(0,G.f)(X,je,()=>{let pe,Ge;try{({value:pe,done:Ge}=se.next())}catch(We){return void X.error(We)}Ge?X.complete():X.next(pe)},0,!0)}),()=>(0,fe.m)(se?.return)&&se.return()})}(we,je);if((0,Ye.L)(we))return function Xe(we,je){return K((0,Ye.Q)(we),je)}(we,je)}throw(0,ce.z)(we)}(we,je):(0,h.Xf)(we)}},8421:(pt,Te,k)=>{k.d(Te,{Xf:()=>$e});var h=k(655),B=k(1144),O=k(8239),ee=k(9751),re=k(3670),de=k(2206),le=k(4532),ae=k(6495),fe=k(3260),G=k(576),H=k(7849),K=k(8822);function $e(Ae){if(Ae instanceof ee.y)return Ae;if(null!=Ae){if((0,re.c)(Ae))return function xe(Ae){return new ee.y(Se=>{const we=Ae[K.L]();if((0,G.m)(we.subscribe))return we.subscribe(Se);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,B.z)(Ae))return function De(Ae){return new ee.y(Se=>{for(let we=0;we<Ae.length&&!Se.closed;we++)Se.next(Ae[we]);Se.complete()})}(Ae);if((0,O.t)(Ae))return function et(Ae){return new ee.y(Se=>{Ae.then(we=>{Se.closed||(Se.next(we),Se.complete())},we=>Se.error(we)).then(null,H.h)})}(Ae);if((0,de.D)(Ae))return ce(Ae);if((0,ae.T)(Ae))return function ye(Ae){return new ee.y(Se=>{for(const we of Ae)if(Se.next(we),Se.closed)return;Se.complete()})}(Ae);if((0,fe.L)(Ae))return function Ye(Ae){return ce((0,fe.Q)(Ae))}(Ae)}throw(0,le.z)(Ae)}function ce(Ae){return new ee.y(Se=>{(function Xe(Ae,Se){var we,je,X,se;return(0,h.mG)(this,void 0,void 0,function*(){try{for(we=(0,h.KL)(Ae);!(je=yield we.next()).done;)if(Se.next(je.value),Se.closed)return}catch(pe){X={error:pe}}finally{try{je&&!je.done&&(se=we.return)&&(yield se.call(we))}finally{if(X)throw X.error}}Se.complete()})})(Ae,Se).catch(we=>Se.error(we))})}},6451:(pt,Te,k)=>{k.d(Te,{T:()=>de});var h=k(8189),B=k(8421),O=k(515),ee=k(7669),re=k(8996);function de(...le){const ae=(0,ee.yG)(le),fe=(0,ee._6)(le,1/0),G=le;return G.length?1===G.length?(0,B.Xf)(G[0]):(0,h.J)(fe)((0,re.D)(G,ae)):O.E}},5403:(pt,Te,k)=>{k.d(Te,{x:()=>B});var h=k(2961);function B(ee,re,de,le,ae){return new O(ee,re,de,le,ae)}class O extends h.Lv{constructor(re,de,le,ae,fe,G){super(re),this.onFinalize=fe,this.shouldUnsubscribe=G,this._next=de?function(H){try{de(H)}catch(K){re.error(K)}}:super._next,this._error=ae?function(H){try{ae(H)}catch(K){re.error(K)}finally{this.unsubscribe()}}:super._error,this._complete=le?function(){try{le()}catch(H){re.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var re;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(re=this.onFinalize)||void 0===re||re.call(this))}}}},4004:(pt,Te,k)=>{k.d(Te,{U:()=>O});var h=k(4482),B=k(5403);function O(ee,re){return(0,h.e)((de,le)=>{let ae=0;de.subscribe((0,B.x)(le,fe=>{le.next(ee.call(re,fe,ae++))}))})}},8189:(pt,Te,k)=>{k.d(Te,{J:()=>O});var h=k(5577),B=k(4671);function O(ee=1/0){return(0,h.z)(B.y,ee)}},5577:(pt,Te,k)=>{k.d(Te,{z:()=>ae});var h=k(4004),B=k(8421),O=k(4482),ee=k(9672),re=k(5403),le=k(576);function ae(fe,G,H=1/0){return(0,le.m)(G)?ae((K,$e)=>(0,h.U)((xe,De)=>G(K,xe,$e,De))((0,B.Xf)(fe(K,$e))),H):("number"==typeof G&&(H=G),(0,O.e)((K,$e)=>function de(fe,G,H,K,$e,xe,De,et){const ye=[];let ce=0,Ye=0,Xe=!1;const Ae=()=>{Xe&&!ye.length&&!ce&&G.complete()},Se=je=>ce<K?we(je):ye.push(je),we=je=>{xe&&G.next(je),ce++;let X=!1;(0,B.Xf)(H(je,Ye++)).subscribe((0,re.x)(G,se=>{$e?.(se),xe?Se(se):G.next(se)},()=>{X=!0},void 0,()=>{if(X)try{for(ce--;ye.length&&ce<K;){const se=ye.shift();De?(0,ee.f)(G,De,()=>we(se)):we(se)}Ae()}catch(se){G.error(se)}}))};return fe.subscribe((0,re.x)(G,Se,()=>{Xe=!0,Ae()})),()=>{et?.()}}(K,$e,fe,H)))}},5363:(pt,Te,k)=>{k.d(Te,{Q:()=>ee});var h=k(9672),B=k(4482),O=k(5403);function ee(re,de=0){return(0,B.e)((le,ae)=>{le.subscribe((0,O.x)(ae,fe=>(0,h.f)(ae,re,()=>ae.next(fe),de),()=>(0,h.f)(ae,re,()=>ae.complete(),de),fe=>(0,h.f)(ae,re,()=>ae.error(fe),de)))})}},3099:(pt,Te,k)=>{k.d(Te,{B:()=>re});var h=k(8421),B=k(7579),O=k(2961),ee=k(4482);function re(le={}){const{connector:ae=(()=>new B.x),resetOnError:fe=!0,resetOnComplete:G=!0,resetOnRefCountZero:H=!0}=le;return K=>{let $e,xe,De,et=0,ye=!1,ce=!1;const Ye=()=>{xe?.unsubscribe(),xe=void 0},Xe=()=>{Ye(),$e=De=void 0,ye=ce=!1},Ae=()=>{const Se=$e;Xe(),Se?.unsubscribe()};return(0,ee.e)((Se,we)=>{et++,!ce&&!ye&&Ye();const je=De=De??ae();we.add(()=>{et--,0===et&&!ce&&!ye&&(xe=de(Ae,H))}),je.subscribe(we),!$e&&et>0&&($e=new O.Hp({next:X=>je.next(X),error:X=>{ce=!0,Ye(),xe=de(Xe,fe,X),je.error(X)},complete:()=>{ye=!0,Ye(),xe=de(Xe,G),je.complete()}}),(0,h.Xf)(Se).subscribe($e))})(K)}}function de(le,ae,...fe){if(!0===ae)return void le();if(!1===ae)return;const G=new O.Hp({next:()=>{G.unsubscribe(),le()}});return ae(...fe).subscribe(G)}},9468:(pt,Te,k)=>{k.d(Te,{R:()=>B});var h=k(4482);function B(O,ee=0){return(0,h.e)((re,de)=>{de.add(O.schedule(()=>re.subscribe(de),ee))})}},8505:(pt,Te,k)=>{k.d(Te,{b:()=>re});var h=k(576),B=k(4482),O=k(5403),ee=k(4671);function re(de,le,ae){const fe=(0,h.m)(de)||le||ae?{next:de,error:le,complete:ae}:de;return fe?(0,B.e)((G,H)=>{var K;null===(K=fe.subscribe)||void 0===K||K.call(fe);let $e=!0;G.subscribe((0,O.x)(H,xe=>{var De;null===(De=fe.next)||void 0===De||De.call(fe,xe),H.next(xe)},()=>{var xe;$e=!1,null===(xe=fe.complete)||void 0===xe||xe.call(fe),H.complete()},xe=>{var De;$e=!1,null===(De=fe.error)||void 0===De||De.call(fe,xe),H.error(xe)},()=>{var xe,De;$e&&(null===(xe=fe.unsubscribe)||void 0===xe||xe.call(fe)),null===(De=fe.finalize)||void 0===De||De.call(fe)}))}):ee.y}},4408:(pt,Te,k)=>{k.d(Te,{o:()=>re});var h=k(727);class B extends h.w0{constructor(le,ae){super()}schedule(le,ae=0){return this}}const O={setInterval(de,le,...ae){const{delegate:fe}=O;return fe?.setInterval?fe.setInterval(de,le,...ae):setInterval(de,le,...ae)},clearInterval(de){const{delegate:le}=O;return(le?.clearInterval||clearInterval)(de)},delegate:void 0};var ee=k(8737);class re extends B{constructor(le,ae){super(le,ae),this.scheduler=le,this.work=ae,this.pending=!1}schedule(le,ae=0){var fe;if(this.closed)return this;this.state=le;const G=this.id,H=this.scheduler;return null!=G&&(this.id=this.recycleAsyncId(H,G,ae)),this.pending=!0,this.delay=ae,this.id=null!==(fe=this.id)&&void 0!==fe?fe:this.requestAsyncId(H,this.id,ae),this}requestAsyncId(le,ae,fe=0){return O.setInterval(le.flush.bind(le,this),fe)}recycleAsyncId(le,ae,fe=0){if(null!=fe&&this.delay===fe&&!1===this.pending)return ae;null!=ae&&O.clearInterval(ae)}execute(le,ae){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const fe=this._execute(le,ae);if(fe)return fe;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(le,ae){let G,fe=!1;try{this.work(le)}catch(H){fe=!0,G=H||new Error("Scheduled action threw falsy error")}if(fe)return this.unsubscribe(),G}unsubscribe(){if(!this.closed){const{id:le,scheduler:ae}=this,{actions:fe}=ae;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ee.P)(fe,this),null!=le&&(this.id=this.recycleAsyncId(ae,le,null)),this.delay=null,super.unsubscribe()}}}},7565:(pt,Te,k)=>{k.d(Te,{v:()=>O});var h=k(6063);class B{constructor(re,de=B.now){this.schedulerActionCtor=re,this.now=de}schedule(re,de=0,le){return new this.schedulerActionCtor(this,re).schedule(le,de)}}B.now=h.l.now;class O extends B{constructor(re,de=B.now){super(re,de),this.actions=[],this._active=!1}flush(re){const{actions:de}=this;if(this._active)return void de.push(re);let le;this._active=!0;do{if(le=re.execute(re.state,re.delay))break}while(re=de.shift());if(this._active=!1,le){for(;re=de.shift();)re.unsubscribe();throw le}}}},4986:(pt,Te,k)=>{k.d(Te,{z:()=>O});var h=k(4408);const O=new(k(7565).v)(h.o)},6063:(pt,Te,k)=>{k.d(Te,{l:()=>h});const h={now:()=>(h.delegate||Date).now(),delegate:void 0}},3410:(pt,Te,k)=>{k.d(Te,{z:()=>h});const h={setTimeout(B,O,...ee){const{delegate:re}=h;return re?.setTimeout?re.setTimeout(B,O,...ee):setTimeout(B,O,...ee)},clearTimeout(B){const{delegate:O}=h;return(O?.clearTimeout||clearTimeout)(B)},delegate:void 0}},2202:(pt,Te,k)=>{k.d(Te,{h:()=>B});const B=function h(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(pt,Te,k)=>{k.d(Te,{L:()=>h});const h="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(pt,Te,k)=>{k.d(Te,{_6:()=>de,jO:()=>ee,yG:()=>re});var h=k(576);function O(le){return le[le.length-1]}function ee(le){return(0,h.m)(O(le))?le.pop():void 0}function re(le){return function B(le){return le&&(0,h.m)(le.schedule)}(O(le))?le.pop():void 0}function de(le,ae){return"number"==typeof O(le)?le.pop():ae}},8737:(pt,Te,k)=>{function h(B,O){if(B){const ee=B.indexOf(O);0<=ee&&B.splice(ee,1)}}k.d(Te,{P:()=>h})},3888:(pt,Te,k)=>{function h(B){const ee=B(re=>{Error.call(re),re.stack=(new Error).stack});return ee.prototype=Object.create(Error.prototype),ee.prototype.constructor=ee,ee}k.d(Te,{d:()=>h})},2806:(pt,Te,k)=>{k.d(Te,{O:()=>ee,x:()=>O});var h=k(2416);let B=null;function O(re){if(h.v.useDeprecatedSynchronousErrorHandling){const de=!B;if(de&&(B={errorThrown:!1,error:null}),re(),de){const{errorThrown:le,error:ae}=B;if(B=null,le)throw ae}}else re()}function ee(re){h.v.useDeprecatedSynchronousErrorHandling&&B&&(B.errorThrown=!0,B.error=re)}},9672:(pt,Te,k)=>{function h(B,O,ee,re=0,de=!1){const le=O.schedule(function(){ee(),de?B.add(this.schedule(null,re)):this.unsubscribe()},re);if(B.add(le),!de)return le}k.d(Te,{f:()=>h})},4671:(pt,Te,k)=>{function h(B){return B}k.d(Te,{y:()=>h})},1144:(pt,Te,k)=>{k.d(Te,{z:()=>h});const h=B=>B&&"number"==typeof B.length&&"function"!=typeof B},2206:(pt,Te,k)=>{k.d(Te,{D:()=>B});var h=k(576);function B(O){return Symbol.asyncIterator&&(0,h.m)(O?.[Symbol.asyncIterator])}},576:(pt,Te,k)=>{function h(B){return"function"==typeof B}k.d(Te,{m:()=>h})},3670:(pt,Te,k)=>{k.d(Te,{c:()=>O});var h=k(8822),B=k(576);function O(ee){return(0,B.m)(ee[h.L])}},6495:(pt,Te,k)=>{k.d(Te,{T:()=>O});var h=k(2202),B=k(576);function O(ee){return(0,B.m)(ee?.[h.h])}},8239:(pt,Te,k)=>{k.d(Te,{t:()=>B});var h=k(576);function B(O){return(0,h.m)(O?.then)}},3260:(pt,Te,k)=>{k.d(Te,{L:()=>ee,Q:()=>O});var h=k(655),B=k(576);function O(re){return(0,h.FC)(this,arguments,function*(){const le=re.getReader();try{for(;;){const{value:ae,done:fe}=yield(0,h.qq)(le.read());if(fe)return yield(0,h.qq)(void 0);yield yield(0,h.qq)(ae)}}finally{le.releaseLock()}})}function ee(re){return(0,B.m)(re?.getReader)}},4482:(pt,Te,k)=>{k.d(Te,{A:()=>B,e:()=>O});var h=k(576);function B(ee){return(0,h.m)(ee?.lift)}function O(ee){return re=>{if(B(re))return re.lift(function(de){try{return ee(de,this)}catch(le){this.error(le)}});throw new TypeError("Unable to lift unknown Observable type")}}},9635:(pt,Te,k)=>{k.d(Te,{U:()=>O,z:()=>B});var h=k(4671);function B(...ee){return O(ee)}function O(ee){return 0===ee.length?h.y:1===ee.length?ee[0]:function(de){return ee.reduce((le,ae)=>ae(le),de)}}},7849:(pt,Te,k)=>{k.d(Te,{h:()=>O});var h=k(2416),B=k(3410);function O(ee){B.z.setTimeout(()=>{const{onUnhandledError:re}=h.v;if(!re)throw ee;re(ee)})}},4532:(pt,Te,k)=>{function h(B){return new TypeError(`You provided ${null!==B&&"object"==typeof B?"an invalid object":`'${B}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}k.d(Te,{z:()=>h})},655:(pt,Te,k)=>{function ee(ie,he){var ve={};for(var Ne in ie)Object.prototype.hasOwnProperty.call(ie,Ne)&&he.indexOf(Ne)<0&&(ve[Ne]=ie[Ne]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var Pe=0;for(Ne=Object.getOwnPropertySymbols(ie);Pe<Ne.length;Pe++)he.indexOf(Ne[Pe])<0&&Object.prototype.propertyIsEnumerable.call(ie,Ne[Pe])&&(ve[Ne[Pe]]=ie[Ne[Pe]])}return ve}function K(ie,he,ve,Ne){return new(ve||(ve=Promise))(function(Ee,ht){function Rt(wt){try{rt(Ne.next(wt))}catch(gt){ht(gt)}}function cn(wt){try{rt(Ne.throw(wt))}catch(gt){ht(gt)}}function rt(wt){wt.done?Ee(wt.value):function Pe(Ee){return Ee instanceof ve?Ee:new ve(function(ht){ht(Ee)})}(wt.value).then(Rt,cn)}rt((Ne=Ne.apply(ie,he||[])).next())})}function Ae(ie){return this instanceof Ae?(this.v=ie,this):new Ae(ie)}function Se(ie,he,ve){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Pe,Ne=ve.apply(ie,he||[]),Ee=[];return Pe={},ht("next"),ht("throw"),ht("return"),Pe[Symbol.asyncIterator]=function(){return this},Pe;function ht(Jt){Ne[Jt]&&(Pe[Jt]=function(Ln){return new Promise(function(Mn,sn){Ee.push([Jt,Ln,Mn,sn])>1||Rt(Jt,Ln)})})}function Rt(Jt,Ln){try{!function cn(Jt){Jt.value instanceof Ae?Promise.resolve(Jt.value.v).then(rt,wt):gt(Ee[0][2],Jt)}(Ne[Jt](Ln))}catch(Mn){gt(Ee[0][3],Mn)}}function rt(Jt){Rt("next",Jt)}function wt(Jt){Rt("throw",Jt)}function gt(Jt,Ln){Jt(Ln),Ee.shift(),Ee.length&&Rt(Ee[0][0],Ee[0][1])}}function je(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var ve,he=ie[Symbol.asyncIterator];return he?he.call(ie):(ie=function et(ie){var he="function"==typeof Symbol&&Symbol.iterator,ve=he&&ie[he],Ne=0;if(ve)return ve.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&Ne>=ie.length&&(ie=void 0),{value:ie&&ie[Ne++],done:!ie}}};throw new TypeError(he?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),ve={},Ne("next"),Ne("throw"),Ne("return"),ve[Symbol.asyncIterator]=function(){return this},ve);function Ne(Ee){ve[Ee]=ie[Ee]&&function(ht){return new Promise(function(Rt,cn){!function Pe(Ee,ht,Rt,cn){Promise.resolve(cn).then(function(rt){Ee({value:rt,done:Rt})},ht)}(Rt,cn,(ht=ie[Ee](ht)).done,ht.value)})}}}k.d(Te,{FC:()=>Se,KL:()=>je,_T:()=>ee,mG:()=>K,qq:()=>Ae})},4650:(pt,Te,k)=>{k.d(Te,{$8M:()=>tu,$Z:()=>ow,AFp:()=>Dd,AaK:()=>ae,CHM:()=>Gd,CRH:()=>$o,CZH:()=>Fu,CqO:()=>Gw,D6c:()=>Vf,EJc:()=>Cd,EpF:()=>Jh,F4k:()=>Hw,FYo:()=>Sh,FiY:()=>_e,G48:()=>Gr,GfV:()=>z0,Gpc:()=>H,JOm:()=>Fi,KtG:()=>ao,LFG:()=>Sn,LSH:()=>Nc,Lbi:()=>Fb,Lck:()=>HE,MMx:()=>U_,NdJ:()=>Eg,OlP:()=>Dn,Oqu:()=>qs,PXZ:()=>DI,Q6J:()=>_g,QGY:()=>Xh,QP$:()=>ke,Qsj:()=>lC,R0b:()=>yi,RDi:()=>xD,Rgc:()=>gd,SBq:()=>El,Sil:()=>mI,Suo:()=>Q_,TTD:()=>as,TgZ:()=>Kh,X6Q:()=>Sv,XFs:()=>Je,Xpm:()=>Ce,Xts:()=>Rp,Y36:()=>Fc,YKP:()=>Su,YNc:()=>Jy,Yjl:()=>V,Yz7:()=>rt,Z0I:()=>Ln,ZZ4:()=>kf,_Bn:()=>ka,_UZ:()=>Yh,_Vd:()=>yu,_c5:()=>Lf,_uU:()=>Cu,aQg:()=>kv,c2e:()=>Vb,cJS:()=>gt,cg1:()=>v_,dDg:()=>Td,dqk:()=>Nt,eFA:()=>bI,ekj:()=>sf,eoX:()=>Gl,f3M:()=>di,g9A:()=>pv,h0i:()=>ud,hGG:()=>fm,iGM:()=>bf,ifc:()=>yt,ip1:()=>Mf,jDz:()=>B_,kL8:()=>_E,lG2:()=>q,lqb:()=>mu,lri:()=>wI,n5z:()=>hs,oAB:()=>en,oxw:()=>Dg,q4F:()=>q0,qLn:()=>Il,qOj:()=>Gy,qZA:()=>wg,rWj:()=>EI,sBO:()=>Lu,sIi:()=>Gh,s_b:()=>jg,soG:()=>tm,tb:()=>gv,tp0:()=>at,uIk:()=>zh,vHH:()=>De,vpe:()=>vs,wAp:()=>At,xp6:()=>J0,z2F:()=>im,zSh:()=>cy,zs3:()=>Dl});var h=k(7579),B=k(727),O=k(9751),ee=k(6451),re=k(3099);function de(i){for(let s in i)if(i[s]===de)return s;throw Error("Could not find renamed property on target object.")}function le(i,s){for(const a in s)s.hasOwnProperty(a)&&!i.hasOwnProperty(a)&&(i[a]=s[a])}function ae(i){if("string"==typeof i)return i;if(Array.isArray(i))return"["+i.map(ae).join(", ")+"]";if(null==i)return""+i;if(i.overriddenName)return`${i.overriddenName}`;if(i.name)return`${i.name}`;const s=i.toString();if(null==s)return""+s;const a=s.indexOf("\n");return-1===a?s:s.substring(0,a)}function fe(i,s){return null==i||""===i?null===s?"":s:null==s||""===s?i:i+" "+s}const G=de({__forward_ref__:de});function H(i){return i.__forward_ref__=H,i.toString=function(){return ae(this())},i}function K(i){return $e(i)?i():i}function $e(i){return"function"==typeof i&&i.hasOwnProperty(G)&&i.__forward_ref__===H}class De extends Error{constructor(s,a){super(function et(i,s){return`NG0${Math.abs(i)}${s?": "+s.trim():""}`}(s,a)),this.code=s}}function ye(i){return"string"==typeof i?i:null==i?"":String(i)}function Se(i,s){throw new De(-201,!1)}function Pe(i,s){null==i&&function Ee(i,s,a,l){throw new Error(`ASSERTION ERROR: ${i}`+(null==l?"":` [Expected=> ${a} ${l} ${s} <=Actual]`))}(s,i,null,"!=")}function rt(i){return{token:i.token,providedIn:i.providedIn||null,factory:i.factory,value:void 0}}function gt(i){return{providers:i.providers||[],imports:i.imports||[]}}function Jt(i){return Mn(i,Br)||Mn(i,vi)}function Ln(i){return null!==Jt(i)}function Mn(i,s){return i.hasOwnProperty(s)?i[s]:null}function Rr(i){return i&&(i.hasOwnProperty(Wn)||i.hasOwnProperty(Bi))?i[Wn]:null}const Br=de({\u0275prov:de}),Wn=de({\u0275inj:de}),vi=de({ngInjectableDef:de}),Bi=de({ngInjectorDef:de});var Je=(()=>((Je=Je||{})[Je.Default=0]="Default",Je[Je.Host=1]="Host",Je[Je.Self=2]="Self",Je[Je.SkipSelf=4]="SkipSelf",Je[Je.Optional=8]="Optional",Je))();let Yn;function _n(i){const s=Yn;return Yn=i,s}function _r(i,s,a){const l=Jt(i);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&Je.Optional?null:void 0!==s?s:void Se(ae(i))}function wn(i){return{toString:i}.toString()}var En=(()=>((En=En||{})[En.OnPush=0]="OnPush",En[En.Default=1]="Default",En))(),yt=(()=>{return(i=yt||(yt={}))[i.Emulated=0]="Emulated",i[i.None=2]="None",i[i.ShadowDom=3]="ShadowDom",yt;var i})();const Nt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Nr={},Mt=[],$r=de({\u0275cmp:de}),Lt=de({\u0275dir:de}),ii=de({\u0275pipe:de}),Qt=de({\u0275mod:de}),hr=de({\u0275fac:de}),Tn=de({__NG_ELEMENT_ID__:de});let tt=0;function Ce(i){return wn(()=>{const a=!0===i.standalone,l={},c={type:i.type,providersResolver:null,decls:i.decls,vars:i.vars,factory:null,template:i.template||null,consts:i.consts||null,ngContentSelectors:i.ngContentSelectors,hostBindings:i.hostBindings||null,hostVars:i.hostVars||0,hostAttrs:i.hostAttrs||null,contentQueries:i.contentQueries||null,declaredInputs:l,inputs:null,outputs:null,exportAs:i.exportAs||null,onPush:i.changeDetection===En.OnPush,directiveDefs:null,pipeDefs:null,standalone:a,dependencies:a&&i.dependencies||null,getStandaloneInjector:null,selectors:i.selectors||Mt,viewQuery:i.viewQuery||null,features:i.features||null,data:i.data||{},encapsulation:i.encapsulation||yt.Emulated,id:"c"+tt++,styles:i.styles||Mt,_:null,setInput:null,schemas:i.schemas||null,tView:null},f=i.dependencies,y=i.features;return c.inputs=$(i.inputs,l),c.outputs=$(i.outputs),y&&y.forEach(w=>w(c)),c.directiveDefs=f?()=>("function"==typeof f?f():f).map(Ct).filter(xt):null,c.pipeDefs=f?()=>("function"==typeof f?f():f).map(Y).filter(xt):null,c})}function Ct(i){return x(i)||L(i)}function xt(i){return null!==i}function en(i){return wn(()=>({type:i.type,bootstrap:i.bootstrap||Mt,declarations:i.declarations||Mt,imports:i.imports||Mt,exports:i.exports||Mt,transitiveCompileScopes:null,schemas:i.schemas||null,id:i.id||null}))}function $(i,s){if(null==i)return Nr;const a={};for(const l in i)if(i.hasOwnProperty(l)){let c=i[l],f=c;Array.isArray(c)&&(f=c[1],c=c[0]),a[c]=l,s&&(s[c]=f)}return a}const q=Ce;function V(i){return{type:i.type,name:i.name,factory:null,pure:!1!==i.pure,standalone:!0===i.standalone,onDestroy:i.type.prototype.ngOnDestroy||null}}function x(i){return i[$r]||null}function L(i){return i[Lt]||null}function Y(i){return i[ii]||null}function ke(i){const s=x(i)||L(i)||Y(i);return null!==s&&s.standalone}function it(i,s){const a=i[Qt]||null;if(!a&&!0===s)throw new Error(`Type ${ae(i)} does not have '\u0275mod' property.`);return a}function Jn(i){return Array.isArray(i)&&"object"==typeof i[1]}function oi(i){return Array.isArray(i)&&!0===i[1]}function Js(i){return 0!=(8&i.flags)}function Gu(i){return 2==(2&i.flags)}function Ko(i){return 1==(1&i.flags)}function qr(i){return null!==i.template}function Wu(i){return 0!=(256&i[2])}function br(i,s){return i.hasOwnProperty(hr)?i[hr]:null}class no{constructor(s,a,l){this.previousValue=s,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function as(){return rc}function rc(i){return i.type.prototype.ngOnChanges&&(i.setInput=qu),Ha}function Ha(){const i=ro(this),s=i?.current;if(s){const a=i.previous;if(a===Nr)i.previous=s;else for(let l in s)a[l]=s[l];i.current=null,this.ngOnChanges(s)}}function qu(i,s,a,l){const c=ro(i)||function rp(i,s){return i[ic]=s}(i,{previous:Nr,current:null}),f=c.current||(c.current={}),y=c.previous,w=this.declaredInputs[a],I=y[w];f[w]=new no(I&&I.currentValue,s,y===Nr),i[l]=s}as.ngInherit=!0;const ic="__ngSimpleChanges__";function ro(i){return i[ic]||null}function Pn(i){for(;Array.isArray(i);)i=i[0];return i}function Ei(i,s){return Pn(s[i])}function vr(i,s){return Pn(s[i.index])}function so(i,s){return i.data[s]}function nn(i,s){const a=s[i];return Jn(a)?a:a[0]}function us(i){return 64==(64&i[2])}function li(i,s){return null==s?null:i[s]}function Jo(i){i[18]=0}function Vn(i,s){i[5]+=s;let a=i,l=i[3];for(;null!==l&&(1===s&&1===a[5]||-1===s&&0===a[5]);)l[5]+=s,a=l,l=l[3]}const kt={lFrame:ua(null),bindingsEnabled:!0};function xs(){return kt.bindingsEnabled}function Me(){return kt.lFrame.lView}function Kt(){return kt.lFrame.tView}function Gd(i){return kt.lFrame.contextLView=i,i[8]}function ao(i){return kt.lFrame.contextLView=null,i}function Xn(){let i=uo();for(;null!==i&&64===i.type;)i=i.parent;return i}function uo(){return kt.lFrame.currentTNode}function jr(i,s){const a=kt.lFrame;a.currentTNode=i,a.isParent=s}function za(){return kt.lFrame.isParent}function sa(){return kt.lFrame.bindingIndex++}function uc(i,s){const a=kt.lFrame;a.bindingIndex=a.bindingRootIndex=i,co(s)}function co(i){kt.lFrame.currentDirectiveIndex=i}function oa(){return kt.lFrame.currentQueryIndex}function Xu(i){kt.lFrame.currentQueryIndex=i}function aa(i){const s=i[1];return 2===s.type?s.declTNode:1===s.type?i[6]:null}function lc(i,s,a){if(a&Je.SkipSelf){let c=s,f=i;for(;!(c=c.parent,null!==c||a&Je.Host||(c=aa(f),null===c||(f=f[15],10&c.type))););if(null===c)return!1;s=c,i=f}const l=kt.lFrame=qd();return l.currentTNode=s,l.lView=i,!0}function ho(i){const s=qd(),a=i[1];kt.lFrame=s,s.currentTNode=a.firstChild,s.lView=i,s.tView=a,s.contextLView=i,s.bindingIndex=a.bindingStartIndex,s.inI18n=!1}function qd(){const i=kt.lFrame,s=null===i?null:i.child;return null===s?ua(i):s}function ua(i){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:i,child:null,inI18n:!1};return null!==i&&(i.child=s),s}function Zd(){const i=kt.lFrame;return kt.lFrame=i.parent,i.currentTNode=null,i.lView=null,i}const cc=Zd;function ls(){const i=Zd();i.isParent=!0,i.tView=null,i.selectedIndex=-1,i.contextLView=null,i.elementDepthCount=0,i.currentDirectiveIndex=-1,i.currentNamespace=null,i.bindingRootIndex=-1,i.bindingIndex=-1,i.currentQueryIndex=0}function xn(){return kt.lFrame.selectedIndex}function qi(i){kt.lFrame.selectedIndex=i}function An(){const i=kt.lFrame;return so(i.tView,i.selectedIndex)}function qa(i,s){for(let a=s.directiveStart,l=s.directiveEnd;a<l;a++){const f=i.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:w,ngAfterViewInit:I,ngAfterViewChecked:T,ngOnDestroy:R}=f;y&&(i.contentHooks||(i.contentHooks=[])).push(-a,y),w&&((i.contentHooks||(i.contentHooks=[])).push(a,w),(i.contentCheckHooks||(i.contentCheckHooks=[])).push(a,w)),I&&(i.viewHooks||(i.viewHooks=[])).push(-a,I),T&&((i.viewHooks||(i.viewHooks=[])).push(a,T),(i.viewCheckHooks||(i.viewCheckHooks=[])).push(a,T)),null!=R&&(i.destroyHooks||(i.destroyHooks=[])).push(a,R)}}function fo(i,s,a){go(i,s,3,a)}function po(i,s,a,l){(3&i[2])===a&&go(i,s,a,l)}function fc(i,s){let a=i[2];(3&a)===s&&(a&=2047,a+=1,i[2]=a)}function go(i,s,a,l){const f=l??-1,y=s.length-1;let w=0;for(let I=void 0!==l?65535&i[18]:0;I<y;I++)if("number"==typeof s[I+1]){if(w=s[I],null!=l&&w>=l)break}else s[I]<0&&(i[18]+=65536),(w<f||-1==f)&&(pc(i,a,s,I),i[18]=(4294901760&i[18])+I+2),I++}function pc(i,s,a,l){const c=a[l]<0,f=a[l+1],w=i[c?-a[l]:a[l]];if(c){if(i[2]>>11<i[18]>>16&&(3&i[2])===s){i[2]+=2048;try{f.call(w)}finally{}}}else try{f.call(w)}finally{}}class ci{constructor(s,a,l){this.factory=s,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Zi(i,s,a){let l=0;for(;l<a.length;){const c=a[l];if("number"==typeof c){if(0!==c)break;l++;const f=a[l++],y=a[l++],w=a[l++];i.setAttribute(s,y,w,f)}else{const f=c,y=a[++l];sl(f)?i.setProperty(s,f,y):i.setAttribute(s,f,y),l++}}return l}function la(i){return 3===i||4===i||6===i}function sl(i){return 64===i.charCodeAt(0)}function ca(i,s){if(null!==s&&0!==s.length)if(null===i||0===i.length)i=s.slice();else{let a=-1;for(let l=0;l<s.length;l++){const c=s[l];"number"==typeof c?a=c:0===a||mc(i,a,c,null,-1===a||2===a?s[++l]:null)}}return i}function mc(i,s,a,l,c){let f=0,y=i.length;if(-1===s)y=-1;else for(;f<i.length;){const w=i[f++];if("number"==typeof w){if(w===s){y=-1;break}if(w>s){y=f-1;break}}}for(;f<i.length;){const w=i[f];if("number"==typeof w)break;if(w===a){if(null===l)return void(null!==c&&(i[f+1]=c));if(l===i[f+1])return void(i[f+2]=c)}f++,null!==l&&f++,null!==c&&f++}-1!==y&&(i.splice(y,0,s),f=y+1),i.splice(f++,0,a),null!==l&&i.splice(f++,0,l),null!==c&&i.splice(f++,0,c)}function Qd(i){return-1!==i}function tr(i){return 32767&i}function ds(i,s){let a=function Jd(i){return i>>16}(i),l=s;for(;a>0;)l=l[15],a--;return l}let ol=!0;function da(i){const s=ol;return ol=i,s}let yc=0;const Kr={};function Ki(i,s){const a=Ja(i,s);if(-1!==a)return a;const l=s[1];l.firstCreatePass&&(i.injectorIndex=s.length,al(l.data,i),al(s,null),al(l.blueprint,null));const c=ha(i,s),f=i.injectorIndex;if(Qd(c)){const y=tr(c),w=ds(c,s),I=w[1].data;for(let T=0;T<8;T++)s[f+T]=w[y+T]|I[y+T]}return s[f+8]=c,f}function al(i,s){i.push(0,0,0,0,0,0,0,0,s)}function Ja(i,s){return-1===i.injectorIndex||i.parent&&i.parent.injectorIndex===i.injectorIndex||null===s[i.injectorIndex+8]?-1:i.injectorIndex}function ha(i,s){if(i.parent&&-1!==i.parent.injectorIndex)return i.parent.injectorIndex;let a=0,l=null,c=s;for(;null!==c;){if(l=Do(c),null===l)return-1;if(a++,c=c[15],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return-1}function Ns(i,s,a){!function _c(i,s,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Tn)&&(l=a[Tn]),null==l&&(l=a[Tn]=yc++);const c=255&l;s.data[i+(c>>5)]|=1<<c}(i,s,a)}function yo(i,s,a){if(a&Je.Optional||void 0!==i)return i;Se()}function _o(i,s,a,l){if(a&Je.Optional&&void 0===l&&(l=null),0==(a&(Je.Self|Je.Host))){const c=i[9],f=_n(void 0);try{return c?c.get(s,l,a&Je.Optional):_r(s,l,a&Je.Optional)}finally{_n(f)}}return yo(l,0,a)}function vo(i,s,a,l=Je.Default,c){if(null!==i){if(1024&s[2]){const y=function th(i,s,a,l,c){let f=i,y=s;for(;null!==f&&null!==y&&1024&y[2]&&!(256&y[2]);){const w=vc(f,y,a,l|Je.Self,Kr);if(w!==Kr)return w;let I=f.parent;if(!I){const T=y[21];if(T){const R=T.get(a,Kr,l);if(R!==Kr)return R}I=Do(y),y=y[15]}f=I}return c}(i,s,a,l,Kr);if(y!==Kr)return y}const f=vc(i,s,a,l,Kr);if(f!==Kr)return f}return _o(s,a,l,c)}function vc(i,s,a,l,c){const f=function eh(i){if("string"==typeof i)return i.charCodeAt(0)||0;const s=i.hasOwnProperty(Tn)?i[Tn]:void 0;return"number"==typeof s?s>=0?255&s:ul:s}(a);if("function"==typeof f){if(!lc(s,i,l))return l&Je.Host?yo(c,0,l):_o(s,a,l,c);try{const y=f(l);if(null!=y||l&Je.Optional)return y;Se()}finally{cc()}}else if("number"==typeof f){let y=null,w=Ja(i,s),I=-1,T=l&Je.Host?s[16][6]:null;for((-1===w||l&Je.SkipSelf)&&(I=-1===w?ha(i,s):s[w+8],-1!==I&&eu(l,!1)?(y=s[1],w=tr(I),s=ds(I,s)):w=-1);-1!==w;){const R=s[1];if(wo(f,w,R.data)){const F=Xa(w,s,a,y,l,T);if(F!==Kr)return F}I=s[w+8],-1!==I&&eu(l,s[1].data[w+8]===T)&&wo(f,w,s)?(y=R,w=tr(I),s=ds(I,s)):w=-1}}return c}function Xa(i,s,a,l,c,f){const y=s[1],w=y.data[i+8],R=pa(w,y,a,null==l?Gu(w)&&ol:l!=y&&0!=(3&w.type),c&Je.Host&&f===w);return null!==R?Ri(s,y,R,w):Kr}function pa(i,s,a,l,c){const f=i.providerIndexes,y=s.data,w=1048575&f,I=i.directiveStart,R=f>>20,z=c?w+R:i.directiveEnd;for(let Q=l?w:w+R;Q<z;Q++){const me=y[Q];if(Q<I&&a===me||Q>=I&&me.type===a)return Q}if(c){const Q=y[I];if(Q&&qr(Q)&&Q.type===a)return I}return null}function Ri(i,s,a,l){let c=i[a];const f=s.data;if(function il(i){return i instanceof ci}(c)){const y=c;y.resolving&&function Ye(i,s){const a=s?`. Dependency path: ${s.join(" > ")} > ${i}`:"";throw new De(-200,`Circular dependency in DI detected for ${i}${a}`)}(function ce(i){return"function"==typeof i?i.name||i.toString():"object"==typeof i&&null!=i&&"function"==typeof i.type?i.type.name||i.type.toString():ye(i)}(f[a]));const w=da(y.canSeeViewProviders);y.resolving=!0;const I=y.injectImpl?_n(y.injectImpl):null;lc(i,l,Je.Default);try{c=i[a]=y.factory(void 0,f,i,l),s.firstCreatePass&&a>=l.directiveStart&&function rl(i,s,a){const{ngOnChanges:l,ngOnInit:c,ngDoCheck:f}=s.type.prototype;if(l){const y=rc(s);(a.preOrderHooks||(a.preOrderHooks=[])).push(i,y),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,y)}c&&(a.preOrderHooks||(a.preOrderHooks=[])).push(0-i,c),f&&((a.preOrderHooks||(a.preOrderHooks=[])).push(i,f),(a.preOrderCheckHooks||(a.preOrderCheckHooks=[])).push(i,f))}(a,f[a],s)}finally{null!==I&&_n(I),da(w),y.resolving=!1,cc()}}return c}function wo(i,s,a){return!!(a[s+(i>>5)]&1<<i)}function eu(i,s){return!(i&Je.Self||i&Je.Host&&s)}class Eo{constructor(s,a){this._tNode=s,this._lView=a}get(s,a,l){return vo(this._tNode,this._lView,s,l,a)}}function ul(){return new Eo(Xn(),Me())}function hs(i){return wn(()=>{const s=i.prototype.constructor,a=s[hr]||Io(s),l=Object.prototype;let c=Object.getPrototypeOf(i.prototype).constructor;for(;c&&c!==l;){const f=c[hr]||Io(c);if(f&&f!==a)return f;c=Object.getPrototypeOf(c)}return f=>new f})}function Io(i){return $e(i)?()=>{const s=Io(K(i));return s&&s()}:br(i)}function Do(i){const s=i[1],a=s.type;return 2===a?s.declTNode:1===a?i[6]:null}function tu(i){return function fa(i,s){if("class"===s)return i.classes;if("style"===s)return i.styles;const a=i.attrs;if(a){const l=a.length;let c=0;for(;c<l;){const f=a[c];if(la(f))break;if(0===f)c+=2;else if("number"==typeof f)for(c++;c<l&&"string"==typeof a[c];)c++;else{if(f===s)return a[c+1];c+=2}}}return null}(Xn(),i)}const Co="__parameters__";function To(i,s,a){return wn(()=>{const l=function ll(i){return function(...a){if(i){const l=i(...a);for(const c in l)this[c]=l[c]}}}(s);function c(...f){if(this instanceof c)return l.apply(this,f),this;const y=new c(...f);return w.annotation=y,w;function w(I,T,R){const F=I.hasOwnProperty(Co)?I[Co]:Object.defineProperty(I,Co,{value:[]})[Co];for(;F.length<=R;)F.push(null);return(F[R]=F[R]||[]).push(y),I}}return a&&(c.prototype=Object.create(a.prototype)),c.prototype.ngMetadataName=i,c.annotationCls=c,c})}class Dn{constructor(s,a){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=rt({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Cn(i,s){void 0===s&&(s=i);for(let a=0;a<i.length;a++){let l=i[a];Array.isArray(l)?(s===i&&(s=i.slice(0,a)),Cn(l,s)):s!==i&&s.push(l)}return s}function Qi(i,s){i.forEach(a=>Array.isArray(a)?Qi(a,s):s(a))}function Ps(i,s,a){s>=i.length?i.push(a):i.splice(s,0,a)}function Pr(i,s){return s>=i.length-1?i.pop():i.splice(s,1)[0]}function ft(i,s,a){let l=Pi(i,s);return l>=0?i[1|l]=a:(l=~l,function ih(i,s,a,l){let c=i.length;if(c==s)i.push(a,l);else if(1===c)i.push(l,i[0]),i[0]=a;else{for(c--,i.push(i[c-1],i[c]);c>s;)i[c]=i[c-2],c--;i[s]=a,i[s+1]=l}}(i,l,s,a)),l}function cl(i,s){const a=Pi(i,s);if(a>=0)return i[1|a]}function Pi(i,s){return function ga(i,s,a){let l=0,c=i.length>>a;for(;c!==l;){const f=l+(c-l>>1),y=i[f<<a];if(s===y)return f<<a;y>s?c=f:l=f+1}return~(c<<a)}(i,s,1)}const Di={},ou="__NG_DI_FLAG__",ps="ngTempTokenPath",kr=/\n/gm,Rn="__source";let Us;function Bs(i){const s=Us;return Us=i,s}function nr(i,s=Je.Default){if(void 0===Us)throw new De(-203,!1);return null===Us?_r(i,void 0,s):Us.get(i,s&Je.Optional?null:void 0,s)}function Sn(i,s=Je.Default){return(function zn(){return Yn}()||nr)(K(i),s)}function di(i,s=Je.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Sn(i,s)}function D(i){const s=[];for(let a=0;a<i.length;a++){const l=K(i[a]);if(Array.isArray(l)){if(0===l.length)throw new De(900,!1);let c,f=Je.Default;for(let y=0;y<l.length;y++){const w=l[y],I=M(w);"number"==typeof I?-1===I?c=w.token:f|=I:c=w}s.push(Sn(c,f))}else s.push(Sn(l))}return s}function b(i,s){return i[ou]=s,i.prototype[ou]=s,i}function M(i){return i[ou]}const _e=b(To("Optional"),8),at=b(To("SkipSelf"),4);var Fi=(()=>((Fi=Fi||{})[Fi.Important=1]="Important",Fi[Fi.DashCase=2]="DashCase",Fi))();const fl=new Map;let fp=0;const p="__ngContext__";function m(i,s){Jn(s)?(i[p]=s[20],function Hm(i){fl.set(i[20],i)}(s)):i[p]=s}function pl(i,s){return undefined(i,s)}function Ea(i){const s=i[3];return oi(s)?s[3]:s}function Ia(i){return _p(i[13])}function xo(i){return _p(i[4])}function _p(i){for(;null!==i&&!oi(i);)i=i[4];return i}function hu(i,s,a,l,c){if(null!=l){let f,y=!1;oi(l)?f=l:Jn(l)&&(y=!0,l=l[0]);const w=Pn(l);0===i&&null!==a?null==c?C0(s,a,w):fu(s,a,w,c||null,!0):1===i&&null!==a?fu(s,a,w,c||null,!0):2===i?function Ip(i,s,a){const l=gs(i,s);l&&function Zm(i,s,a,l){i.removeChild(s,a,l)}(i,l,s,a)}(s,w,y):3===i&&s.destroyNode(w),null!=f&&function AD(i,s,a,l,c){const f=a[7];f!==Pn(a)&&hu(s,i,l,f,c);for(let w=10;w<a.length;w++){const I=a[w];yl(I[1],I,i,s,l,f)}}(s,i,f,a,c)}}function gh(i,s,a){return i.createElement(s,a)}function w0(i,s){const a=i[9],l=a.indexOf(s),c=s[3];512&s[2]&&(s[2]&=-513,Vn(c,-1)),a.splice(l,1)}function Wm(i,s){if(i.length<=10)return;const a=10+s,l=i[a];if(l){const c=l[17];null!==c&&c!==i&&w0(c,l),s>0&&(i[a-1][4]=l[4]);const f=Pr(i,10+s);!function gl(i,s){yl(i,s,s[11],2,null,null),s[0]=null,s[6]=null}(l[1],l);const y=f[19];null!==y&&y.detachView(f[1]),l[3]=null,l[4]=null,l[2]&=-65}return l}function E0(i,s){if(!(128&s[2])){const a=s[11];a.destroyNode&&yl(i,s,a,3,null,null),function ED(i){let s=i[13];if(!s)return zm(i[1],i);for(;s;){let a=null;if(Jn(s))a=s[13];else{const l=s[10];l&&(a=l)}if(!a){for(;s&&!s[4]&&s!==i;)Jn(s)&&zm(s[1],s),s=s[3];null===s&&(s=i),Jn(s)&&zm(s[1],s),a=s&&s[4]}s=a}}(s)}}function zm(i,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function bD(i,s){let a;if(null!=i&&null!=(a=i.destroyHooks))for(let l=0;l<a.length;l+=2){const c=s[a[l]];if(!(c instanceof ci)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const w=c[f[y]],I=f[y+1];try{I.call(w)}finally{}}else try{f.call(c)}finally{}}}}(i,s),function CD(i,s){const a=i.cleanup,l=s[7];let c=-1;if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+1],w="function"==typeof y?y(s):Pn(s[y]),I=l[c=a[f+2]],T=a[f+3];"boolean"==typeof T?w.removeEventListener(a[f],I,T):T>=0?l[c=T]():l[c=-T].unsubscribe(),f+=2}else{const y=l[c=a[f+1]];a[f].call(y)}if(null!==l){for(let f=c+1;f<l.length;f++)(0,l[f])();s[7]=null}}(i,s),1===s[1].type&&s[11].destroy();const a=s[17];if(null!==a&&oi(s[3])){a!==s[3]&&w0(a,s);const l=s[19];null!==l&&l.detachView(i)}!function Tc(i){fl.delete(i[20])}(s)}}function I0(i,s,a){return function D0(i,s,a){let l=s;for(;null!==l&&40&l.type;)l=(s=l).parent;if(null===l)return a[0];if(2&l.flags){const c=i.data[l.directiveStart].encapsulation;if(c===yt.None||c===yt.Emulated)return null}return vr(l,a)}(i,s.parent,a)}function fu(i,s,a,l,c){i.insertBefore(s,a,l,c)}function C0(i,s,a){i.appendChild(s,a)}function qm(i,s,a,l,c){null!==l?fu(i,s,a,l,c):C0(i,s,a)}function gs(i,s){return i.parentNode(s)}let ty,T0=function Ym(i,s,a){return 40&i.type?vr(i,a):null};function Ep(i,s,a,l){const c=I0(i,l,s),f=s[11],w=function Km(i,s,a){return T0(i,s,a)}(l.parent||s[6],l,s);if(null!=c)if(Array.isArray(a))for(let I=0;I<a.length;I++)qm(f,c,a[I],w,!1);else qm(f,c,a,w,!1)}function ml(i,s){if(null!==s){const a=s.type;if(3&a)return vr(s,i);if(4&a)return mh(-1,i[s.index]);if(8&a){const l=s.child;if(null!==l)return ml(i,l);{const c=i[s.index];return oi(c)?mh(-1,c):Pn(c)}}if(32&a)return pl(s,i)()||Pn(i[s.index]);{const l=Jm(i,s);return null!==l?Array.isArray(l)?l[0]:ml(Ea(i[16]),l):ml(i,s.next)}}return null}function Jm(i,s){return null!==s?i[16][6].projection[s.projection]:null}function mh(i,s){const a=10+i+1;if(a<s.length){const l=s[a],c=l[1].firstChild;if(null!==c)return ml(l,c)}return s[7]}function yh(i,s,a,l,c,f,y){for(;null!=a;){const w=l[a.index],I=a.type;if(y&&0===s&&(w&&m(Pn(w),l),a.flags|=4),64!=(64&a.flags))if(8&I)yh(i,s,a.child,l,c,f,!1),hu(s,i,c,w,f);else if(32&I){const T=pl(a,l);let R;for(;R=T();)hu(s,i,c,R,f);hu(s,i,c,w,f)}else 16&I?xc(i,s,l,a,c,f):hu(s,i,c,w,f);a=y?a.projectionNext:a.next}}function yl(i,s,a,l,c,f){yh(a,l,i.firstChild,s,c,f,!1)}function xc(i,s,a,l,c,f){const y=a[16],I=y[6].projection[l.projection];if(Array.isArray(I))for(let T=0;T<I.length;T++)hu(s,i,c,I[T],f);else yh(i,s,I,y[3],c,f,!0)}function Dp(i,s,a){i.setAttribute(s,"style",a)}function Cp(i,s,a){""===a?i.removeAttribute(s,"class"):i.setAttribute(s,"class",a)}function xD(i){ty=i}class Ap{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function ba(i){return i instanceof Ap?i.changingThisBreaksApplicationSecurity:i}const Ih=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var gr=(()=>((gr=gr||{})[gr.NONE=0]="NONE",gr[gr.HTML=1]="HTML",gr[gr.STYLE=2]="STYLE",gr[gr.SCRIPT=3]="SCRIPT",gr[gr.URL=4]="URL",gr[gr.RESOURCE_URL=5]="RESOURCE_URL",gr))();function Nc(i){const s=function gu(){const i=Me();return i&&i[12]}();return s?s.sanitize(gr.URL,i)||"":function Ta(i,s){const a=function LD(i){return i instanceof Ap&&i.getTypeName()||null}(i);if(null!=a&&a!==s){if("ResourceURL"===a&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${a} (see https://g.co/ng/security#xss)`)}return a===s}(i,"URL")?ba(i):function vl(i){return(i=String(i)).match(Ih)?i:"unsafe:"+i}(ye(i))}const Rp=new Dn("ENVIRONMENT_INITIALIZER"),Oc=new Dn("INJECTOR",-1),oy=new Dn("INJECTOR_DEF_TYPES");class F0{get(s,a=Di){if(a===Di){const l=new Error(`NullInjectorError: No provider for ${ae(s)}!`);throw l.name="NullInjectorError",l}return a}}function QD(...i){return{\u0275providers:L0(0,i)}}function L0(i,...s){const a=[],l=new Set;let c;return Qi(s,f=>{const y=f;ay(y,a,[],l)&&(c||(c=[]),c.push(y))}),void 0!==c&&V0(c,a),a}function V0(i,s){for(let a=0;a<i.length;a++){const{providers:c}=i[a];Qi(c,f=>{s.push(f)})}}function ay(i,s,a,l){if(!(i=K(i)))return!1;let c=null,f=Rr(i);const y=!f&&x(i);if(f||y){if(y&&!y.standalone)return!1;c=i}else{const I=i.ngModule;if(f=Rr(I),!f)return!1;c=I}const w=l.has(c);if(y){if(w)return!1;if(l.add(c),y.dependencies){const I="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const T of I)ay(T,s,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!w){let T;l.add(c);try{Qi(f.imports,R=>{ay(R,s,a,l)&&(T||(T=[]),T.push(R))})}finally{}void 0!==T&&V0(T,s)}if(!w){const T=br(c)||(()=>new c);s.push({provide:c,useFactory:T,deps:Mt},{provide:oy,useValue:c,multi:!0},{provide:Rp,useValue:()=>Sn(c),multi:!0})}const I=f.providers;null==I||w||Qi(I,R=>{s.push(R)})}}return c!==i&&void 0!==i.providers}const JD=de({provide:String,useValue:de});function ly(i){return null!==i&&"object"==typeof i&&JD in i}function wl(i){return"function"==typeof i}const cy=new Dn("Set Injector scope."),Th={},eC={};let Np;function Ah(){return void 0===Np&&(Np=new F0),Np}class mu{}class dy extends mu{constructor(s,a,l,c){super(),this.parent=a,this.source=l,this.scopes=c,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Pp(s,y=>this.processProvider(y)),this.records.set(Oc,Pc(void 0,this)),c.has("environment")&&this.records.set(mu,Pc(void 0,this));const f=this.records.get(cy);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(oy.multi,Mt,Je.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const a=Bs(this),l=_n(void 0);try{return s()}finally{Bs(a),_n(l)}}get(s,a=Di,l=Je.Default){this.assertNotDestroyed();const c=Bs(this),f=_n(void 0);try{if(!(l&Je.SkipSelf)){let w=this.records.get(s);if(void 0===w){const I=function j0(i){return"function"==typeof i||"object"==typeof i&&i instanceof Dn}(s)&&Jt(s);w=I&&this.injectableDefInScope(I)?Pc(Op(s),Th):null,this.records.set(s,w)}if(null!=w)return this.hydrate(s,w)}return(l&Je.Self?Ah():this.parent).get(s,a=l&Je.Optional&&a===Di?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[ps]=y[ps]||[]).unshift(ae(s)),c)throw y;return function U(i,s,a,l){const c=i[ps];throw s[Rn]&&c.unshift(s[Rn]),i.message=function Z(i,s,a,l=null){i=i&&"\n"===i.charAt(0)&&"\u0275"==i.charAt(1)?i.slice(2):i;let c=ae(s);if(Array.isArray(s))c=s.map(ae).join(" -> ");else if("object"==typeof s){let f=[];for(let y in s)if(s.hasOwnProperty(y)){let w=s[y];f.push(y+":"+("string"==typeof w?JSON.stringify(w):ae(w)))}c=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${c}]: ${i.replace(kr,"\n  ")}`}("\n"+i.message,c,a,l),i.ngTokenPath=c,i[ps]=null,i}(y,s,"R3InjectorError",this.source)}throw y}finally{_n(f),Bs(c)}}resolveInjectorInitializers(){const s=Bs(this),a=_n(void 0);try{const l=this.get(Rp.multi,Mt,Je.Self);for(const c of l)c()}finally{Bs(s),_n(a)}}toString(){const s=[],a=this.records;for(const l of a.keys())s.push(ae(l));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new De(205,!1)}processProvider(s){let a=wl(s=K(s))?s:K(s&&s.provide);const l=function nC(i){return ly(i)?Pc(void 0,i.useValue):Pc($0(i),Th)}(s);if(wl(s)||!0!==s.multi)this.records.get(a);else{let c=this.records.get(a);c||(c=Pc(void 0,Th,!0),c.factory=()=>D(c.multi),this.records.set(a,c)),a=s,c.multi.push(s)}this.records.set(a,l)}hydrate(s,a){return a.value===Th&&(a.value=eC,a.value=a.factory()),"object"==typeof a.value&&a.value&&function iC(i){return null!==i&&"object"==typeof i&&"function"==typeof i.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(s){if(!s.providedIn)return!1;const a=K(s.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}}function Op(i){const s=Jt(i),a=null!==s?s.factory:br(i);if(null!==a)return a;if(i instanceof Dn)throw new De(204,!1);if(i instanceof Function)return function tC(i){const s=i.length;if(s>0)throw function ks(i,s){const a=[];for(let l=0;l<i;l++)a.push(s);return a}(s,"?"),new De(204,!1);const a=function sn(i){const s=i&&(i[Br]||i[vi]);if(s){const a=function yr(i){if(i.hasOwnProperty("name"))return i.name;const s=(""+i).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(i);return console.warn(`DEPRECATED: DI is instantiating a token "${a}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${a}" class.`),s}return null}(i);return null!==a?()=>a.factory(i):()=>new i}(i);throw new De(204,!1)}function $0(i,s,a){let l;if(wl(i)){const c=K(i);return br(c)||Op(c)}if(ly(i))l=()=>K(i.useValue);else if(function B0(i){return!(!i||!i.useFactory)}(i))l=()=>i.useFactory(...D(i.deps||[]));else if(function U0(i){return!(!i||!i.useExisting)}(i))l=()=>Sn(K(i.useExisting));else{const c=K(i&&(i.useClass||i.provide));if(!function rC(i){return!!i.deps}(i))return br(c)||Op(c);l=()=>new c(...D(i.deps))}return l}function Pc(i,s,a=!1){return{factory:i,value:s,multi:a?[]:void 0}}function hy(i){return!!i.\u0275providers}function Pp(i,s){for(const a of i)Array.isArray(a)?Pp(a,s):hy(a)?Pp(a.\u0275providers,s):s(a)}class sC{}class aC{resolveComponentFactory(s){throw function oC(i){const s=Error(`No component factory found for ${ae(i)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=i,s}(s)}}let yu=(()=>{class i{}return i.NULL=new aC,i})();function W0(){return _u(Xn(),Me())}function _u(i,s){return new El(vr(i,s))}let El=(()=>{class i{constructor(a){this.nativeElement=a}}return i.__NG_ELEMENT_ID__=W0,i})();function uC(i){return i instanceof El?i.nativeElement:i}class Sh{}let lC=(()=>{class i{}return i.__NG_ELEMENT_ID__=()=>function cC(){const i=Me(),a=nn(Xn().index,i);return(Jn(a)?a:i)[11]}(),i})(),dC=(()=>{class i{}return i.\u0275prov=rt({token:i,providedIn:"root",factory:()=>null}),i})();class z0{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const q0=new z0("14.2.12"),kp={};function Fp(i){return i.ngOriginalError}class Il{constructor(){this._console=console}handleError(s){const a=this._findOriginalError(s);this._console.error("ERROR",s),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(s){let a=s&&Fp(s);for(;a&&Fp(a);)a=Fp(a);return a||null}}function Ro(i){return i instanceof Function?i():i}function py(i,s,a){let l=i.length;for(;;){const c=i.indexOf(s,a);if(-1===c)return c;if(0===c||i.charCodeAt(c-1)<=32){const f=s.length;if(c+f===l||i.charCodeAt(c+f)<=32)return c}a=c+1}}const Up="ng-template";function _C(i,s,a){let l=0;for(;l<i.length;){let c=i[l++];if(a&&"class"===c){if(c=i[l],-1!==py(c.toLowerCase(),s,0))return!0}else if(1===c){for(;l<i.length&&"string"==typeof(c=i[l++]);)if(c.toLowerCase()===s)return!0;return!1}}return!1}function K0(i){return 4===i.type&&i.value!==Up}function vC(i,s,a){return s===(4!==i.type||a?i.value:Up)}function Y0(i,s,a){let l=4;const c=i.attrs||[],f=function Q0(i){for(let s=0;s<i.length;s++)if(la(i[s]))return s;return i.length}(c);let y=!1;for(let w=0;w<s.length;w++){const I=s[w];if("number"!=typeof I){if(!y)if(4&l){if(l=2|1&l,""!==I&&!vC(i,I,a)||""===I&&1===s.length){if(Gs(l))return!1;y=!0}}else{const T=8&l?I:s[++w];if(8&l&&null!==i.attrs){if(!_C(i.attrs,T,a)){if(Gs(l))return!1;y=!0}continue}const F=ES(8&l?"class":I,c,K0(i),a);if(-1===F){if(Gs(l))return!1;y=!0;continue}if(""!==T){let z;z=F>f?"":c[F+1].toLowerCase();const Q=8&l?z:null;if(Q&&-1!==py(Q,T,0)||2&l&&T!==z){if(Gs(l))return!1;y=!0}}}}else{if(!y&&!Gs(l)&&!Gs(I))return!1;if(y&&Gs(I))continue;y=!1,l=I|1&l}}return Gs(l)||y}function Gs(i){return 0==(1&i)}function ES(i,s,a,l){if(null===s)return-1;let c=0;if(l||!a){let f=!1;for(;c<s.length;){const y=s[c];if(y===i)return c;if(3===y||6===y)f=!0;else{if(1===y||2===y){let w=s[++c];for(;"string"==typeof w;)w=s[++c];continue}if(4===y)break;if(0===y){c+=4;continue}}c+=f?1:2}return-1}return function wC(i,s){let a=i.indexOf(4);if(a>-1)for(a++;a<i.length;){const l=i[a];if("number"==typeof l)return-1;if(l===s)return a;a++}return-1}(s,i)}function xh(i,s,a=!1){for(let l=0;l<s.length;l++)if(Y0(i,s[l],a))return!0;return!1}function gy(i,s){return i?":not("+s.trim()+")":s}function IC(i){let s=i[0],a=1,l=2,c="",f=!1;for(;a<i.length;){let y=i[a];if("string"==typeof y)if(2&l){const w=i[++a];c+="["+y+(w.length>0?'="'+w+'"':"")+"]"}else 8&l?c+="."+y:4&l&&(c+=" "+y);else""!==c&&!Gs(y)&&(s+=gy(f,c),c=""),l=y,f=f||!Gs(l);a++}return""!==c&&(s+=gy(f,c)),s}const Ht={};function J0(i){my(Kt(),Me(),xn()+i,!1)}function my(i,s,a,l){if(!l)if(3==(3&s[2])){const f=i.preOrderCheckHooks;null!==f&&fo(s,f,a)}else{const f=i.preOrderHooks;null!==f&&po(s,f,0,a)}qi(a)}function tw(i,s=null,a=null,l){const c=nw(i,s,a,l);return c.resolveInjectorInitializers(),c}function nw(i,s=null,a=null,l,c=new Set){const f=[a||Mt,QD(i)];return l=l||("object"==typeof i?void 0:ae(i)),new dy(f,s||Ah(),l||null,c)}let Dl=(()=>{class i{static create(a,l){if(Array.isArray(a))return tw({name:""},l,a,"");{const c=a.name??"";return tw({name:c},a.parent,a.providers,c)}}}return i.THROW_IF_NOT_FOUND=Di,i.NULL=new F0,i.\u0275prov=rt({token:i,providedIn:"any",factory:()=>Sn(Oc)}),i.__NG_ELEMENT_ID__=-1,i})();function Fc(i,s=Je.Default){const a=Me();return null===a?Sn(i,s):vo(Xn(),a,K(i),s)}function ow(){throw new Error("invalid")}function Oh(i,s){return i<<17|s<<2}function Ws(i){return i>>17&32767}function Dy(i){return 2|i}function ir(i){return(131068&i)>>2}function Lc(i,s){return-131069&i|s<<2}function Ph(i){return 1|i}function _w(i,s){const a=i.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const c=a[l],f=a[l+1];if(-1!==f){const y=i.data[f];Xu(c),y.contentQueries(2,s[f],f)}}}function rg(i,s,a,l,c,f,y,w,I,T,R){const F=s.blueprint.slice();return F[0]=c,F[2]=76|l,(null!==R||i&&1024&i[2])&&(F[2]|=1024),Jo(F),F[3]=F[15]=i,F[8]=a,F[10]=y||i&&i[10],F[11]=w||i&&i[11],F[12]=I||i&&i[12]||null,F[9]=T||i&&i[9]||null,F[6]=f,F[20]=function jm(){return fp++}(),F[21]=R,F[16]=2==s.type?i[16]:F,F}function Vc(i,s,a,l,c){let f=i.data[s];if(null===f)f=function Ny(i,s,a,l,c){const f=uo(),y=za(),I=i.data[s]=function Iw(i,s,a,l,c,f){return{type:a,index:l,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:c,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,s,l,c);return null===i.firstChild&&(i.firstChild=I),null!==f&&(y?null==f.child&&null!==I.parent&&(f.child=I):null===f.next&&(f.next=I)),I}(i,s,a,l,c),function ac(){return kt.lFrame.inI18n}()&&(f.flags|=64);else if(64&f.type){f.type=a,f.value=l,f.attrs=c;const y=function Wa(){const i=kt.lFrame,s=i.currentTNode;return i.isParent?s:s.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return jr(f,!0),f}function Uc(i,s,a,l){if(0===a)return-1;const c=s.length;for(let f=0;f<a;f++)s.push(l),i.blueprint.push(l),i.data.push(null);return c}function Oy(i,s,a){ho(s);try{const l=i.viewQuery;null!==l&&Nw(1,l,a);const c=i.template;null!==c&&Py(i,s,c,1,a),i.firstCreatePass&&(i.firstCreatePass=!1),i.staticContentQueries&&_w(i,s),i.staticViewQueries&&Nw(2,i.viewQuery,a);const f=i.components;null!==f&&function $C(i,s){for(let a=0;a<s.length;a++)Mw(i,s[a])}(s,f)}catch(l){throw i.firstCreatePass&&(i.incompleteFirstPass=!0,i.firstCreatePass=!1),l}finally{s[2]&=-5,ls()}}function Tl(i,s,a,l){const c=s[2];if(128!=(128&c)){ho(s);try{Jo(s),function ia(i){return kt.lFrame.bindingIndex=i}(i.bindingStartIndex),null!==a&&Py(i,s,a,2,l);const y=3==(3&c);if(y){const T=i.preOrderCheckHooks;null!==T&&fo(s,T,null)}else{const T=i.preOrderHooks;null!==T&&po(s,T,0,null),fc(s,0)}if(function qC(i){for(let s=Ia(i);null!==s;s=xo(s)){if(!s[2])continue;const a=s[9];for(let l=0;l<a.length;l++){const c=a[l],f=c[3];0==(512&c[2])&&Vn(f,1),c[2]|=512}}}(s),function jS(i){for(let s=Ia(i);null!==s;s=xo(s))for(let a=10;a<s.length;a++){const l=s[a],c=l[1];us(l)&&Tl(c,l,c.template,l[8])}}(s),null!==i.contentQueries&&_w(i,s),y){const T=i.contentCheckHooks;null!==T&&fo(s,T)}else{const T=i.contentHooks;null!==T&&po(s,T,1),fc(s,1)}!function UC(i,s){const a=i.hostBindingOpCodes;if(null!==a)try{for(let l=0;l<a.length;l++){const c=a[l];if(c<0)qi(~c);else{const f=c,y=a[++l],w=a[++l];uc(y,f),w(2,s[f])}}}finally{qi(-1)}}(i,s);const w=i.components;null!==w&&function BC(i,s){for(let a=0;a<s.length;a++)Sw(i,s[a])}(s,w);const I=i.viewQuery;if(null!==I&&Nw(2,I,l),y){const T=i.viewCheckHooks;null!==T&&fo(s,T)}else{const T=i.viewHooks;null!==T&&po(s,T,2),fc(s,2)}!0===i.firstUpdatePass&&(i.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Vn(s[3],-1))}finally{ls()}}}function Py(i,s,a,l,c){const f=xn(),y=2&l;try{qi(-1),y&&s.length>22&&my(i,s,22,!1),a(l,c)}finally{qi(f)}}function Fh(i,s,a){!xs()||(function Lh(i,s,a,l){const c=a.directiveStart,f=a.directiveEnd;i.firstCreatePass||Ki(a,s),m(l,s);const y=a.initialInputs;for(let w=c;w<f;w++){const I=i.data[w],T=qr(I);T&&US(s,a,I);const R=Ri(s,i,w,a);m(R,s),null!==y&&BS(0,w-c,R,I,0,y),T&&(nn(a.index,s)[8]=R)}}(i,s,a,vr(a,s)),128==(128&a.flags)&&function FS(i,s,a){const l=a.directiveStart,c=a.directiveEnd,f=a.index,y=function zd(){return kt.lFrame.currentDirectiveIndex}();try{qi(f);for(let w=l;w<c;w++){const I=i.data[w],T=s[w];co(w),(null!==I.hostBindings||0!==I.hostVars||null!==I.hostAttrs)&&sg(I,T)}}finally{qi(-1),co(y)}}(i,s,a))}function Fy(i,s,a=vr){const l=s.localNames;if(null!==l){let c=s.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],w=-1===y?a(s,i):i[y];i[c++]=w}}}function vw(i){const s=i.tView;return null===s||s.incompleteFirstPass?i.tView=Ly(1,null,i.template,i.decls,i.vars,i.directiveDefs,i.pipeDefs,i.viewQuery,i.schemas,i.consts):s}function Ly(i,s,a,l,c,f,y,w,I,T){const R=22+l,F=R+c,z=function ww(i,s){const a=[];for(let l=0;l<s;l++)a.push(l<i?null:Ht);return a}(R,F),Q="function"==typeof T?T():T;return z[1]={type:i,blueprint:z,template:a,queries:null,viewQuery:w,declTNode:s,data:z.slice().fill(null,R),bindingStartIndex:R,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:I,consts:Q,incompleteFirstPass:!1}}function Vy(i,s,a,l){const c=Ow(s);null===a?c.push(l):(c.push(a),i.firstCreatePass&&lg(i).push(l,c.length-1))}function HC(i,s,a){for(let l in i)if(i.hasOwnProperty(l)){const c=i[l];(a=null===a?{}:a).hasOwnProperty(l)?a[l].push(s,c):a[l]=[s,c]}return a}function Dw(i,s){const l=s.directiveEnd,c=i.data,f=s.attrs,y=[];let w=null,I=null;for(let T=s.directiveStart;T<l;T++){const R=c[T],F=R.inputs,z=null===f||K0(s)?null:$S(F,f);y.push(z),w=HC(F,T,w),I=HC(R.outputs,T,I)}null!==w&&(w.hasOwnProperty("class")&&(s.flags|=16),w.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=y,s.inputs=w,s.outputs=I}function ig(i,s){const a=nn(s,i);16&a[2]||(a[2]|=32)}function Uy(i,s,a,l){let c=!1;if(xs()){const f=function LS(i,s,a){const l=i.directiveRegistry;let c=null;if(l)for(let f=0;f<l.length;f++){const y=l[f];xh(a,y.selectors,!1)&&(c||(c=[]),Ns(Ki(a,s),i,y.type),qr(y)?(bw(i,a),c.unshift(y)):c.push(y))}return c}(i,s,a),y=null===l?null:{"":-1};if(null!==f){c=!0,Tw(a,i.data.length,f.length);for(let R=0;R<f.length;R++){const F=f[R];F.providersResolver&&F.providersResolver(F)}let w=!1,I=!1,T=Uc(i,s,f.length,null);for(let R=0;R<f.length;R++){const F=f[R];a.mergedAttrs=ca(a.mergedAttrs,F.hostAttrs),WC(i,a,s,T,F),GC(T,F,y),null!==F.contentQueries&&(a.flags|=8),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(a.flags|=128);const z=F.type.prototype;!w&&(z.ngOnChanges||z.ngOnInit||z.ngDoCheck)&&((i.preOrderHooks||(i.preOrderHooks=[])).push(a.index),w=!0),!I&&(z.ngOnChanges||z.ngDoCheck)&&((i.preOrderCheckHooks||(i.preOrderCheckHooks=[])).push(a.index),I=!0),T++}Dw(i,a)}y&&function VS(i,s,a){if(s){const l=i.localNames=[];for(let c=0;c<s.length;c+=2){const f=a[s[c+1]];if(null==f)throw new De(-301,!1);l.push(s[c],f)}}}(a,l,y)}return a.mergedAttrs=ca(a.mergedAttrs,a.attrs),c}function By(i,s,a,l,c,f){const y=f.hostBindings;if(y){let w=i.hostBindingOpCodes;null===w&&(w=i.hostBindingOpCodes=[]);const I=~s.index;(function $y(i){let s=i.length;for(;s>0;){const a=i[--s];if("number"==typeof a&&a<0)return a}return 0})(w)!=I&&w.push(I),w.push(l,c,y)}}function sg(i,s){null!==i.hostBindings&&i.hostBindings(1,s)}function bw(i,s){s.flags|=2,(i.components||(i.components=[])).push(s.index)}function GC(i,s,a){if(a){if(s.exportAs)for(let l=0;l<s.exportAs.length;l++)a[s.exportAs[l]]=i;qr(s)&&(a[""]=i)}}function Tw(i,s,a){i.flags|=1,i.directiveStart=s,i.directiveEnd=s+a,i.providerIndexes=s}function WC(i,s,a,l,c){i.data[l]=c;const f=c.factory||(c.factory=br(c.type)),y=new ci(f,qr(c),Fc);i.blueprint[l]=y,a[l]=y,By(i,s,0,l,Uc(i,a,c.hostVars,Ht),c)}function US(i,s,a){const l=vr(s,i),c=vw(a),f=i[10],y=Vh(i,rg(i,c,null,a.onPush?32:16,l,s,f,f.createRenderer(l,a),null,null,null));i[s.index]=y}function Oo(i,s,a,l,c,f){const y=vr(i,s);!function Aw(i,s,a,l,c,f,y){if(null==f)i.removeAttribute(s,c,a);else{const w=null==y?ye(f):y(f,l||"",c);i.setAttribute(s,c,w,a)}}(s[11],y,f,i.value,a,l,c)}function BS(i,s,a,l,c,f){const y=f[s];if(null!==y){const w=l.setInput;for(let I=0;I<y.length;){const T=y[I++],R=y[I++],F=y[I++];null!==w?l.setInput(a,F,T,R):a[R]=F}}}function $S(i,s){let a=null,l=0;for(;l<s.length;){const c=s[l];if(0!==c)if(5!==c){if("number"==typeof c)break;i.hasOwnProperty(c)&&(null===a&&(a=[]),a.push(c,i[c],s[l+1])),l+=2}else l+=2;else l+=4}return a}function zC(i,s,a,l){return new Array(i,!0,!1,s,null,0,l,a,null,null)}function Sw(i,s){const a=nn(s,i);if(us(a)){const l=a[1];48&a[2]?Tl(l,a,l.template,a[8]):a[5]>0&&og(a)}}function og(i){for(let l=Ia(i);null!==l;l=xo(l))for(let c=10;c<l.length;c++){const f=l[c];if(us(f))if(512&f[2]){const y=f[1];Tl(y,f,y.template,f[8])}else f[5]>0&&og(f)}const a=i[1].components;if(null!==a)for(let l=0;l<a.length;l++){const c=nn(a[l],i);us(c)&&c[5]>0&&og(c)}}function Mw(i,s){const a=nn(s,i),l=a[1];(function xw(i,s){for(let a=s.length;a<i.blueprint.length;a++)s.push(i.blueprint[a])})(l,a),Oy(l,a,a[8])}function Vh(i,s){return i[13]?i[14][4]=s:i[13]=s,i[14]=s,s}function ag(i){for(;i;){i[2]|=32;const s=Ea(i);if(Wu(i)&&!s)return i;i=s}return null}function Uh(i,s,a,l=!0){const c=s[10];c.begin&&c.begin();try{Tl(i,s,i.template,a)}catch(y){throw l&&kw(s,y),y}finally{c.end&&c.end()}}function Nw(i,s,a){Xu(0),s(i,a)}function Ow(i){return i[7]||(i[7]=[])}function lg(i){return i.cleanup||(i.cleanup=[])}function kw(i,s){const a=i[9],l=a?a.get(Il,null):null;l&&l.handleError(s)}function Fw(i,s,a,l,c){for(let f=0;f<a.length;){const y=a[f++],w=a[f++],I=s[y],T=i.data[y];null!==T.setInput?T.setInput(I,c,l,w):I[w]=c}}function cg(i,s,a){let l=a?i.styles:null,c=a?i.classes:null,f=0;if(null!==s)for(let y=0;y<s.length;y++){const w=s[y];"number"==typeof w?f=w:1==f?c=fe(c,w):2==f&&(l=fe(l,w+": "+s[++y]+";"))}a?i.styles=l:i.stylesWithoutHost=l,a?i.classes=c:i.classesWithoutHost=c}function _s(i,s,a,l,c=!1){for(;null!==a;){const f=s[a.index];if(null!==f&&l.push(Pn(f)),oi(f))for(let w=10;w<f.length;w++){const I=f[w],T=I[1].firstChild;null!==T&&_s(I[1],I,T,l)}const y=a.type;if(8&y)_s(i,s,a.child,l);else if(32&y){const w=pl(a,s);let I;for(;I=w();)l.push(I)}else if(16&y){const w=Jm(s,a);if(Array.isArray(w))l.push(...w);else{const I=Ea(s[16]);_s(I[1],I,w,l,!0)}}a=c?a.projectionNext:a.next}return l}class dt{constructor(s,a){this._lView=s,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,a=s[1];return _s(a,s,a.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(oi(s)){const a=s[8],l=a?a.indexOf(this):-1;l>-1&&(Wm(s,l),Pr(a,l))}this._attachedToViewContainer=!1}E0(this._lView[1],this._lView)}onDestroy(s){Vy(this._lView[1],this._lView,null,s)}markForCheck(){ag(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){Uh(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new De(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function v0(i,s){yl(i,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new De(902,!1);this._appRef=s}}class jy extends dt{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;Uh(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class Vt extends yu{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const a=x(s);return new jh(a,this.ngModule)}}function Bh(i){const s=[];for(let a in i)i.hasOwnProperty(a)&&s.push({propName:i[a],templateName:a});return s}class $h{constructor(s,a){this.injector=s,this.parentInjector=a}get(s,a,l){const c=this.injector.get(s,kp,l);return c!==kp||a===kp?c:this.parentInjector.get(s,a,l)}}class jh extends sC{constructor(s,a){super(),this.componentDef=s,this.ngModule=a,this.componentType=s.type,this.selector=function DC(i){return i.map(IC).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!a}get inputs(){return Bh(this.componentDef.inputs)}get outputs(){return Bh(this.componentDef.outputs)}create(s,a,l,c){let f=(c=c||this.ngModule)instanceof mu?c:c?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new $h(s,f):s,w=y.get(Sh,null);if(null===w)throw new De(407,!1);const I=y.get(dC,null),T=w.createRenderer(null,this.componentDef),R=this.componentDef.selectors[0][0]||"div",F=l?function Ew(i,s,a){return i.selectRootElement(s,a===yt.ShadowDom)}(T,l,this.componentDef.encapsulation):gh(T,R,function dg(i){const s=i.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(R)),z=this.componentDef.onPush?288:272,Q=Ly(0,null,null,1,0,null,null,null,null,null),me=rg(null,Q,null,z,null,null,w,T,I,y,null);let Ue,ze;ho(me);try{const lt=function pi(i,s,a,l,c,f){const y=a[1];a[22]=i;const I=Vc(y,22,2,"#host",null),T=I.mergedAttrs=s.hostAttrs;null!==T&&(cg(I,T,!0),null!==i&&(Zi(c,i,T),null!==I.classes&&Cp(c,i,I.classes),null!==I.styles&&Dp(c,i,I.styles)));const R=l.createRenderer(i,s),F=rg(a,vw(s),null,s.onPush?32:16,a[22],I,l,R,f||null,null,null);return y.firstCreatePass&&(Ns(Ki(I,a),y,s.type),bw(y,I),Tw(I,a.length,1)),Vh(a,F),a[22]=F}(F,this.componentDef,me,w,T);if(F)if(l)Zi(T,F,["ng-version",q0.full]);else{const{attrs:Tt,classes:Re}=function CC(i){const s=[],a=[];let l=1,c=2;for(;l<i.length;){let f=i[l];if("string"==typeof f)2===c?""!==f&&s.push(f,i[++l]):8===c&&a.push(f);else{if(!Gs(c))break;c=f}l++}return{attrs:s,classes:a}}(this.componentDef.selectors[0]);Tt&&Zi(T,F,Tt),Re&&Re.length>0&&Cp(T,F,Re.join(" "))}if(ze=so(Q,22),void 0!==a){const Tt=ze.projection=[];for(let Re=0;Re<this.ngContentSelectors.length;Re++){const Pt=a[Re];Tt.push(null!=Pt?Array.from(Pt):null)}}Ue=function hg(i,s,a,l){const c=a[1],f=function Cw(i,s,a){const l=Xn();i.firstCreatePass&&(a.providersResolver&&a.providersResolver(a),WC(i,l,s,Uc(i,s,1,null),a),Dw(i,l));const c=Ri(s,i,l.directiveStart,l);m(c,s);const f=vr(l,s);return f&&m(f,s),c}(c,a,s);if(i[8]=a[8]=f,null!==l)for(const w of l)w(f,s);if(s.contentQueries){const w=Xn();s.contentQueries(1,f,w.directiveStart)}const y=Xn();return!c.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(qi(y.index),By(a[1],y,0,y.directiveStart,y.directiveEnd,s),sg(s,f)),f}(lt,this.componentDef,me,[Jr]),Oy(Q,me,null)}finally{ls()}return new ZC(this.componentType,Ue,_u(ze,me),me,ze)}}class ZC extends class H0{}{constructor(s,a,l,c,f){super(),this.location=l,this._rootLView=c,this._tNode=f,this.instance=a,this.hostView=this.changeDetectorRef=new jy(c),this.componentType=s}setInput(s,a){const l=this._tNode.inputs;let c;if(null!==l&&(c=l[s])){const f=this._rootLView;Fw(f[1],f,c,s,a),ig(f,this._tNode.index)}}get injector(){return new Eo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function Jr(){const i=Xn();qa(Me()[1],i)}function Gy(i){let s=function Na(i){return Object.getPrototypeOf(i.prototype).constructor}(i.type),a=!0;const l=[i];for(;s;){let c;if(qr(i))c=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new De(903,!1);c=s.\u0275dir}if(c){if(a){l.push(c);const y=i;y.inputs=Hh(i.inputs),y.declaredInputs=Hh(i.declaredInputs),y.outputs=Hh(i.outputs);const w=c.hostBindings;w&&KC(i,w);const I=c.viewQuery,T=c.contentQueries;if(I&&Vw(i,I),T&&gi(i,T),le(i.inputs,c.inputs),le(i.declaredInputs,c.declaredInputs),le(i.outputs,c.outputs),qr(c)&&c.data.animation){const R=i.data;R.animation=(R.animation||[]).concat(c.data.animation)}}const f=c.features;if(f)for(let y=0;y<f.length;y++){const w=f[y];w&&w.ngInherit&&w(i),w===Gy&&(a=!1)}}s=Object.getPrototypeOf(s)}!function Lw(i){let s=0,a=null;for(let l=i.length-1;l>=0;l--){const c=i[l];c.hostVars=s+=c.hostVars,c.hostAttrs=ca(c.hostAttrs,a=ca(a,c.hostAttrs))}}(l)}function Hh(i){return i===Nr?{}:i===Mt?[]:i}function Vw(i,s){const a=i.viewQuery;i.viewQuery=a?(l,c)=>{s(l,c),a(l,c)}:s}function gi(i,s){const a=i.contentQueries;i.contentQueries=a?(l,c,f)=>{s(l,c,f),a(l,c,f)}:s}function KC(i,s){const a=i.hostBindings;i.hostBindings=a?(l,c)=>{s(l,c),a(l,c)}:s}let Al=null;function mi(){if(!Al){const i=Nt.Symbol;if(i&&i.iterator)Al=i.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let a=0;a<s.length;++a){const l=s[a];"entries"!==l&&"size"!==l&&Map.prototype[l]===Map.prototype.entries&&(Al=l)}}}return Al}function Gh(i){return!!pg(i)&&(Array.isArray(i)||!(i instanceof Map)&&mi()in i)}function pg(i){return null!==i&&("function"==typeof i||"object"==typeof i)}function Xr(i,s,a){return!Object.is(i[s],a)&&(i[s]=a,!0)}function zh(i,s,a,l){const c=Me();return Xr(c,sa(),s)&&(Kt(),Oo(An(),c,i,s,a,l)),zh}function Jy(i,s,a,l,c,f,y,w){const I=Me(),T=Kt(),R=i+22,F=T.firstCreatePass?function Qy(i,s,a,l,c,f,y,w,I){const T=s.consts,R=Vc(s,i,4,y||null,li(T,w));Uy(s,a,R,li(T,I)),qa(s,R);const F=R.tViews=Ly(2,R,l,c,f,s.directiveRegistry,s.pipeRegistry,null,s.schemas,T);return null!==s.queries&&(s.queries.template(s,R),F.queries=s.queries.embeddedTView(R)),R}(R,T,I,s,a,l,c,f,y):T.data[R];jr(F,!1);const z=I[11].createComment("");Ep(T,I,z,F),m(z,I),Vh(I,I[R]=zC(z,I,z,F)),Ko(F)&&Fh(T,I,F),null!=y&&Fy(I,F,w)}function _g(i,s,a){const l=Me();return Xr(l,sa(),s)&&function ys(i,s,a,l,c,f,y,w){const I=vr(s,a);let R,T=s.inputs;!w&&null!=T&&(R=T[l])?(Fw(i,a,R,l,c),Gu(s)&&ig(a,s.index)):3&s.type&&(l=function OS(i){return"class"===i?"className":"for"===i?"htmlFor":"formaction"===i?"formAction":"innerHtml"===i?"innerHTML":"readonly"===i?"readOnly":"tabindex"===i?"tabIndex":i}(l),c=null!=y?y(c,s.value||"",l):c,f.setProperty(I,l,c))}(Kt(),An(),l,i,s,l[11],a,!1),_g}function vg(i,s,a,l,c){const y=c?"class":"style";Fw(i,a,s.inputs[y],y,l)}function Kh(i,s,a,l){const c=Me(),f=Kt(),y=22+i,w=c[11],I=c[y]=gh(w,s,function nl(){return kt.lFrame.currentNamespace}()),T=f.firstCreatePass?function Xy(i,s,a,l,c,f,y){const w=s.consts,T=Vc(s,i,2,c,li(w,f));return Uy(s,a,T,li(w,y)),null!==T.attrs&&cg(T,T.attrs,!1),null!==T.mergedAttrs&&cg(T,T.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,T),T}(y,f,c,0,s,a,l):f.data[y];jr(T,!0);const R=T.mergedAttrs;null!==R&&Zi(w,I,R);const F=T.classes;null!==F&&Cp(w,I,F);const z=T.styles;return null!==z&&Dp(w,I,z),64!=(64&T.flags)&&Ep(f,c,I,T),0===function ea(){return kt.lFrame.elementDepthCount}()&&m(I,c),function oc(){kt.lFrame.elementDepthCount++}(),Ko(T)&&(Fh(f,c,T),function ky(i,s,a){if(Js(s)){const c=s.directiveEnd;for(let f=s.directiveStart;f<c;f++){const y=i.data[f];y.contentQueries&&y.contentQueries(1,a[f],f)}}}(f,T,c)),null!==l&&Fy(c,T),Kh}function wg(){let i=Xn();za()?function lo(){kt.lFrame.isParent=!1}():(i=i.parent,jr(i,!1));const s=i;!function ta(){kt.lFrame.elementDepthCount--}();const a=Kt();return a.firstCreatePass&&(qa(a,i),Js(i)&&a.queries.elementEnd(i)),null!=s.classesWithoutHost&&function Ka(i){return 0!=(16&i.flags)}(s)&&vg(a,s,Me(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function Ya(i){return 0!=(32&i.flags)}(s)&&vg(a,s,Me(),s.stylesWithoutHost,!1),wg}function Yh(i,s,a,l){return Kh(i,s,a,l),wg(),Yh}function Jh(){return Me()}function Xh(i){return!!i&&"function"==typeof i.then}function Hw(i){return!!i&&"function"==typeof i.subscribe}const Gw=Hw;function Eg(i,s,a,l){const c=Me(),f=Kt(),y=Xn();return function t_(i,s,a,l,c,f,y,w){const I=Ko(l),R=i.firstCreatePass&&lg(i),F=s[8],z=Ow(s);let Q=!0;if(3&l.type||w){const ze=vr(l,s),lt=w?w(ze):ze,Tt=z.length,Re=w?yn=>w(Pn(yn[l.index])):l.index;let Pt=null;if(!w&&I&&(Pt=function JC(i,s,a,l){const c=i.cleanup;if(null!=c)for(let f=0;f<c.length-1;f+=2){const y=c[f];if(y===a&&c[f+1]===l){const w=s[7],I=c[f+2];return w.length>I?w[I]:null}"string"==typeof y&&(f+=2)}return null}(i,s,c,l.index)),null!==Pt)(Pt.__ngLastListenerFn__||Pt).__ngNextListenerFn__=f,Pt.__ngLastListenerFn__=f,Q=!1;else{f=zw(l,s,F,f,!1);const yn=a.listen(lt,c,f);z.push(f,yn),R&&R.push(c,Re,Tt,Tt+1)}}else f=zw(l,s,F,f,!1);const me=l.outputs;let Ue;if(Q&&null!==me&&(Ue=me[c])){const ze=Ue.length;if(ze)for(let lt=0;lt<ze;lt+=2){const Fn=s[Ue[lt]][Ue[lt+1]].subscribe(f),Kn=z.length;z.push(f,Fn),R&&R.push(c,l.index,Kn,-(Kn+1))}}}(f,c,c[11],y,i,s,0,l),Eg}function Ig(i,s,a,l){try{return!1!==a(l)}catch(c){return kw(i,c),!1}}function zw(i,s,a,l,c){return function f(y){if(y===Function)return l;ag(2&i.flags?nn(i.index,s):s);let I=Ig(s,0,l,y),T=f.__ngNextListenerFn__;for(;T;)I=Ig(s,0,T,y)&&I,T=T.__ngNextListenerFn__;return c&&!1===I&&(y.preventDefault(),y.returnValue=!1),I}}function Dg(i=1){return function cs(i){return(kt.lFrame.contextLView=function dc(i,s){for(;i>0;)s=s[15],i--;return s}(i,kt.lFrame.contextLView))[8]}(i)}function Yw(i,s,a,l,c){const f=i[a+1],y=null===s;let w=l?Ws(f):ir(f),I=!1;for(;0!==w&&(!1===I||y);){const R=i[w+1];Ml(i[w],s)&&(I=!0,i[w+1]=l?Ph(R):Dy(R)),w=l?Ws(R):ir(R)}I&&(i[a+1]=l?Dy(f):Ph(f))}function Ml(i,s){return null===i||null==s||(Array.isArray(i)?i[1]:i)===s||!(!Array.isArray(i)||"string"!=typeof s)&&Pi(i,s)>=0}function sf(i,s){return function Xi(i,s,a,l){const c=Me(),f=Kt(),y=function zi(i){const s=kt.lFrame,a=s.bindingIndex;return s.bindingIndex=s.bindingIndex+i,a}(2);f.firstUpdatePass&&function c_(i,s,a,l){const c=i.data;if(null===c[a+1]){const f=c[xn()],y=function Ag(i,s){return s>=i.expandoStartIndex}(i,a);(function aE(i,s){return 0!=(i.flags&(s?16:32))})(f,l)&&null===s&&!y&&(s=!1),s=function nE(i,s,a,l){const c=function Ju(i){const s=kt.lFrame.currentDirectiveIndex;return-1===s?null:i[s]}(i);let f=l?s.residualClasses:s.residualStyles;if(null===c)0===(l?s.classBindings:s.styleBindings)&&(a=Iu(a=Sg(null,i,s,a,l),s.attrs,l),f=null);else{const y=s.directiveStylingLast;if(-1===y||i[y]!==c)if(a=Sg(c,i,s,a,l),null===f){let I=function rE(i,s,a){const l=a?s.classBindings:s.styleBindings;if(0!==ir(l))return i[Ws(l)]}(i,s,l);void 0!==I&&Array.isArray(I)&&(I=Sg(null,i,s,I[1],l),I=Iu(I,s.attrs,l),function tb(i,s,a,l){i[Ws(a?s.classBindings:s.styleBindings)]=l}(i,s,l,I))}else f=function uf(i,s,a){let l;const c=s.directiveEnd;for(let f=1+s.directiveStylingLast;f<c;f++)l=Iu(l,i[f].hostAttrs,a);return Iu(l,s.attrs,a)}(i,s,l)}return void 0!==f&&(l?s.residualClasses=f:s.residualStyles=f),a}(c,f,s,l),function Zc(i,s,a,l,c,f){let y=f?s.classBindings:s.styleBindings,w=Ws(y),I=ir(y);i[l]=a;let R,T=!1;if(Array.isArray(a)){const F=a;R=F[1],(null===R||Pi(F,R)>0)&&(T=!0)}else R=a;if(c)if(0!==I){const z=Ws(i[w+1]);i[l+1]=Oh(z,w),0!==z&&(i[z+1]=Lc(i[z+1],l)),i[w+1]=function NC(i,s){return 131071&i|s<<17}(i[w+1],l)}else i[l+1]=Oh(w,0),0!==w&&(i[w+1]=Lc(i[w+1],l)),w=l;else i[l+1]=Oh(I,0),0===w?w=l:i[I+1]=Lc(i[I+1],l),I=l;T&&(i[l+1]=Dy(i[l+1])),Yw(i,R,l,!0),Yw(i,R,l,!1),function eb(i,s,a,l,c){const f=c?i.residualClasses:i.residualStyles;null!=f&&"string"==typeof s&&Pi(f,s)>=0&&(a[l+1]=Ph(a[l+1]))}(s,R,i,l,f),y=Oh(w,I),f?s.classBindings=y:s.styleBindings=y}(c,f,s,a,y,l)}}(f,i,y,l),s!==Ht&&Xr(c,y,s)&&function iE(i,s,a,l,c,f,y,w){if(!(3&s.type))return;const I=i.data,T=I[w+1];cf(function Cy(i){return 1==(1&i)}(T)?sE(I,s,a,c,ir(T),y):void 0)||(cf(f)||function uw(i){return 2==(2&i)}(T)&&(f=sE(I,null,a,c,w,y)),function SD(i,s,a,l,c){if(s)c?i.addClass(a,l):i.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:Fi.DashCase;null==c?i.removeStyle(a,l,f):("string"==typeof c&&c.endsWith("!important")&&(c=c.slice(0,-10),f|=Fi.Important),i.setStyle(a,l,c,f))}}(l,y,Ei(xn(),a),c,f))}(f,f.data[xn()],c,c[11],i,c[y+1]=function oE(i,s){return null==i||("string"==typeof s?i+=s:"object"==typeof i&&(i=ae(ba(i)))),i}(s,a),l,y)}(i,s,null,!0),sf}function Sg(i,s,a,l,c){let f=null;const y=a.directiveEnd;let w=a.directiveStylingLast;for(-1===w?w=a.directiveStart:w++;w<y&&(f=s[w],l=Iu(l,f.hostAttrs,c),f!==i);)w++;return null!==i&&(a.directiveStylingLast=w),l}function Iu(i,s,a){const l=a?1:2;let c=-1;if(null!==s)for(let f=0;f<s.length;f++){const y=s[f];"number"==typeof y?c=y:c===l&&(Array.isArray(i)||(i=void 0===i?[]:["",i]),ft(i,y,!!a||s[++f]))}return void 0===i?null:i}function sE(i,s,a,l,c,f){const y=null===s;let w;for(;c>0;){const I=i[c],T=Array.isArray(I),R=T?I[1]:I,F=null===R;let z=a[c+1];z===Ht&&(z=F?Mt:void 0);let Q=F?cl(z,l):R===l?z:void 0;if(T&&!cf(Q)&&(Q=cl(I,l)),cf(Q)&&(w=Q,y))return w;const me=i[c+1];c=y?Ws(me):ir(me)}if(null!==s){let I=f?s.residualClasses:s.residualStyles;null!=I&&(w=cl(I,l))}return w}function cf(i){return void 0!==i}function Cu(i,s=""){const a=Me(),l=Kt(),c=i+22,f=l.firstCreatePass?Vc(l,c,1,s,null):l.data[c],y=a[c]=function vp(i,s){return i.createText(s)}(a[11],s);Ep(l,a,y,f),jr(f,!1)}function qs(i){return Qc("",i,""),qs}function Qc(i,s,a){const l=Me(),c=function Hc(i,s,a,l){return Xr(i,sa(),a)?s+ye(a)+l:Ht}(l,i,s,a);return c!==Ht&&function Ra(i,s,a){const l=Ei(s,i);!function Gm(i,s,a){i.setValue(s,a)}(i[11],l,a)}(l,xn(),c),Qc}const Zs=void 0;var lb=["en",[["a","p"],["AM","PM"],Zs],[["AM","PM"],Zs,Zs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zs,"{1} 'at' {0}",Zs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function mf(i){const a=Math.floor(Math.abs(i)),l=i.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Nn={};function v_(i){const s=function Rg(i){return i.toLowerCase().replace(/_/g,"-")}(i);let a=w_(s);if(a)return a;const l=s.split("-")[0];if(a=w_(l),a)return a;if("en"===l)return lb;throw new De(701,!1)}function _E(i){return v_(i)[At.PluralCase]}function w_(i){return i in Nn||(Nn[i]=Nt.ng&&Nt.ng.common&&Nt.ng.common.locales&&Nt.ng.common.locales[i]),Nn[i]}var At=(()=>((At=At||{})[At.LocaleId=0]="LocaleId",At[At.DayPeriodsFormat=1]="DayPeriodsFormat",At[At.DayPeriodsStandalone=2]="DayPeriodsStandalone",At[At.DaysFormat=3]="DaysFormat",At[At.DaysStandalone=4]="DaysStandalone",At[At.MonthsFormat=5]="MonthsFormat",At[At.MonthsStandalone=6]="MonthsStandalone",At[At.Eras=7]="Eras",At[At.FirstDayOfWeek=8]="FirstDayOfWeek",At[At.WeekendRange=9]="WeekendRange",At[At.DateFormat=10]="DateFormat",At[At.TimeFormat=11]="TimeFormat",At[At.DateTimeFormat=12]="DateTimeFormat",At[At.NumberSymbols=13]="NumberSymbols",At[At.NumberFormats=14]="NumberFormats",At[At.CurrencyCode=15]="CurrencyCode",At[At.CurrencySymbol=16]="CurrencySymbol",At[At.CurrencyName=17]="CurrencyName",At[At.Currencies=18]="Currencies",At[At.Directionality=19]="Directionality",At[At.PluralCase=20]="PluralCase",At[At.ExtraData=21]="ExtraData",At))();const xl="en-US";let yf=xl;function Fg(i,s,a,l,c){if(i=K(i),Array.isArray(i))for(let f=0;f<i.length;f++)Fg(i[f],s,a,l,c);else{const f=Kt(),y=Me();let w=wl(i)?i:K(i.provide),I=$0(i);const T=Xn(),R=1048575&T.providerIndexes,F=T.directiveStart,z=T.providerIndexes>>20;if(wl(i)||!i.multi){const Q=new ci(I,c,Fc),me=oe(w,s,c?R:R+z,F);-1===me?(Ns(Ki(T,y),f,w),Uo(f,i,s.length),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(Q),y.push(Q)):(a[me]=Q,y[me]=Q)}else{const Q=oe(w,s,R+z,F),me=oe(w,s,R,R+z),Ue=Q>=0&&a[Q],ze=me>=0&&a[me];if(c&&!ze||!c&&!Ue){Ns(Ki(T,y),f,w);const lt=function wf(i,s,a,l,c){const f=new ci(i,a,Fc);return f.multi=[],f.index=s,f.componentProviders=0,Lg(f,c,l&&!a),f}(c?Ys:Vg,a.length,c,l,I);!c&&ze&&(a[me].providerFactory=lt),Uo(f,i,s.length,0),s.push(w),T.directiveStart++,T.directiveEnd++,c&&(T.providerIndexes+=1048576),a.push(lt),y.push(lt)}else Uo(f,i,Q>-1?Q:me,Lg(a[c?me:Q],I,!c&&l));!c&&l&&ze&&a[me].componentProviders++}}}function Uo(i,s,a,l){const c=wl(s),f=function XD(i){return!!i.useClass}(s);if(c||f){const I=(f?K(s.useClass):s).prototype.ngOnDestroy;if(I){const T=i.destroyHooks||(i.destroyHooks=[]);if(!c&&s.multi){const R=T.indexOf(a);-1===R?T.push(a,[l,I]):T[R+1].push(l,I)}else T.push(a,I)}}}function Lg(i,s,a){return a&&i.componentProviders++,i.multi.push(s)-1}function oe(i,s,a,l){for(let c=a;c<l;c++)if(s[c]===i)return c;return-1}function Vg(i,s,a,l){return L_(this.multi,[])}function Ys(i,s,a,l){const c=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,w=Ri(a,a[1],this.providerFactory.index,l);f=w.slice(0,y),L_(c,f);for(let I=y;I<w.length;I++)f.push(w[I])}else f=[],L_(c,f);return f}function L_(i,s){for(let a=0;a<i.length;a++)s.push((0,i[a])());return s}function ka(i,s=[]){return a=>{a.providersResolver=(l,c)=>function jE(i,s,a){const l=Kt();if(l.firstCreatePass){const c=qr(i);Fg(a,l.data,l.blueprint,c,!0),Fg(s,l.data,l.blueprint,c,!1)}}(l,c?c(i):i,s)}}class ud{}class Su{}function HE(i,s){return new WE(i,s??null)}class WE extends ud{constructor(s,a){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Vt(this);const l=it(s);this._bootstrapComponents=Ro(l.bootstrap),this._r3Injector=nw(s,a,[{provide:ud,useValue:this},{provide:yu,useValue:this.componentFactoryResolver}],ae(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class V_ extends Su{constructor(s){super(),this.moduleType=s}create(s){return new WE(this.moduleType,s)}}class ts extends ud{constructor(s,a,l){super(),this.componentFactoryResolver=new Vt(this),this.instance=null;const c=new dy([...s,{provide:ud,useValue:this},{provide:yu,useValue:this.componentFactoryResolver}],a||Ah(),l,new Set(["environment"]));this.injector=c,c.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function U_(i,s,a=null){return new ts(i,s,a).injector}let Mu=(()=>{class i{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a.id)){const l=L0(0,a.type),c=l.length>0?U_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a.id,c)}return this.cachedInjectors.get(a.id)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return i.\u0275prov=rt({token:i,providedIn:"environment",factory:()=>new i(Sn(mu))}),i})();function B_(i){i.getStandaloneInjector=s=>s.get(Mu).getOrCreateStandaloneInjector(i)}function Bg(i){return s=>{setTimeout(i,void 0,s)}}const vs=class Z_ extends h.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,a,l){let c=s,f=a||(()=>null),y=l;if(s&&"object"==typeof s){const I=s;c=I.next?.bind(I),f=I.error?.bind(I),y=I.complete?.bind(I)}this.__isAsync&&(f=Bg(f),c&&(c=Bg(c)),y&&(y=Bg(y)));const w=super.subscribe({next:c,error:f,complete:y});return s instanceof B.w0&&s.add(w),w}};function tI(){return this._results[mi()]()}class $g{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=mi(),l=$g.prototype;l[a]||(l[a]=tI)}get changes(){return this._changes||(this._changes=new vs)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,a){return this._results.reduce(s,a)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,a){const l=this;l.dirty=!1;const c=Cn(s);(this._changesDetected=!function Oi(i,s,a){if(i.length!==s.length)return!1;for(let l=0;l<i.length;l++){let c=i[l],f=s[l];if(a&&(c=a(c),f=a(f)),f!==c)return!1}return!0}(l._results,c,a))&&(l._results=c,l.length=c.length,l.last=c[this.length-1],l.first=c[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let gd=(()=>{class i{}return i.__NG_ELEMENT_ID__=Tb,i})();const Cb=gd,bb=class extends Cb{constructor(s,a,l){super(),this._declarationLView=s,this._declarationTContainer=a,this.elementRef=l}createEmbeddedView(s,a){const l=this._declarationTContainer.tViews,c=rg(this._declarationLView,l,s,16,null,l.declTNode,null,null,null,null,a||null);c[17]=this._declarationLView[this._declarationTContainer.index];const y=this._declarationLView[19];return null!==y&&(c[19]=y.createEmbeddedView(l)),Oy(l,c,s),new dt(c)}};function Tb(){return Cf(Xn(),Me())}function Cf(i,s){return 4&i.type?new bb(s,i,_u(i,s)):null}let jg=(()=>{class i{}return i.__NG_ELEMENT_ID__=nI,i})();function nI(){return ur(Xn(),Me())}const Ab=jg,rI=class extends Ab{constructor(s,a,l){super(),this._lContainer=s,this._hostTNode=a,this._hostLView=l}get element(){return _u(this._hostTNode,this._hostLView)}get injector(){return new Eo(this._hostTNode,this._hostLView)}get parentInjector(){const s=ha(this._hostTNode,this._hostLView);if(Qd(s)){const a=ds(s,this._hostLView),l=tr(s);return new Eo(a[1].data[l+8],a)}return new Eo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const a=Vl(this._lContainer);return null!==a&&a[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,a,l){let c,f;"number"==typeof l?c=l:null!=l&&(c=l.index,f=l.injector);const y=s.createEmbeddedView(a||{},f);return this.insert(y,c),y}createComponent(s,a,l,c,f){const y=s&&!function Yi(i){return"function"==typeof i}(s);let w;if(y)w=a;else{const F=a||{};w=F.index,l=F.injector,c=F.projectableNodes,f=F.environmentInjector||F.ngModuleRef}const I=y?s:new jh(x(s)),T=l||this.parentInjector;if(!f&&null==I.ngModule){const z=(y?T:this.parentInjector).get(mu,null);z&&(f=z)}const R=I.create(T,c,void 0,f);return this.insert(R.hostView,w),R}insert(s,a){const l=s._lView,c=l[1];if(function Yu(i){return oi(i[3])}(l)){const R=this.indexOf(s);if(-1!==R)this.detach(R);else{const F=l[3],z=new rI(F,F[6],F[3]);z.detach(z.indexOf(s))}}const f=this._adjustIndex(a),y=this._lContainer;!function ID(i,s,a,l){const c=10+l,f=a.length;l>0&&(a[c-1][4]=s),l<f-10?(s[4]=a[c],Ps(a,10+l,s)):(a.push(s),s[4]=null),s[3]=a;const y=s[17];null!==y&&a!==y&&function DD(i,s){const a=i[9];s[16]!==s[3][3][16]&&(i[2]=!0),null===a?i[9]=[s]:a.push(s)}(y,s);const w=s[19];null!==w&&w.insertView(i),s[2]|=64}(c,l,y,f);const w=mh(f,y),I=l[11],T=gs(I,y[7]);return null!==T&&function wp(i,s,a,l,c,f){l[0]=c,l[6]=s,yl(i,l,a,1,c,f)}(c,y[6],I,l,T,w),s.attachToViewContainerRef(),Ps(K_(y),f,s),s}move(s,a){return this.insert(s,a)}indexOf(s){const a=Vl(this._lContainer);return null!==a?a.indexOf(s):-1}remove(s){const a=this._adjustIndex(s,-1),l=Wm(this._lContainer,a);l&&(Pr(K_(this._lContainer),a),E0(l[1],l))}detach(s){const a=this._adjustIndex(s,-1),l=Wm(this._lContainer,a);return l&&null!=Pr(K_(this._lContainer),a)?new dt(l):null}_adjustIndex(s,a=0){return s??this.length+a}};function Vl(i){return i[8]}function K_(i){return i[8]||(i[8]=[])}function ur(i,s){let a;const l=s[i.index];if(oi(l))a=l;else{let c;if(8&i.type)c=Pn(l);else{const f=s[11];c=f.createComment("");const y=vr(i,s);fu(f,gs(f,y),c,function Mc(i,s){return i.nextSibling(s)}(f,y),!1)}s[i.index]=a=zC(l,s,c,i),Vh(s,a)}return new rI(a,i,s)}class Gg{constructor(s){this.queryList=s,this.matches=null}clone(){return new Gg(this.queryList)}setDirty(){this.queryList.setDirty()}}class Pu{constructor(s=[]){this.queries=s}createEmbeddedView(s){const a=s.queries;if(null!==a){const l=null!==s.contentQueries?s.contentQueries[0]:a.length,c=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);c.push(this.queries[y.indexInDeclarationView].clone())}return new Pu(c)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let a=0;a<this.queries.length;a++)null!==Tf(s,a).matches&&this.queries[a].setDirty()}}class Ti{constructor(s,a,l=null){this.predicate=s,this.flags=a,this.read=l}}class Vr{constructor(s=[]){this.queries=s}elementStart(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(s,a)}elementEnd(s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(s)}embeddedTView(s){let a=null;for(let l=0;l<this.length;l++){const c=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(s,c);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new Vr(a):null}template(s,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(s,a)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class Wg{constructor(s,a=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(s,a){this.isApplyingToNode(a)&&this.matchTNode(s,a)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,a){this.elementStart(s,a)}embeddedTView(s,a){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,a),new Wg(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=s.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(s,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let c=0;c<l.length;c++){const f=l[c];this.matchTNodeWithReadOption(s,a,Gn(a,f)),this.matchTNodeWithReadOption(s,a,pa(a,s,f,!1,!1))}else l===gd?4&a.type&&this.matchTNodeWithReadOption(s,a,-1):this.matchTNodeWithReadOption(s,a,pa(a,s,l,!1,!1))}matchTNodeWithReadOption(s,a,l){if(null!==l){const c=this.metadata.read;if(null!==c)if(c===El||c===jg||c===gd&&4&a.type)this.addMatch(a.index,-2);else{const f=pa(a,s,c,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(s,a){null===this.matches?this.matches=[s,a]:this.matches.push(s,a)}}function Gn(i,s){const a=i.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===s)return a[l+1];return null}function Y_(i,s,a,l){return-1===a?function Sb(i,s){return 11&i.type?_u(i,s):4&i.type?Cf(i,s):null}(s,i):-2===a?function Ul(i,s,a){return a===El?_u(s,i):a===gd?Cf(s,i):a===jg?ur(s,i):void 0}(i,s,l):Ri(i,i[1],a,s)}function md(i,s,a,l){const c=s[19].queries[l];if(null===c.matches){const f=i.data,y=a.matches,w=[];for(let I=0;I<y.length;I+=2){const T=y[I];w.push(T<0?null:Y_(s,f[T],y[I+1],a.metadata.read))}c.matches=w}return c.matches}function yd(i,s,a,l){const c=i.queries.getByIndex(a),f=c.matches;if(null!==f){const y=md(i,s,c,a);for(let w=0;w<f.length;w+=2){const I=f[w];if(I>0)l.push(y[w/2]);else{const T=f[w+1],R=s[-I];for(let F=10;F<R.length;F++){const z=R[F];z[17]===z[3]&&yd(z[1],z,T,l)}if(null!==R[9]){const F=R[9];for(let z=0;z<F.length;z++){const Q=F[z];yd(Q[1],Q,T,l)}}}}}return l}function bf(i){const s=Me(),a=Kt(),l=oa();Xu(l+1);const c=Tf(a,l);if(i.dirty&&function Ku(i){return 4==(4&i[2])}(s)===(2==(2&c.metadata.flags))){if(null===c.matches)i.reset([]);else{const f=c.crossesNgTemplate?yd(a,s,l,[]):md(a,s,c,l);i.reset(f,uC),i.notifyOnChanges()}return!0}return!1}function Q_(i,s,a,l){const c=Kt();if(c.firstCreatePass){const f=Xn();(function J_(i,s,a){null===i.queries&&(i.queries=new Vr),i.queries.track(new Wg(s,a))})(c,new Ti(s,a,l),f.index),function X_(i,s){const a=i.contentQueries||(i.contentQueries=[]);s!==(a.length?a[a.length-1]:-1)&&a.push(i.queries.length-1,s)}(c,i),2==(2&a)&&(c.staticContentQueries=!0)}!function Bl(i,s,a){const l=new $g(4==(4&a));Vy(i,s,l,l.destroy),null===s[19]&&(s[19]=new Pu),s[19].queries.push(new Gg(l))}(c,Me(),a)}function $o(){return function sI(i,s){return i[19].queries[s].queryList}(Me(),oa())}function Tf(i,s){return i.queries.getByIndex(s)}function jt(...i){}const Mf=new Dn("Application Initializer");let Fu=(()=>{class i{constructor(a){this.appInits=a,this.resolve=jt,this.reject=jt,this.initialized=!1,this.done=!1,this.donePromise=new Promise((l,c)=>{this.resolve=l,this.reject=c})}runInitializers(){if(this.initialized)return;const a=[],l=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let c=0;c<this.appInits.length;c++){const f=this.appInits[c]();if(Xh(f))a.push(f);else if(Gw(f)){const y=new Promise((w,I)=>{f.subscribe({complete:w,error:I})});a.push(y)}}Promise.all(a).then(()=>{l()}).catch(c=>{this.reject(c)}),0===a.length&&l(),this.initialized=!0}}return i.\u0275fac=function(a){return new(a||i)(Sn(Mf,8))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Dd=new Dn("AppId",{providedIn:"root",factory:function xf(){return`${em()}${em()}${em()}`}});function em(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const pv=new Dn("Platform Initializer"),Fb=new Dn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),gv=new Dn("appBootstrapListener");let Vb=(()=>{class i{log(a){console.log(a)}warn(a){console.warn(a)}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();const tm=new Dn("LocaleId",{providedIn:"root",factory:()=>di(tm,Je.Optional|Je.SkipSelf)||function Ub(){return typeof $localize<"u"&&$localize.locale||xl}()}),Cd=new Dn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class mv{constructor(s,a){this.ngModuleFactory=s,this.componentFactories=a}}let mI=(()=>{class i{compileModuleSync(a){return new V_(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=Ro(it(a).declarations).reduce((y,w)=>{const I=x(w);return I&&y.push(new jh(I)),y},[]);return new mv(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const yI=(()=>Promise.resolve(0))();function vv(i){typeof Zone>"u"?yI.then(()=>{i&&i.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",i)}class yi{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new vs(!1),this.onMicrotaskEmpty=new vs(!1),this.onStable=new vs(!1),this.onError=new vs(!1),typeof Zone>"u")throw new De(908,!1);Zone.assertZonePatched();const c=this;if(c._nesting=0,c._outer=c._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const f=Zone.AsyncStackTaggingZoneSpec;c._inner=c._inner.fork(new f("Angular"))}Zone.TaskTrackingZoneSpec&&(c._inner=c._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(c._inner=c._inner.fork(Zone.longStackTraceZoneSpec)),c.shouldCoalesceEventChangeDetection=!l&&a,c.shouldCoalesceRunChangeDetection=l,c.lastRequestAnimationFrameId=-1,c.nativeRequestAnimationFrame=function jb(){let i=Nt.requestAnimationFrame,s=Nt.cancelAnimationFrame;if(typeof Zone<"u"&&i&&s){const a=i[Zone.__symbol__("OriginalDelegate")];a&&(i=a);const l=s[Zone.__symbol__("OriginalDelegate")];l&&(s=l)}return{nativeRequestAnimationFrame:i,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function Iv(i){const s=()=>{!function _I(i){i.isCheckStableRunning||-1!==i.lastRequestAnimationFrameId||(i.lastRequestAnimationFrameId=i.nativeRequestAnimationFrame.call(Nt,()=>{i.fakeTopEventTask||(i.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{i.lastRequestAnimationFrameId=-1,nm(i),i.isCheckStableRunning=!0,Ev(i),i.isCheckStableRunning=!1},void 0,()=>{},()=>{})),i.fakeTopEventTask.invoke()}),nm(i))}(i)};i._inner=i._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,c,f,y,w)=>{try{return vI(i),a.invokeTask(c,f,y,w)}finally{(i.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||i.shouldCoalesceRunChangeDetection)&&s(),Dv(i)}},onInvoke:(a,l,c,f,y,w,I)=>{try{return vI(i),a.invoke(c,f,y,w,I)}finally{i.shouldCoalesceRunChangeDetection&&s(),Dv(i)}},onHasTask:(a,l,c,f)=>{a.hasTask(c,f),l===c&&("microTask"==f.change?(i._hasPendingMicrotasks=f.microTask,nm(i),Ev(i)):"macroTask"==f.change&&(i.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,c,f)=>(a.handleError(c,f),i.runOutsideAngular(()=>i.onError.emit(f)),!1)})}(c)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!yi.isInAngularZone())throw new De(909,!1)}static assertNotInAngularZone(){if(yi.isInAngularZone())throw new De(909,!1)}run(s,a,l){return this._inner.run(s,a,l)}runTask(s,a,l,c){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+c,s,wv,jt,jt);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(s,a,l){return this._inner.runGuarded(s,a,l)}runOutsideAngular(s){return this._outer.run(s)}}const wv={};function Ev(i){if(0==i._nesting&&!i.hasPendingMicrotasks&&!i.isStable)try{i._nesting++,i.onMicrotaskEmpty.emit(null)}finally{if(i._nesting--,!i.hasPendingMicrotasks)try{i.runOutsideAngular(()=>i.onStable.emit(null))}finally{i.isStable=!0}}}function nm(i){i.hasPendingMicrotasks=!!(i._hasPendingMicrotasks||(i.shouldCoalesceEventChangeDetection||i.shouldCoalesceRunChangeDetection)&&-1!==i.lastRequestAnimationFrameId)}function vI(i){i._nesting++,i.isStable&&(i.isStable=!1,i.onUnstable.emit(null))}function Dv(i){i._nesting--,Ev(i)}class Hb{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new vs,this.onMicrotaskEmpty=new vs,this.onStable=new vs,this.onError=new vs}run(s,a,l){return s.apply(a,l)}runGuarded(s,a,l){return s.apply(a,l)}runOutsideAngular(s){return s()}runTask(s,a,l,c){return s.apply(a,l)}}const wI=new Dn(""),EI=new Dn("");let Cv,Td=(()=>{class i{constructor(a,l,c){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,Cv||(function II(i){Cv=i}(c),c.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{yi.assertNotInAngularZone(),vv(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())vv(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,c){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:c})}whenStable(a,l,c){if(c&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,c),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,c){return[]}}return i.\u0275fac=function(a){return new(a||i)(Sn(yi),Sn(Gl),Sn(EI))},i.\u0275prov=rt({token:i,factory:i.\u0275fac}),i})(),Gl=(()=>{class i{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return Cv?.findTestabilityInTree(this,a,l)??null}}return i.\u0275fac=function(a){return new(a||i)},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})(),Ua=null;const _i=new Dn("AllowMultipleToken"),bv=new Dn("PlatformDestroyListeners");class DI{constructor(s,a){this.name=s,this.token=a}}function bI(i,s,a=[]){const l=`Platform: ${s}`,c=new Dn(l);return(f=[])=>{let y=Tv();if(!y||y.injector.get(_i,!1)){const w=[...a,...f,{provide:c,useValue:!0}];i?i(w):function Wb(i){if(Ua&&!Ua.get(_i,!1))throw new De(400,!1);Ua=i;const s=i.get(AI);(function CI(i){const s=i.get(pv,null);s&&s.forEach(a=>a())})(i)}(function TI(i=[],s){return Dl.create({name:s,providers:[{provide:cy,useValue:"platform"},{provide:bv,useValue:new Set([()=>Ua=null])},...i]})}(w,l))}return function qb(i){const s=Tv();if(!s)throw new De(401,!1);return s}()}}function Tv(){return Ua?.get(AI)??null}let AI=(()=>{class i{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const c=function MI(i,s){let a;return a="noop"===i?new Hb:("zone.js"===i?void 0:i)||new yi(s),a}(l?.ngZone,function SI(i){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!i||!i.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!i||!i.ngZoneRunCoalescing)||!1}}(l)),f=[{provide:yi,useValue:c}];return c.run(()=>{const y=Dl.create({providers:f,parent:this.injector,name:a.moduleType.name}),w=a.create(y),I=w.injector.get(Il,null);if(!I)throw new De(402,!1);return c.runOutsideAngular(()=>{const T=c.onError.subscribe({next:R=>{I.handleError(R)}});w.onDestroy(()=>{Nf(this._modules,w),T.unsubscribe()})}),function xI(i,s,a){try{const l=a();return Xh(l)?l.catch(c=>{throw s.runOutsideAngular(()=>i.handleError(c)),c}):l}catch(l){throw s.runOutsideAngular(()=>i.handleError(l)),l}}(I,c,()=>{const T=w.injector.get(Fu);return T.runInitializers(),T.donePromise.then(()=>(function E_(i){Pe(i,"Expected localeId to be defined"),"string"==typeof i&&(yf=i.toLowerCase().replace(/_/g,"-"))}(w.injector.get(tm,xl)||xl),this._moduleDoBootstrap(w),w))})})}bootstrapModule(a,l=[]){const c=RI({},l);return function Wo(i,s,a){const l=new V_(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,c))}_moduleDoBootstrap(a){const l=a.injector.get(im);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(c=>l.bootstrap(c));else{if(!a.instance.ngDoBootstrap)throw new De(403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new De(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(bv,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return i.\u0275fac=function(a){return new(a||i)(Sn(Dl))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"platform"}),i})();function RI(i,s){return Array.isArray(s)?s.reduce(RI,i):{...i,...s}}let im=(()=>{class i{constructor(a,l,c){this._zone=a,this._injector=l,this._exceptionHandler=c,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const f=new O.y(w=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{w.next(this._stable),w.complete()})}),y=new O.y(w=>{let I;this._zone.runOutsideAngular(()=>{I=this._zone.onStable.subscribe(()=>{yi.assertNotInAngularZone(),vv(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,w.next(!0))})})});const T=this._zone.onUnstable.subscribe(()=>{yi.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{w.next(!1)}))});return()=>{I.unsubscribe(),T.unsubscribe()}});this.isStable=(0,ee.T)(f,y.pipe((0,re.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const c=a instanceof sC;if(!this._injector.get(Fu).done)throw!c&&ke(a),new De(405,false);let y;y=c?a:this._injector.get(yu).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const w=function rm(i){return i.isBoundToModule}(y)?void 0:this._injector.get(ud),T=y.create(Dl.NULL,[],l||y.selector,w),R=T.location.nativeElement,F=T.injector.get(wI,null);return F?.registerApplication(R),T.onDestroy(()=>{this.detachView(T.hostView),Nf(this.components,T),F?.unregisterApplication(R)}),this._loadComponent(T),T}tick(){if(this._runningTick)throw new De(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(a))}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Nf(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a),this._injector.get(gv,[]).concat(this._bootstrapListeners).forEach(c=>c(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Nf(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new De(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return i.\u0275fac=function(a){return new(a||i)(Sn(yi),Sn(mu),Sn(Il))},i.\u0275prov=rt({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();function Nf(i,s){const a=i.indexOf(s);a>-1&&i.splice(a,1)}let Av=!0,PI=!1;function Sv(){return PI=!0,Av}function Gr(){if(PI)throw new Error("Cannot enable prod mode after platform setup.");Av=!1}let Lu=(()=>{class i{}return i.__NG_ELEMENT_ID__=LI,i})();function LI(i){return function Zb(i,s,a){if(Gu(i)&&!a){const l=nn(i.index,s);return new dt(l,l)}return 47&i.type?new dt(s[16],s):null}(Xn(),Me(),16==(16&i))}class xd{constructor(){}supports(s){return Gh(s)}create(s){return new Uu(s)}}const zl=(i,s)=>s;class Uu{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||zl}forEachItem(s){let a;for(a=this._itHead;null!==a;a=a._next)s(a)}forEachOperation(s){let a=this._itHead,l=this._removalsHead,c=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<BI(l,c,f)?a:l,w=BI(y,c,f),I=y.currentIndex;if(y===l)c--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)c++;else{f||(f=[]);const T=w-c,R=I-c;if(T!=R){for(let z=0;z<T;z++){const Q=z<f.length?f[z]:f[z]=0,me=Q+z;R<=me&&me<T&&(f[z]=Q+1)}f[y.previousIndex]=R-T}}w!==I&&s(y,w,I)}}forEachPreviousItem(s){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachMovedItem(s){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}forEachIdentityChange(s){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)s(a)}diff(s){if(null==s&&(s=[]),!Gh(s))throw new De(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let c,f,y,a=this._itHead,l=!1;if(Array.isArray(s)){this.length=s.length;for(let w=0;w<this.length;w++)f=s[w],y=this._trackByFn(w,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,w)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,w),l=!0),a=a._next}else c=0,function Bc(i,s){if(Array.isArray(i))for(let a=0;a<i.length;a++)s(i[a]);else{const a=i[mi()]();let l;for(;!(l=a.next()).done;)s(l.value)}}(s,w=>{y=this._trackByFn(c,w),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,w,y,c)),Object.is(a.item,w)||this._addIdentityChange(a,w)):(a=this._mismatch(a,w,y,c),l=!0),a=a._next,c++}),this.length=c;return this._truncate(a),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,a,l,c){let f;return null===s?f=this._itTail:(f=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._reinsertAfter(s,f,c)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(l,c))?(Object.is(s.item,a)||this._addIdentityChange(s,a),this._moveAfter(s,f,c)):s=this._addAfter(new UI(a,l),f,c),s}_verifyReinsertion(s,a,l,c){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?s=this._reinsertAfter(f,s._prev,c):s.currentIndex!=c&&(s.currentIndex=c,this._addToMoves(s,c)),s}_truncate(s){for(;null!==s;){const a=s._next;this._addToRemovals(this._unlink(s)),s=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const c=s._prevRemoved,f=s._nextRemoved;return null===c?this._removalsHead=f:c._nextRemoved=f,null===f?this._removalsTail=c:f._prevRemoved=c,this._insertAfter(s,a,l),this._addToMoves(s,l),s}_moveAfter(s,a,l){return this._unlink(s),this._insertAfter(s,a,l),this._addToMoves(s,l),s}_addAfter(s,a,l){return this._insertAfter(s,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,a,l){const c=null===a?this._itHead:a._next;return s._next=c,s._prev=a,null===c?this._itTail=s:c._prev=s,null===a?this._itHead=s:a._next=s,null===this._linkedRecords&&(this._linkedRecords=new Ov),this._linkedRecords.put(s),s.currentIndex=l,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const a=s._prev,l=s._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,s}_addToMoves(s,a){return s.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Ov),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,a){return s.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class UI{constructor(s,a){this.item=s,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Qb{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,s))return l;return null}remove(s){const a=s._prevDup,l=s._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class Ov{constructor(){this.map=new Map}put(s){const a=s.trackById;let l=this.map.get(a);l||(l=new Qb,this.map.set(a,l)),l.add(s)}get(s,a){const c=this.map.get(s);return c?c.get(s,a):null}remove(s){const a=s.trackById;return this.map.get(a).remove(s)&&this.map.delete(a),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function BI(i,s,a){const l=i.previousIndex;if(null===l)return l;let c=0;return a&&l<a.length&&(c=a[l]),l+s+c}class cm{constructor(){}supports(s){return s instanceof Map||pg(s)}create(){return new Pv}}class Pv{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let a;for(a=this._mapHead;null!==a;a=a._next)s(a)}forEachPreviousItem(s){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)s(a)}forEachChangedItem(s){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)s(a)}forEachAddedItem(s){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)s(a)}forEachRemovedItem(s){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)s(a)}diff(s){if(s){if(!(s instanceof Map||pg(s)))throw new De(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(s,(l,c)=>{if(a&&a.key===c)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(c,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,a){if(s){const l=s._prev;return a._next=s,a._prev=l,s._prev=a,l&&(l._next=a),s===this._mapHead&&(this._mapHead=a),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(s,a){if(this._records.has(s)){const c=this._records.get(s);this._maybeAddToChanges(c,a);const f=c._prev,y=c._next;return f&&(f._next=y),y&&(y._prev=f),c._next=null,c._prev=null,c}const l=new $I(s);return this._records.set(s,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,a){Object.is(a,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=a,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,a){s instanceof Map?s.forEach(a):Object.keys(s).forEach(l=>a(s[l],l))}}class $I{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function dm(){return new kf([new xd])}let kf=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(null!=l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||dm()),deps:[[i,new at,new _e]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(null!=l)return l;throw new De(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:dm}),i})();function Ff(){return new kv([new cm])}let kv=(()=>{class i{constructor(a){this.factories=a}static create(a,l){if(l){const c=l.factories.slice();a=a.concat(c)}return new i(a)}static extend(a){return{provide:i,useFactory:l=>i.create(a,l||Ff()),deps:[[i,new at,new _e]]}}find(a){const l=this.factories.find(c=>c.supports(a));if(l)return l;throw new De(901,!1)}}return i.\u0275prov=rt({token:i,providedIn:"root",factory:Ff}),i})();const Lf=bI(null,"core",[]);let fm=(()=>{class i{constructor(a){}}return i.\u0275fac=function(a){return new(a||i)(Sn(im))},i.\u0275mod=en({type:i}),i.\u0275inj=gt({}),i})();function Vf(i){return"boolean"==typeof i?i:null!=i&&"false"!==i}},3942:(pt,Te,k)=>{k.d(Te,{Z:()=>De});var h=k(2090),B=k(4859),O=k(9681),ee=k(1877);class re{constructor(ye,ce){this._delegate=ye,this.firebase=ce,(0,O._addComponent)(ye,new B.wA("app-compat",()=>this,"PUBLIC")),this.container=ye.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ye){this._delegate.automaticDataCollectionEnabled=ye}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(ye=>{this._delegate.checkDestroyed(),ye()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,O.deleteApp)(this._delegate)))}_getService(ye,ce=O._DEFAULT_ENTRY_NAME){var Ye;this._delegate.checkDestroyed();const Xe=this._delegate.container.getProvider(ye);return!Xe.isInitialized()&&"EXPLICIT"===(null===(Ye=Xe.getComponent())||void 0===Ye?void 0:Ye.instantiationMode)&&Xe.initialize(),Xe.getImmediate({identifier:ce})}_removeServiceInstance(ye,ce=O._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(ye).clearInstance(ce)}_addComponent(ye){(0,O._addComponent)(this._delegate,ye)}_addOrOverwriteComponent(ye){(0,O._addOrOverwriteComponent)(this._delegate,ye)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const le=new h.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),G=function fe(){const et=function ae(et){const ye={},ce={__esModule:!0,initializeApp:function Ae(X,se={}){const pe=O.initializeApp(X,se);if((0,h.r3)(ye,pe.name))return ye[pe.name];const Ge=new et(pe,ce);return ye[pe.name]=Ge,Ge},app:Xe,registerVersion:O.registerVersion,setLogLevel:O.setLogLevel,onLog:O.onLog,apps:null,SDK_VERSION:O.SDK_VERSION,INTERNAL:{registerComponent:function we(X){const se=X.name,pe=se.replace("-compat","");if(O._registerComponent(X)&&"PUBLIC"===X.type){const Ge=(We=Xe())=>{if("function"!=typeof We[pe])throw le.create("invalid-app-argument",{appName:se});return We[pe]()};void 0!==X.serviceProps&&(0,h.ZB)(Ge,X.serviceProps),ce[pe]=Ge,et.prototype[pe]=function(...We){return this._getService.bind(this,se).apply(this,X.multipleInstances?We:[])}}return"PUBLIC"===X.type?ce[pe]:null},removeApp:function Ye(X){delete ye[X]},useAsService:function je(X,se){return"serverAuth"===se?null:se},modularAPIs:O}};function Xe(X){if(!(0,h.r3)(ye,X=X||O._DEFAULT_ENTRY_NAME))throw le.create("no-app",{appName:X});return ye[X]}return ce.default=ce,Object.defineProperty(ce,"apps",{get:function Se(){return Object.keys(ye).map(X=>ye[X])}}),Xe.App=et,ce}(re);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:fe,extendNamespace:function ye(ce){(0,h.ZB)(et,ce)},createSubscribe:h.ne,ErrorFactory:h.LL,deepExtend:h.ZB}),et}(),H=new ee.Yd("@firebase/app-compat");if((0,h.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const De=G;!function xe(et){(0,O.registerVersion)("@firebase/app-compat","0.2.3",et)}()},9681:(pt,Te,k)=>{k.r(Te),k.d(Te,{FirebaseError:()=>ee.ZR,SDK_VERSION:()=>Rr,_DEFAULT_ENTRY_NAME:()=>Pe,_addComponent:()=>cn,_addOrOverwriteComponent:()=>rt,_apps:()=>ht,_clearComponents:()=>Ln,_components:()=>Rt,_getProvider:()=>gt,_registerComponent:()=>wt,_removeServiceInstance:()=>Jt,deleteApp:()=>Bi,getApp:()=>Wn,getApps:()=>vi,initializeApp:()=>Br,onLog:()=>zn,registerVersion:()=>Yn,setLogLevel:()=>_n});var h=k(5861),B=k(4859),O=k(1877),ee=k(2090),re=k(8766);class de{constructor(Ce){this.container=Ce}getPlatformInfoString(){return this.container.getProviders().map(nt=>{if(function le(tt){return"VERSION"===tt.getComponent()?.type}(nt)){const Ct=nt.getImmediate();return`${Ct.library}/${Ct.version}`}return null}).filter(nt=>nt).join(" ")}}const ae="@firebase/app",G=new O.Yd("@firebase/app"),Pe="[DEFAULT]",Ee={[ae]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},ht=new Map,Rt=new Map;function cn(tt,Ce){try{tt.container.addComponent(Ce)}catch(nt){G.debug(`Component ${Ce.name} failed to register with FirebaseApp ${tt.name}`,nt)}}function rt(tt,Ce){tt.container.addOrOverwriteComponent(Ce)}function wt(tt){const Ce=tt.name;if(Rt.has(Ce))return G.debug(`There were multiple attempts to register component ${Ce}.`),!1;Rt.set(Ce,tt);for(const nt of ht.values())cn(nt,tt);return!0}function gt(tt,Ce){const nt=tt.container.getProvider("heartbeat").getImmediate({optional:!0});return nt&&nt.triggerHeartbeat(),tt.container.getProvider(Ce)}function Jt(tt,Ce,nt=Pe){gt(tt,Ce).clearInstance(nt)}function Ln(){Rt.clear()}const sn=new ee.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class yr{constructor(Ce,nt,Ct){this._isDeleted=!1,this._options=Object.assign({},Ce),this._config=Object.assign({},nt),this._name=nt.name,this._automaticDataCollectionEnabled=nt.automaticDataCollectionEnabled,this._container=Ct,this.container.addComponent(new B.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ce){this.checkDestroyed(),this._automaticDataCollectionEnabled=Ce}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Ce){this._isDeleted=Ce}checkDestroyed(){if(this.isDeleted)throw sn.create("app-deleted",{appName:this._name})}}const Rr="9.17.1";function Br(tt,Ce={}){let nt=tt;"object"!=typeof Ce&&(Ce={name:Ce});const Ct=Object.assign({name:Pe,automaticDataCollectionEnabled:!1},Ce),xt=Ct.name;if("string"!=typeof xt||!xt)throw sn.create("bad-app-name",{appName:String(xt)});if(nt||(nt=(0,ee.aH)()),!nt)throw sn.create("no-options");const en=ht.get(xt);if(en){if((0,ee.vZ)(nt,en.options)&&(0,ee.vZ)(Ct,en.config))return en;throw sn.create("duplicate-app",{appName:xt})}const j=new B.H0(xt);for(const q of Rt.values())j.addComponent(q);const $=new yr(nt,Ct,j);return ht.set(xt,$),$}function Wn(tt=Pe){const Ce=ht.get(tt);if(!Ce&&tt===Pe)return Br();if(!Ce)throw sn.create("no-app",{appName:tt});return Ce}function vi(){return Array.from(ht.values())}function Bi(tt){return Je.apply(this,arguments)}function Je(){return(Je=(0,h.Z)(function*(tt){const Ce=tt.name;ht.has(Ce)&&(ht.delete(Ce),yield Promise.all(tt.container.getProviders().map(nt=>nt.delete())),tt.isDeleted=!0)})).apply(this,arguments)}function Yn(tt,Ce,nt){var Ct;let xt=null!==(Ct=Ee[tt])&&void 0!==Ct?Ct:tt;nt&&(xt+=`-${nt}`);const en=xt.match(/\s|\//),j=Ce.match(/\s|\//);if(en||j){const $=[`Unable to register library "${xt}" with version "${Ce}":`];return en&&$.push(`library name "${xt}" contains illegal characters (whitespace or "/")`),en&&j&&$.push("and"),j&&$.push(`version name "${Ce}" contains illegal characters (whitespace or "/")`),void G.warn($.join(" "))}wt(new B.wA(`${xt}-version`,()=>({library:xt,version:Ce}),"VERSION"))}function zn(tt,Ce){if(null!==tt&&"function"!=typeof tt)throw sn.create("invalid-log-argument");(0,O.Am)(tt,Ce)}function _n(tt){(0,O.Ub)(tt)}const wn="firebase-heartbeat-store";let En=null;function gn(){return En||(En=(0,re.X3)("firebase-heartbeat-database",1,{upgrade:(tt,Ce)=>{0===Ce&&tt.createObjectStore(wn)}}).catch(tt=>{throw sn.create("idb-open",{originalErrorMessage:tt.message})})),En}function yt(){return(yt=(0,h.Z)(function*(tt){try{return(yield gn()).transaction(wn).objectStore(wn).get(Qn(tt))}catch(Ce){if(Ce instanceof ee.ZR)G.warn(Ce.message);else{const nt=sn.create("idb-get",{originalErrorMessage:Ce?.message});G.warn(nt.message)}}})).apply(this,arguments)}function Nt(tt,Ce){return Wr.apply(this,arguments)}function Wr(){return(Wr=(0,h.Z)(function*(tt,Ce){try{const Ct=(yield gn()).transaction(wn,"readwrite");return yield Ct.objectStore(wn).put(Ce,Qn(tt)),Ct.done}catch(nt){if(nt instanceof ee.ZR)G.warn(nt.message);else{const Ct=sn.create("idb-set",{originalErrorMessage:nt?.message});G.warn(Ct.message)}}})).apply(this,arguments)}function Qn(tt){return`${tt.name}!${tt.options.appId}`}class $r{constructor(Ce){this.container=Ce,this._heartbeatsCache=null;const nt=this.container.getProvider("app").getImmediate();this._storage=new Qt(nt),this._heartbeatsCachePromise=this._storage.read().then(Ct=>(this._heartbeatsCache=Ct,Ct))}triggerHeartbeat(){var Ce=this;return(0,h.Z)(function*(){const Ct=Ce.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),xt=Lt();if(null===Ce._heartbeatsCache&&(Ce._heartbeatsCache=yield Ce._heartbeatsCachePromise),Ce._heartbeatsCache.lastSentHeartbeatDate!==xt&&!Ce._heartbeatsCache.heartbeats.some(en=>en.date===xt))return Ce._heartbeatsCache.heartbeats.push({date:xt,agent:Ct}),Ce._heartbeatsCache.heartbeats=Ce._heartbeatsCache.heartbeats.filter(en=>{const j=new Date(en.date).valueOf();return Date.now()-j<=2592e6}),Ce._storage.overwrite(Ce._heartbeatsCache)})()}getHeartbeatsHeader(){var Ce=this;return(0,h.Z)(function*(){if(null===Ce._heartbeatsCache&&(yield Ce._heartbeatsCachePromise),null===Ce._heartbeatsCache||0===Ce._heartbeatsCache.heartbeats.length)return"";const nt=Lt(),{heartbeatsToSend:Ct,unsentEntries:xt}=function ii(tt,Ce=1024){const nt=[];let Ct=tt.slice();for(const xt of tt){const en=nt.find(j=>j.agent===xt.agent);if(en){if(en.dates.push(xt.date),hr(nt)>Ce){en.dates.pop();break}}else if(nt.push({agent:xt.agent,dates:[xt.date]}),hr(nt)>Ce){nt.pop();break}Ct=Ct.slice(1)}return{heartbeatsToSend:nt,unsentEntries:Ct}}(Ce._heartbeatsCache.heartbeats),en=(0,ee.L)(JSON.stringify({version:2,heartbeats:Ct}));return Ce._heartbeatsCache.lastSentHeartbeatDate=nt,xt.length>0?(Ce._heartbeatsCache.heartbeats=xt,yield Ce._storage.overwrite(Ce._heartbeatsCache)):(Ce._heartbeatsCache.heartbeats=[],Ce._storage.overwrite(Ce._heartbeatsCache)),en})()}}function Lt(){return(new Date).toISOString().substring(0,10)}class Qt{constructor(Ce){this.app=Ce,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,h.Z)(function*(){return!!(0,ee.hl)()&&(0,ee.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Ce=this;return(0,h.Z)(function*(){return(yield Ce._canUseIndexedDBPromise)&&(yield function mt(tt){return yt.apply(this,arguments)}(Ce.app))||{heartbeats:[]}})()}overwrite(Ce){var nt=this;return(0,h.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const en=yield nt.read();return Nt(nt.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:en.lastSentHeartbeatDate,heartbeats:Ce.heartbeats})}})()}add(Ce){var nt=this;return(0,h.Z)(function*(){var Ct;if(yield nt._canUseIndexedDBPromise){const en=yield nt.read();return Nt(nt.app,{lastSentHeartbeatDate:null!==(Ct=Ce.lastSentHeartbeatDate)&&void 0!==Ct?Ct:en.lastSentHeartbeatDate,heartbeats:[...en.heartbeats,...Ce.heartbeats]})}})()}}function hr(tt){return(0,ee.L)(JSON.stringify({version:2,heartbeats:tt})).length}!function Tn(tt){wt(new B.wA("platform-logger",Ce=>new de(Ce),"PRIVATE")),wt(new B.wA("heartbeat",Ce=>new $r(Ce),"PRIVATE")),Yn(ae,"0.9.3",tt),Yn(ae,"0.9.3","esm2017"),Yn("fire-js","")}("")},4859:(pt,Te,k)=>{k.d(Te,{H0:()=>ae,wA:()=>O});var h=k(5861),B=k(2090);class O{constructor(G,H,K){this.name=G,this.instanceFactory=H,this.type=K,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(G){return this.instantiationMode=G,this}setMultipleInstances(G){return this.multipleInstances=G,this}setServiceProps(G){return this.serviceProps=G,this}setInstanceCreatedCallback(G){return this.onInstanceCreated=G,this}}const ee="[DEFAULT]";class re{constructor(G,H){this.name=G,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(G){const H=this.normalizeInstanceIdentifier(G);if(!this.instancesDeferred.has(H)){const K=new B.BH;if(this.instancesDeferred.set(H,K),this.isInitialized(H)||this.shouldAutoInitialize())try{const $e=this.getOrInitializeService({instanceIdentifier:H});$e&&K.resolve($e)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(G){var H;const K=this.normalizeInstanceIdentifier(G?.identifier),$e=null!==(H=G?.optional)&&void 0!==H&&H;if(!this.isInitialized(K)&&!this.shouldAutoInitialize()){if($e)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:K})}catch(xe){if($e)return null;throw xe}}getComponent(){return this.component}setComponent(G){if(G.name!==this.name)throw Error(`Mismatching Component ${G.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=G,this.shouldAutoInitialize()){if(function le(fe){return"EAGER"===fe.instantiationMode}(G))try{this.getOrInitializeService({instanceIdentifier:ee})}catch{}for(const[H,K]of this.instancesDeferred.entries()){const $e=this.normalizeInstanceIdentifier(H);try{const xe=this.getOrInitializeService({instanceIdentifier:$e});K.resolve(xe)}catch{}}}}clearInstance(G=ee){this.instancesDeferred.delete(G),this.instancesOptions.delete(G),this.instances.delete(G)}delete(){var G=this;return(0,h.Z)(function*(){const H=Array.from(G.instances.values());yield Promise.all([...H.filter(K=>"INTERNAL"in K).map(K=>K.INTERNAL.delete()),...H.filter(K=>"_delete"in K).map(K=>K._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(G=ee){return this.instances.has(G)}getOptions(G=ee){return this.instancesOptions.get(G)||{}}initialize(G={}){const{options:H={}}=G,K=this.normalizeInstanceIdentifier(G.instanceIdentifier);if(this.isInitialized(K))throw Error(`${this.name}(${K}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const $e=this.getOrInitializeService({instanceIdentifier:K,options:H});for(const[xe,De]of this.instancesDeferred.entries())K===this.normalizeInstanceIdentifier(xe)&&De.resolve($e);return $e}onInit(G,H){var K;const $e=this.normalizeInstanceIdentifier(H),xe=null!==(K=this.onInitCallbacks.get($e))&&void 0!==K?K:new Set;xe.add(G),this.onInitCallbacks.set($e,xe);const De=this.instances.get($e);return De&&G(De,$e),()=>{xe.delete(G)}}invokeOnInitCallbacks(G,H){const K=this.onInitCallbacks.get(H);if(K)for(const $e of K)try{$e(G,H)}catch{}}getOrInitializeService({instanceIdentifier:G,options:H={}}){let K=this.instances.get(G);if(!K&&this.component&&(K=this.component.instanceFactory(this.container,{instanceIdentifier:(fe=G,fe===ee?void 0:fe),options:H}),this.instances.set(G,K),this.instancesOptions.set(G,H),this.invokeOnInitCallbacks(K,G),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,G,K)}catch{}var fe;return K||null}normalizeInstanceIdentifier(G=ee){return this.component?this.component.multipleInstances?G:ee:G}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ae{constructor(G){this.name=G,this.providers=new Map}addComponent(G){const H=this.getProvider(G.name);if(H.isComponentSet())throw new Error(`Component ${G.name} has already been registered with ${this.name}`);H.setComponent(G)}addOrOverwriteComponent(G){this.getProvider(G.name).isComponentSet()&&this.providers.delete(G.name),this.addComponent(G)}getProvider(G){if(this.providers.has(G))return this.providers.get(G);const H=new re(G,this);return this.providers.set(G,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(pt,Te,k)=>{k.d(Te,{Am:()=>fe,Ub:()=>ae,Yd:()=>le,in:()=>B});const h=[];var B=(()=>{return(G=B||(B={}))[G.DEBUG=0]="DEBUG",G[G.VERBOSE=1]="VERBOSE",G[G.INFO=2]="INFO",G[G.WARN=3]="WARN",G[G.ERROR=4]="ERROR",G[G.SILENT=5]="SILENT",B;var G})();const O={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},ee=B.INFO,re={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},de=(G,H,...K)=>{if(H<G.logLevel)return;const $e=(new Date).toISOString(),xe=re[H];if(!xe)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[xe](`[${$e}]  ${G.name}:`,...K)};class le{constructor(H){this.name=H,this._logLevel=ee,this._logHandler=de,this._userLogHandler=null,h.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in B))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?O[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...H),this._logHandler(this,B.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...H),this._logHandler(this,B.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,B.INFO,...H),this._logHandler(this,B.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,B.WARN,...H),this._logHandler(this,B.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...H),this._logHandler(this,B.ERROR,...H)}}function ae(G){h.forEach(H=>{H.setLogLevel(G)})}function fe(G,H){for(const K of h){let $e=null;H&&H.level&&($e=O[H.level]),K.userLogHandler=null===G?null:(xe,De,...et)=>{const ye=et.map(ce=>{if(null==ce)return null;if("string"==typeof ce)return ce;if("number"==typeof ce||"boolean"==typeof ce)return ce.toString();if(ce instanceof Error)return ce.message;try{return JSON.stringify(ce)}catch{return null}}).filter(ce=>ce).join(" ");De>=($e??xe.logLevel)&&G({level:B[De].toLowerCase(),message:ye,args:et,type:xe.name})}}}},259:(pt,Te,k)=>{k.d(Te,{C6:()=>h.getApps,KN:()=>h.registerVersion,Mq:()=>h.getApp,ZF:()=>h.initializeApp});var h=k(9681);(0,h.registerVersion)("firebase","9.17.1","app")},9260:(pt,Te,k)=>{k.d(Te,{Z:()=>h.Z});var h=k(3942);h.Z.registerVersion("firebase","9.17.1","app-compat")},9568:(pt,Te,k)=>{k.r(Te);var h=k(5861),B=k(3942),O=k(2722),ee=k(2090),le=(k(9681),k(1877),k(4859));function ae(){return window}function H(){return(H=(0,h.Z)(function*(V,x,L){var Y;const{BuildInfo:ke}=ae();(0,O.ap)(x.sessionId,"AuthEvent did not contain a session ID");const it=yield ce(x.sessionId),ut={};return(0,O.aq)()?ut.ibi=ke.packageName:(0,O.ar)()?ut.apn=ke.packageName:(0,O.as)(V,"operation-not-supported-in-this-environment"),ke.displayName&&(ut.appDisplayName=ke.displayName),ut.sessionId=it,(0,O.at)(V,L,x.type,void 0,null!==(Y=x.eventId)&&void 0!==Y?Y:void 0,ut)})).apply(this,arguments)}function $e(){return($e=(0,h.Z)(function*(V){const{BuildInfo:x}=ae(),L={};(0,O.aq)()?L.iosBundleId=x.packageName:(0,O.ar)()?L.androidPackageName=x.packageName:(0,O.as)(V,"operation-not-supported-in-this-environment"),yield(0,O.au)(V,L)})).apply(this,arguments)}function et(){return(et=(0,h.Z)(function*(V,x,L){const{cordova:Y}=ae();let ke=()=>{};try{yield new Promise((it,ut)=>{let be=null;function Le(){var Ft;it();const fn=null===(Ft=Y.plugins.browsertab)||void 0===Ft?void 0:Ft.close;"function"==typeof fn&&fn(),"function"==typeof L?.close&&L.close()}function Ot(){be||(be=window.setTimeout(()=>{ut((0,O.aw)(V,"redirect-cancelled-by-user"))},2e3))}function hn(){"visible"===document?.visibilityState&&Ot()}x.addPassiveListener(Le),document.addEventListener("resume",Ot,!1),(0,O.ar)()&&document.addEventListener("visibilitychange",hn,!1),ke=()=>{x.removePassiveListener(Le),document.removeEventListener("resume",Ot,!1),document.removeEventListener("visibilitychange",hn,!1),be&&window.clearTimeout(be)}})}finally{ke()}})).apply(this,arguments)}function ce(V){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,h.Z)(function*(V){const x=Xe(V),L=yield crypto.subtle.digest("SHA-256",x);return Array.from(new Uint8Array(L)).map(ke=>ke.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Xe(V){if((0,O.ap)(/[0-9a-zA-Z]+/.test(V),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(V);const x=new ArrayBuffer(V.length),L=new Uint8Array(x);for(let Y=0;Y<V.length;Y++)L[Y]=V.charCodeAt(Y);return L}class Se extends O.ay{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(x=>{this.resolveInialized=x})}addPassiveListener(x){this.passiveListeners.add(x)}removePassiveListener(x){this.passiveListeners.delete(x)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(x){return this.resolveInialized(),this.passiveListeners.forEach(L=>L(x)),super.onEvent(x)}initialized(){var x=this;return(0,h.Z)(function*(){yield x.initPromise})()}}function X(V){return se.apply(this,arguments)}function se(){return(se=(0,h.Z)(function*(V){const x=yield We()._get(St(V));return x&&(yield We()._remove(St(V))),x})).apply(this,arguments)}function Ge(){const V=[],x="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let L=0;L<20;L++){const Y=Math.floor(Math.random()*x.length);V.push(x.charAt(Y))}return V.join("")}function We(){return(0,O.az)(O.b)}function St(V){return(0,O.aA)("authEvent",V.config.apiKey,V.name)}function he(V){if(!V?.includes("?"))return{};const[x,...L]=V.split("?");return(0,ee.zd)(L.join("?"))}function Ee(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,O.aw)("no-auth-event")}}function wt(){var V;return(null===(V=self?.location)||void 0===V?void 0:V.protocol)||null}function Jt(V=(0,ee.z$)()){return!("file:"!==wt()&&"ionic:"!==wt()&&"capacitor:"!==wt()||!V.toLowerCase().match(/iphone|ipad|ipod|android/))}function Rr(){try{const V=self.localStorage,x=O.aI();if(V)return V.setItem(x,"1"),V.removeItem(x),!function yr(V=(0,ee.z$)()){return function Mn(){return(0,ee.w1)()&&11===document?.documentMode}()||function sn(V=(0,ee.z$)()){return/Edge\/\d+/.test(V)}(V)}()||(0,ee.hl)()}catch{return Br()&&(0,ee.hl)()}return!1}function Br(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wn(){return(function gt(){return"http:"===wt()||"https:"===wt()}()||(0,ee.ru)()||Jt())&&!function Ln(){return(0,ee.b$)()||(0,ee.UG)()}()&&Rr()&&!Br()}function vi(){return Jt()&&typeof document<"u"}function Je(){return(Je=(0,h.Z)(function*(){return!!vi()&&new Promise(V=>{const x=setTimeout(()=>{V(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(x),V(!0)})})})).apply(this,arguments)}const zn={LOCAL:"local",NONE:"none",SESSION:"session"},_n=O.ax,_r="persistence";function wn(V){return En.apply(this,arguments)}function En(){return(En=(0,h.Z)(function*(V){yield V._initializationPromise;const x=mt(),L=O.aA(_r,V.config.apiKey,V.name);x&&x.setItem(L,V._getPersistence())})).apply(this,arguments)}function mt(){var V;try{return(null===(V=function Yn(){return typeof window<"u"?window:null}())||void 0===V?void 0:V.sessionStorage)||null}catch{return null}}const yt=O.ax;class Nt{constructor(){this.browserResolver=O.az(O.k),this.cordovaResolver=O.az(class Ne{constructor(){this._redirectPersistence=O.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(x){var L=this;return(0,h.Z)(function*(){const Y=x._key();let ke=L.eventManagers.get(Y);return ke||(ke=new Se(x),L.eventManagers.set(Y,ke),L.attachCallbackListeners(x,ke)),ke})()}_openPopup(x){(0,O.as)(x,"operation-not-supported-in-this-environment")}_openRedirect(x,L,Y,ke){var it=this;return(0,h.Z)(function*(){!function ye(V){var x,L,Y,ke,it,ut,be,Le,Ot,hn;const Ft=ae();(0,O.ax)("function"==typeof(null===(x=Ft?.universalLinks)||void 0===x?void 0:x.subscribe),V,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,O.ax)(typeof(null===(L=Ft?.BuildInfo)||void 0===L?void 0:L.packageName)<"u",V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,O.ax)("function"==typeof(null===(it=null===(ke=null===(Y=Ft?.cordova)||void 0===Y?void 0:Y.plugins)||void 0===ke?void 0:ke.browsertab)||void 0===it?void 0:it.openUrl),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(Le=null===(be=null===(ut=Ft?.cordova)||void 0===ut?void 0:ut.plugins)||void 0===be?void 0:be.browsertab)||void 0===Le?void 0:Le.isAvailable),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,O.ax)("function"==typeof(null===(hn=null===(Ot=Ft?.cordova)||void 0===Ot?void 0:Ot.InAppBrowser)||void 0===hn?void 0:hn.open),V,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(x);const ut=yield it._initialize(x);yield ut.initialized(),ut.resetRedirect(),(0,O.aD)(),yield it._originValidation(x);const be=function we(V,x,L=null){return{type:x,eventId:L,urlResponse:null,sessionId:Ge(),postBody:null,tenantId:V.tenantId,error:(0,O.aw)(V,"no-auth-event")}}(x,Y,ke);yield function je(V,x){return We()._set(St(V),x)}(x,be);const Le=yield function G(V,x,L){return H.apply(this,arguments)}(x,be,L),Ot=yield function xe(V){const{cordova:x}=ae();return new Promise(L=>{x.plugins.browsertab.isAvailable(Y=>{let ke=null;Y?x.plugins.browsertab.openUrl(V):ke=x.InAppBrowser.open(V,(0,O.av)()?"_blank":"_system","location=yes"),L(ke)})})}(Le);return function De(V,x,L){return et.apply(this,arguments)}(x,ut,Ot)})()}_isIframeWebStorageSupported(x,L){throw new Error("Method not implemented.")}_originValidation(x){const L=x._key();return this.originValidationPromises[L]||(this.originValidationPromises[L]=function K(V){return $e.apply(this,arguments)}(x)),this.originValidationPromises[L]}attachCallbackListeners(x,L){const{universalLinks:Y,handleOpenURL:ke,BuildInfo:it}=ae(),ut=setTimeout((0,h.Z)(function*(){yield X(x),L.onEvent(Ee())}),500),be=function(){var hn=(0,h.Z)(function*(Ft){clearTimeout(ut);const fn=yield X(x);let $i=null;fn&&Ft?.url&&($i=function pe(V,x){var L,Y;const ke=function ie(V){const x=he(V),L=x.link?decodeURIComponent(x.link):void 0,Y=he(L).link,ke=x.deep_link_id?decodeURIComponent(x.deep_link_id):void 0;return he(ke).link||ke||Y||L||V}(x);if(ke.includes("/__/auth/callback")){const it=he(ke),ut=it.firebaseError?function Qe(V){try{return JSON.parse(V)}catch{return null}}(decodeURIComponent(it.firebaseError)):null,be=null===(Y=null===(L=ut?.code)||void 0===L?void 0:L.split("auth/"))||void 0===Y?void 0:Y[1],Le=be?(0,O.aw)(be):null;return Le?{type:V.type,eventId:V.eventId,tenantId:V.tenantId,error:Le,urlResponse:null,sessionId:null,postBody:null}:{type:V.type,eventId:V.eventId,tenantId:V.tenantId,sessionId:V.sessionId,urlResponse:ke,postBody:null}}return null}(fn,Ft.url)),L.onEvent($i||Ee())});return function(fn){return hn.apply(this,arguments)}}();typeof Y<"u"&&"function"==typeof Y.subscribe&&Y.subscribe(null,be);const Le=ke,Ot=`${it.packageName.toLowerCase()}://`;ae().handleOpenURL=function(){var hn=(0,h.Z)(function*(Ft){if(Ft.toLowerCase().startsWith(Ot)&&be({url:Ft}),"function"==typeof Le)try{Le(Ft)}catch(fn){console.error(fn)}});return function(Ft){return hn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=O.a,this._completeRedirectFn=O.aB,this._overrideRedirectResult=O.aC}_initialize(x){var L=this;return(0,h.Z)(function*(){return yield L.selectUnderlyingResolver(),L.assertedUnderlyingResolver._initialize(x)})()}_openPopup(x,L,Y,ke){var it=this;return(0,h.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openPopup(x,L,Y,ke)})()}_openRedirect(x,L,Y,ke){var it=this;return(0,h.Z)(function*(){return yield it.selectUnderlyingResolver(),it.assertedUnderlyingResolver._openRedirect(x,L,Y,ke)})()}_isIframeWebStorageSupported(x,L){this.assertedUnderlyingResolver._isIframeWebStorageSupported(x,L)}_originValidation(x){return this.assertedUnderlyingResolver._originValidation(x)}get _shouldInitProactively(){return vi()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return yt(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var x=this;return(0,h.Z)(function*(){if(x.underlyingResolver)return;const L=yield function Bi(){return Je.apply(this,arguments)}();x.underlyingResolver=L?x.cordovaResolver:x.browserResolver})()}}function Wr(V){return V.unwrap()}function Nr(V){return $r(V)}function $r(V){const{_tokenResponse:x}=V instanceof ee.ZR?V.customData:V;if(!x)return null;if(!(V instanceof ee.ZR)&&"temporaryProof"in x&&"phoneNumber"in x)return O.P.credentialFromResult(V);const L=x.providerId;if(!L||L===O.o.PASSWORD)return null;let Y;switch(L){case O.o.GOOGLE:Y=O.Q;break;case O.o.FACEBOOK:Y=O.N;break;case O.o.GITHUB:Y=O.T;break;case O.o.TWITTER:Y=O.W;break;default:const{oauthIdToken:ke,oauthAccessToken:it,oauthTokenSecret:ut,pendingToken:be,nonce:Le}=x;return it||ut||ke||be?be?L.startsWith("saml.")?O.aL._create(L,be):O.J._fromParams({providerId:L,signInMethod:L,pendingToken:be,idToken:ke,accessToken:it}):new O.U(L).credential({idToken:ke,accessToken:it,rawNonce:Le}):null}return V instanceof ee.ZR?Y.credentialFromError(V):Y.credentialFromResult(V)}function Lt(V,x){return x.catch(L=>{throw L instanceof ee.ZR&&function Mt(V,x){var L;const Y=null===(L=x.customData)||void 0===L?void 0:L._tokenResponse;if("auth/multi-factor-auth-required"===x?.code)x.resolver=new hr(V,O.an(V,x));else if(Y){const ke=$r(x),it=x;ke&&(it.credential=ke,it.tenantId=Y.tenantId||void 0,it.email=Y.email||void 0,it.phoneNumber=Y.phoneNumber||void 0)}}(V,L),L}).then(L=>{const ke=L.user;return{operationType:L.operationType,credential:Nr(L),additionalUserInfo:O.al(L),user:Tn.getOrCreate(ke)}})}function ii(V,x){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,h.Z)(function*(V,x){const L=yield x;return{verificationId:L.verificationId,confirm:Y=>Lt(V,L.confirm(Y))}})).apply(this,arguments)}class hr{constructor(x,L){this.resolver=L,this.auth=function Qn(V){return V.wrapped()}(x)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(x){return Lt(Wr(this.auth),this.resolver.resolveSignIn(x))}}class Tn{constructor(x){this._delegate=x,this.multiFactor=O.ao(x)}static getOrCreate(x){return Tn.USER_MAP.has(x)||Tn.USER_MAP.set(x,new Tn(x)),Tn.USER_MAP.get(x)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(x){return this._delegate.getIdTokenResult(x)}getIdToken(x){return this._delegate.getIdToken(x)}linkAndRetrieveDataWithCredential(x){return this.linkWithCredential(x)}linkWithCredential(x){var L=this;return(0,h.Z)(function*(){return Lt(L.auth,O.Z(L._delegate,x))})()}linkWithPhoneNumber(x,L){var Y=this;return(0,h.Z)(function*(){return ii(Y.auth,O.l(Y._delegate,x,L))})()}linkWithPopup(x){var L=this;return(0,h.Z)(function*(){return Lt(L.auth,O.d(L._delegate,x,Nt))})()}linkWithRedirect(x){var L=this;return(0,h.Z)(function*(){return yield wn(O.aE(L.auth)),O.g(L._delegate,x,Nt)})()}reauthenticateAndRetrieveDataWithCredential(x){return this.reauthenticateWithCredential(x)}reauthenticateWithCredential(x){var L=this;return(0,h.Z)(function*(){return Lt(L.auth,O._(L._delegate,x))})()}reauthenticateWithPhoneNumber(x,L){return ii(this.auth,O.r(this._delegate,x,L))}reauthenticateWithPopup(x){return Lt(this.auth,O.e(this._delegate,x,Nt))}reauthenticateWithRedirect(x){var L=this;return(0,h.Z)(function*(){return yield wn(O.aE(L.auth)),O.h(L._delegate,x,Nt)})()}sendEmailVerification(x){return O.ab(this._delegate,x)}unlink(x){var L=this;return(0,h.Z)(function*(){return yield O.ak(L._delegate,x),L})()}updateEmail(x){return O.ag(this._delegate,x)}updatePassword(x){return O.ah(this._delegate,x)}updatePhoneNumber(x){return O.u(this._delegate,x)}updateProfile(x){return O.af(this._delegate,x)}verifyBeforeUpdateEmail(x,L){return O.ac(this._delegate,x,L)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Tn.USER_MAP=new WeakMap;const tt=O.ax;let Ce=(()=>{class V{constructor(L,Y){if(this.app=L,Y.isInitialized())return this._delegate=Y.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:ke}=L.options;tt(ke,"invalid-api-key",{appName:L.name}),tt(ke,"invalid-api-key",{appName:L.name});const it=typeof window<"u"?Nt:void 0;this._delegate=Y.initialize({options:{persistence:Ct(ke,L.name),popupRedirectResolver:it}}),this._delegate._updateErrorMap(O.B),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Tn.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(L){this._delegate.languageCode=L}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(L){this._delegate.tenantId=L}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(L,Y){O.G(this._delegate,L,Y)}applyActionCode(L){return O.a2(this._delegate,L)}checkActionCode(L){return O.a3(this._delegate,L)}confirmPasswordReset(L,Y){return O.a1(this._delegate,L,Y)}createUserWithEmailAndPassword(L,Y){var ke=this;return(0,h.Z)(function*(){return Lt(ke._delegate,O.a5(ke._delegate,L,Y))})()}fetchProvidersForEmail(L){return this.fetchSignInMethodsForEmail(L)}fetchSignInMethodsForEmail(L){return O.aa(this._delegate,L)}isSignInWithEmailLink(L){return O.a8(this._delegate,L)}getRedirectResult(){var L=this;return(0,h.Z)(function*(){tt(Wn(),L._delegate,"operation-not-supported-in-this-environment");const Y=yield O.j(L._delegate,Nt);return Y?Lt(L._delegate,Promise.resolve(Y)):{credential:null,user:null}})()}addFrameworkForLogging(L){!function ht(V,x){(0,O.aE)(V)._logFramework(x)}(this._delegate,L)}onAuthStateChanged(L,Y,ke){const{next:it,error:ut,complete:be}=nt(L,Y,ke);return this._delegate.onAuthStateChanged(it,ut,be)}onIdTokenChanged(L,Y,ke){const{next:it,error:ut,complete:be}=nt(L,Y,ke);return this._delegate.onIdTokenChanged(it,ut,be)}sendSignInLinkToEmail(L,Y){return O.a7(this._delegate,L,Y)}sendPasswordResetEmail(L,Y){return O.a0(this._delegate,L,Y||void 0)}setPersistence(L){var Y=this;return(0,h.Z)(function*(){let ke;switch(function Es(V,x){_n(Object.values(zn).includes(x),V,"invalid-persistence-type"),(0,ee.b$)()?_n(x!==zn.SESSION,V,"unsupported-persistence-type"):(0,ee.UG)()?_n(x===zn.NONE,V,"unsupported-persistence-type"):Br()?_n(x===zn.NONE||x===zn.LOCAL&&(0,ee.hl)(),V,"unsupported-persistence-type"):_n(x===zn.NONE||Rr(),V,"unsupported-persistence-type")}(Y._delegate,L),L){case zn.SESSION:ke=O.a;break;case zn.LOCAL:ke=(yield O.az(O.i)._isAvailable())?O.i:O.b;break;case zn.NONE:ke=O.L;break;default:return O.as("argument-error",{appName:Y._delegate.name})}return Y._delegate.setPersistence(ke)})()}signInAndRetrieveDataWithCredential(L){return this.signInWithCredential(L)}signInAnonymously(){return Lt(this._delegate,O.X(this._delegate))}signInWithCredential(L){return Lt(this._delegate,O.Y(this._delegate,L))}signInWithCustomToken(L){return Lt(this._delegate,O.$(this._delegate,L))}signInWithEmailAndPassword(L,Y){return Lt(this._delegate,O.a6(this._delegate,L,Y))}signInWithEmailLink(L,Y){return Lt(this._delegate,O.a9(this._delegate,L,Y))}signInWithPhoneNumber(L,Y){return ii(this._delegate,O.s(this._delegate,L,Y))}signInWithPopup(L){var Y=this;return(0,h.Z)(function*(){return tt(Wn(),Y._delegate,"operation-not-supported-in-this-environment"),Lt(Y._delegate,O.c(Y._delegate,L,Nt))})()}signInWithRedirect(L){var Y=this;return(0,h.Z)(function*(){return tt(Wn(),Y._delegate,"operation-not-supported-in-this-environment"),yield wn(Y._delegate),O.f(Y._delegate,L,Nt)})()}updateCurrentUser(L){return this._delegate.updateCurrentUser(L)}verifyPasswordResetCode(L){return O.a4(this._delegate,L)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return V.Persistence=zn,V})();function nt(V,x,L){let Y=V;"function"!=typeof V&&({next:Y,error:x,complete:L}=V);const ke=Y;return{next:ut=>ke(ut&&Tn.getOrCreate(ut)),error:x,complete:L}}function Ct(V,x){const L=function gn(V,x){const L=mt();if(!L)return[];const Y=O.aA(_r,V,x);switch(L.getItem(Y)){case zn.NONE:return[O.L];case zn.LOCAL:return[O.i,O.a];case zn.SESSION:return[O.a];default:return[]}}(V,x);if(typeof self<"u"&&!L.includes(O.i)&&L.push(O.i),typeof window<"u")for(const Y of[O.b,O.a])L.includes(Y)||L.push(Y);return L.includes(O.L)||L.push(O.L),L}class xt{constructor(){this.providerId="phone",this._delegate=new O.P(Wr(B.Z.auth()))}static credential(x,L){return O.P.credential(x,L)}verifyPhoneNumber(x,L){return this._delegate.verifyPhoneNumber(x,L)}unwrap(){return this._delegate}}xt.PHONE_SIGN_IN_METHOD=O.P.PHONE_SIGN_IN_METHOD,xt.PROVIDER_ID=O.P.PROVIDER_ID;const en=O.ax;class j{constructor(x,L,Y=B.Z.app()){var ke;en(null===(ke=Y.options)||void 0===ke?void 0:ke.apiKey,"invalid-api-key",{appName:Y.name}),this._delegate=new O.R(x,L,Y.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function q(V){V.INTERNAL.registerComponent(new le.wA("auth-compat",x=>{const L=x.getProvider("app-compat").getImmediate(),Y=x.getProvider("auth");return new Ce(L,Y)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:O.A.EMAIL_SIGNIN,PASSWORD_RESET:O.A.PASSWORD_RESET,RECOVER_EMAIL:O.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:O.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:O.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:O.A.VERIFY_EMAIL}},EmailAuthProvider:O.M,FacebookAuthProvider:O.N,GithubAuthProvider:O.T,GoogleAuthProvider:O.Q,OAuthProvider:O.U,SAMLAuthProvider:O.V,PhoneAuthProvider:xt,PhoneMultiFactorGenerator:O.m,RecaptchaVerifier:j,TwitterAuthProvider:O.W,Auth:Ce,AuthCredential:O.H,Error:ee.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),V.registerVersion("@firebase/auth-compat","0.3.3")}(B.Z)},8766:(pt,Te,k)=>{k.d(Te,{Lj:()=>Ae,X3:()=>Xe});var h=k(5861);let O,ee;const le=new WeakMap,ae=new WeakMap,fe=new WeakMap,G=new WeakMap,H=new WeakMap;let xe={get(se,pe,Ge){if(se instanceof IDBTransaction){if("done"===pe)return ae.get(se);if("objectStoreNames"===pe)return se.objectStoreNames||fe.get(se);if("store"===pe)return Ge.objectStoreNames[1]?void 0:Ge.objectStore(Ge.objectStoreNames[0])}return ce(se[pe])},set:(se,pe,Ge)=>(se[pe]=Ge,!0),has:(se,pe)=>se instanceof IDBTransaction&&("done"===pe||"store"===pe)||pe in se};function ye(se){return"function"==typeof se?function et(se){return se!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function de(){return ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(se)?function(...pe){return se.apply(Ye(this),pe),ce(le.get(this))}:function(...pe){return ce(se.apply(Ye(this),pe))}:function(pe,...Ge){const We=se.call(Ye(this),pe,...Ge);return fe.set(We,pe.sort?pe.sort():[pe]),ce(We)}}(se):(se instanceof IDBTransaction&&function $e(se){if(ae.has(se))return;const pe=new Promise((Ge,We)=>{const St=()=>{se.removeEventListener("complete",Qe),se.removeEventListener("error",ie),se.removeEventListener("abort",ie)},Qe=()=>{Ge(),St()},ie=()=>{We(se.error||new DOMException("AbortError","AbortError")),St()};se.addEventListener("complete",Qe),se.addEventListener("error",ie),se.addEventListener("abort",ie)});ae.set(se,pe)}(se),((se,pe)=>pe.some(Ge=>se instanceof Ge))(se,function re(){return O||(O=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(se,xe):se)}function ce(se){if(se instanceof IDBRequest)return function K(se){const pe=new Promise((Ge,We)=>{const St=()=>{se.removeEventListener("success",Qe),se.removeEventListener("error",ie)},Qe=()=>{Ge(ce(se.result)),St()},ie=()=>{We(se.error),St()};se.addEventListener("success",Qe),se.addEventListener("error",ie)});return pe.then(Ge=>{Ge instanceof IDBCursor&&le.set(Ge,se)}).catch(()=>{}),H.set(pe,se),pe}(se);if(G.has(se))return G.get(se);const pe=ye(se);return pe!==se&&(G.set(se,pe),H.set(pe,se)),pe}const Ye=se=>H.get(se);function Xe(se,pe,{blocked:Ge,upgrade:We,blocking:St,terminated:Qe}={}){const ie=indexedDB.open(se,pe),he=ce(ie);return We&&ie.addEventListener("upgradeneeded",ve=>{We(ce(ie.result),ve.oldVersion,ve.newVersion,ce(ie.transaction))}),Ge&&ie.addEventListener("blocked",()=>Ge()),he.then(ve=>{Qe&&ve.addEventListener("close",()=>Qe()),St&&ve.addEventListener("versionchange",()=>St())}).catch(()=>{}),he}function Ae(se,{blocked:pe}={}){const Ge=indexedDB.deleteDatabase(se);return pe&&Ge.addEventListener("blocked",()=>pe()),ce(Ge).then(()=>{})}const Se=["get","getKey","getAll","getAllKeys","count"],we=["put","add","delete","clear"],je=new Map;function X(se,pe){if(!(se instanceof IDBDatabase)||pe in se||"string"!=typeof pe)return;if(je.get(pe))return je.get(pe);const Ge=pe.replace(/FromIndex$/,""),We=pe!==Ge,St=we.includes(Ge);if(!(Ge in(We?IDBIndex:IDBObjectStore).prototype)||!St&&!Se.includes(Ge))return;const Qe=function(){var ie=(0,h.Z)(function*(he,...ve){const Ne=this.transaction(he,St?"readwrite":"readonly");let Pe=Ne.store;return We&&(Pe=Pe.index(ve.shift())),(yield Promise.all([Pe[Ge](...ve),St&&Ne.done]))[0]});return function(ve){return ie.apply(this,arguments)}}();return je.set(pe,Qe),Qe}!function De(se){xe=se(xe)}(se=>({...se,get:(pe,Ge,We)=>X(pe,Ge)||se.get(pe,Ge,We),has:(pe,Ge)=>!!X(pe,Ge)||se.has(pe,Ge)}))},5861:(pt,Te,k)=>{function h(O,ee,re,de,le,ae,fe){try{var G=O[ae](fe),H=G.value}catch(K){return void re(K)}G.done?ee(H):Promise.resolve(H).then(de,le)}function B(O){return function(){var ee=this,re=arguments;return new Promise(function(de,le){var ae=O.apply(ee,re);function fe(H){h(ae,de,le,fe,G,"next",H)}function G(H){h(ae,de,le,fe,G,"throw",H)}fe(void 0)})}}k.d(Te,{Z:()=>B})}},pt=>{pt(pt.s=4727)}]);